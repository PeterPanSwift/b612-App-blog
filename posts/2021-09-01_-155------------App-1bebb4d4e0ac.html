<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>#155 開發每天都會用的公車 App</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">#155 開發每天都會用的公車 App</h1>
</header>
<section data-field="subtitle" class="p-summary">
功能需求
</section>
<section data-field="body" class="e-content">
<section name="fcca" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2043" id="2043" class="graf graf--h3 graf--leading graf--title">#155 開發每天都會用的公車 App</h3><figure name="24bc" id="24bc" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*kcxf7qQYOW1pgEHhmPEtVg.png" data-width="1388" data-height="1016" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*kcxf7qQYOW1pgEHhmPEtVg.png"></figure><h3 name="966a" id="966a" class="graf graf--h3 graf-after--figure">功能需求</h3><p name="f109" id="f109" class="graf graf--p graf-after--h3">串接 TDX 的四個 API，開發公車 App 常見的三大功能。</p><ul class="postList"><li name="9b55" id="9b55" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">查詢公車停靠的站牌順序</strong></li><li name="12de" id="12de" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">查詢公車的起站 &amp; 終點站名稱</strong></li><li name="7b92" id="7b92" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">查詢公車的到站時間</strong></li></ul><h3 name="d8c4" id="d8c4" class="graf graf--h3 graf-after--li">公車 API 的說明文件</h3><p name="1b63" id="1b63" class="graf graf--p graf-after--h3">連到 TDX，查詢公車 API 的說明文件。</p><div name="a70f" id="a70f" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://tdx.transportdata.tw/" data-href="https://tdx.transportdata.tw/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://tdx.transportdata.tw/"><strong class="markup--strong markup--mixtapeEmbed-strong">TDX</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>tdx.transportdata.tw</a><a href="https://tdx.transportdata.tw/" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="5180bedde0a3026bfba82928b0732446"></a></div><figure name="2ee9" id="2ee9" class="graf graf--figure graf-after--mixtapeEmbed"><img class="graf-image" data-image-id="1*tap9v79UxN6q6K2dy5EUiQ.png" data-width="350" data-height="752" src="https://cdn-images-1.medium.com/max/800/1*tap9v79UxN6q6K2dy5EUiQ.png"></figure><figure name="55fd" id="55fd" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*c6NuHh2gpdLM6S_G3aEIPw.png" data-width="1082" data-height="1276" src="https://cdn-images-1.medium.com/max/800/1*c6NuHh2gpdLM6S_G3aEIPw.png"></figure><h3 name="4fd4" id="4fd4" class="graf graf--h3 graf-after--figure">從網頁測試 API &amp; 以 Swift 串接 TDX<strong class="markup--strong markup--h3-strong"> </strong>API</h3><div name="7b12" id="7b12" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E5%A6%82%E4%BD%95%E4%BB%A5-swift-%E4%B8%B2%E6%8E%A5-ptx-%E7%9A%84%E5%85%AC%E8%BB%8A-%E8%87%BA%E9%90%B5-%E9%AB%98%E9%90%B5-api-fa207c3c242c" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E5%A6%82%E4%BD%95%E4%BB%A5-swift-%E4%B8%B2%E6%8E%A5-ptx-%E7%9A%84%E5%85%AC%E8%BB%8A-%E8%87%BA%E9%90%B5-%E9%AB%98%E9%90%B5-api-fa207c3c242c" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E5%A6%82%E4%BD%95%E4%BB%A5-swift-%E4%B8%B2%E6%8E%A5-ptx-%E7%9A%84%E5%85%AC%E8%BB%8A-%E8%87%BA%E9%90%B5-%E9%AB%98%E9%90%B5-api-fa207c3c242c"><strong class="markup--strong markup--mixtapeEmbed-strong">如何以 Swift 串接 PTX 的公車、臺鐵、高鐵，捷運 API</strong><br><em class="markup--em markup--mixtapeEmbed-em">公共運輸整合資訊流通服務平臺(PTX)提供了豐富的 API，方便我們存取公車，捷運，高鐵，台鐵等各類交通資訊。接下來就讓我們以高鐵為例，示範如何以 Swift 串接它的 API 吧。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E5%A6%82%E4%BD%95%E4%BB%A5-swift-%E4%B8%B2%E6%8E%A5-ptx-%E7%9A%84%E5%85%AC%E8%BB%8A-%E8%87%BA%E9%90%B5-%E9%AB%98%E9%90%B5-api-fa207c3c242c" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="e9c2fbf69c61e2f6b0824a80c32cfb07" data-thumbnail-img-id="1*OuPYMMySZBkP6dOTrB1Tfw.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*OuPYMMySZBkP6dOTrB1Tfw.jpeg);"></a></div><h3 name="582c" id="582c" class="graf graf--h3 graf-after--mixtapeEmbed">查詢公車停靠的站牌順序</h3><p name="9f3d" id="9f3d" class="graf graf--p graf-after--h3">範例畫面</p><ul class="postList"><li name="caaa" id="caaa" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">台北等公車 App</strong></li></ul><figure name="e193" id="e193" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*mM-O_zRLqUZwTlhrH7SE5A.png" data-width="1125" data-height="2436" src="https://cdn-images-1.medium.com/max/800/1*mM-O_zRLqUZwTlhrH7SE5A.png"></figure><ul class="postList"><li name="6947" id="6947" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">SwiftUI App 串接 API 顯示的表格頁面</strong></li></ul><figure name="3f84" id="3f84" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*X_m8qUT7hQGZDl7SujNX-g.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/800/1*X_m8qUT7hQGZDl7SujNX-g.png"></figure><p name="9414" id="9414" class="graf graf--p graf-after--figure">API 網址</p><figure name="55f9" id="55f9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*mnGYETSqfHOYGGbeaaP22A.png" data-width="1034" data-height="154" src="https://cdn-images-1.medium.com/max/800/1*mnGYETSqfHOYGGbeaaP22A.png"></figure><p name="b5e0" id="b5e0" class="graf graf--p graf-after--figure">範例: 查詢台北 202 公車的站牌順序。</p><pre name="27cc" id="27cc" class="graf graf--pre graf-after--p"><a href="https://tdx.transportdata.tw/api/basic/v2/Bus/StopOfRoute/City/Taipei/202?$format=JSON" data-href="https://tdx.transportdata.tw/api/basic/v2/Bus/StopOfRoute/City/Taipei/202?$format=JSON" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://tdx.transportdata.tw/api/basic/v2/Bus/StopOfRoute/City/Taipei/202?$format=JSON</a></pre><p name="1717" id="1717" class="graf graf--p graf-after--pre">回傳的 JSON 是 BusStopOfRoute 的 array，RouteName 是公車名稱，Direction 是公車的方向，數字 0 是去程，數字 1 是返程。</p><figure name="0266" id="0266" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*agSggs1I1Bi5WBoB1lWX-A.png" data-width="828" data-height="940" src="https://cdn-images-1.medium.com/max/800/1*agSggs1I1Bi5WBoB1lWX-A.png"></figure><p name="f7fc" id="f7fc" class="graf graf--p graf-after--figure">BusStopOfRoute 的 Stops 是 Stop 的 array，此 array 是站牌的 array，依站牌順序(StopSequence)排列。</p><figure name="3544" id="3544" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Alfalh7qDlIROBN_A92BPQ.png" data-width="842" data-height="950" src="https://cdn-images-1.medium.com/max/800/1*Alfalh7qDlIROBN_A92BPQ.png"></figure><h3 name="3014" id="3014" class="graf graf--h3 graf-after--figure">查詢公車的到站時間</h3><p name="c2b6" id="c2b6" class="graf graf--p graf-after--h3">範例畫面</p><ul class="postList"><li name="c594" id="c594" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">台北等公車 App</strong></li></ul><figure name="3885" id="3885" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*mM-O_zRLqUZwTlhrH7SE5A.png" data-width="1125" data-height="2436" src="https://cdn-images-1.medium.com/max/800/1*mM-O_zRLqUZwTlhrH7SE5A.png"></figure><ul class="postList"><li name="c0a6" id="c0a6" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">SwiftUI App 串接 API 顯示的表格頁面</strong></li></ul><figure name="f36e" id="f36e" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*VApFNL_zFl0D7ZZFIHJ89A.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/800/1*VApFNL_zFl0D7ZZFIHJ89A.png"></figure><p name="1c89" id="1c89" class="graf graf--p graf-after--figure">API 網址</p><figure name="a6c8" id="a6c8" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HXb0k7-rvPMj0WueLi2yjg.png" data-width="1354" data-height="302" src="https://cdn-images-1.medium.com/max/800/1*HXb0k7-rvPMj0WueLi2yjg.png"></figure><p name="ff23" id="ff23" class="graf graf--p graf-after--figure">範例: 查詢台北公車 202 的到站時間</p><pre name="48e9" id="48e9" class="graf graf--pre graf-after--p"><a href="https://tdx.transportdata.tw/api/basic/v2/Bus/EstimatedTimeOfArrival/City/Taipei/202?$format=JSON" data-href="https://tdx.transportdata.tw/api/basic/v2/Bus/EstimatedTimeOfArrival/City/Taipei/202?$format=JSON" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://tdx.transportdata.tw/api/basic/v2/Bus/EstimatedTimeOfArrival/City/Taipei/202?$format=JSON</a></pre><p name="aa4d" id="aa4d" class="graf graf--p graf-after--pre">回傳的 JSON 是 BusN1EstimateTime 的 array，每個 BusN1EstimateTime 裡有站牌的名稱(StopName)，從 Estimates 欄位可取得預估到站的秒數。(ps: 有的公車會提供 NextBusTime &amp; StopSequence，若是沒有 StopSequence，則要搭配之前站牌順序的 API。)值得注意的， array 裡的資料可能會有一樣的站牌名稱，因此要依據站牌名(StopName)，公車名(RouteName) &amp; 方向(Direction)做區分。</p><figure name="b14b" id="b14b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*KOFmf9E8bbH3njXi5P2azw.png" data-width="1168" data-height="1018" src="https://cdn-images-1.medium.com/max/800/1*KOFmf9E8bbH3njXi5P2azw.png"></figure><h3 name="c686" id="c686" class="graf graf--h3 graf-after--figure">查詢公車的起站 &amp; 終點站名稱</h3><p name="c761" id="c761" class="graf graf--p graf-after--h3">範例畫面</p><ul class="postList"><li name="589c" id="589c" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">台北等公車 App</strong></li></ul><figure name="a4b5" id="a4b5" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*iz6Ooe7xhpi64R1UvBuYJw.png" data-width="752" data-height="200" src="https://cdn-images-1.medium.com/max/800/1*iz6Ooe7xhpi64R1UvBuYJw.png"></figure><p name="db38" id="db38" class="graf graf--p graf-after--figure">API 網址</p><figure name="c2bc" id="c2bc" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*8vBHcbvittPV-4g772Uh3w.png" data-width="1458" data-height="196" src="https://cdn-images-1.medium.com/max/800/1*8vBHcbvittPV-4g772Uh3w.png"></figure><p name="8a1a" id="8a1a" class="graf graf--p graf-after--figure">範例: 查詢台北公車 202 的起站 &amp; 終點站名稱。</p><pre name="ba5c" id="ba5c" class="graf graf--pre graf-after--p"><a href="https://tdx.transportdata.tw/api/basic/v2/Bus/Route/City/Taipei/202?$format=JSON" data-href="https://tdx.transportdata.tw/api/basic/v2/Bus/Route/City/Taipei/202?$format=JSON" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://tdx.transportdata.tw/api/basic/v2/Bus/Route/City/Taipei/202?$format=JSON</a></pre><p name="4b94" id="4b94" class="graf graf--p graf-after--pre">回傳的 JSON 是 BusRoute 的 array，每個 BusRoute 裡有起站(DepartureStopNameZh) &amp; 終點站名稱(DestinationStopNameZh)。</p><figure name="7c3c" id="7c3c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*xTwEnUnyqPBccGDpBAXxLQ.png" data-width="1222" data-height="458" src="https://cdn-images-1.medium.com/max/800/1*xTwEnUnyqPBccGDpBAXxLQ.png"></figure><p name="e367" id="e367" class="graf graf--p graf-after--figure">剛剛公車站牌順序 API 抓到的資料可以跟這裡抓到的起站 &amp; 終點站名稱對應:</p><ul class="postList"><li name="4838" id="4838" class="graf graf--li graf-after--p">當方向是去程時，公車將從起點站開往終點站。</li><li name="45ca" id="45ca" class="graf graf--li graf-after--li graf--trailing">當方向是返程時，公車將從終點站開往起點站。</li></ul></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/1bebb4d4e0ac"><time class="dt-published" datetime="2021-09-01T13:09:10.148Z">September 1, 2021</time></a>.</p><p><a href="https://medium.com/@apppeterpan/155-%E9%96%8B%E7%99%BC%E6%AF%8F%E5%A4%A9%E9%83%BD%E6%9C%83%E7%94%A8%E7%9A%84%E5%85%AC%E8%BB%8A-app-1bebb4d4e0ac" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>