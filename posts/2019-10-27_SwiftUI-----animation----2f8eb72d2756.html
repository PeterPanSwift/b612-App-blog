<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>SwiftUI 有趣的 animation 動畫</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">SwiftUI 有趣的 animation 動畫</h1>
</header>
<section data-field="subtitle" class="p-summary">
SwiftUI 提供許多方便的 function 讓我們快速實現各種有趣的動畫效果，接下來就讓我們以奔跑吧，Peter 為例說明實現動畫的三種方法。
</section>
<section data-field="body" class="e-content">
<section name="bc26" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="3352" id="3352" class="graf graf--h3 graf--leading graf--title">SwiftUI 有趣的 animation 動畫</h3><p name="9131" id="9131" class="graf graf--p graf-after--h3">透過 SwiftUI，我們可以快速實現 App 的動畫功能，接下來就讓我們以<code class="markup--code markup--p-code">奔跑吧，Peter</code> 為例，說明各種有趣的動畫效果。</p><h3 name="220f" id="220f" class="graf graf--h3 graf-after--p">設計 App 畫面</h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1deb" id="1deb" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> moveDistance: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> opacity: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;奔跑吧，Peter&quot;</span>) {<br />                moveDistance <span class="hljs-operator">+=</span> <span class="hljs-number">100</span><br />                opacity <span class="hljs-operator">-=</span> <span class="hljs-number">0.3</span><br />            }<br />            .font(.title)<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(.peter)<br />                    .offset(x: moveDistance)<br />                    .opacity(opacity)<br />                <span class="hljs-type">Spacer</span>()<br />            }<br />        }<br />        <br />    }<br />}</span></pre><p name="fc08" id="fc08" class="graf graf--p graf-after--pre">當我們點擊 <code class="markup--code markup--p-code">奔跑吧，Peter</code> 時，peter 的圖片將向右移動 100 points，而且因為跑步很累，他將會愈來愈透明。</p><figure name="15e0" id="15e0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*YKrPpcyqE1Y6Efk1GBg_BQ.png" data-width="840" data-height="555" src="https://cdn-images-1.medium.com/max/800/1*YKrPpcyqE1Y6Efk1GBg_BQ.png"></figure><p name="3cb1" id="3cb1" class="graf graf--p graf-after--figure">不過剛剛的 peter 是瞬間移動，這樣太不真實了，讓我們為他加個移動的動畫吧。</p><h3 name="a06b" id="a06b" class="graf graf--h3 graf-after--p">從元件呼叫 function animation 加入動畫</h3><p name="7c25" id="7c25" class="graf graf--p graf-after--h3">我們想要展現動畫的目標是 Image，所以很簡單，我們只要從 Image 呼叫動畫 function animation 即可。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="9fab" id="9fab" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> moveDistance: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> opacity: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;奔跑吧，Peter&quot;</span>) {<br />                moveDistance <span class="hljs-operator">+=</span> <span class="hljs-number">100</span><br />                opacity <span class="hljs-operator">-=</span> <span class="hljs-number">0.3</span><br />            }<br />            .font(.title)<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(.peter)<br />                    .offset(x: moveDistance)<br />                    .opacity(opacity)<br />                    .animation(.default, value: opacity)<br />                    .animation(.default, value: moveDistance)<br />                <span class="hljs-type">Spacer</span>()<br />            }<br />        }<br />        <br />    }<br />}</span></pre><p name="e071" id="e071" class="graf graf--p graf-after--pre">function animation 的宣告如下。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="9bce" id="9bce" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">func</span> <span class="hljs-title function_">animation</span>&lt;<span class="hljs-type">V</span>&gt;(<span class="hljs-keyword">_</span> <span class="hljs-params">animation</span>: <span class="hljs-type">Animation</span>?, <span class="hljs-params">value</span>: <span class="hljs-type">V</span>) -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> <span class="hljs-keyword">where</span> <span class="hljs-type">V</span> : <span class="hljs-type">Equatable</span></span></pre><p name="c416" id="c416" class="graf graf--p graf-after--pre">參數 animation 控制動畫的效果，在此我們傳入 .default 產生預設的動畫效果。value 則代表觸發動畫的內容，當 value 改變時將觸發動畫。在剛剛的程式我們呼叫兩次 animation，value 分別傳入 opacity &amp; moveDistance，因此 opacity &amp; moveDistance 改變時都會觸發動畫，造成點選 button 時圖片以動畫移動和改變透明度。</p><p name="ef0e" id="ef0e" class="graf graf--p graf-after--p">接著讓我們看一個有問題的例子。以下程式將不會產生動畫，因為 animation 的參數 value 傳入 opacity，但是點選 button 時只有改變 moveDistance，並沒有改變 opacity，因此不會觸發動畫。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="2494" id="2494" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> moveDistance: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> opacity: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;奔跑吧，Peter&quot;</span>) {<br />                moveDistance <span class="hljs-operator">+=</span> <span class="hljs-number">100</span><br />            }<br />            .font(.title)<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(<span class="hljs-string">&quot;peter&quot;</span>)<br />                    .offset(x: moveDistance)<br />                    .opacity(opacity)<br />                    .animation(.default, value: opacity)<br />                <span class="hljs-type">Spacer</span>()<br />            }<br />        }<br />    }<br />}</span></pre><h3 name="d96f" id="d96f" class="graf graf--h3 graf-after--pre">指定動畫的速度和效果</h3><p name="98b0" id="98b0" class="graf graf--p graf-after--h3">剛剛的 .default 採用預設的動畫效果，身為創意無限的 iOS App 魔法師，我們常想做一些客製的動畫效果。</p><p name="8e45" id="8e45" class="graf graf--p graf-after--p">想做客製的動畫當然 ok 呀，剛剛從 Image 呼叫 function animation 時，我們可傳入 Animation 型別的東西指定動畫效果。從下圖的自動完成選單，我們看到可選擇的 Animation 超多的。</p><figure name="941c" id="941c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Z14b-rI7op7hO80GLfngzQ.png" data-width="760" data-height="606" src="https://cdn-images-1.medium.com/max/800/1*Z14b-rI7op7hO80GLfngzQ.png"></figure><p name="8878" id="8878" class="graf graf--p graf-after--figure">以下是幾種常見的 Animation 介紹</p><ul class="postList"><li name="d439" id="d439" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">easeOut</strong></li></ul><p name="ed1f" id="ed1f" class="graf graf--p graf-after--li">動畫的速度一開始快，然後愈來愈慢。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="0038" id="0038" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">Image</span>(.peter)<br />    .offset(x: moveDistance)<br />    .opacity(opacity)<br />    .animation(.easeOut, value: moveDistance)<br />    .animation(.easeOut, value: opacity)</span></pre><figure name="c606" id="c606" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*lDUsYrBiX-EpPQ9fdWxVuQ.jpeg" data-width="1284" data-height="730" src="https://cdn-images-1.medium.com/max/800/1*lDUsYrBiX-EpPQ9fdWxVuQ.jpeg"><figcaption class="imageCaption">Apple 官方的 easeOut 動畫速度變化圖</figcaption></figure><div name="39f3" id="39f3" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1522178-easeout" data-href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1522178-easeout" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1522178-easeout"><strong class="markup--strong markup--mixtapeEmbed-strong">easeOut | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Ease-out pacing, which causes an animation to begin quickly and then slow as it progresses.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1522178-easeout" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="65539f7a57c9a4162085be79368ed94a" data-thumbnail-img-id="0*gJhVfnfQkjTIMqrE" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*gJhVfnfQkjTIMqrE);"></a></div><ul class="postList"><li name="d3b9" id="d3b9" class="graf graf--li graf-after--mixtapeEmbed"><strong class="markup--strong markup--li-strong">easeIn</strong></li></ul><p name="7cd6" id="7cd6" class="graf graf--p graf-after--li">動畫速度一開始慢，然後愈來愈快。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="fe44" id="fe44" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">.animation(.easeIn, value: moveDistance)<br />.animation(.easeIn, value: opacity)</span></pre><figure name="f49a" id="f49a" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*yIFy9Nr9FwXA-4U4PlvjIQ.jpeg" data-width="1252" data-height="686" src="https://cdn-images-1.medium.com/max/800/1*yIFy9Nr9FwXA-4U4PlvjIQ.jpeg"><figcaption class="imageCaption">Apple 官方的 easeIn 動畫速度變化圖</figcaption></figure><div name="be34" id="be34" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1521971-easein" data-href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1521971-easein" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1521971-easein"><strong class="markup--strong markup--mixtapeEmbed-strong">easeIn | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Ease-in pacing, which causes an animation to begin slowly and then speed up as it progresses.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1521971-easein" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="ad5ca3d4e355c634a6bfd4888951f02f" data-thumbnail-img-id="0*cbUSvZ_UNGTyPgSZ" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*cbUSvZ_UNGTyPgSZ);"></a></div><ul class="postList"><li name="e363" id="e363" class="graf graf--li graf-after--mixtapeEmbed"><strong class="markup--strong markup--li-strong">easeInOut</strong></li></ul><p name="5618" id="5618" class="graf graf--p graf-after--li">動畫速度一開始慢，然後愈來愈快，最後再愈來愈慢。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="9e74" id="9e74" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">.animation(.easeInOut, value: moveDistance)<br />.animation(.easeInOut, value: opacity)</span></pre><figure name="b729" id="b729" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*zwMRKHe7hcdMx-MvB__zGA.jpeg" data-width="1246" data-height="692" src="https://cdn-images-1.medium.com/max/800/1*zwMRKHe7hcdMx-MvB__zGA.jpeg"><figcaption class="imageCaption">Apple 官方的 easeInOut 動畫速度變化圖</figcaption></figure><div name="6587" id="6587" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1522173-easeineaseout" data-href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1522173-easeineaseout" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1522173-easeineaseout"><strong class="markup--strong markup--mixtapeEmbed-strong">easeInEaseOut | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Ease-in-ease-out pacing, which causes an animation to begin slowly, accelerate through the middle of its duration, and…</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1522173-easeineaseout" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="680f458343d15439efc5ae3ba832ca5c" data-thumbnail-img-id="0*TD8ljtfBr3zkC-Zq" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*TD8ljtfBr3zkC-Zq);"></a></div><ul class="postList"><li name="4a02" id="4a02" class="graf graf--li graf-after--mixtapeEmbed"><strong class="markup--strong markup--li-strong">linear</strong></li></ul><p name="2651" id="2651" class="graf graf--p graf-after--li">動畫維持固定的速度。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="750f" id="750f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">.animation(.linear, value: moveDistance)<br />.animation(.linear, value: opacity)</span></pre><figure name="ba98" id="ba98" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*0RgVsfMsofsKdolYNapFVw.jpeg" data-width="1250" data-height="680" src="https://cdn-images-1.medium.com/max/800/1*0RgVsfMsofsKdolYNapFVw.jpeg"><figcaption class="imageCaption">Apple 官方的 linear 動畫速度變化圖</figcaption></figure><div name="4a34" id="4a34" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1521943-linear" data-href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1521943-linear" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1521943-linear"><strong class="markup--strong markup--mixtapeEmbed-strong">linear | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Linear pacing, which causes an animation to occur evenly over its duration.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/quartzcore/camediatimingfunctionname/1521943-linear" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="fd21b2129f52b40b43ef949f6ea0e651" data-thumbnail-img-id="0*HWtlAmy2YuRmLIL4" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*HWtlAmy2YuRmLIL4);"></a></div><ul class="postList"><li name="1700" id="1700" class="graf graf--li graf-after--mixtapeEmbed"><strong class="markup--strong markup--li-strong">spring，smooth，snappy，bouncy</strong></li></ul><p name="0e12" id="0e12" class="graf graf--p graf-after--li">類似彈簧的動畫效果 ，它將像彈簧來回振動般變成最後的畫面，比方從座標 10 移動到 100，它將先移動到超過 100，然後再振動回小於 100，然後不斷來回振動直到抵達 100 的位置。</p><p name="a64e" id="a64e" class="graf graf--p graf-after--p">參數 bounce 控制振動的次數，它的範圍是 0 ~ 1，數字愈大將振動愈多次。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="e4d4" id="e4d4" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">.animation(.spring(bounce: <span class="hljs-number">0.9</span>), value: moveDistance)<br />.animation(.spring(bounce: <span class="hljs-number">0.9</span>), value: opacity)</span></pre><p name="3d00" id="3d00" class="graf graf--p graf-after--pre">SwiftUI 也提供一些預先定義好的 spring 動畫，振盪的次數由小到大依序為 smooth、snappy、bouncy。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="98c9" id="98c9" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">.animation(.bouncy, value: moveDistance)<br />.animation(.bouncy, value: opacity)</span></pre><ul class="postList"><li name="c371" id="c371" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">default</strong></li></ul><p name="3bc9" id="3bc9" class="graf graf--p graf-after--li">從 iOS 17 開始，default 的效果是 spring，在 iOS 17 之前則是 easeInOut。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="da4e" id="da4e" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">.animation(.default, value: moveDistance)<br />.animation(.default, value: opacity)</span></pre><h3 name="07f1" id="07f1" class="graf graf--h3 graf-after--pre">調整動畫的時間</h3><p name="3800" id="3800" class="graf graf--p graf-after--h3">我們可透過兩種方法調整動畫的時間。</p><ul class="postList"><li name="cc26" id="cc26" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">產生 Animation 時傳入參數 duration</strong></li></ul><p name="22ec" id="22ec" class="graf graf--p graf-after--li">spring、smooth、snappy、bouncy、easeIn、easeOut、easeInOut、linear 都可以搭配參數 duration，單位為秒數，比方指定動畫的時間為 10 秒鐘。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="505e" id="505e" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">Image</span>(.peter)<br />    .offset(x: moveDistance)<br />    .opacity(opacity)<br />    .animation(.easeOut(duration: <span class="hljs-number">10</span>), value: moveDistance)<br />    .animation(.easeOut(duration: <span class="hljs-number">10</span>), value: opacity)</span></pre><ul class="postList"><li name="0994" id="0994" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">呼叫 Animation 的 function speed</strong></li></ul><p name="b442" id="b442" class="graf graf--p graf-after--li">speed(0.5) 將讓速度變慢，變成 0.5 倍，因此時間變成原來的 2 倍。相反的，speed(2) 將讓速度加快，變成 2 倍，因此時間變成原本的 0.5 倍。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="ca89" id="ca89" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">.animation(.linear.speed(<span class="hljs-number">0.5</span>), value: moveDistance)<br />.animation(.linear.speed(<span class="hljs-number">0.5</span>), value: opacity)</span></pre><h3 name="25e4" id="25e4" class="graf graf--h3 graf-after--pre">設定動畫重覆次數的 repeatCount</h3><p name="907d" id="907d" class="graf graf--p graf-after--h3">透過呼叫 Animation 的 function repeatCount。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="2b0c" id="2b0c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> rotateDegree: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;轉吧，Peter&quot;</span>) {<br />                rotateDegree <span class="hljs-operator">=</span> <span class="hljs-number">180</span><br />            }<br />            .font(.title)<br />            <span class="hljs-type">Image</span>(.peter)<br />              .rotationEffect(.degrees(rotateDegree))<br />              .animation(<br />                 .linear(duration: <span class="hljs-number">5</span>)<br />                 .repeatCount(<span class="hljs-number">3</span>, autoreverses: <span class="hljs-literal">false</span>),<br />                 value: rotateDegree<br />              )<br />        }<br />        <br />    }<br />}</span></pre><p name="3c1b" id="3c1b" class="graf graf--p graf-after--pre">function repeatCount 的宣告以下，參數 repeatCount 控制動畫重覆的次數，autoreverses 控制是否會以動畫反轉回原來狀態再繼續下一次的動畫。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="8d6b" id="8d6b" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">repeatCount</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">repeatCount</span>: <span class="hljs-type">Int</span>, <span class="hljs-params">autoreverses</span>: <span class="hljs-type">Bool</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>) -&gt; <span class="hljs-type">Animation</span></span></pre><p name="8d74" id="8d74" class="graf graf--p graf-after--pre">如下圖所示，當我們呼叫 <code class="markup--code markup--p-code">animation(.linear(duration: 5).repeatCount(3, autoreverses: false)) </code>時，圖片 Peter 將花 5 秒旋轉 180 度，然後再瞬間轉回 0 度，接著繼續 5 秒轉 180 度，然後再瞬間轉回 0 度，最後再做一次 5 秒轉 180 度，完成我們要求的 3 次動畫。</p><figure name="ae6a" id="ae6a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*GsPWYAB-iVCwql7sZ91pdg.png" data-width="827" data-height="550" src="https://cdn-images-1.medium.com/max/800/1*GsPWYAB-iVCwql7sZ91pdg.png"></figure><p name="e13a" id="e13a" class="graf graf--p graf-after--figure">當參數 autoreverses 傳入 true 時，將有完全不同的效果。此時圖片 Peter 將花 5 秒旋轉 180 度，接著再花 5 秒轉回一開始的 0 度，最後再花 5 秒旋轉 180 度。由於回到原來狀態也算一次動畫，所以這樣已經算完成 3 次的動畫。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="ab07" id="ab07" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">Image</span>(.peter)<br />    .rotationEffect(.degrees(rotateDegree))<br />    .animation(<br />        .linear(duration: <span class="hljs-number">5</span>)<br />        .repeatCount(<span class="hljs-number">3</span>, autoreverses: <span class="hljs-literal">true</span>),<br />        value: rotateDegree<br />    )</span></pre><p name="4e93" id="4e93" class="graf graf--p graf-after--pre">了解 repeatCount 的原理後，我們將可輕易實現 App 常見的轉圈動畫，以下程式在按下按鈕時將 rotateDegree 設為 360，讓 peter 轉了華麗的 3 圈。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="e00f" id="e00f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> rotateDegree: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;轉吧，Peter&quot;</span>) {<br />                rotateDegree <span class="hljs-operator">=</span> <span class="hljs-number">360</span><br />            }<br />            .font(.title)<br />            <span class="hljs-type">Image</span>(.peter)<br />                .rotationEffect(.degrees(rotateDegree))<br />                .animation(<br />                    .linear(duration: <span class="hljs-number">5</span>)<br />                    .repeatCount(<span class="hljs-number">3</span>, autoreverses: <span class="hljs-literal">false</span>),<br />                    value: rotateDegree<br />                )<br />        }<br />        <br />    }<br />}</span></pre><p name="c08a" id="c08a" class="graf graf--p graf-after--pre">記得動畫的速度要設為 linear，旋轉才會順暢。若是設定其它動畫，比方 easeInOut，將發現圖片似乎體力不太好，轉完一圈後會停頓一下下再轉下一圈。</p><h3 name="bda2" id="bda2" class="graf graf--h3 graf-after--p">無限重覆動畫的 repeatForever，以無止盡的旋轉為例</h3><p name="24b8" id="24b8" class="graf graf--p graf-after--h3">有些特別的動畫我們會希望它永遠不要停止，就像我們希望好看的影集 the big bang theory 永遠不要完結篇一樣。</p><p name="e283" id="e283" class="graf graf--p graf-after--p">可惜現實世界的影集總有結束的一天，但在 SwiftUI 的世界，我們可以呼叫 repeatForever 讓動畫永不停止。</p><p name="fb92" id="fb92" class="graf graf--p graf-after--p">以下程式將讓 peter 無止盡地旋轉。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="37fb" id="37fb" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> rotateDegree: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;轉吧，Peter&quot;</span>) {<br />                rotateDegree <span class="hljs-operator">=</span> <span class="hljs-number">360</span><br />            }<br />            .font(.title)<br />            <span class="hljs-type">Image</span>(.peter)<br />                .rotationEffect(.degrees(rotateDegree))<br />                .animation(<br />                    .linear(duration: <span class="hljs-number">5</span>)<br />                    .repeatForever(autoreverses: <span class="hljs-literal">false</span>),<br />                    value: rotateDegree<br />                )<br />        }<br />        <br />    }<br />}</span></pre><div name="afb2" id="afb2" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E5%AF%A6%E7%8F%BE%E7%84%A1%E6%AD%A2%E7%9B%A1-360-%E5%BA%A6%E6%97%8B%E8%BD%89%E5%8B%95%E7%95%AB%E7%9A%84%E4%B8%89%E5%80%8B%E6%96%B9%E6%B3%95-9599eb9ab36a" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E5%AF%A6%E7%8F%BE%E7%84%A1%E6%AD%A2%E7%9B%A1-360-%E5%BA%A6%E6%97%8B%E8%BD%89%E5%8B%95%E7%95%AB%E7%9A%84%E4%B8%89%E5%80%8B%E6%96%B9%E6%B3%95-9599eb9ab36a" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E5%AF%A6%E7%8F%BE%E7%84%A1%E6%AD%A2%E7%9B%A1-360-%E5%BA%A6%E6%97%8B%E8%BD%89%E5%8B%95%E7%95%AB%E7%9A%84%E4%B8%89%E5%80%8B%E6%96%B9%E6%B3%95-9599eb9ab36a"><strong class="markup--strong markup--mixtapeEmbed-strong">Swift 實現無止盡 360 度旋轉動畫的三個方法</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，我們有很多方法可以實現重覆 360 度旋轉的動畫。接下來我們分別看看以下三種實現的方法，SwiftUI 的 animation，UIKit 的 UIViewPropertyAnimator &amp; UIKit 的…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E5%AF%A6%E7%8F%BE%E7%84%A1%E6%AD%A2%E7%9B%A1-360-%E5%BA%A6%E6%97%8B%E8%BD%89%E5%8B%95%E7%95%AB%E7%9A%84%E4%B8%89%E5%80%8B%E6%96%B9%E6%B3%95-9599eb9ab36a" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="d277bb275a87d1a020c78e6ba37d2dba" data-thumbnail-img-id="1*Eki59kJZBhQemT6gsE1lxA.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*Eki59kJZBhQemT6gsE1lxA.jpeg);"></a></div><div name="c2b9" id="c2b9" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-swiftui-repeatforever-%E8%A3%BD%E4%BD%9C%E6%90%96%E6%99%83%E5%8B%95%E7%95%AB%E6%95%88%E6%9E%9C-1cc69f09fe68" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-swiftui-repeatforever-%E8%A3%BD%E4%BD%9C%E6%90%96%E6%99%83%E5%8B%95%E7%95%AB%E6%95%88%E6%9E%9C-1cc69f09fe68" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-swiftui-repeatforever-%E8%A3%BD%E4%BD%9C%E6%90%96%E6%99%83%E5%8B%95%E7%95%AB%E6%95%88%E6%9E%9C-1cc69f09fe68"><strong class="markup--strong markup--mixtapeEmbed-strong">利用 SwiftUI repeatForever 製作搖晃動畫效果</strong><br><em class="markup--em markup--mixtapeEmbed-em">利用 SwiftUI 的 repeatForever 我們可以輕易做出生動的搖晃動畫效果。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-swiftui-repeatforever-%E8%A3%BD%E4%BD%9C%E6%90%96%E6%99%83%E5%8B%95%E7%95%AB%E6%95%88%E6%9E%9C-1cc69f09fe68" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a35190f24f1990d2eaf2aba14de25beb" data-thumbnail-img-id="1*Vm9xfSNyhZ6da7Pjj0aavw.gif" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*Vm9xfSNyhZ6da7Pjj0aavw.gif);"></a></div><h3 name="3f47" id="3f47" class="graf graf--h3 graf-after--mixtapeEmbed">畫面出現時開始動畫的 onAppear</h3><p name="228a" id="228a" class="graf graf--p graf-after--h3">我們可以在 onAppear 裡觸發動畫，讓動畫在畫面出現時自動開始表演。以下例子我們將 rotateDegree 設為 360 度，圖片將在畫面出現時自動開始旋轉。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="8d77" id="8d77" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> rotateDegree: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">Image</span>(.peter)<br />            .rotationEffect(.degrees(rotateDegree))<br />            .animation(<br />                .linear(duration: <span class="hljs-number">5</span>)<br />                .repeatForever(autoreverses: <span class="hljs-literal">false</span>),<br />                value: rotateDegree<br />            )<br />            .onAppear {<br />                rotateDegree <span class="hljs-operator">=</span> <span class="hljs-number">360</span><br />            }<br />    }<br />}</span></pre><p name="cdbb" id="cdbb" class="graf graf--p graf-after--pre">其它範例: 咖啡杯的老虎無限旋轉。</p><figure name="5ebf" id="5ebf" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*vDyXqLO-ZNebSal_QAPMFA.gif" data-width="295" data-height="640" src="https://cdn-images-1.medium.com/max/800/1*vDyXqLO-ZNebSal_QAPMFA.gif"></figure><h3 name="256c" id="256c" class="graf graf--h3 graf-after--figure">延遲動畫的 delay</h3><p name="a95f" id="a95f" class="graf graf--p graf-after--h3">呼叫 Animation 的 delay function，讓動畫幾秒後再開始。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="2c97" id="2c97" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> rotateDegree: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">Image</span>(.peter)<br />            .rotationEffect(.degrees(rotateDegree))<br />            .animation(<br />                .linear(duration: <span class="hljs-number">5</span>)<br />                .repeatForever(autoreverses: <span class="hljs-literal">false</span>)<br />                .delay(<span class="hljs-number">5</span>),<br />                value: rotateDegree<br />            )<br />            .onAppear {<br />                rotateDegree <span class="hljs-operator">=</span> <span class="hljs-number">360</span><br />            }<br />    }<br />}</span></pre><h3 name="5320" id="5320" class="graf graf--h3 graf-after--pre">實現動畫的三種方法</h3><p name="4d25" id="4d25" class="graf graf--p graf-after--h3">SwiftUI 實現動畫的方法不只一種，以下三種方法都可以實現動畫。接下來我們再來認識一下其它兩種方法。</p><ul class="postList"><li name="dce7" id="dce7" class="graf graf--li graf-after--p">從元件呼叫 function animation 加入動畫。</li><li name="5a4b" id="5a4b" class="graf graf--li graf-after--li">利用 function withAnimation 加入動畫。</li><li name="5326" id="5326" class="graf graf--li graf-after--li">將 animation 加在 Binding 變數上。</li></ul><h3 name="08b2" id="08b2" class="graf graf--h3 graf-after--li">方法2: 利用 function withAnimation 加入動畫</h3><p name="f2de" id="f2de" class="graf graf--p graf-after--h3">在 withAnimation 的參數 body 裡傳入 closure 描述想要的改變， SwiftUI 將聰明地以動畫呈現畫面的改變。</p><figure name="75e6" id="75e6" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*AUTAx0Xb3IYAIpRq2Cfrtw.png" data-width="804" data-height="88" src="https://cdn-images-1.medium.com/max/800/1*AUTAx0Xb3IYAIpRq2Cfrtw.png"></figure><p name="2e36" id="2e36" class="graf graf--p graf-after--figure">以下程式在 withAnimation 的 closure 裡改變了 moveDistance &amp; opacity，受它們影響的 Image 將有動畫效果，因此實現圖片的移動和透明度動畫。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="ff98" id="ff98" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> moveDistance: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> opacity: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;奔跑吧，Peter&quot;</span>) {<br />                withAnimation {<br />                    moveDistance <span class="hljs-operator">+=</span> <span class="hljs-number">100</span><br />                    opacity <span class="hljs-operator">-=</span> <span class="hljs-number">0.3</span><br />                }<br />            }<br />            .font(.title)<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(.peter)<br />                    .offset(x: moveDistance)<br />                    .opacity(opacity)<br />                <span class="hljs-type">Spacer</span>()<br />            }<br />        }<br />    }<br />}</span></pre><p name="fb87" id="fb87" class="graf graf--p graf-after--pre">function withAnimation 的宣告以下，剛剛的程式我們省略第一個參數 animation，因此它將採用預設的動畫效果。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="d638" id="d638" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">withAnimation</span>&lt;<span class="hljs-type">Result</span>&gt;(<span class="hljs-keyword">_</span> <span class="hljs-params">animation</span>: <span class="hljs-type">Animation</span>? <span class="hljs-operator">=</span> .default, <span class="hljs-keyword">_</span> <span class="hljs-params">body</span>: () <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">Result</span>) <span class="hljs-keyword">rethrows</span> -&gt; <span class="hljs-type">Result</span></span></pre><p name="b71d" id="b71d" class="graf graf--p graf-after--pre">呼叫 withAnimation 時，我們也可以在參數 animation 傳入想要的 Animation。</p><figure name="8c0e" id="8c0e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*o2shFZFWx8fhjffb2EPmqg.png" data-width="1370" data-height="122" src="https://cdn-images-1.medium.com/max/800/1*o2shFZFWx8fhjffb2EPmqg.png"></figure><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="a30c" id="a30c" class="graf graf--pre graf-after--figure graf--preV2"><span class="pre--content"><span class="hljs-type">Button</span>(<span class="hljs-string">&quot;奔跑吧，Peter&quot;</span>) {<br />    withAnimation(.easeInOut(duration: <span class="hljs-number">10</span>)) {<br />        moveDistance <span class="hljs-operator">+=</span> <span class="hljs-number">100</span><br />        opacity <span class="hljs-operator">-=</span> <span class="hljs-number">0.3</span><br />    }<br />}</span></pre><h3 name="5a2a" id="5a2a" class="graf graf--h3 graf-after--pre">方法3: 將 animation 加在 Binding 變數上</h3><p name="32b4" id="32b4" class="graf graf--p graf-after--h3">我們可以從 Binding 型別的變數呼叫 animation，當它的內容改變時，畫面的更新將以動畫呈現。</p><p name="d6ef" id="d6ef" class="graf graf--p graf-after--p">比方我們將 Button 包裝成 RunButton，在裡面以 @Binding 宣告 moveDistance &amp; opacity。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="b0d1" id="b0d1" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">RunButton</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@Binding</span> <span class="hljs-keyword">var</span> moveDistance: <span class="hljs-type">Double</span><br />    <span class="hljs-meta">@Binding</span> <span class="hljs-keyword">var</span> opacity: <span class="hljs-type">Double</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;奔跑吧，Peter&quot;</span>) {<br />            moveDistance <span class="hljs-operator">+=</span> <span class="hljs-number">100</span><br />            opacity <span class="hljs-operator">-=</span> <span class="hljs-number">0.3</span><br />        }<br />        .font(.title)<br />    }<br />}</span></pre><p name="a00c" id="a00c" class="graf graf--p graf-after--pre">在傳入加了 $ 的 Binding 變數時，我們額外呼叫 animation()，之後當變數內容改變觸發畫面更新時將產生動畫。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="f760" id="f760" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> moveDistance: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> opacity: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">RunButton</span>(moveDistance: <span class="hljs-variable">$moveDistance</span>.animation(), opacity: <span class="hljs-variable">$opacity</span>.animation())<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(<span class="hljs-string">&quot;peter&quot;</span>)<br />                    .offset(x: moveDistance)<br />                    .opacity(opacity)<br />                <span class="hljs-type">Spacer</span>()<br />            }<br />        }<br />    }<br />}</span></pre><p name="d236" id="d236" class="graf graf--p graf-after--pre">如下圖所示，從 $moveDistance 呼叫 animation() 將回傳 Binding&lt;Double&gt;，雖然它的型別跟原來的 $moveDistance 一模一樣，但它已經有很大變化，它是有動畫功能的升級版。</p><figure name="6829" id="6829" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ceTTrp5lpUN2NylPb4ANOQ.png" data-width="1844" data-height="600" src="https://cdn-images-1.medium.com/max/800/1*ceTTrp5lpUN2NylPb4ANOQ.png"></figure><p name="291d" id="291d" class="graf graf--p graf-after--figure">同樣的，我們也可以客製動畫，我們可以在呼叫 animation() 時傳入指定的 Animation。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="b734" id="b734" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">RunButton</span>(moveDistance: <span class="hljs-variable">$moveDistance</span>.animation(.easeInOut(duration: <span class="hljs-number">10</span>)), opacity: <span class="hljs-variable">$opacity</span>.animation(.easeInOut(duration: <span class="hljs-number">10</span>)))</span></pre><h3 name="869d" id="869d" class="graf graf--h3 graf-after--pre">偵測 SwiftUI 動畫完成的 withAnimation(_:completionCriteria:_:completion:)</h3><div name="8f83" id="8f83" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%81%B5%E6%B8%AC-swiftui-%E5%8B%95%E7%95%AB%E5%AE%8C%E6%88%90%E7%9A%84-withanimation-completioncriteria-completion-ios-17-%E6%96%B0%E5%8A%9F%E8%83%BD-573f84a571b0" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%81%B5%E6%B8%AC-swiftui-%E5%8B%95%E7%95%AB%E5%AE%8C%E6%88%90%E7%9A%84-withanimation-completioncriteria-completion-ios-17-%E6%96%B0%E5%8A%9F%E8%83%BD-573f84a571b0" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%81%B5%E6%B8%AC-swiftui-%E5%8B%95%E7%95%AB%E5%AE%8C%E6%88%90%E7%9A%84-withanimation-completioncriteria-completion-ios-17-%E6%96%B0%E5%8A%9F%E8%83%BD-573f84a571b0"><strong class="markup--strong markup--mixtapeEmbed-strong">偵測 SwiftUI 動畫完成的 withAnimation(_:completionCriteria:_:completion:) — iOS 17 新功能</strong><br><em class="markup--em markup--mixtapeEmbed-em">SwiftUI 提供方便的 function 幫我們快速實現各種動畫，像是 modifier animation(_:value:) &amp; function withAnimation(_:_:)。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%81%B5%E6%B8%AC-swiftui-%E5%8B%95%E7%95%AB%E5%AE%8C%E6%88%90%E7%9A%84-withanimation-completioncriteria-completion-ios-17-%E6%96%B0%E5%8A%9F%E8%83%BD-573f84a571b0" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="e931c31e69cfdb81ca37b2345d0ec1bc" data-thumbnail-img-id="1*7LYZhS0H8O7cUh6vn120zQ.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*7LYZhS0H8O7cUh6vn120zQ.png);"></a></div><h3 name="8710" id="8710" class="graf graf--h3 graf-after--mixtapeEmbed">實現 SwiftUI 動畫時，modifier 的變化要在 view 已經加到畫面上後發生</h3><div name="be79" id="be79" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%AF%A6%E7%8F%BE-swiftui-%E5%8B%95%E7%95%AB%E6%99%82-modifier-%E7%9A%84%E8%AE%8A%E5%8C%96%E8%A6%81%E5%9C%A8-view-%E5%B7%B2%E7%B6%93%E5%8A%A0%E5%88%B0%E7%95%AB%E9%9D%A2%E4%B8%8A%E5%BE%8C%E7%99%BC%E7%94%9F-b11f1c57834f" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%AF%A6%E7%8F%BE-swiftui-%E5%8B%95%E7%95%AB%E6%99%82-modifier-%E7%9A%84%E8%AE%8A%E5%8C%96%E8%A6%81%E5%9C%A8-view-%E5%B7%B2%E7%B6%93%E5%8A%A0%E5%88%B0%E7%95%AB%E9%9D%A2%E4%B8%8A%E5%BE%8C%E7%99%BC%E7%94%9F-b11f1c57834f" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%AF%A6%E7%8F%BE-swiftui-%E5%8B%95%E7%95%AB%E6%99%82-modifier-%E7%9A%84%E8%AE%8A%E5%8C%96%E8%A6%81%E5%9C%A8-view-%E5%B7%B2%E7%B6%93%E5%8A%A0%E5%88%B0%E7%95%AB%E9%9D%A2%E4%B8%8A%E5%BE%8C%E7%99%BC%E7%94%9F-b11f1c57834f"><strong class="markup--strong markup--mixtapeEmbed-strong">實現 SwiftUI 動畫時，modifier 的變化要在 view 已經加到畫面上後發生</strong><br><em class="markup--em markup--mixtapeEmbed-em">SwiftUI 可以很方便地製作動畫效果，利用 modifier 的變化，SwiftUI 將能幫我們製造變化過程中的動畫。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%AF%A6%E7%8F%BE-swiftui-%E5%8B%95%E7%95%AB%E6%99%82-modifier-%E7%9A%84%E8%AE%8A%E5%8C%96%E8%A6%81%E5%9C%A8-view-%E5%B7%B2%E7%B6%93%E5%8A%A0%E5%88%B0%E7%95%AB%E9%9D%A2%E4%B8%8A%E5%BE%8C%E7%99%BC%E7%94%9F-b11f1c57834f" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="95318a4406a1384235c92696d427c5c2" data-thumbnail-img-id="1*yZYUR1K24NvxvdaDkIf0lA.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*yZYUR1K24NvxvdaDkIf0lA.png);"></a></div><h3 name="0188" id="0188" class="graf graf--h3 graf-after--mixtapeEmbed">使用 SwiftUI 的 rotation3DEffect 實現翻牌動畫</h3><div name="5574" id="5574" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-swiftui-%E7%9A%84-rotation3deffect-%E5%AF%A6%E7%8F%BE%E7%BF%BB%E7%89%8C%E5%8B%95%E7%95%AB-560c752ce9e7" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-swiftui-%E7%9A%84-rotation3deffect-%E5%AF%A6%E7%8F%BE%E7%BF%BB%E7%89%8C%E5%8B%95%E7%95%AB-560c752ce9e7" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-swiftui-%E7%9A%84-rotation3deffect-%E5%AF%A6%E7%8F%BE%E7%BF%BB%E7%89%8C%E5%8B%95%E7%95%AB-560c752ce9e7"><strong class="markup--strong markup--mixtapeEmbed-strong">使用 SwiftUI 的 rotation3DEffect 實現翻牌動畫</strong><br><em class="markup--em markup--mixtapeEmbed-em">利用 SwiftUI modifier rotation3DEffect 的 3D 翻轉功能，我們可以輕易地做出撲克牌遊戲常見的翻牌動畫。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-swiftui-%E7%9A%84-rotation3deffect-%E5%AF%A6%E7%8F%BE%E7%BF%BB%E7%89%8C%E5%8B%95%E7%95%AB-560c752ce9e7" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="82b602046dc6e9b7f3495c430c64561c" data-thumbnail-img-id="1*0GiP-MeW0mkvmlgJJ1wOug.gif" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*0GiP-MeW0mkvmlgJJ1wOug.gif);"></a></div><h3 name="cc90" id="cc90" class="graf graf--h3 graf-after--mixtapeEmbed">AI 的動畫範例</h3><figure name="a90b" id="a90b" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*0vAi5hSffvWVn8czpNUPZw.gif" data-width="295" data-height="640" src="https://cdn-images-1.medium.com/max/800/1*0vAi5hSffvWVn8czpNUPZw.gif"></figure><figure name="f386" id="f386" class="graf graf--figure graf--iframe graf-after--figure"><script src="https://gist.github.com/PeterPanSwift/095b3690640a5f91ea6af515e184f73d.js"></script></figure><h3 name="8446" id="8446" class="graf graf--h3 graf-after--figure">不錯的動畫範例</h3><div name="bb91" id="bb91" class="graf graf--mixtapeEmbed graf-after--h3 graf--trailing"><a href="https://github.com/amosgyamfi/open-swiftui-animations" data-href="https://github.com/amosgyamfi/open-swiftui-animations" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/amosgyamfi/open-swiftui-animations"><strong class="markup--strong markup--mixtapeEmbed-strong">GitHub - amosgyamfi/open-swiftui-animations: You don&#39;t need an animation library to add a simple…</strong><br><em class="markup--em markup--mixtapeEmbed-em">You don&#39;t need an animation library to add a simple effect to your SwiftUI app. Create it yourself with SwiftUI. This…</em>github.com</a><a href="https://github.com/amosgyamfi/open-swiftui-animations" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="8614f0429d3fef72f79297547b880482" data-thumbnail-img-id="0*0rA94bbBOA32MBNH" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*0rA94bbBOA32MBNH);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/2f8eb72d2756"><time class="dt-published" datetime="2019-10-27T07:42:42.891Z">October 27, 2019</time></a>.</p><p><a href="https://medium.com/@apppeterpan/swiftui-%E7%9A%84-animation-%E5%8B%95%E7%95%AB-2f8eb72d2756" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>