<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>在 iPhone &amp; iPad 上顯示 popover 彈出視窗</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">在 iPhone &amp; iPad 上顯示 popover 彈出視窗</h1>
</header>
<section data-field="subtitle" class="p-summary">
在 iPad 上我們時常看到如上圖紅色框框的 popover 彈出視窗，它可以讓原本佔滿整個螢幕的 controller 畫面瘦身，變成只佔滿螢幕的一部分。這樣子的功能其實不是 iPad 獨有，iPhone 也做得到。接下來就讓我們一步步實現 popover 的效果吧。
</section>
<section data-field="body" class="e-content">
<section name="a0c1" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="1027" id="1027" class="graf graf--h3 graf--leading graf--title">在 iPhone &amp; iPad 上顯示 popover 彈出視窗</h3><figure name="2136" id="2136" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*ggUQJA1JQbwUX2H1Do1fuQ.jpeg" data-width="820" data-height="1106" src="https://cdn-images-1.medium.com/max/800/1*ggUQJA1JQbwUX2H1Do1fuQ.jpeg"></figure><p name="c121" id="c121" class="graf graf--p graf-after--figure">在 iPad 上我們時常看到如上圖紅色框框的 popover 彈出視窗，它可以讓原本佔滿整個螢幕的 controller 畫面瘦身，變成只佔滿螢幕的一部分。這樣子的功能其實不是 iPad 獨有，iPhone 也做得到。接下來就讓我們一步步實現 popover 的效果吧。</p><h3 name="63b1" id="63b1" class="graf graf--h3 graf-after--p">新版做法: iOS 14 以上版本，包含 14</h3><p name="46a4" id="46a4" class="graf graf--p graf-after--h3">使用 Pull Down Button &amp; Pop Up Button。</p><div name="e4fb" id="e4fb" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-%E7%9A%84%E9%81%B8%E5%96%AE-menu-%E6%8C%89%E9%88%95-pull-down-button-pop-up-button-2ddab2181ee5" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-%E7%9A%84%E9%81%B8%E5%96%AE-menu-%E6%8C%89%E9%88%95-pull-down-button-pop-up-button-2ddab2181ee5" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-%E7%9A%84%E9%81%B8%E5%96%AE-menu-%E6%8C%89%E9%88%95-pull-down-button-pop-up-button-2ddab2181ee5"><strong class="markup--strong markup--mixtapeEmbed-strong">iOS 的選單(menu)按鈕 — Pull Down Button &amp; Pop Up Button</strong><br><em class="markup--em markup--mixtapeEmbed-em">從 iOS 14 開始，我們可以更方便地製作選單按鈕，呈現類似下拉式選單的效果。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-%E7%9A%84%E9%81%B8%E5%96%AE-menu-%E6%8C%89%E9%88%95-pull-down-button-pop-up-button-2ddab2181ee5" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="3e7eaf09a68d63e763d51a2145fbdb28" data-thumbnail-img-id="1*TCSK73QS1JgRWWrBBCwkaQ.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*TCSK73QS1JgRWWrBBCwkaQ.png);"></a></div><h3 name="2b14" id="2b14" class="graf graf--h3 graf-after--mixtapeEmbed">舊版做法: iOS 14 之前</h3><blockquote name="e06c" id="e06c" class="graf graf--blockquote graf-after--h3"><strong class="markup--strong markup--blockquote-strong">在 iPad 上顯示 Popover</strong></blockquote><p name="5cd4" id="5cd4" class="graf graf--p graf-after--blockquote">我們希望點選 + 後，選擇角色的表格以 popover 呈現。</p><figure name="b1dd" id="b1dd" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*-IE_hc3nL9sNKXCMG63RaA.jpeg" data-width="1126" data-height="932" src="https://cdn-images-1.medium.com/max/800/1*-IE_hc3nL9sNKXCMG63RaA.jpeg"></figure><p name="e630" id="e630" class="graf graf--p graf-after--figure">就像魔法一樣，只要拉 segue 時選擇 Present As Popover 即可實現彈出視窗的效果。</p><figure name="2f4b" id="2f4b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*SoD1GP5yEsTudZ9euywrbQ.jpeg" data-width="390" data-height="336" src="https://cdn-images-1.medium.com/max/800/1*SoD1GP5yEsTudZ9euywrbQ.jpeg"></figure></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="44f5" id="44f5" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*QJ5w_V14NhJBumelnXq3Cw.jpeg" data-width="1160" data-height="1506" src="https://cdn-images-1.medium.com/max/600/1*QJ5w_V14NhJBumelnXq3Cw.jpeg"></figure><figure name="eca3" id="eca3" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*xJ1YAiOCC8PUkwFdjqrKjQ.jpeg" data-width="1160" data-height="1506" data-is-featured="true" src="https://cdn-images-1.medium.com/max/600/1*xJ1YAiOCC8PUkwFdjqrKjQ.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><blockquote name="fed9" id="fed9" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">在 iPhone 上顯示 Popover</strong></blockquote><p name="db7d" id="db7d" class="graf graf--p graf-after--blockquote">然而同樣的程式，跑在 iPhone 上卻讓我們明白童話都是騙人的。按了 + 之後，表格還是佔滿整個螢幕。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="901b" id="901b" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*7z0uBhyTPM2888X9aNzDlg.jpeg" data-width="858" data-height="1470" src="https://cdn-images-1.medium.com/max/600/1*7z0uBhyTPM2888X9aNzDlg.jpeg"></figure><figure name="476d" id="476d" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*kKcm5ayQ79I7iZeMHRK4WA.jpeg" data-width="858" data-height="1470" src="https://cdn-images-1.medium.com/max/600/1*kKcm5ayQ79I7iZeMHRK4WA.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="864c" id="864c" class="graf graf--p graf-after--figure">其實 iPhone 還是能夠做到 popover，只是比較麻煩。我們還要加入以下程式。</p><p name="5c20" id="5c20" class="graf graf--p graf-after--p">1 將第一頁的 controller 設為 UIPopoverPresentationController 物件的 delegate。</p><pre name="1462" id="1462" class="graf graf--pre graf-after--p">class ViewController: UIViewController, <strong class="markup--strong markup--pre-strong">UIPopoverPresentationControllerDelegate</strong> {</pre><pre name="5678" id="5678" class="graf graf--pre graf-after--pre">   override func prepare(for segue: UIStoryboardSegue, sender: Any?) {</pre><pre name="ee91" id="ee91" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">         segue.destination.popoverPresentationController?.delegate = self</strong></pre><pre name="413f" id="413f" class="graf graf--pre graf-after--pre">   }</pre><p name="8f09" id="8f09" class="graf graf--p graf-after--pre">當我們以 popover 方式呈現第二頁的 table controller 時，此時將自動生成 UIPopoverPresentationController 物件幫忙控制 popover。而我們可透過定義 UIPopoverPresentationControllerDelegate 的 function 控制 popover。</p><p name="4a14" id="4a14" class="graf graf--p graf-after--p">因此我們讓第一頁的 controller 遵從 protocol UIPopoverPresentationControllerDelegate，然後在 function prepare 裡利用 <code class="markup--code markup--p-code">segue.destination.popoverPresentationController</code> 讀取 UIPopoverPresentationController 物件，然後將 controller 設成它的 delegate 。</p><div name="baaf" id="baaf" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/uikit/uipopoverpresentationcontroller" data-href="https://developer.apple.com/documentation/uikit/uipopoverpresentationcontroller" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/uikit/uipopoverpresentationcontroller"><strong class="markup--strong markup--mixtapeEmbed-strong">UIPopoverPresentationController - UIKit | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">An object that manages the display of content in a popover.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/uikit/uipopoverpresentationcontroller" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="2d2a9a1fec96d4cc8271e2dac07ea111"></a></div><p name="d964" id="d964" class="graf graf--p graf-after--mixtapeEmbed">2 定義 UIPopoverPresentationControllerDelegate 的 function adaptivePresentationStyle(for:traitCollection:)</p><pre name="5ff8" id="5ff8" class="graf graf--pre graf-after--p">func adaptivePresentationStyle(for controller: UIPresentationController, traitCollection: UITraitCollection) -&gt; UIModalPresentationStyle {</pre><pre name="812c" id="812c" class="graf graf--pre graf-after--pre">   return .none</pre><pre name="572f" id="572f" class="graf graf--pre graf-after--pre">}</pre><p name="695d" id="695d" class="graf graf--p graf-after--pre">為了讓 iPhone 也能顯示 popover，我們必須在此 method 裡回傳 presentation style .none。</p><figure name="8b9c" id="8b9c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*-ZsqKotKvCSVxswRqTKvnA.jpeg" data-width="858" data-height="1470" src="https://cdn-images-1.medium.com/max/800/1*-ZsqKotKvCSVxswRqTKvnA.jpeg"></figure><blockquote name="5d00" id="5d00" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">修改 Popover 的大小</strong></blockquote><p name="4442" id="4442" class="graf graf--p graf-after--blockquote">修改 popover 顯示的 controller 的 preferredContentSize，即可控制 popover 的大小。</p><pre name="6f04" id="6f04" class="graf graf--pre graf-after--p">override func prepare(for segue: UIStoryboardSegue, sender: Any?) {</pre><pre name="1d35" id="1d35" class="graf graf--pre graf-after--pre">   segue.destination.preferredContentSize = CGSize(width: 150, height: 200)</pre><pre name="d563" id="d563" class="graf graf--pre graf-after--pre">   segue.destination.popoverPresentationController?.delegate = self</pre><pre name="184e" id="184e" class="graf graf--pre graf-after--pre">}</pre><figure name="7db6" id="7db6" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*f9VWWhXCIc_xMeaMr1zu6w.jpeg" data-width="858" data-height="1470" src="https://cdn-images-1.medium.com/max/800/1*f9VWWhXCIc_xMeaMr1zu6w.jpeg"></figure><blockquote name="d6e8" id="d6e8" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">從程式 present controller 實現 popover 的效果。</strong></blockquote><p name="d913" id="d913" class="graf graf--p graf-after--blockquote">我們也可以不透過 segue，從程式 present controller 實現 popover 的效果。</p><p name="6f29" id="6f29" class="graf graf--p graf-after--p">以 iPad App 為例:</p><pre name="e1ed" id="e1ed" class="graf graf--pre graf-after--p">@IBAction func buttonPressed(_ sender: Any) {</pre><pre name="d3d7" id="d3d7" class="graf graf--pre graf-after--pre">   if let controller = storyboard?.instantiateViewController(withIdentifier: &quot;TableViewController&quot;) {</pre><pre name="88c6" id="88c6" class="graf graf--pre graf-after--pre">     controller.modalPresentationStyle = .popover</pre><pre name="8006" id="8006" class="graf graf--pre graf-after--pre">     controller.popoverPresentationController?.barButtonItem = navigationItem.rightBarButtonItem</pre><pre name="51a9" id="51a9" class="graf graf--pre graf-after--pre">     present(controller, animated: true, completion: nil)</pre><pre name="59c7" id="59c7" class="graf graf--pre graf-after--pre">   }</pre><pre name="55e1" id="55e1" class="graf graf--pre graf-after--pre">}</pre><p name="f052" id="f052" class="graf graf--p graf-after--pre">說明:</p><p name="e655" id="e655" class="graf graf--p graf-after--p">1 controller.modalPresentationStyle = .popover</p><p name="e39d" id="e39d" class="graf graf--p graf-after--p">以 popover 的效果呈現。</p><p name="ecf4" id="ecf4" class="graf graf--p graf-after--p">2 controller.popoverPresentationController?.barButtonItem = navigationItem.rightBarButtonItem</p><p name="58d3" id="58d3" class="graf graf--p graf-after--p">讓 popover 的箭頭指到 rightBarButtonItem。</p><figure name="cfe1" id="cfe1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*cdSMAi6jxYy7qN5-hMWrUA.jpeg" data-width="1160" data-height="1506" src="https://cdn-images-1.medium.com/max/800/1*cdSMAi6jxYy7qN5-hMWrUA.jpeg"></figure><blockquote name="9306" id="9306" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">讓 popover 的箭頭指到某個特定的 view。</strong></blockquote><p name="063a" id="063a" class="graf graf--p graf-after--blockquote">剛剛我們透過 barButtonItem 指定 popover 的箭頭指到 bar 上的 button，但我們也可利用 sourceView 讓它指到某個特定的 view。</p><pre name="2b55" id="2b55" class="graf graf--pre graf-after--p">@IBAction func buttonPressed(_ sender: Any) {</pre><pre name="f445" id="f445" class="graf graf--pre graf-after--pre">   if let controller = storyboard?.instantiateViewController(withIdentifier: &quot;TableViewController&quot;) {</pre><pre name="410d" id="410d" class="graf graf--pre graf-after--pre">      controller.modalPresentationStyle = .popover</pre><pre name="a738" id="a738" class="graf graf--pre graf-after--pre">     <strong class="markup--strong markup--pre-strong"> controller.popoverPresentationController?.sourceView = eyeSwitch</strong></pre><pre name="83a8" id="83a8" class="graf graf--pre graf-after--pre">      present(controller, animated: true, completion: nil)</pre><pre name="0e4c" id="0e4c" class="graf graf--pre graf-after--pre">   }</pre><pre name="08c5" id="08c5" class="graf graf--pre graf-after--pre">}</pre><figure name="4c47" id="4c47" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*LtpuXXQrCc3EMBiX5DZBCA.jpeg" data-width="1160" data-height="1506" src="https://cdn-images-1.medium.com/max/800/1*LtpuXXQrCc3EMBiX5DZBCA.jpeg"></figure><p name="b2c2" id="b2c2" class="graf graf--p graf-after--figure">如上圖所示，現在箭頭完美地指到 switch 開關。可惜它有個小小的缺點，它指到了 switch 的左上方，因為 popover 預設會指到 sourceView 的左上方。</p><p name="7302" id="7302" class="graf graf--p graf-after--p">沒關係，只要設定 UIPopoverPresentationController 的 sourceRect，即可控制箭頭指到的位置。</p><pre name="4434" id="4434" class="graf graf--pre graf-after--p">controller.popoverPresentationController?.sourceRect = CGRect(origin: .zero, size: eyeSwitch.frame.size)</pre><figure name="5160" id="5160" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*awGh4azjd-6PurZKVu1W-w.jpeg" data-width="1160" data-height="1506" src="https://cdn-images-1.medium.com/max/800/1*awGh4azjd-6PurZKVu1W-w.jpeg"></figure><blockquote name="ae1a" id="ae1a" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">從 segue 控制 popover 箭頭指到的對象。</strong></blockquote><p name="1842" id="1842" class="graf graf--p graf-after--blockquote">從 segue 也可以設定 popover 箭頭指到的對象。如下圖所示，Anchor 欄位代表箭頭指到的對象，因此從 Anchor 右邊的空心圓圈拉線到我們希望箭頭指到的 view 即可。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="7cf8" id="7cf8" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50.264%;"><img class="graf-image" data-image-id="1*sZ-55ZV82_sou42iXUqGmQ.jpeg" data-width="516" data-height="542" src="https://cdn-images-1.medium.com/max/600/1*sZ-55ZV82_sou42iXUqGmQ.jpeg"></figure><figure name="348b" id="348b" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure graf--trailing" style="width: 49.736%;"><img class="graf-image" data-image-id="1*ilT6V5LY8yx-mq23fZ-4Rg.jpeg" data-width="522" data-height="554" src="https://cdn-images-1.medium.com/max/600/1*ilT6V5LY8yx-mq23fZ-4Rg.jpeg"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/ac196732e557"><time class="dt-published" datetime="2018-10-10T14:57:50.582Z">October 10, 2018</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%9C%A8-iphone-ipad-%E4%B8%8A%E9%A1%AF%E7%A4%BA-popover-%E5%BD%88%E5%87%BA%E8%A6%96%E7%AA%97-ac196732e557" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>