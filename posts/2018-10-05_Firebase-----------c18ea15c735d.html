<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Firebase 上傳檔案的權限問題</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Firebase 上傳檔案的權限問題</h1>
</header>
<section data-field="subtitle" class="p-summary">
開發 iOS App 時，我們可以將檔案(比方圖片，影片)上傳到 Firebase，然而為了安全考量，Firebase 對於檔案有權限的設計，不是任何人都能上傳的。關於 Firebase 的權限設定，以下連結有詳細的說明:
</section>
<section data-field="body" class="e-content">
<section name="16c1" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="5406" id="5406" class="graf graf--h3 graf--leading graf--title">Firebase 上傳檔案的權限問題</h3><p name="1daf" id="1daf" class="graf graf--p graf-after--h3">開發 iOS App 時，我們可以將檔案(比方圖片，影片)上傳到 Firebase，然而為了安全考量，Firebase 對於檔案有權限的設計，不是任何人都能上傳的。關於 Firebase 的權限設定，以下連結有詳細的說明:</p><div name="9c3a" id="9c3a" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://firebase.google.com/docs/storage/security/start?authuser=0" data-href="https://firebase.google.com/docs/storage/security/start?authuser=0" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://firebase.google.com/docs/storage/security/start?authuser=0"><strong class="markup--strong markup--mixtapeEmbed-strong">Get Started with Storage Security Rules | Firebase</strong><br><em class="markup--em markup--mixtapeEmbed-em">During development, you can use the public rules in place of the default rules to set your files publicly readable and…</em>firebase.google.com</a><a href="https://firebase.google.com/docs/storage/security/start?authuser=0" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="4b19684d054b6c55dafeef9c5ea300d9" data-thumbnail-img-id="0*A1MzRUyKPmxnXr8a" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*A1MzRUyKPmxnXr8a);"></a></div><p name="0f5c" id="0f5c" class="graf graf--p graf-after--mixtapeEmbed">比方當權限有問題時，以下上傳圖片的程式將產生錯誤。</p><pre name="ec8f" id="ec8f" class="graf graf--pre graf-after--p">@IBAction func uploadPhoto(_ sender: Any) {</pre><pre name="ada7" id="ada7" class="graf graf--pre graf-after--pre">   let image = UIImage(named: &quot;book&quot;)</pre><pre name="54f3" id="54f3" class="graf graf--pre graf-after--pre">   guard let data = image?.jpegData(compressionQuality: 0.8) else {</pre><pre name="4fc9" id="4fc9" class="graf graf--pre graf-after--pre">      return</pre><pre name="f6b1" id="f6b1" class="graf graf--pre graf-after--pre">   }</pre><pre name="a5e4" id="a5e4" class="graf graf--pre graf-after--pre">   let fileName = UUID().uuidString</pre><pre name="2703" id="2703" class="graf graf--pre graf-after--pre">   let reference = Storage.storage().reference().child(fileName)</pre><pre name="a49e" id="a49e" class="graf graf--pre graf-after--pre">   reference.putData(data, metadata: nil) { (storageMetadata, error) in</pre><pre name="c17f" id="c17f" class="graf graf--pre graf-after--pre">      if let error = error {</pre><pre name="3422" id="3422" class="graf graf--pre graf-after--pre">         print(error)</pre><pre name="76ee" id="76ee" class="graf graf--pre graf-after--pre">         return</pre><pre name="c96d" id="c96d" class="graf graf--pre graf-after--pre">      }</pre><pre name="145c" id="145c" class="graf graf--pre graf-after--pre">   }</pre><pre name="ddae" id="ddae" class="graf graf--pre graf-after--pre">}</pre><p name="6b3a" id="6b3a" class="graf graf--p graf-after--pre">錯誤訊息</p><pre name="2155" id="2155" class="graf graf--pre graf-after--p">Error Domain=FIRStorageErrorDomain Code=-13021 &quot;User does not have permission to access gs://photodemo-e004e.appspot.com/6B20F642-A8DD-495A-A3F6-FB899BA89500.&quot; UserInfo={object=6B20F642-A8DD-495A-A3F6-FB899BA89500, ResponseBody={</pre><pre name="d904" id="d904" class="graf graf--pre graf-after--pre">&quot;error&quot;: {</pre><pre name="29da" id="29da" class="graf graf--pre graf-after--pre">&quot;code&quot;: 403,</pre><pre name="8c9e" id="8c9e" class="graf graf--pre graf-after--pre">&quot;message&quot;: &quot;Permission denied. Could not perform this operation&quot;</pre><pre name="2ba6" id="2ba6" class="graf graf--pre graf-after--pre">}</pre><pre name="200c" id="200c" class="graf graf--pre graf-after--pre">}, bucket=photodemo-e004e.appspot.com, data=&lt;7b0a2020 22657272 6f72223a 207b0a20 20202022 636f6465 223a2034 30332c0a 20202020 226d6573 73616765 223a2022 5065726d 69737369 6f6e2064 656e6965 642e2043 6f756c64 206e6f74 20706572 666f726d 20746869 73206f70 65726174 696f6e22 0a20207d 0a7d&gt;, data_content_type=application/json; charset=UTF-8, NSLocalizedDescription=User does not have permission to access gs://photodemo-e004e.appspot.com/6B20F642-A8DD-495A-A3F6-FB899BA89500., ResponseErrorDomain=com.google.HTTPStatus, ResponseErrorCode=403}</pre><p name="4618" id="4618" class="graf graf--p graf-after--pre">若想知道 App 目前的 Firebase 權限設定，可從 Firebase 的 App 頁面，切換到 Storage &gt; Rules 分頁。</p><figure name="9413" id="9413" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*cFBllJ4QQPcQXNUlrnD5lQ.jpeg" data-width="2194" data-height="974" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*cFBllJ4QQPcQXNUlrnD5lQ.jpeg"></figure><p name="1f31" id="1f31" class="graf graf--p graf-after--figure">預設的權限是 <code class="markup--code markup--p-code">allow read, write: if request.auth != null;</code>，表示唯有登入 App 的使用者才能上傳。如果想要不用登入也能上傳的話，可改成 <code class="markup--code markup--p-code">allow read, write;</code>，然後點選 Publish 更新權限設定。</p><figure name="1180" id="1180" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Owyp-cD4rdefcoStq8N3jw.jpeg" data-width="832" data-height="514" src="https://cdn-images-1.medium.com/max/800/1*Owyp-cD4rdefcoStq8N3jw.jpeg"></figure><pre name="c5de" id="c5de" class="graf graf--pre graf-after--figure graf--trailing">service firebase.storage {<br>  match /b/{bucket}/o {<br>    match /{allPaths=**} {<br>      allow read, write;<br>    }<br>  }<br>}</pre></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/c18ea15c735d"><time class="dt-published" datetime="2018-10-05T08:32:48.417Z">October 5, 2018</time></a>.</p><p><a href="https://medium.com/@apppeterpan/firebase-%E4%B8%8A%E5%82%B3%E6%AA%94%E6%A1%88%E7%9A%84%E6%AC%8A%E9%99%90%E5%95%8F%E9%A1%8C-c18ea15c735d" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>