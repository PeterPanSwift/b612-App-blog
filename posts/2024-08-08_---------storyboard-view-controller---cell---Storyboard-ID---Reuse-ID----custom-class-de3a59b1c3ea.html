<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>透過自動化程式將 storyboard view controller / cell 的 Storyboard ID / Reuse ID 設為 custom class</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">透過自動化程式將 storyboard view controller / cell 的 Storyboard ID / Reuse ID 設為 custom class</h1>
</header>
<section data-field="subtitle" class="p-summary">
使用 storyboard 開發 iOS App 時，我們常常會設定 view controller 和 cell 的 ID，將 view controller 的 Storyboard ID 設為 controller 的類別，將 cell 的 Reuse ID 設為…
</section>
<section data-field="body" class="e-content">
<section name="dfbc" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="de26" id="de26" class="graf graf--h3 graf--leading graf--title">透過自動化程式將 storyboard view controller / cell 的 Storyboard ID / Reuse ID 設為 custom class</h3><p name="4f70" id="4f70" class="graf graf--p graf-after--h3">使用 storyboard 開發 iOS App 時，我們常常會設定 view controller 和 cell 的 ID，將 view controller 的 Storyboard ID 設為 controller 的類別，將 cell 的 Reuse ID 設為 cell 的類別。</p><p name="2ef5" id="2ef5" class="graf graf--p graf-after--p">將 Storyboard ID / Reuse ID 設為 custom class 是滿制式的動作，因此我們可以寫個自動化程式設定，減少人工設定的錯誤。</p><p name="f26a" id="f26a" class="graf graf--p graf-after--p">以下是彼得潘請 AI 幫忙實現的自動化程式，它會解析 storyboard，找出搭配 custom class 的 view controller 和 cell，將 Storyboard ID / Reuse ID 設為 custom class。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python" name="1d5f" id="1d5f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> os<br /><span class="hljs-keyword">import</span> argparse<br /><span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> etree<br /><br /><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_ids_for_storyboard</span>(<span class="hljs-params">file_path</span>):<br />    <span class="hljs-comment"># 讀取並解析 storyboard 文件</span><br />    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br />        storyboard = file.read()<br />    <br />    tree = etree.fromstring(storyboard.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br /><br />    <span class="hljs-comment"># 設定 View Controllers 的 Storyboard ID</span><br />    <span class="hljs-keyword">for</span> vc <span class="hljs-keyword">in</span> tree.xpath(<span class="hljs-string">&quot;//viewController[@customClass]&quot;</span>):<br />        custom_class = vc.get(<span class="hljs-string">&quot;customClass&quot;</span>)<br />        storyboard_id = custom_class<br />        vc.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;storyboardIdentifier&quot;</span>, storyboard_id)<br /><br />    <span class="hljs-comment"># 設定 Collection View Controllers 的 Storyboard ID</span><br />    <span class="hljs-keyword">for</span> vc <span class="hljs-keyword">in</span> tree.xpath(<span class="hljs-string">&quot;//collectionViewController[@customClass]&quot;</span>):<br />        custom_class = vc.get(<span class="hljs-string">&quot;customClass&quot;</span>)<br />        storyboard_id = custom_class<br />        vc.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;storyboardIdentifier&quot;</span>, storyboard_id)<br /><br />    <span class="hljs-comment"># 設定 Table View Controllers 的 Storyboard ID</span><br />    <span class="hljs-keyword">for</span> vc <span class="hljs-keyword">in</span> tree.xpath(<span class="hljs-string">&quot;//tableViewController[@customClass]&quot;</span>):<br />        custom_class = vc.get(<span class="hljs-string">&quot;customClass&quot;</span>)<br />        storyboard_id = custom_class<br />        vc.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;storyboardIdentifier&quot;</span>, storyboard_id)<br /><br />    <span class="hljs-comment"># 設定 Table View Cells 的 Reuse ID</span><br />    <span class="hljs-keyword">for</span> cell <span class="hljs-keyword">in</span> tree.xpath(<span class="hljs-string">&quot;//tableViewCell[@customClass]&quot;</span>):<br />        custom_class = cell.get(<span class="hljs-string">&quot;customClass&quot;</span>)<br />        reuse_id = custom_class<br />        cell.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;reuseIdentifier&quot;</span>, reuse_id)<br />    <br />    <span class="hljs-comment"># 設定 Collection View Cells 的 Reuse ID</span><br />    <span class="hljs-keyword">for</span> cell <span class="hljs-keyword">in</span> tree.xpath(<span class="hljs-string">&quot;//collectionViewCell[@customClass]&quot;</span>):<br />        custom_class = cell.get(<span class="hljs-string">&quot;customClass&quot;</span>)<br />        reuse_id = custom_class<br />        cell.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;reuseIdentifier&quot;</span>, reuse_id)<br /><br />    <span class="hljs-comment"># 將修改後的內容寫回 storyboard 文件</span><br />    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> file:<br />        file.write(etree.tostring(tree, pretty_print=<span class="hljs-literal">True</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br /><br /><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_storyboards_in_directory</span>(<span class="hljs-params">directory</span>):<br />    <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> os.listdir(directory):<br />        <span class="hljs-keyword">if</span> filename.endswith(<span class="hljs-string">&quot;.storyboard&quot;</span>):<br />            file_path = os.path.join(directory, filename)<br />            set_ids_for_storyboard(file_path)<br />            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Processed <span class="hljs-subst">{filename}</span>&quot;</span>)<br /><br /><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br />    parser = argparse.ArgumentParser(description=<span class="hljs-string">&#x27;Set storyboard and reuse IDs in storyboard files.&#x27;</span>)<br />    parser.add_argument(<span class="hljs-string">&#x27;storyboard_directory&#x27;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">str</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;Path to the directory containing storyboard files&#x27;</span>)<br />    args = parser.parse_args()<br />    <br />    process_storyboards_in_directory(args.storyboard_directory)<br /><br /><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br />    main()</span></pre><p name="0a4d" id="0a4d" class="graf graf--p graf-after--pre">以下圖的 storyboard 為例，畫面裡包含了 MovieViewController、MovieTableViewController、MovieTableViewCell、MovieCollectionViewController、MovieCollectionViewCell。</p><figure name="ee3d" id="ee3d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Hiwtiye0n-JATO0mCSsObw.png" data-width="1566" data-height="814" src="https://cdn-images-1.medium.com/max/800/1*Hiwtiye0n-JATO0mCSsObw.png"></figure><figure name="187e" id="187e" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*iZqPesi0aJugj_BjmuBZkA.png" data-width="548" data-height="892" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*iZqPesi0aJugj_BjmuBZkA.png"></figure><figure name="d4a6" id="d4a6" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*VyKww6E_yqNXdYyM30RL7A.png" data-width="638" data-height="744" src="https://cdn-images-1.medium.com/max/800/1*VyKww6E_yqNXdYyM30RL7A.png"></figure><p name="9312" id="9312" class="graf graf--p graf-after--figure">從 terminal 輸入指令執行設定 id 的自動化程式，參數 <code class="markup--code markup--p-code">~/Desktop/Demo/Demo/Base.lproj</code> 是 storyboard 所在的路徑。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="javascript" name="6024" id="6024" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">python3 setId.<span class="hljs-property">py</span> ~<span class="hljs-regexp">/Desktop/</span><span class="hljs-title class_">Demo</span>/<span class="hljs-title class_">Demo</span>/<span class="hljs-title class_">Base</span>.<span class="hljs-property">lproj</span></span></pre><p name="e37f" id="e37f" class="graf graf--p graf-after--pre">回到 Xcode 查看 Main.storyboard，view controller 和 cell 的 Storyboard ID / Reuse ID 欄位都完美地自動填入了 custom class。</p><figure name="21c1" id="21c1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*uypWwf02ApyB-1Ud_jgbKg.png" data-width="524" data-height="392" src="https://cdn-images-1.medium.com/max/800/1*uypWwf02ApyB-1Ud_jgbKg.png"></figure><figure name="2342" id="2342" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*1Jt86dKARE4emT5fIlvvaw.png" data-width="646" data-height="384" src="https://cdn-images-1.medium.com/max/800/1*1Jt86dKARE4emT5fIlvvaw.png"></figure><figure name="1583" id="1583" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*FkLTiUXXVMk6GYZkHM4ePA.png" data-width="642" data-height="280" src="https://cdn-images-1.medium.com/max/800/1*FkLTiUXXVMk6GYZkHM4ePA.png"></figure><figure name="ee19" id="ee19" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*0Bw63P26h1MqeP3ezQSFDw.png" data-width="648" data-height="382" src="https://cdn-images-1.medium.com/max/800/1*0Bw63P26h1MqeP3ezQSFDw.png"></figure><figure name="f37d" id="f37d" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*Deq54X9QJNY-P1CRFrQyIQ.png" data-width="646" data-height="226" src="https://cdn-images-1.medium.com/max/800/1*Deq54X9QJNY-P1CRFrQyIQ.png"></figure><h3 name="8d99" id="8d99" class="graf graf--h3 graf-after--figure">用 Self.self 定義 controller 的 storyboard id &amp; cell 的 reuse id</h3><p name="9a1d" id="9a1d" class="graf graf--p graf-after--h3">之後在程式裡輸入 Storyboard ID / Reuse ID 時，可以另外用 Self.self 定義 controller 的 storyboard id &amp; cell 的 reuse id，降低打錯 id 的機率。</p><div name="44e3" id="44e3" class="graf graf--mixtapeEmbed graf-after--p graf--trailing"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%94%A8-self-self-%E5%AE%9A%E7%BE%A9-controller-%E7%9A%84-storyboard-id-cell-%E7%9A%84-reuse-id-1e5fc5cf9651" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%94%A8-self-self-%E5%AE%9A%E7%BE%A9-controller-%E7%9A%84-storyboard-id-cell-%E7%9A%84-reuse-id-1e5fc5cf9651" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%94%A8-self-self-%E5%AE%9A%E7%BE%A9-controller-%E7%9A%84-storyboard-id-cell-%E7%9A%84-reuse-id-1e5fc5cf9651"><strong class="markup--strong markup--mixtapeEmbed-strong">用 Self.self 定義 controller 的 storyboard id &amp; cell 的 reuse id</strong><br><em class="markup--em markup--mixtapeEmbed-em">從程式生成 storyboard 裡設計的 view controller &amp; cell 時，必須指定 controller 的 storyboard id 和 cell 的 reuse id。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%94%A8-self-self-%E5%AE%9A%E7%BE%A9-controller-%E7%9A%84-storyboard-id-cell-%E7%9A%84-reuse-id-1e5fc5cf9651" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="6801b9c75d3dbe6063415e452052ac34" data-thumbnail-img-id="1*WcLxFtKSIvC9g7c8wW4Pog.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*WcLxFtKSIvC9g7c8wW4Pog.png);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/de3a59b1c3ea"><time class="dt-published" datetime="2024-08-08T09:19:45.904Z">August 8, 2024</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E9%80%8F%E9%81%8E%E8%87%AA%E5%8B%95%E5%8C%96%E7%A8%8B%E5%BC%8F%E5%B0%87-storyboard-view-controller-cell-%E7%9A%84-storyboard-id-reuse-id-%E8%A8%AD%E7%82%BA-custom-class-de3a59b1c3ea" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>