<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>用狀態設計 SwiftUI 畫面 — 認識 State property</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">用狀態設計 SwiftUI 畫面 — 認識 State property</h1>
</header>
<section data-field="subtitle" class="p-summary">
SwiftUI 用狀態決定如何顯示和更新畫面，因此它的很多 UI 元件都跟狀態有關。接下來我們就以下雨時顯示孫燕姿的壞天氣，放晴時顯示盧廣仲的我愛你歌詞為例，說明狀態如何深深影響著 SwiftUI 的畫面。
</section>
<section data-field="body" class="e-content">
<section name="e54e" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="bfa5" id="bfa5" class="graf graf--h3 graf--leading graf--title">用狀態設計 SwiftUI 畫面 — 認識 State property</h3><p name="35f1" id="35f1" class="graf graf--p graf-after--h3">SwiftUI 用狀態決定如何顯示和更新畫面，它的很多 UI 元件都跟狀態有關，幫助我們開發 App 時更容易實現資料和畫面的同步。接下來我們就以下雨時顯示孫燕姿的壞天氣，放晴時顯示盧廣仲的我愛你歌詞為例，說明狀態如何深深影響著 SwiftUI 的畫面。</p><figure name="437c" id="437c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*9qBHpwPkUeCYiMaCt7nNXA.png" data-width="748" data-height="730" src="https://cdn-images-1.medium.com/max/800/1*9qBHpwPkUeCYiMaCt7nNXA.png"></figure><h3 name="49f5" id="49f5" class="graf graf--h3 graf-after--figure">設計 App 畫面</h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="22b5" id="22b5" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">var</span> isRain <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-keyword">if</span> isRain {<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;cloud.rain.fill&quot;</span>)<br />                    .resizable()<br />                    .frame(width: <span class="hljs-number">100</span>, height: <span class="hljs-number">100</span>)<br />                <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;我們淋著大雨不知何時才能放晴&quot;</span>)<br />            } <span class="hljs-keyword">else</span> {<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;sun.max.fill&quot;</span>)<br />                    .resizable()<br />                    .frame(width: <span class="hljs-number">100</span>, height: <span class="hljs-number">100</span>)<br />                <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;太陽公公出來了，他對我呀笑呀笑&quot;</span>)<br />            }<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;今天天氣如何 ?&quot;</span>) {<br />                <br />            }<br />        }<br />    }<br />}</span></pre><p name="9c5e" id="9c5e" class="graf graf--p graf-after--pre">說明。</p><ul class="postList"><li name="2b12" id="2b12" class="graf graf--li graf-after--p">宣告型別 Bool 的變數 isRain 判斷是否下雨，利用它決定要顯示的圖片和文字。</li><li name="08f4" id="08f4" class="graf graf--li graf-after--li">點擊 button 將決定今天是否下雨。</li></ul><figure name="854b" id="854b" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*eK8jOzr1H4hA2apLtt_AYg.png" data-width="1339" data-height="2716" src="https://cdn-images-1.medium.com/max/800/1*eK8jOzr1H4hA2apLtt_AYg.png"></figure><h3 name="16df" id="16df" class="graf graf--h3 graf-after--figure">將 if else 改成 ? : (ternary conditional operator)</h3><p name="d351" id="d351" class="graf graf--p graf-after--h3">實作點擊 button 決定是否下雨前，我們先將程式改成 ? : 的寫法。SwiftUI 的程式經常使用 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">?:</strong></code><strong class="markup--strong markup--p-strong"> </strong>來讓程式變得更精簡。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="a054" id="a054" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">var</span> isRain <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Image</span>(systemName: isRain <span class="hljs-operator">?</span> <span class="hljs-string">&quot;cloud.rain.fill&quot;</span> : <span class="hljs-string">&quot;sun.max.fill&quot;</span>)<br />                .resizable()<br />                .frame(width: <span class="hljs-number">100</span>, height: <span class="hljs-number">100</span>)<br />            <span class="hljs-type">Text</span>(isRain <span class="hljs-operator">?</span> <span class="hljs-string">&quot;我們淋著大雨不知何時才能放晴&quot;</span> : <span class="hljs-string">&quot;太陽公公出來了，他對我呀笑呀笑&quot;</span>)<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;今天天氣如何 ?&quot;</span>) {<br />                <br />            }<br />        }<br />    }<br />}</span></pre><div name="b40f" id="b40f" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%90%AD%E9%85%8D-ternary-conditional-operator-%E8%A8%AD%E5%AE%9A%E5%85%A7%E5%AE%B9%E6%88%96%E5%91%BC%E5%8F%AB-modifier-f286f4dd8b76" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%90%AD%E9%85%8D-ternary-conditional-operator-%E8%A8%AD%E5%AE%9A%E5%85%A7%E5%AE%B9%E6%88%96%E5%91%BC%E5%8F%AB-modifier-f286f4dd8b76" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%90%AD%E9%85%8D-ternary-conditional-operator-%E8%A8%AD%E5%AE%9A%E5%85%A7%E5%AE%B9%E6%88%96%E5%91%BC%E5%8F%AB-modifier-f286f4dd8b76"><strong class="markup--strong markup--mixtapeEmbed-strong">搭配 ?:(ternary conditional operator) 設定內容或呼叫 modifier</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 SwiftUI App 時，我們時常使用 ? : ( ternary conditional operator) 設定內容或呼叫 modifier，它可以讓程式變得更精簡易懂。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%90%AD%E9%85%8D-ternary-conditional-operator-%E8%A8%AD%E5%AE%9A%E5%85%A7%E5%AE%B9%E6%88%96%E5%91%BC%E5%8F%AB-modifier-f286f4dd8b76" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="927e36aadb5e834b4915ed0d381822f4" data-thumbnail-img-id="1*EamRKii646_UsyHSoPuu5A.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*EamRKii646_UsyHSoPuu5A.jpeg);"></a></div><h3 name="4421" id="4421" class="graf graf--h3 graf-after--mixtapeEmbed">透過 random 決定是否下雨</h3><p name="8d1d" id="8d1d" class="graf graf--p graf-after--h3">在 button 點選執行的 closure 裡透過 random 決定是否下雨。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="bb57" id="bb57" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">Button</span>(<span class="hljs-string">&quot;今天天氣如何 ?&quot;</span>) {<br />    isRain <span class="hljs-operator">=</span> .random()<br />}</span></pre><p name="9690" id="9690" class="graf graf--p graf-after--pre">此時將馬上產生紅色錯誤，Cannot assign to property: self is immutable。</p><figure name="7a4f" id="7a4f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*iCF_XGwWJc2ajoxB1EaM2Q.png" data-width="1384" data-height="322" src="https://cdn-images-1.medium.com/max/800/1*iCF_XGwWJc2ajoxB1EaM2Q.png"></figure><figure name="0272" id="0272" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="0*afunlSbJzmQcSNl0" data-width="1536" data-height="1024" src="https://cdn-images-1.medium.com/max/800/0*afunlSbJzmQcSNl0"><figcaption class="imageCaption">請 AI 繪製福爾摩斯說明 isRain 不能改</figcaption></figure><p name="5f1d" id="5f1d" class="graf graf--p graf-after--figure">為什麼會錯呢 ? 因為 SwiftUI 的 view 通常以 struct 定義，就像剛剛的 struct ContentView。而 struct 是 value type，因此我們無法在 computed property 的 getter &amp; function 裡修改 stored property。就像以下的 Baby 以 struct 定義，function getOlder 修改 property age 將產生類似的錯誤。(註: 不過我們可在加了 mutating 的 function 和 computed property 的 setter 修改 stored property。)</p><figure name="443c" id="443c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*WSts__rMjKrIcRzHg-LX5Q.jpeg" data-width="1192" data-height="456" src="https://cdn-images-1.medium.com/max/800/1*WSts__rMjKrIcRzHg-LX5Q.jpeg"></figure><div name="995e" id="995e" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E7%9A%84-value-type-%E5%92%8C-reference-type-25f9ae9f54b6" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E7%9A%84-value-type-%E5%92%8C-reference-type-25f9ae9f54b6" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E7%9A%84-value-type-%E5%92%8C-reference-type-25f9ae9f54b6"><strong class="markup--strong markup--mixtapeEmbed-strong">Swift 的 value type 和 reference type</strong><br><em class="markup--em markup--mixtapeEmbed-em">在 Swift 裡，型別分成 value type 和 reference type。struct，enum 和 tuple 是 value type，而 class，function 和 closure 則是 reference…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E7%9A%84-value-type-%E5%92%8C-reference-type-25f9ae9f54b6" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="d99a1c43a3ed7199255034adb36ba6e6" data-thumbnail-img-id="1*W0rOj2kHnb7mqwC_2bennQ.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*W0rOj2kHnb7mqwC_2bennQ.jpeg);"></a></div><h3 name="2aef" id="2aef" class="graf graf--h3 graf-after--mixtapeEmbed">以 @State 宣告可改變的 property</h3><p name="66d3" id="66d3" class="graf graf--p graf-after--h3">在 property isRain 前加上 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">@State</strong></code> ，即可修正剛剛的錯誤。(註: 一般我們宣告 @State property 時會再加上 private，讓程式更安全，表示我們只會在定義它的型別裡存取它。)</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="afba" id="afba" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isRain <span class="hljs-operator">=</span> <span class="hljs-literal">true</span></span></pre><p name="3c55" id="3c55" class="graf graf--p graf-after--pre">因此在 SwiftUI view 型別的定義裡，若想讓它的 property 能夠改變，不只要以 var 宣告成變數，還要記得加上 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">@State</strong></code>。</p><figure name="824e" id="824e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ba5aE2HYNpyxBClu7CfRAw.jpeg" data-width="1334" data-height="938" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*ba5aE2HYNpyxBClu7CfRAw.jpeg"></figure><p name="674d" id="674d" class="graf graf--p graf-after--figure">加了<strong class="markup--strong markup--p-strong"> </strong><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">@State</strong></code><strong class="markup--strong markup--p-strong"> </strong>後，除了變數可以改變，還會有神奇的副作用，每當我們點選 button，觸發 button 的 closure 程式修改 isRain 時，畫面也會更新顯示目前的天氣內容。</p><p name="f943" id="f943" class="graf graf--p graf-after--p">當我們在 ContentView 的 property 前加上 @State 時，SwiftUI 將認為此 property 代表某種影響畫面內容的狀態。當狀態改變時，畫面將馬上更新，重新生成 body 裡受 state property 影響的元件。</p><figure name="96a9" id="96a9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*PwIlLGB8jjM7sf3TRcJ2mQ.jpeg" data-width="1522" data-height="666" src="https://cdn-images-1.medium.com/max/800/1*PwIlLGB8jjM7sf3TRcJ2mQ.jpeg"></figure><p name="d21a" id="d21a" class="graf graf--p graf-after--figure"><code class="markup--code markup--p-code">@State private var isRain = true</code> 表示是否下雨的狀態，當我們在 button 點選時透過 <code class="markup--code markup--p-code">isRain = .random() </code>修改它時， computed property body 的程式將重新執行產生新的畫面，顯示晴天或雨天的圖片文字。</p><p name="bfd7" id="bfd7" class="graf graf--p graf-after--p">以 @State 宣告的 property 有個重要的特性，只要它的內容改變，畫面也會立即更新。它帶來了以下兩個好處。</p><ul class="postList"><li name="a243" id="a243" class="graf graf--li graf-after--p">不用另外寫 property 內容改變時更新畫面的程式。</li><li name="20ea" id="20ea" class="graf graf--li graf-after--li">不用擔心畫面顯示的內容跟 property 的內容不同步，比方修改了 property，但卻忘了更新畫面。</li></ul><p name="01b0" id="01b0" class="graf graf--p graf-after--li">也許有人好奇，以 struct 定義的 ContentView 是 value type，為何加了 @State 就能修改它的 property ? 這是因為加了 @State 後，SwiftUI 將在背後另外產生空間儲存 property 的內容，它不再儲存在 ContentView 裡，因此我們可以修改它的內容。</p><figure name="6511" id="6511" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*uZQ5Z6mi35cYccjz7-e-xQ.jpeg" data-width="1008" data-height="746" src="https://cdn-images-1.medium.com/max/800/1*uZQ5Z6mi35cYccjz7-e-xQ.jpeg"><figcaption class="imageCaption">isRain 儲存在獨立的空間，不屬於 ContentView</figcaption></figure><p name="ae29" id="ae29" class="graf graf--p graf-after--figure">ps: @State 實現的機制跟 Swift 的 property wrapper 有關，有興趣的朋友也可參考以下連結的說明。</p><div name="c48c" id="c48c" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/properties/#Property-Wrappers" data-href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/properties/#Property-Wrappers" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/properties/#Property-Wrappers"><strong class="markup--strong markup--mixtapeEmbed-strong">Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Copyright © 2014-2023 Apple Inc. and the Swift project authors. All rights reserved.</em>docs.swift.org</a><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/properties/#Property-Wrappers" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="eaa51fa29b63cd9a96973cdcfb11252f"></a></div><h3 name="617a" id="617a" class="graf graf--h3 graf-after--mixtapeEmbed">完整程式</h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="9eb3" id="9eb3" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isRain <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Image</span>(systemName: isRain <span class="hljs-operator">?</span> <span class="hljs-string">&quot;cloud.rain.fill&quot;</span> : <span class="hljs-string">&quot;sun.max.fill&quot;</span>)<br />                .resizable()<br />                .frame(width: <span class="hljs-number">100</span>, height: <span class="hljs-number">100</span>)<br />            <span class="hljs-type">Text</span>(isRain <span class="hljs-operator">?</span> <span class="hljs-string">&quot;我們淋著大雨不知何時才能放晴&quot;</span> : <span class="hljs-string">&quot;太陽公公出來了，他對我呀笑呀笑&quot;</span>)<br />            <br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;今天天氣如何 ?&quot;</span>) {<br />                isRain <span class="hljs-operator">=</span> .random()<br />            }<br />        }<br />    }<br />}</span></pre><p name="0684" id="0684" class="graf graf--p graf-after--pre">現在可以開始測試 App 了。當我們點選今天天氣如何，isRain 將隨機變成 true 或 false，當它為 true 時畫面將顯示雨天，false 時畫面將顯示晴天。</p><figure name="2ba9" id="2ba9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*QWyOwDPVPipaTdP3Rwpp2A.png" data-width="1210" data-height="1192" src="https://cdn-images-1.medium.com/max/800/1*QWyOwDPVPipaTdP3Rwpp2A.png"></figure><h3 name="cc11" id="cc11" class="graf graf--h3 graf-after--figure">以狀態設計 SwiftUI App</h3><p name="4226" id="4226" class="graf graf--p graf-after--h3">了解 SwiftUI state 的作用後，我們未來設計 SwiftUI 畫面時，可以試著多用狀態的角度設計畫面，思考畫面會有哪些狀態以及每個狀態呈現的模樣，將內容影響畫面的變數常數加上 @State，讓資料和畫面自動保持同步。</p><h3 name="597a" id="597a" class="graf graf--h3 graf-after--p">練習: 結合圖片、文字、button 的 SwiftUI State 練習題</h3><div name="138d" id="138d" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/225-%E7%B5%90%E5%90%88%E5%9C%96%E7%89%87-%E6%96%87%E5%AD%97-button-%E7%9A%84-swiftui-state-%E7%B7%B4%E7%BF%92%E9%A1%8C-3cd0ca2b194d" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/225-%E7%B5%90%E5%90%88%E5%9C%96%E7%89%87-%E6%96%87%E5%AD%97-button-%E7%9A%84-swiftui-state-%E7%B7%B4%E7%BF%92%E9%A1%8C-3cd0ca2b194d" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/225-%E7%B5%90%E5%90%88%E5%9C%96%E7%89%87-%E6%96%87%E5%AD%97-button-%E7%9A%84-swiftui-state-%E7%B7%B4%E7%BF%92%E9%A1%8C-3cd0ca2b194d"><strong class="markup--strong markup--mixtapeEmbed-strong">#225 結合圖片、文字、button 的 SwiftUI State 練習題</strong><br><em class="markup--em markup--mixtapeEmbed-em">點餅乾遊戲(計數器)。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/225-%E7%B5%90%E5%90%88%E5%9C%96%E7%89%87-%E6%96%87%E5%AD%97-button-%E7%9A%84-swiftui-state-%E7%B7%B4%E7%BF%92%E9%A1%8C-3cd0ca2b194d" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="5c77329a682b0de79779ba877f20bd0b"></a></div><h3 name="af4f" id="af4f" class="graf graf--h3 graf-after--mixtapeEmbed">視情況聰明更新的 SwiftUI body</h3><p name="eadc" id="eadc" class="graf graf--p graf-after--h3">也許有人會擔心，當畫面比較複雜時，property body 裡將生成很多 UI 元件，如果常常更新重新執行 body 裡的程式，豈不是會大大影響 App 的效能 ？</p><p name="34c2" id="34c2" class="graf graf--p graf-after--p">其實 SwiftUI 是很聰明的，它會判斷此次更新將影響哪些元件，只會重新產生那些受影響的元件，相關說明可參考以下連結。</p><div name="e9c8" id="e9c8" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%A6%96%E6%83%85%E6%B3%81%E8%81%B0%E6%98%8E%E6%9B%B4%E6%96%B0%E7%9A%84-swiftui-body-6069f447bdbf" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%A6%96%E6%83%85%E6%B3%81%E8%81%B0%E6%98%8E%E6%9B%B4%E6%96%B0%E7%9A%84-swiftui-body-6069f447bdbf" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%A6%96%E6%83%85%E6%B3%81%E8%81%B0%E6%98%8E%E6%9B%B4%E6%96%B0%E7%9A%84-swiftui-body-6069f447bdbf"><strong class="markup--strong markup--mixtapeEmbed-strong">視情況聰明更新的 SwiftUI body</strong><br><em class="markup--em markup--mixtapeEmbed-em">SwiftUI 用狀態決定如何顯示和更新畫面，當我們在 property 前加上 @State 時，SwiftUI 將認為此 property 代表某種影響畫面內容的狀態。當狀態改變時，畫面將馬上更新，重新生成 body…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%A6%96%E6%83%85%E6%B3%81%E8%81%B0%E6%98%8E%E6%9B%B4%E6%96%B0%E7%9A%84-swiftui-body-6069f447bdbf" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a57e8ab803e9fa92b0e7728f7a5f645c" data-thumbnail-img-id="1*TaZ5Tdr9SUvMRc0bfIh__w.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*TaZ5Tdr9SUvMRc0bfIh__w.jpeg);"></a></div><p name="420a" id="420a" class="graf graf--p graf-after--mixtapeEmbed">SwiftUI <a href="http://twitter.com/State" data-href="http://twitter.com/State" class="markup--anchor markup--p-anchor" title="Twitter profile for @State" rel="noopener" target="_blank">@State</a> 的進階解析</p><div name="b17c" id="b17c" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-state-%E7%9A%84%E9%80%B2%E9%9A%8E%E8%A7%A3%E6%9E%90-6e98cb1dc87a" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-state-%E7%9A%84%E9%80%B2%E9%9A%8E%E8%A7%A3%E6%9E%90-6e98cb1dc87a" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-state-%E7%9A%84%E9%80%B2%E9%9A%8E%E8%A7%A3%E6%9E%90-6e98cb1dc87a"><strong class="markup--strong markup--mixtapeEmbed-strong">SwiftUI @State 的進階解析</strong><br><em class="markup--em markup--mixtapeEmbed-em">在之前的文章裡，我們認識了 SwiftUI @State 的基本用法，接下來讓我們認識更多關於 @State 的故事。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-state-%E7%9A%84%E9%80%B2%E9%9A%8E%E8%A7%A3%E6%9E%90-6e98cb1dc87a" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="9c9b86c70376a688e2f84ee6a4221418" data-thumbnail-img-id="1*7-lR9W2qkXGrepyycTf9Cg.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*7-lR9W2qkXGrepyycTf9Cg.png);"></a></div><p name="f926" id="f926" class="graf graf--p graf-after--mixtapeEmbed">影響 SwiftUI 畫面更新的 Equatable &amp; function ==</p><div name="7990" id="7990" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%BD%B1%E9%9F%BF-swiftui-%E7%95%AB%E9%9D%A2%E6%9B%B4%E6%96%B0%E7%9A%84-equatable-function-41fcf92ae943" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%BD%B1%E9%9F%BF-swiftui-%E7%95%AB%E9%9D%A2%E6%9B%B4%E6%96%B0%E7%9A%84-equatable-function-41fcf92ae943" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%BD%B1%E9%9F%BF-swiftui-%E7%95%AB%E9%9D%A2%E6%9B%B4%E6%96%B0%E7%9A%84-equatable-function-41fcf92ae943"><strong class="markup--strong markup--mixtapeEmbed-strong">影響 SwiftUI 畫面更新的 Equatable &amp; function ==</strong><br><em class="markup--em markup--mixtapeEmbed-em">資料改變時即時更新畫面是 SwiftUI 十分方便的功能，不過當我們自訂判斷資料是否相等的 function == 時，卻可能會遇到問題。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%BD%B1%E9%9F%BF-swiftui-%E7%95%AB%E9%9D%A2%E6%9B%B4%E6%96%B0%E7%9A%84-equatable-function-41fcf92ae943" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a00390dc3651e8af5b8d68c790986d69" data-thumbnail-img-id="1*9HS--DfGBZvQaIesMniXcA.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*9HS--DfGBZvQaIesMniXcA.png);"></a></div><h3 name="6797" id="6797" class="graf graf--h3 graf-after--mixtapeEmbed">SwiftUI 參考資料來源的 Binding</h3><div name="3345" id="3345" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90%E7%9A%84-binding-ab9ab1b9bcd6" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90%E7%9A%84-binding-ab9ab1b9bcd6" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90%E7%9A%84-binding-ab9ab1b9bcd6"><strong class="markup--strong markup--mixtapeEmbed-strong">SwiftUI 參考資料來源的 Binding</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 SwiftUI App，為了實現單一資料來源，避免資料不同步的問題，我們時常使用 Binding 參考資料來源。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90%E7%9A%84-binding-ab9ab1b9bcd6" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="4fa2f91f7eb854dd9cf7d99b235a4483" data-thumbnail-img-id="1*MKS17eSLBTdROrFNvfMC_g.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*MKS17eSLBTdROrFNvfMC_g.png);"></a></div><h3 name="f181" id="f181" class="graf graf--h3 graf-after--mixtapeEmbed">SwiftUI 綁定資料的 Binding 元件</h3><div name="955c" id="955c" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0-view-model-%E7%9A%84-binding-%E6%A9%9F%E5%88%B6-2f175d29ce6c" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0-view-model-%E7%9A%84-binding-%E6%A9%9F%E5%88%B6-2f175d29ce6c" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0-view-model-%E7%9A%84-binding-%E6%A9%9F%E5%88%B6-2f175d29ce6c"><strong class="markup--strong markup--mixtapeEmbed-strong">SwiftUI 綁定資料的 Binding 元件</strong><br><em class="markup--em markup--mixtapeEmbed-em">透過 state property 我們可以在資料修改時自動更新畫面，不過 SwiftUI 還有更厲害的 binding 機制，它可以在 view 修改時自動更新資料。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0-view-model-%E7%9A%84-binding-%E6%A9%9F%E5%88%B6-2f175d29ce6c" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="f42bcd9825e849cfbbb5fac1f0d1686b" data-thumbnail-img-id="1*CnV1SLSijpzaBKNr9NTQTQ.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*CnV1SLSijpzaBKNr9NTQTQ.jpeg);"></a></div><h3 name="0fef" id="0fef" class="graf graf--h3 graf-after--mixtapeEmbed">參考連結</h3><div name="fdbf" id="fdbf" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://developer.apple.com/documentation/swiftui/model-data" data-href="https://developer.apple.com/documentation/swiftui/model-data" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/model-data"><strong class="markup--strong markup--mixtapeEmbed-strong">Model data | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Manage the data that your app uses to drive its interface.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/model-data" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="3c5a876dda3c6fda8fdff661390a62ce" data-thumbnail-img-id="0*vBLQ8BwQbitIluAZ" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*vBLQ8BwQbitIluAZ);"></a></div><div name="bfa8" id="bfa8" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://developer.apple.com/documentation/swiftui/state" data-href="https://developer.apple.com/documentation/swiftui/state" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/state"><strong class="markup--strong markup--mixtapeEmbed-strong">State | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">A property wrapper type that can read and write a value managed by SwiftUI.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/state" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="4b6133c25e738a5bfe525fa41b175e8c" data-thumbnail-img-id="0*SPDjk4z00oryF9vM" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*SPDjk4z00oryF9vM);"></a></div><figure name="456a" id="456a" class="graf graf--figure graf--iframe graf-after--mixtapeEmbed"><iframe src="https://www.youtube.com/embed/CFqHIgPsrl8?feature=oembed" width="640" height="480" frameborder="0" scrolling="no"></iframe></figure><figure name="63c8" id="63c8" class="graf graf--figure graf--iframe graf-after--figure graf--trailing"><iframe src="https://www.youtube.com/embed/YoA2YbbG1EQ?feature=oembed" width="640" height="480" frameborder="0" scrolling="no"></iframe></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/27fea6885ead"><time class="dt-published" datetime="2019-07-31T09:21:58.901Z">July 31, 2019</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E7%94%A8%E7%8B%80%E6%85%8B%E8%A8%AD%E8%A8%88-swiftui-%E7%95%AB%E9%9D%A2-%E8%AA%8D%E8%AD%98-state-property-binding-27fea6885ead" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>