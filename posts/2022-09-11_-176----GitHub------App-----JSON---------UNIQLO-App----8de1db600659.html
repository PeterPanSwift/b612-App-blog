<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>#176 使用 GitHub 存放方便 App 讀取的 JSON &amp; 圖片 — 以UNIQLO App 為例</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">#176 使用 GitHub 存放方便 App 讀取的 JSON &amp; 圖片 — 以UNIQLO App 為例</h1>
</header>
<section data-field="subtitle" class="p-summary">
開發 iOS App 時，我們時常需要連線到後台抓取 JSON 資料。然而如果資料都由後台產生，不是由使用者生成，其實可以將  JSON 資料和圖片存在免費的 GitHub，然後再從 iOS App 連線讀取。
</section>
<section data-field="body" class="e-content">
<section name="7d08" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="45c0" id="45c0" class="graf graf--h3 graf--leading graf--title">#176 使用 GitHub 存放方便 App 讀取的 JSON &amp; 圖片 — 以UNIQLO App 為例</h3><p name="d87e" id="d87e" class="graf graf--p graf-after--h3">開發 iOS App 時，我們時常需要連線到後台抓取 JSON 資料。然而如果資料都由後台產生，不是由使用者生成，其實可以將 JSON 資料和圖片存在免費的 GitHub，然後再從 iOS App 連線讀取。</p><p name="17c7" id="17c7" class="graf graf--p graf-after--p">ps: GitHub 有流量的限制，因此此做法較適合用來練習開發App 或是應用在使用者不多的 App。</p><p name="0b1e" id="0b1e" class="graf graf--p graf-after--p">接下來彼得潘將以 UNIQLO App 為例，示範如何將 UNIQLO App 的商品資料存在 GitHub，然後再寫程式從 iOS App 讀取。</p><div name="6dc8" id="6dc8" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://apps.apple.com/tw/app/uniqlo-tw/id927884733" data-href="https://apps.apple.com/tw/app/uniqlo-tw/id927884733" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://apps.apple.com/tw/app/uniqlo-tw/id927884733"><strong class="markup--strong markup--mixtapeEmbed-strong">‎UNIQLO TW</strong><br><em class="markup--em markup--mixtapeEmbed-em">下載UNIQLO APP並連結網路商店會員，享受UNIQLO會員專屬服務： ■會員即享NT$80優惠券新註冊或舊會員綁定新平台EC會員並訂閱UNIQLO電子報，可獲得網路商店NT$80優惠券。…</em>apps.apple.com</a><a href="https://apps.apple.com/tw/app/uniqlo-tw/id927884733" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="68a47d4769ef4fdb988dec04d5ff35fc" data-thumbnail-img-id="0*iQhv51yWoffaHhiL" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*iQhv51yWoffaHhiL);"></a></div><figure name="bd07" id="bd07" class="graf graf--figure graf-after--mixtapeEmbed"><img class="graf-image" data-image-id="1*EAqpO6FkCbHilfTWYQ1cuw.png" data-width="1162" data-height="1208" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*EAqpO6FkCbHilfTWYQ1cuw.png"></figure><h3 name="8275" id="8275" class="graf graf--h3 graf-after--figure">將資料變成 JSON</h3><ul class="postList"><li name="75ce" id="75ce" class="graf graf--li graf-after--h3">方法 1</li></ul><p name="2ade" id="2ade" class="graf graf--p graf-after--li">使用 AI 寫 python 爬蟲程式將資料變成 JSON。</p><div name="db50" id="db50" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-ai-%E5%AF%AB-python-%E7%B6%B2%E9%A0%81%E7%88%AC%E8%9F%B2%E7%A8%8B%E5%BC%8F-%E4%BB%A5%E9%96%8B%E7%99%BC-wwdc-%E5%BD%B1%E7%89%87-app-%E7%82%BA%E4%BE%8B-b30cd7a051bf" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-ai-%E5%AF%AB-python-%E7%B6%B2%E9%A0%81%E7%88%AC%E8%9F%B2%E7%A8%8B%E5%BC%8F-%E4%BB%A5%E9%96%8B%E7%99%BC-wwdc-%E5%BD%B1%E7%89%87-app-%E7%82%BA%E4%BE%8B-b30cd7a051bf" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-ai-%E5%AF%AB-python-%E7%B6%B2%E9%A0%81%E7%88%AC%E8%9F%B2%E7%A8%8B%E5%BC%8F-%E4%BB%A5%E9%96%8B%E7%99%BC-wwdc-%E5%BD%B1%E7%89%87-app-%E7%82%BA%E4%BE%8B-b30cd7a051bf"><strong class="markup--strong markup--mixtapeEmbed-strong">使用 AI 寫 python 網頁爬蟲程式 — 以開發 WWDC 影片 App 為例</strong><br><em class="markup--em markup--mixtapeEmbed-em">Apple 的開發網站上有許多精彩的影片，包含歷年 WWDC 的議程影片和許多有趣的 App 開發影片。因此彼得潘希望能取得影片清單的 JSON，然後製作一個 iOS App 顯示全部的影片。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-ai-%E5%AF%AB-python-%E7%B6%B2%E9%A0%81%E7%88%AC%E8%9F%B2%E7%A8%8B%E5%BC%8F-%E4%BB%A5%E9%96%8B%E7%99%BC-wwdc-%E5%BD%B1%E7%89%87-app-%E7%82%BA%E4%BE%8B-b30cd7a051bf" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="8bdca19649e6b886524ba53b047eec51" data-thumbnail-img-id="1*kupPztj30uGemcDUrIYuzA.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*kupPztj30uGemcDUrIYuzA.png);"></a></div><ul class="postList"><li name="2e06" id="2e06" class="graf graf--li graf-after--mixtapeEmbed">方法 2</li></ul><p name="8847" id="8847" class="graf graf--p graf-after--li">在 Numbers 表單，Google 表單，Excel 檔輸入 UNIQLO 的商品資訊</p><p name="9a0a" id="9a0a" class="graf graf--p graf-after--p">比方輸入以下兩件 UNIQLO 的商品資訊。image 欄位填入的是圖片名稱，待會我們會將圖片上傳到 GitHub。</p><figure name="a1ed" id="a1ed" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*mbXq7COBniw5yzcRQpkS4Q.png" data-width="1504" data-height="268" src="https://cdn-images-1.medium.com/max/800/1*mbXq7COBniw5yzcRQpkS4Q.png"></figure><p name="f162" id="f162" class="graf graf--p graf-after--figure">將 Numbers 表單，Google 表單，Excel 檔變成 JSON</p><div name="ea1a" id="ea1a" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87-google-%E8%A1%A8%E5%96%AE%E6%88%96-excel-%E6%AA%94%E8%AE%8A%E6%88%90-json-ceffc3fc3542" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87-google-%E8%A1%A8%E5%96%AE%E6%88%96-excel-%E6%AA%94%E8%AE%8A%E6%88%90-json-ceffc3fc3542" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87-google-%E8%A1%A8%E5%96%AE%E6%88%96-excel-%E6%AA%94%E8%AE%8A%E6%88%90-json-ceffc3fc3542"><strong class="markup--strong markup--mixtapeEmbed-strong">將 Numbers 表單，Google 表單，Excel 檔變成 JSON</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，有時資料存在 Google 表單或 Excel 檔，然而 App 讀取這類型的檔案有點麻煩，因此我們不妨將它們轉成最愛的 JSON 再讀取。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87-google-%E8%A1%A8%E5%96%AE%E6%88%96-excel-%E6%AA%94%E8%AE%8A%E6%88%90-json-ceffc3fc3542" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="9fc568baee44ed1ce9f1f55fc0a19c49" data-thumbnail-img-id="1*hOYLJs46FS5J3Ss9d_veGg.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*hOYLJs46FS5J3Ss9d_veGg.jpeg);"></a></div><p name="9cc9" id="9cc9" class="graf graf--p graf-after--mixtapeEmbed">彼得潘將 Numbers 表單輸入的資料轉成 JSON，結果如下。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="json" name="771a" id="771a" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-punctuation">[</span><br /> <span class="hljs-punctuation">{</span><br />  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Mickey &amp; Friends UT印花T恤(短袖) &quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;number&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">445593000</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;image&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;UNIQLO1&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">290</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;category&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;男裝 &quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;S,M,L&quot;</span><br /> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br /> <span class="hljs-punctuation">{</span><br />  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Disney 短版UT印花T恤&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;number&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">456766000</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;image&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;UNIQLO2&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">590</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;category&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;女裝&quot;</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;XS,S,M,L,XL,XXL,3XL&quot;</span><br /> <span class="hljs-punctuation">}</span><br /><span class="hljs-punctuation">]</span></span></pre><h3 name="e6fa" id="e6fa" class="graf graf--h3 graf-after--pre">將 JSON &amp; 圖片上傳到 GitHub</h3><div name="c5b4" id="c5b4" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%94%A8-github-%E5%AD%98%E6%94%BE%E6%96%B9%E4%BE%BF-app-%E8%AE%80%E5%8F%96%E7%9A%84%E5%9C%96%E7%89%87-%E5%BD%B1%E7%89%87-%E9%9F%B3%E6%A8%82%E8%B3%87%E6%96%99-c3021283f2e8" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%94%A8-github-%E5%AD%98%E6%94%BE%E6%96%B9%E4%BE%BF-app-%E8%AE%80%E5%8F%96%E7%9A%84%E5%9C%96%E7%89%87-%E5%BD%B1%E7%89%87-%E9%9F%B3%E6%A8%82%E8%B3%87%E6%96%99-c3021283f2e8" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%94%A8-github-%E5%AD%98%E6%94%BE%E6%96%B9%E4%BE%BF-app-%E8%AE%80%E5%8F%96%E7%9A%84%E5%9C%96%E7%89%87-%E5%BD%B1%E7%89%87-%E9%9F%B3%E6%A8%82%E8%B3%87%E6%96%99-c3021283f2e8"><strong class="markup--strong markup--mixtapeEmbed-strong">用 GitHub 存放方便 App 讀取的圖片，影片，音樂，JSON</strong><br><em class="markup--em markup--mixtapeEmbed-em">GitHub 專門用來存放我們工程師最喜歡的程式碼，不過它基本上可以存放任何東西，所以我們也可以將圖片，影片，音樂，JSON 等資料存在 GitHub。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%94%A8-github-%E5%AD%98%E6%94%BE%E6%96%B9%E4%BE%BF-app-%E8%AE%80%E5%8F%96%E7%9A%84%E5%9C%96%E7%89%87-%E5%BD%B1%E7%89%87-%E9%9F%B3%E6%A8%82%E8%B3%87%E6%96%99-c3021283f2e8" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="6509f4f290dc2bf6d4514ed942cd75f4" data-thumbnail-img-id="1*xmjuli1dMUkZNFoJpS4rvg.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*xmjuli1dMUkZNFoJpS4rvg.png);"></a></div><figure name="1f83" id="1f83" class="graf graf--figure graf-after--mixtapeEmbed"><img class="graf-image" data-image-id="1*cqK6IY_x6Zf-uCtb18vP0g.png" data-width="1874" data-height="688" src="https://cdn-images-1.medium.com/max/800/1*cqK6IY_x6Zf-uCtb18vP0g.png"></figure><h3 name="455f" id="455f" class="graf graf--h3 graf-after--figure">從 iOS App 讀取 JSON &amp; 圖片</h3><p name="df8c" id="df8c" class="graf graf--p graf-after--h3">之後我們可透過以下格式的網址存取檔案。</p><figure name="2bc6" id="2bc6" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Zd32_Q6bev9penPiQS3ZsA.png" data-width="1160" data-height="508" src="https://cdn-images-1.medium.com/max/800/1*Zd32_Q6bev9penPiQS3ZsA.png"></figure><p name="16cd" id="16cd" class="graf graf--p graf-after--figure">比方 UNIQLO.json 的網址如下。</p><pre name="c32a" id="c32a" class="graf graf--pre graf-after--p"><a href="https://raw.githubusercontent.com/AppPeterPan/UNIQLO/main/UNIQLO.json" data-href="https://raw.githubusercontent.com/AppPeterPan/UNIQLO/main/UNIQLO.json" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://raw.githubusercontent.com/AppPeterPan/UNIQLO/main/UNIQLO.json</a></pre><p name="4778" id="4778" class="graf graf--p graf-after--pre">圖片 UNIQLO1.jpeg 的網址如下。</p><pre name="9a08" id="9a08" class="graf graf--pre graf-after--p"><a href="https://raw.githubusercontent.com/AppPeterPan/UNIQLO/main/UNIQLO1.jpeg" data-href="https://raw.githubusercontent.com/AppPeterPan/UNIQLO/main/UNIQLO1.jpeg" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://raw.githubusercontent.com/AppPeterPan/UNIQLO/main/UNIQLO1.jpeg</a></pre><h3 name="7f38" id="7f38" class="graf graf--h3 graf-after--pre">iOS App 範例</h3><ul class="postList"><li name="9656" id="9656" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">SwiftUI 版本</strong></li></ul><p name="7f5c" id="7f5c" class="graf graf--p graf-after--li">JSON 對應的資料型別如下:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="e35c" id="e35c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Product</span>: <span class="hljs-title class_">Decodable</span>, <span class="hljs-title class_">Identifiable</span> {<br />    <span class="hljs-keyword">var</span> id: <span class="hljs-type">Int</span> { number }<br />    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> number: <span class="hljs-type">Int</span><br />    <span class="hljs-keyword">let</span> image: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> price: <span class="hljs-type">Int</span><br />    <span class="hljs-keyword">let</span> category: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> size: <span class="hljs-type">String</span><br />}</span></pre><p name="090d" id="090d" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">方法 1: 使用 async &amp; await</strong></p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="3556" id="3556" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> products <span class="hljs-operator">=</span> [<span class="hljs-type">Product</span>]()<br />    <span class="hljs-keyword">let</span> baseURL <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://raw.githubusercontent.com/AppPeterPan/UNIQLO/main/&quot;</span>)<span class="hljs-operator">!</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">List</span> {<br />            <span class="hljs-type">ForEach</span>(products) { product <span class="hljs-keyword">in</span><br />                <span class="hljs-type">HStack</span> {<br />                    <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> baseURL.appending(path: product.image).appendingPathExtension(for: .jpeg)<br />                    <span class="hljs-type">AsyncImage</span>(url: url) { image <span class="hljs-keyword">in</span><br />                        image<br />                            .resizable()<br />                            .scaledToFill()<br />                    } placeholder: {<br />                        <span class="hljs-type">Color</span>.gray<br />                    }<br />                    .frame(width: <span class="hljs-number">100</span>, height: <span class="hljs-number">100</span>)<br />                    .clipped()<br />                    <br />                    <span class="hljs-type">VStack</span>(alignment: .leading) {<br />                        <span class="hljs-type">Text</span>(product.name)<br />                        <span class="hljs-type">Text</span>(product.price.formatted(.currency(code: <span class="hljs-string">&quot;twd&quot;</span>)))<br />                    }<br />                }<br />            }<br />        }<br />        .task {<br />            <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> baseURL.appending(path: <span class="hljs-string">&quot;UNIQLO&quot;</span>).appendingPathExtension(for: .json)<br />            <span class="hljs-keyword">do</span> {<br />                <span class="hljs-keyword">let</span> (data, <span class="hljs-keyword">_</span>) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)<br />                products <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode([<span class="hljs-type">Product</span>].<span class="hljs-keyword">self</span>, from: data)<br />            } <span class="hljs-keyword">catch</span> {<br />                <span class="hljs-built_in">print</span>(error)<br />            }<br />        }<br />    }<br />}</span></pre><figure name="d798" id="d798" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*4TXL_CvZIEkeB-J8kISClQ.png" data-width="1339" data-height="2716" src="https://cdn-images-1.medium.com/max/800/1*4TXL_CvZIEkeB-J8kISClQ.png"></figure><p name="e6f1" id="e6f1" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">方法 2: 沒有使用 async &amp; await</strong></p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="8d88" id="8d88" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> products <span class="hljs-operator">=</span> [<span class="hljs-type">Product</span>]()<br />    <span class="hljs-keyword">let</span> baseURL <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://raw.githubusercontent.com/AppPeterPan/UNIQLO/main/&quot;</span>)<span class="hljs-operator">!</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">List</span> {<br />            <span class="hljs-type">ForEach</span>(products) { product <span class="hljs-keyword">in</span><br />                <span class="hljs-type">HStack</span> {<br />                    <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> baseURL.appending(path: product.image).appendingPathExtension(for: .jpeg)<br />                    <span class="hljs-type">AsyncImage</span>(url: url) { image <span class="hljs-keyword">in</span><br />                        image<br />                            .resizable()<br />                            .scaledToFill()<br />                    } placeholder: {<br />                        <span class="hljs-type">Color</span>.gray<br />                    }<br />                    .frame(width: <span class="hljs-number">100</span>, height: <span class="hljs-number">100</span>)<br />                    .clipped()<br />                    <br />                    <span class="hljs-type">VStack</span>(alignment: .leading) {<br />                        <span class="hljs-type">Text</span>(product.name)<br />                        <span class="hljs-type">Text</span>(product.price.formatted(.currency(code: <span class="hljs-string">&quot;twd&quot;</span>)))<br />                    }<br />                }<br />            }<br />        }<br />        .onAppear(perform: {<br />            <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> baseURL.appending(path: <span class="hljs-string">&quot;UNIQLO&quot;</span>).appendingPathExtension(for: .json)<br />            <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { data, response, error <span class="hljs-keyword">in</span><br />                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data {<br />                    <span class="hljs-keyword">do</span> {<br />                        products <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode([<span class="hljs-type">Product</span>].<span class="hljs-keyword">self</span>, from: data)<br />                    } <span class="hljs-keyword">catch</span> {<br />                        <span class="hljs-built_in">print</span>(error)<br />                    }<br />                }<br />            }.resume()<br />        })<br />    }<br />}</span></pre><ul class="postList"><li name="d49e" id="d49e" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">UIKit 版本</strong></li></ul><p name="359e" id="359e" class="graf graf--p graf-after--li">JSON 對應的資料型別如下:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="d45c" id="d45c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Product</span>: <span class="hljs-title class_">Decodable</span> {<br />    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> number: <span class="hljs-type">Int</span><br />    <span class="hljs-keyword">let</span> image: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> price: <span class="hljs-type">Int</span><br />    <span class="hljs-keyword">let</span> category: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> size: <span class="hljs-type">String</span><br />}</span></pre><p name="442f" id="442f" class="graf graf--p graf-after--pre">cell 連結的 outlet 如下:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1dbf" id="1dbf" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductTableViewCell</span>: <span class="hljs-title class_">UITableViewCell</span> {<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> photoImageView: <span class="hljs-type">UIImageView</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> nameLabel: <span class="hljs-type">UILabel</span>!<br />}</span></pre><figure name="0771" id="0771" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*nhb8UMm3Sdwvg_lPnRvXkw.png" data-width="1268" data-height="914" src="https://cdn-images-1.medium.com/max/800/1*nhb8UMm3Sdwvg_lPnRvXkw.png"></figure><p name="ec11" id="ec11" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">方法 1: 使用 async &amp; await</strong></p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="273a" id="273a" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductTableViewController</span>: <span class="hljs-title class_">UITableViewController</span> {<br />    <span class="hljs-keyword">var</span> products <span class="hljs-operator">=</span> [<span class="hljs-type">Product</span>]()<br />    <span class="hljs-keyword">let</span> baseURL <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://raw.githubusercontent.com/AppPeterPan/UNIQLO/main/&quot;</span>)<span class="hljs-operator">!</span><br />    <br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {<br />        <span class="hljs-keyword">super</span>.viewDidLoad()<br />        <br />        <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> baseURL.appending(path: <span class="hljs-string">&quot;UNIQLO&quot;</span>).appendingPathExtension(for: .json)<br />        <span class="hljs-type">Task</span> {<br />            <span class="hljs-keyword">do</span> {<br />                <span class="hljs-keyword">let</span> (data, <span class="hljs-keyword">_</span>) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)<br />                products <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode([<span class="hljs-type">Product</span>].<span class="hljs-keyword">self</span>, from: data)<br />                tableView.reloadData()<br />            } <span class="hljs-keyword">catch</span> {<br />                <span class="hljs-built_in">print</span>(error)<br />            }<br />        }<br />    }<br />    <br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">numberOfRowsInSection</span> <span class="hljs-params">section</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> {<br />        <span class="hljs-keyword">return</span> products.count<br />    }<br />    <br />    <br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">cellForRowAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>) -&gt; <span class="hljs-type">UITableViewCell</span> {<br />        <span class="hljs-keyword">let</span> cell <span class="hljs-operator">=</span> tableView.dequeueReusableCell(withIdentifier: <span class="hljs-string">&quot;<span class="hljs-subst">\(ProductTableViewCell.<span class="hljs-keyword">self</span>)</span>&quot;</span>, for: indexPath) <span class="hljs-keyword">as!</span> <span class="hljs-type">ProductTableViewCell</span><br />        <br />        <span class="hljs-keyword">let</span> product <span class="hljs-operator">=</span> products[indexPath.row]<br />        cell.nameLabel.text <span class="hljs-operator">=</span> product.name<br />        cell.photoImageView.image <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span><br />        <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> baseURL.appending(path: product.image).appendingPathExtension(for: .jpeg)<br />        <span class="hljs-type">Task</span> {<br />            <span class="hljs-keyword">do</span> {<br />                <span class="hljs-keyword">let</span> (data, <span class="hljs-keyword">_</span>) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)<br />                cell.photoImageView.image <span class="hljs-operator">=</span> <span class="hljs-type">UIImage</span>(data: data)<br />            } <span class="hljs-keyword">catch</span> {<br />                <span class="hljs-built_in">print</span>(error)<br />            }<br />        }<br />        <span class="hljs-keyword">return</span> cell<br />    }    <br />}</span></pre><figure name="270a" id="270a" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*vZ-rvMloO3VzCA69vl0E4Q.png" data-width="1339" data-height="2716" src="https://cdn-images-1.medium.com/max/800/1*vZ-rvMloO3VzCA69vl0E4Q.png"></figure><p name="942f" id="942f" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">方法 2: 沒有使用 async &amp; await</strong></p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="b8ee" id="b8ee" class="graf graf--pre graf-after--p graf--trailing graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductTableViewController</span>: <span class="hljs-title class_">UITableViewController</span> {<br />    <span class="hljs-keyword">var</span> products <span class="hljs-operator">=</span> [<span class="hljs-type">Product</span>]()<br />    <span class="hljs-keyword">let</span> baseURL <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://raw.githubusercontent.com/AppPeterPan/UNIQLO/main/&quot;</span>)<span class="hljs-operator">!</span><br />    <br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {<br />        <span class="hljs-keyword">super</span>.viewDidLoad()<br />        <br />        <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> baseURL.appending(path: <span class="hljs-string">&quot;UNIQLO&quot;</span>).appendingPathExtension(for: .json)<br />        <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { data, response, error <span class="hljs-keyword">in</span><br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data {<br />                <span class="hljs-keyword">do</span> {<br />                    <span class="hljs-keyword">self</span>.products <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode([<span class="hljs-type">Product</span>].<span class="hljs-keyword">self</span>, from: data)<br />                    <span class="hljs-type">DispatchQueue</span>.main.async {<br />                        <span class="hljs-keyword">self</span>.tableView.reloadData()<br />                    }<br />                } <span class="hljs-keyword">catch</span> {<br />                    <span class="hljs-built_in">print</span>(error)<br />                }<br />            }<br />        }.resume()<br />    }<br />    <br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">numberOfRowsInSection</span> <span class="hljs-params">section</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> {<br />        <span class="hljs-keyword">return</span> products.count<br />    }<br />    <br />    <br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">cellForRowAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>) -&gt; <span class="hljs-type">UITableViewCell</span> {<br />        <span class="hljs-keyword">let</span> cell <span class="hljs-operator">=</span> tableView.dequeueReusableCell(withIdentifier: <span class="hljs-string">&quot;<span class="hljs-subst">\(ProductTableViewCell.<span class="hljs-keyword">self</span>)</span>&quot;</span>, for: indexPath) <span class="hljs-keyword">as!</span> <span class="hljs-type">ProductTableViewCell</span><br />        <br />        <span class="hljs-keyword">let</span> product <span class="hljs-operator">=</span> products[indexPath.row]<br />        cell.nameLabel.text <span class="hljs-operator">=</span> product.name<br />        cell.photoImageView.image <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span><br />        <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> baseURL.appending(path: product.image).appendingPathExtension(for: .jpeg)<br />        <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { data, response, error <span class="hljs-keyword">in</span><br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data {<br />                <span class="hljs-type">DispatchQueue</span>.main.async {<br />                    cell.photoImageView.image <span class="hljs-operator">=</span> <span class="hljs-type">UIImage</span>(data: data)<br />                }<br />            }<br />        }.resume()<br />       <br />        <span class="hljs-keyword">return</span> cell<br />    }<br />}</span></pre></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/8de1db600659"><time class="dt-published" datetime="2022-09-11T12:46:55.680Z">September 11, 2022</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E8%A3%BD%E4%BD%9C%E6%96%B9%E4%BE%BF-app-%E8%AE%80%E5%8F%96%E7%9A%84-json-%E8%B3%87%E6%96%99-%E4%BB%A5uniqlo-app-%E7%82%BA%E4%BE%8B-8de1db600659" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>