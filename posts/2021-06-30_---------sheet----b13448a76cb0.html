<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>只顯示部分高度的 sheet 畫面</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">只顯示部分高度的 sheet 畫面</h1>
</header>
<section data-field="subtitle" class="p-summary">
開發 iOS App 時，有時我們會看到新頁面只顯示部分的高度，這樣的 UI 從前我們必須自己開發或使用套件，在 iOS 15 內建就有這樣的功能，利用present 顯示 controller 時我們可以控制新頁面只顯示部分的高度。
</section>
<section data-field="body" class="e-content">
<section name="2d50" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="d983" id="d983" class="graf graf--h3 graf--leading graf--title">只顯示部分高度的 sheet 畫面</h3><p name="3676" id="3676" class="graf graf--p graf-after--h3">開發 iOS App 時，有時我們會看到新頁面只顯示部分的高度，這樣的 UI 從前我們必須自己開發或使用套件，在 iOS 15 內建就有這樣的功能，利用present 顯示 controller 時我們可以控制新頁面只顯示部分的高度。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="9c8a" id="9c8a" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*PkoxmolDM34Dt8geZlsdpw.png" data-width="1125" data-height="2436" data-is-featured="true" src="https://cdn-images-1.medium.com/max/600/1*PkoxmolDM34Dt8geZlsdpw.png"></figure><figure name="c242" id="c242" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*WZ091uHc4nk0vOcCWU8qFA.png" data-width="1125" data-height="2436" src="https://cdn-images-1.medium.com/max/600/1*WZ091uHc4nk0vOcCWU8qFA.png"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="9736" id="9736" class="graf graf--h3 graf-after--figure">iOS 15 之前的類似套件</h3><div name="66f1" id="66f1" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://github.com/slackhq/PanModal" data-href="https://github.com/slackhq/PanModal" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/slackhq/PanModal"><strong class="markup--strong markup--mixtapeEmbed-strong">slackhq/PanModal</strong><br><em class="markup--em markup--mixtapeEmbed-em">Features * Compatibility * Installation * Usage * Documentation * Contributing * Authors * License Read our blog on how…</em>github.com</a><a href="https://github.com/slackhq/PanModal" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="4ddea4f6b1c1c226c4e519f7ba954636" data-thumbnail-img-id="0*2Sf6N-djhl4cbpLl" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*2Sf6N-djhl4cbpLl);"></a></div><div name="692a" id="692a" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://github.com/scenee/FloatingPanel" data-href="https://github.com/scenee/FloatingPanel" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/scenee/FloatingPanel"><strong class="markup--strong markup--mixtapeEmbed-strong">scenee/FloatingPanel</strong><br><em class="markup--em markup--mixtapeEmbed-em">FloatingPanel is a simple and easy-to-use UI component for a new interface introduced in Apple Maps, Shortcuts and…</em>github.com</a><a href="https://github.com/scenee/FloatingPanel" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="4565c718d3cc2926c2e919b930963c9c" data-thumbnail-img-id="0*jOQv1KlM9J2E49yC" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*jOQv1KlM9J2E49yC);"></a></div><p name="a6db" id="a6db" class="graf graf--p graf-after--mixtapeEmbed">在 iOS 15 我們可以讓新頁面只顯示一半的高度，在 iOS 16 則更厲害，我們可以指定任何想要的高度。接下來讓我們以伊坂幸太郎小說瓢蟲改編的好看電影子彈列車為例說明吧。</p><h3 name="0cc6" id="0cc6" class="graf graf--h3 graf-after--p">storyboard 畫面設計</h3><p name="b4a8" id="b4a8" class="graf graf--p graf-after--h3">storyboard 的畫面如下，我們想要點選 button 後顯示電影子彈列車的介紹。</p><figure name="1537" id="1537" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*qDKBjte3piyszm7UB1Xu5w.png" data-width="1632" data-height="1164" src="https://cdn-images-1.medium.com/max/800/1*qDKBjte3piyszm7UB1Xu5w.png"></figure><p name="d876" id="d876" class="graf graf--p graf-after--figure">從 button 拉 segue 時選擇 Present Modally，因為使用 Present Modally 切換畫面才能指定新頁面的高度。</p><figure name="4376" id="4376" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*xDNUoM2UH9EYd6wU09-7UQ.png" data-width="364" data-height="346" src="https://cdn-images-1.medium.com/max/800/1*xDNUoM2UH9EYd6wU09-7UQ.png"></figure><p name="86cb" id="86cb" class="graf graf--p graf-after--figure">執行 App ，點選 button 顯示的電影畫面幾乎佔滿整個螢幕，上方露出一點點前一頁的畫面。</p><figure name="1d04" id="1d04" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*patJSymzKLeIDWERcE_h8Q.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*patJSymzKLeIDWERcE_h8Q.png"></figure><h3 name="eb67" id="eb67" class="graf graf--h3 graf-after--figure">設定 detents，顯示一半高度的畫面</h3><p name="d6b8" id="d6b8" class="graf graf--p graf-after--h3">透過設定 iOS 15 sheetPresentationController 的 detents，我們可以讓 present 顯示的畫面只有一半的高度，以下我們利用 segue 拉出 IBSegueAction，然後在裡面設定新頁面的高度。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="4102" id="4102" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBSegueAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showMovie</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) -&gt; <span class="hljs-type">UIViewController</span>? {<br />    <span class="hljs-keyword">let</span> controller <span class="hljs-operator">=</span> <span class="hljs-type">UIViewController</span>(coder: coder)<br />    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> sheetPresentationController <span class="hljs-operator">=</span> controller<span class="hljs-operator">?</span>.sheetPresentationController {<br />       　sheetPresentationController.detents <span class="hljs-operator">=</span> [.medium()]<br />    }<br />    <span class="hljs-keyword">return</span> controller<br />}</span></pre><p name="c15c" id="c15c" class="graf graf--p graf-after--pre">controller 的 property sheetPresentationController 負責控制用 present 顯示的畫面，它的型別是 UISheetPresentationController。從 sheetPresentationController 的 detents 可設定新畫面的高度，目前有 <code class="markup--code markup--p-code">.large()，.medium() &amp; .custom</code> 3 種選擇。.custom 是 iOS 16 的新功能，我們待會再介紹。.large() 是我們剛剛看到的效果，代表幾乎佔滿整個螢幕的高度，.medium() 代表螢幕一半的高度。</p><p name="41fa" id="41fa" class="graf graf--p graf-after--p">啟動 App 點選 button 後，電影介紹的畫面果然只有一半的高度。</p><figure name="bc8f" id="bc8f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*UgsjcwItQZTwmwQ9fHWAxw.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*UgsjcwItQZTwmwQ9fHWAxw.png"></figure><p name="f52b" id="f52b" class="graf graf--p graf-after--figure">剛剛的例子我們在 IBSegueAction 設定 detents，若是頁面的切換是直接從程式呼叫 present，則可參考以下寫法。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="a3cf" id="a3cf" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> movieViewController <span class="hljs-operator">=</span> <span class="hljs-type">MovieViewController</span>()<br /><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> sheetPresentationController <span class="hljs-operator">=</span> movieViewController.sheetPresentationController {<br />    sheetPresentationController.detents <span class="hljs-operator">=</span> [.medium()]<br />}<br />present(movieViewController, animated: <span class="hljs-literal">true</span>)</span></pre><h3 name="ddd3" id="ddd3" class="graf graf--h3 graf-after--pre">設定 detents，指定新畫面為特定的高度</h3><p name="95cf" id="95cf" class="graf graf--p graf-after--h3">利用 iOS 16 的 .custom，我們可指定新畫面為特定的高度。以下程式將讓畫面的高度為 300。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="7209" id="7209" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBSegueAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showMovie</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) -&gt; <span class="hljs-type">UIViewController</span>? {<br />    <span class="hljs-keyword">let</span> controller <span class="hljs-operator">=</span> <span class="hljs-type">UIViewController</span>(coder: coder)<br />    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> sheetPresentationController <span class="hljs-operator">=</span> controller<span class="hljs-operator">?</span>.sheetPresentationController {<br />        sheetPresentationController.detents <span class="hljs-operator">=</span> [.custom(resolver: { context <span class="hljs-keyword">in</span><br />           　<span class="hljs-number">300</span><br />        })]<br />    }<br />    <span class="hljs-keyword">return</span> controller<br />}</span></pre><figure name="b223" id="b223" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*w7Y91aWyQh_JneuQd3wQHg.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*w7Y91aWyQh_JneuQd3wQHg.png"></figure><p name="c80e" id="c80e" class="graf graf--p graf-after--figure">我們也可以指定比例，以下程式的 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">context.maximumDetentValue * 0.8</strong></code> 表示畫面的高度為最大高度的 80%。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="b003" id="b003" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBSegueAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showMovie</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) -&gt; <span class="hljs-type">UIViewController</span>? {<br />    <span class="hljs-keyword">let</span> controller <span class="hljs-operator">=</span> <span class="hljs-type">UIViewController</span>(coder: coder)<br />    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> sheetPresentationController <span class="hljs-operator">=</span> controller<span class="hljs-operator">?</span>.sheetPresentationController {<br />        sheetPresentationController.detents <span class="hljs-operator">=</span> [.custom(resolver: { context <span class="hljs-keyword">in</span><br />            context.maximumDetentValue <span class="hljs-operator">*</span> <span class="hljs-number">0.8</span><br />        })]<br />    }<br />    <span class="hljs-keyword">return</span> controller<br />}</span></pre><figure name="6151" id="6151" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*zXa3-D7tySAooEh847Pvvg.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*zXa3-D7tySAooEh847Pvvg.png"></figure><h3 name="7a49" id="7a49" class="graf graf--h3 graf-after--figure">關閉畫面</h3><p name="834e" id="834e" class="graf graf--p graf-after--h3">關閉剛剛以 present 顯示的畫面，有以下兩種方法。</p><ul class="postList"><li name="9b7b" id="9b7b" class="graf graf--li graf-after--p">方法1: 點選上方的空白區塊。</li><li name="5d8f" id="5d8f" class="graf graf--li graf-after--li">方法2: 往下拖曳。</li></ul><h3 name="2985" id="2985" class="graf graf--h3 graf-after--li">多種高度的 detents</h3><p name="8eb9" id="8eb9" class="graf graf--p graf-after--h3">detents 的型別是 array，因此我們可設定多種高度，讓使用者拖曳切換不同的高度。以下程式設定 detents 為 200，medium &amp; large，因此電影畫面一開始顯示的高度為 200，使用者可往上拖曳，讓畫面變成一半的高度，然後再往上拖曳將變成幾乎佔滿整個螢幕。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="0e8a" id="0e8a" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBSegueAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showMovie</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) -&gt; <span class="hljs-type">UIViewController</span>? {<br />    <span class="hljs-keyword">let</span> controller <span class="hljs-operator">=</span> <span class="hljs-type">UIViewController</span>(coder: coder)<br />    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> sheetPresentationController <span class="hljs-operator">=</span> controller<span class="hljs-operator">?</span>.sheetPresentationController {<br />        sheetPresentationController.detents <span class="hljs-operator">=</span> [<br />            .custom(resolver: { context <span class="hljs-keyword">in</span><br />                <span class="hljs-number">200</span><br />            }), .medium(), .large()<br />        ]<br />    }<br />    <span class="hljs-keyword">return</span> controller<br />}</span></pre><figure name="619c" id="619c" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*Eh5UFl-EkmBszjdqyluLDg.png" data-width="1728" data-height="1168" src="https://cdn-images-1.medium.com/max/800/1*Eh5UFl-EkmBszjdqyluLDg.png"></figure><h3 name="664a" id="664a" class="graf graf--h3 graf-after--figure">顯示一半時仍可操作前一頁的畫面</h3><p name="8cfb" id="8cfb" class="graf graf--p graf-after--h3">通常我們 present 新的畫面時前一頁是不能操作的，如下圖所示，上方被透明的黑色區塊覆蓋，提醒使用者此區塊不能操作，因此綠色的開關無法點選。</p><figure name="56d4" id="56d4" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*bt0_SN3Z5eBB_YMHgP8LJQ.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*bt0_SN3Z5eBB_YMHgP8LJQ.png"></figure><p name="6873" id="6873" class="graf graf--p graf-after--figure">拿掉黑色區塊，讓前一頁可以操作也是做得到的，只要設定 largestUndimmedDetentIdentifier。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="3508" id="3508" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBSegueAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showMovie</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) -&gt; <span class="hljs-type">UIViewController</span>? {<br />    <span class="hljs-keyword">let</span> controller <span class="hljs-operator">=</span> <span class="hljs-type">UIViewController</span>(coder: coder)<br />    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> sheetPresentationController <span class="hljs-operator">=</span> controller<span class="hljs-operator">?</span>.sheetPresentationController {<br />        sheetPresentationController.largestUndimmedDetentIdentifier <span class="hljs-operator">=</span> .medium<br />        sheetPresentationController.detents <span class="hljs-operator">=</span> [<br />            .medium(),<br />            .custom(resolver: { context <span class="hljs-keyword">in</span><br />                context.maximumDetentValue <span class="hljs-operator">*</span> <span class="hljs-number">0.8</span><br />            }),<br />            .large()<br />        ]<br />    }<br />    <span class="hljs-keyword">return</span> controller<br />}</span></pre><p name="27d8" id="27d8" class="graf graf--p graf-after--pre">以上程式設定 <code class="markup--code markup--p-code">largestUndimmedDetentIdentifier = .medium</code>，因此只有畫面高度超過 medium 時才會加上黑色區塊。</p><p name="661d" id="661d" class="graf graf--p graf-after--p">當畫面在一半的高度時，沒有加上黑色區塊，因此背後的開關可以點選。</p><figure name="8248" id="8248" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*8pdG05Haf3C_iitvrPY96Q.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*8pdG05Haf3C_iitvrPY96Q.png"></figure><p name="14ae" id="14ae" class="graf graf--p graf-after--figure">當畫面在 80% 的高度時，加了黑色區塊，因此背後的開關不能點選。</p><figure name="b5a1" id="b5a1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*PrQFiWNZIx_Mkr_J9BnDdQ.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*PrQFiWNZIx_Mkr_J9BnDdQ.png"></figure><h3 name="c42a" id="c42a" class="graf graf--h3 graf-after--figure">設定頁面的圓角弧度</h3><p name="31fc" id="31fc" class="graf graf--p graf-after--h3">設定 preferredCornerRadius。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="c739" id="c739" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">sheetPresentationController .preferredCornerRadius <span class="hljs-operator">=</span> <span class="hljs-number">100</span></span></pre><figure name="09b7" id="09b7" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*eIatdP_v7GITyMtU7trHRg.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*eIatdP_v7GITyMtU7trHRg.png"></figure><h3 name="d1bd" id="d1bd" class="graf graf--h3 graf-after--figure">顯示下拉的灰色長條在頂部 &amp; IG 新增 po 文列表</h3><p name="b79d" id="b79d" class="graf graf--p graf-after--h3">UISheetPresentationController 的 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">prefersGrabberVisible</strong></code> 控制新頁面出現時上方是否顯示提醒使用者下拉的灰色長條，以下例子模仿 IG 的新增 po 文列表。</p><figure name="2c67" id="2c67" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ndGHd78D31CwrxDFljcxcw.png" data-width="1596" data-height="1004" src="https://cdn-images-1.medium.com/max/800/1*ndGHd78D31CwrxDFljcxcw.png"><figcaption class="imageCaption">新增 po 文列表以 Static Cells 實現，navigation controller 的 storyboard id 為 createNavigationController</figcaption></figure><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="a560" id="a560" class="graf graf--pre graf-after--figure graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">add</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-keyword">Any</span>) {<br />   <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> createNavigationController <span class="hljs-operator">=</span> storyboard<span class="hljs-operator">?</span>.instantiateViewController(withIdentifier: <span class="hljs-string">&quot;createNavigationController&quot;</span>),<br />      <span class="hljs-keyword">let</span> sheetPresentationController <span class="hljs-operator">=</span> createNavigationController.sheetPresentationController {<br />         sheetPresentationController.detents <span class="hljs-operator">=</span> [.medium()]<br />         sheetPresentationController.prefersGrabberVisible <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br />         present(createNavigationController, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)            <br />   }<br />}</span></pre><figure name="da70" id="da70" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*TZL64cqcolxeEoLu9CzBiw.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/800/1*TZL64cqcolxeEoLu9CzBiw.png"></figure><h3 name="084f" id="084f" class="graf graf--h3 graf-after--figure">讓一半高度裡的 scroll view 捲動的 prefersScrollingExpandsWhenScrolledToEdge</h3><p name="1d98" id="1d98" class="graf graf--p graf-after--h3">prefersScrollingExpandsWhenScrolledToEdge 可以幫我們解決一個特別的捲動問題，讓我們看看以下的例子。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="4666" id="4666" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">add</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-keyword">Any</span>) {<br />    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> createNavigationController <span class="hljs-operator">=</span> storyboard<span class="hljs-operator">?</span>.instantiateViewController(withIdentifier: <span class="hljs-string">&quot;createNavigationController&quot;</span>),<br />       <span class="hljs-keyword">let</span> sheetPresentationController <span class="hljs-operator">=</span> createNavigationController.sheetPresentationController {<br />         sheetPresentationController.detents <span class="hljs-operator">=</span> [.medium(), .large()]<br />         sheetPresentationController.prefersGrabberVisible <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>              <br />         present(createNavigationController, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>) <br />    }<br />}</span></pre><p name="b83c" id="b83c" class="graf graf--p graf-after--pre">我們將 detents 設為 medium &amp; large，因此新頁面可以一半高度，也可以全螢幕。如下圖所示，新頁面是個有很多 cell 的表格，它一開始顯示一半的高度，當我們向上捲動時，它將自動展開成全螢幕。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="ac18" id="ac18" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*hX22o_cG7MZomSmOhdLMmQ.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/600/1*hX22o_cG7MZomSmOhdLMmQ.png"></figure><figure name="fee5" id="fee5" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*l33rpaC7CxOGtDkDD9E1aA.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/600/1*l33rpaC7CxOGtDkDD9E1aA.png"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="0c16" id="0c16" class="graf graf--p graf-after--figure">有沒有方法能讓它在一半高度向上捲動時，捲動頁面裡的內容，而不是展開成全螢幕呢 ? 答案就在 prefersScrollingExpandsWhenScrolledToEdge。只要將它設為 false 即可。此時若要變成全螢幕，則要從新頁面的頂部向上拖曳。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="c268" id="c268" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">sheetPresentationController.prefersScrollingExpandsWhenScrolledToEdge <span class="hljs-operator">=</span> <span class="hljs-literal">false</span></span></pre></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="9ce0" id="9ce0" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--pre" style="width: 50%;"><img class="graf-image" data-image-id="1*hX22o_cG7MZomSmOhdLMmQ.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/600/1*hX22o_cG7MZomSmOhdLMmQ.png"></figure><figure name="efa8" id="efa8" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*yxj4NAT0S-XYzOKtZ7VjiQ.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/600/1*yxj4NAT0S-XYzOKtZ7VjiQ.png"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="33d3" id="33d3" class="graf graf--h3 graf-after--figure">參考連結</h3><p name="4d85" id="4d85" class="graf graf--p graf-after--h3">Apple 官方還有介紹一些特別的用法和範例，比方 prefersScrollingExpandsWhenScrolledToEdge &amp; adaptiveSheetPresentationController，有興趣的朋友可進一步參考以下連結。</p><p name="c90e" id="c90e" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">官方範例: Customize and Resize Sheets in UIKit</strong></p><div name="83d9" id="83d9" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/customizing_and_resizing_sheets_in_uikit" data-href="https://developer.apple.com/documentation/uikit/uiviewcontroller/customizing_and_resizing_sheets_in_uikit" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/uikit/uiviewcontroller/customizing_and_resizing_sheets_in_uikit"><strong class="markup--strong markup--mixtapeEmbed-strong">Customizing and resizing sheets in UIKit | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Discover how to create a layered and customized sheet experience in UIKit.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/customizing_and_resizing_sheets_in_uikit" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="0884d0c04fb9b47155cf714034e29fe7" data-thumbnail-img-id="0*kfn6Fa_uPVXK5HR_" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*kfn6Fa_uPVXK5HR_);"></a></div><figure name="d19d" id="d19d" class="graf graf--figure graf-after--mixtapeEmbed"><img class="graf-image" data-image-id="1*gpNFrwEJgwjldM2LYIWq6g.png" data-width="1100" data-height="732" src="https://cdn-images-1.medium.com/max/800/1*gpNFrwEJgwjldM2LYIWq6g.png"></figure><p name="cdc6" id="cdc6" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">WWDC Customize and resize sheets in UIKit</strong></p><div name="1fd4" id="1fd4" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/wwdc21/10063" data-href="https://developer.apple.com/wwdc21/10063" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/wwdc21/10063"><strong class="markup--strong markup--mixtapeEmbed-strong">Customize and resize sheets in UIKit - WWDC21 - Videos - Apple Developer</strong><br><em class="markup--em markup--mixtapeEmbed-em">Discover how you can create a layered and customized sheet experience in UIKit. We&#39;ll explore how you can build a…</em>developer.apple.com</a><a href="https://developer.apple.com/wwdc21/10063" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="5930c05cde7a02704209e4ab7241beb7" data-thumbnail-img-id="0*oM59F3rCE-cBcLta" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*oM59F3rCE-cBcLta);"></a></div><p name="29e5" id="29e5" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">UISheetPresentationController</strong></p><div name="3f3e" id="3f3e" class="graf graf--mixtapeEmbed graf-after--p graf--trailing"><a href="https://developer.apple.com/documentation/uikit/uisheetpresentationcontroller" data-href="https://developer.apple.com/documentation/uikit/uisheetpresentationcontroller" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/uikit/uisheetpresentationcontroller"><strong class="markup--strong markup--mixtapeEmbed-strong">UISheetPresentationController | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">A presentation controller that manages the appearance and behavior of a sheet.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/uikit/uisheetpresentationcontroller" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="3533d55a2e9aa37b0b29f6492412e242" data-thumbnail-img-id="0*5bREThkS4Y96XqCv" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*5bREThkS4Y96XqCv);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/b13448a76cb0"><time class="dt-published" datetime="2021-06-30T12:20:06.875Z">June 30, 2021</time></a>.</p><p><a href="https://medium.com/@apppeterpan/ios-15-%E7%8C%B6%E6%8A%B1%E7%90%B5%E7%90%B6%E5%8D%8A%E9%81%AE%E9%9D%A2-%E9%A1%AF%E7%A4%BA%E4%B8%80%E5%8D%8A%E7%9A%84-sheet-%E7%95%AB%E9%9D%A2-b13448a76cb0" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>