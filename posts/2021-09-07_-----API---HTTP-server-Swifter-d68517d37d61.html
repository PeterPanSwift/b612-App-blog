<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>方便測試 API 的 HTTP server Swifter</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">方便測試 API 的 HTTP server Swifter</h1>
</header>
<section data-field="subtitle" class="p-summary">
Swifter 是個簡易的 http server 套件，透過它我們將可快速建立具備基本功能的 http server。
</section>
<section data-field="body" class="e-content">
<section name="ad71" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="9027" id="9027" class="graf graf--h3 graf--leading graf--title">方便測試 API 的 HTTP server Swifter</h3><figure name="920e" id="920e" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*Iu7TiSeAdrOkekOOxfZ-ag.png" data-width="1894" data-height="992" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*Iu7TiSeAdrOkekOOxfZ-ag.png"></figure><p name="19ad" id="19ad" class="graf graf--p graf-after--figure">Swifter 是個簡易的 http server 套件，透過它我們將可快速建立具備基本功能的 http server。</p><p name="2e9c" id="2e9c" class="graf graf--p graf-after--p">最近彼得潘研究了一下，發現對開發 iOS App 的我們來說，它十分有用，它將帶給我們以下好處:</p><ul class="postList"><li name="1c5e" id="1c5e" class="graf graf--li graf-after--p">開發前期後台工程師還沒寫好程式時，我們可以利用 Swifter 在本機端測試 API 回傳的假 JSON。</li><li name="5c0d" id="5c0d" class="graf graf--li graf-after--li">透過 Swifter 測試 API 不須連網，方便我們在沒有網路的環境測試 App。</li><li name="d346" id="d346" class="graf graf--li graf-after--li">方便切換正式 / 測試的 API。</li></ul><p name="aa31" id="aa31" class="graf graf--p graf-after--li">接下來讓我們試著在 iOS App 加入 Swifter，瞧瞧它厲害的地方吧。</p><div name="b9c4" id="b9c4" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://github.com/httpswift/swifter" data-href="https://github.com/httpswift/swifter" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/httpswift/swifter"><strong class="markup--strong markup--mixtapeEmbed-strong">GitHub - httpswift/swifter: Tiny http server engine written in Swift programming language.</strong><br><em class="markup--em markup--mixtapeEmbed-em">Tiny http server engine written in Swift programming language. * stable - lands on CocoaPods and others. Supports the…</em>github.com</a><a href="https://github.com/httpswift/swifter" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="6bb1a3b5dc1ff2d918caf923c4e25be3" data-thumbnail-img-id="0*NfhwtdIrV7k60OJW" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*NfhwtdIrV7k60OJW);"></a></div><h3 name="8f6c" id="8f6c" class="graf graf--h3 graf-after--mixtapeEmbed">安裝 Swifter</h3><p name="4192" id="4192" class="graf graf--p graf-after--h3">透過 SPM 安裝 Swifter，輸入以下網址。</p><pre name="8953" id="8953" class="graf graf--pre graf-after--p"><a href="https://github.com/httpswift/swifter" data-href="https://github.com/httpswift/swifter" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://github.com/httpswift/swifter</a></pre><figure name="fff8" id="fff8" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*cdFXURZ7hPOs_mKO1V30FA.png" data-width="2160" data-height="1198" src="https://cdn-images-1.medium.com/max/800/1*cdFXURZ7hPOs_mKO1V30FA.png"></figure><figure name="867d" id="867d" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*M9O8t89PF_L5YLlK0TG1rg.png" data-width="1360" data-height="638" src="https://cdn-images-1.medium.com/max/800/1*M9O8t89PF_L5YLlK0TG1rg.png"></figure><figure name="a3eb" id="a3eb" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*KSgHjR2pS7YWFn9DcdifuQ.png" data-width="560" data-height="528" src="https://cdn-images-1.medium.com/max/800/1*KSgHjR2pS7YWFn9DcdifuQ.png"></figure><h3 name="b906" id="b906" class="graf graf--h3 graf-after--figure">產生 server，設定網址路徑 &amp; 啟動 server</h3><p name="cfe3" id="cfe3" class="graf graf--p graf-after--h3">產生型別 HttpServer 的物件，利用它啟動 server，以下分別示範 SwiftUI App &amp; UIKit App 的寫法。</p><ul class="postList"><li name="12c1" id="12c1" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">SwiftUI App 範例</strong></li></ul><p name="13fa" id="13fa" class="graf graf--p graf-after--li">在遵從 protocol App 的型別裡宣告型別 HttpServer 的 property，讓 App 啟動後即啟動 server。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="0ce2" id="0ce2" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><span class="hljs-keyword">import</span> Swifter<br /><br /><span class="hljs-keyword">@main</span><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DemoApp</span>: <span class="hljs-title class_">App</span> {<br />    <br />    <span class="hljs-keyword">let</span> server: <span class="hljs-type">HttpServer</span> <span class="hljs-operator">=</span> {<br />       <br />        <span class="hljs-keyword">let</span> server <span class="hljs-operator">=</span> <span class="hljs-type">HttpServer</span>()<br />        server[<span class="hljs-string">&quot;/一天一點愛戀&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />            .ok(.htmlBody(<span class="hljs-string">&quot;如果有一天世界已改變 當滄海都已成桑田 你還會不會在我的身邊 陪著我渡過長夜&quot;</span>))<br />        }<br />        <span class="hljs-keyword">try?</span> server.start()<br />        <span class="hljs-keyword">return</span> server<br />        <br />    }()<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">Scene</span> {<br />        <span class="hljs-type">WindowGroup</span> {<br />            <span class="hljs-type">ContentView</span>()<br />        }<br />    }<br />}</span></pre><ul class="postList"><li name="6a8c" id="6a8c" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">UIKit App 範例</strong></li></ul><p name="02ff" id="02ff" class="graf graf--p graf-after--li">在 AppDelegate 裡宣告型別 HttpServer 的 property，讓 App 啟動後即啟動 server。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="305d" id="305d" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> UIKit<br /><span class="hljs-keyword">import</span> Swifter<br /><br /><span class="hljs-keyword">@main</span><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppDelegate</span>: <span class="hljs-title class_">UIResponder</span>, <span class="hljs-title class_">UIApplicationDelegate</span> {<br /><br />  <span class="hljs-keyword">let</span> server: <span class="hljs-type">HttpServer</span> <span class="hljs-operator">=</span> {<br />       <br />        <span class="hljs-keyword">let</span> server <span class="hljs-operator">=</span> <span class="hljs-type">HttpServer</span>()<br />        server[<span class="hljs-string">&quot;/一天一點愛戀&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />            .ok(.htmlBody(<span class="hljs-string">&quot;如果有一天世界已改變 當滄海都已成桑田 你還會不會在我的身邊 陪著我渡過長夜&quot;</span>))<br />        }<br />        <span class="hljs-keyword">try?</span> server.start()<br />        <span class="hljs-keyword">return</span> server<br />        <br />    }()</span></pre><p name="5307" id="5307" class="graf graf--p graf-after--pre">說明</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="10d5" id="10d5" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> server <span class="hljs-operator">=</span> <span class="hljs-type">HttpServer</span>()</span></pre><p name="71af" id="71af" class="graf graf--p graf-after--pre">產生 HttpServer。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="bf25" id="bf25" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">server[<span class="hljs-string">&quot;/一天一點愛戀&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />    .ok(.htmlBody(<span class="hljs-string">&quot;如果有一天世界已改變 當滄海都已成桑田 你還會不會在我的身邊 陪著我渡過長夜&quot;</span>))<br />}</span></pre><p name="0405" id="0405" class="graf graf--p graf-after--pre"><code class="markup--code markup--p-code">server[&quot;/一天一點愛戀&quot;]</code> 描述路經為 <code class="markup--code markup--p-code u-paddingRight0 u-marginRight0"><a href="http://localhost:8080/" data-href="http://localhost:8080/" class="markup--anchor markup--p-anchor" rel="nofollow" target="_blank">http://localhost:8080/</a>一天一點愛戀</code>，<code class="markup--code markup--p-code">.ok(.htmlBody(&quot;如果有一天世界已改變 當滄海都已成桑田 你還會不會在我的身邊 陪著我渡過長夜&quot;)) </code>表示連到此路徑將回傳成功，回傳 html 格式的網頁，網頁內容是一天一點愛戀的歌詞。(ps: 一天一點愛戀是梁朝偉的成名曲)</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="76ba" id="76ba" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">try?</span> server.start()</span></pre><p name="6f76" id="6f76" class="graf graf--p graf-after--pre">啟動 server。</p><h3 name="2f44" id="2f44" class="graf graf--h3 graf-after--p">在 Safari 測試 server</h3><p name="5f62" id="5f62" class="graf graf--p graf-after--h3">執行 App 後，server 將一併啟動，因此我們可以直接從 Safari 連線測試。以剛剛的例子來說，在 Safari 輸入以下兩種網址都能在網頁看到一天一點愛戀的歌詞。</p><pre name="fe46" id="fe46" class="graf graf--pre graf-after--p"><a href="http://localhost:8080/" data-href="http://localhost:8080/" class="markup--anchor markup--pre-anchor" rel="nofollow" target="_blank">http://localhost:8080/</a>一天一點愛戀<br><a href="http://127.0.0.1:8080/" data-href="http://127.0.0.1:8080/" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">http://127.0.0.1:8080/</a>一天一點愛戀</pre><figure name="9b4d" id="9b4d" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*A9t6T1HBBnKTH-jUeVSt6A.png" data-width="1364" data-height="360" src="https://cdn-images-1.medium.com/max/800/1*A9t6T1HBBnKTH-jUeVSt6A.png"></figure><h3 name="9617" id="9617" class="graf graf--h3 graf-after--figure">將測試的 JSON 資料加到 asset</h3><p name="9418" id="9418" class="graf graf--p graf-after--h3">開發 iOS App 時，API 回傳的資料通常是 JSON 格式，因此我們先將測試的 JSON 資料加到 Preview Assets。</p><figure name="d7ac" id="d7ac" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*aLSr5ZxmCD4etmP9wY13uQ.png" data-width="2044" data-height="684" src="https://cdn-images-1.medium.com/max/800/1*aLSr5ZxmCD4etmP9wY13uQ.png"></figure><p name="93af" id="93af" class="graf graf--p graf-after--figure">在此彼得潘先從 iTunes API 抓取測試的 JSON 資料，比方從 <code class="markup--code markup--p-code u-paddingRight0 u-marginRight0"><a href="https://itunes.apple.com/search?term=" data-href="https://itunes.apple.com/search?term=" class="markup--anchor markup--p-anchor" rel="nofollow noopener noopener" target="_blank">https://itunes.apple.com/search?term=</a>張智霖&amp;media=music&amp;country=TW</code> &amp; <code class="markup--code markup--p-code u-paddingRight0 u-marginRight0"><a href="https://itunes.apple.com/search?term=" data-href="https://itunes.apple.com/search?term=" class="markup--anchor markup--p-anchor" rel="nofollow noopener noopener noopener" target="_blank">https://itunes.apple.com/search?term=</a>林隆璇&amp;media=music&amp;country=TW </code>取得張智霖 &amp; 林隆璇歌單的 JSON。</p><figure name="3ef9" id="3ef9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HAxLsr4wOqWP07BCZr8rhw.png" data-width="1446" data-height="688" src="https://cdn-images-1.medium.com/max/800/1*HAxLsr4wOqWP07BCZr8rhw.png"></figure><h3 name="b7a3" id="b7a3" class="graf graf--h3 graf-after--figure">設定 server 回傳 JSON</h3><ul class="postList"><li name="647c" id="647c" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">寫法1: 將 JSON 變成 Data 回傳。</strong></li></ul><p name="0164" id="0164" class="graf graf--p graf-after--li">從 asset 讀取 JSON，然後將它變成 Data 回傳。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="f5fb" id="f5fb" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> server: <span class="hljs-type">HttpServer</span> <span class="hljs-operator">=</span> {<br />       <br />        <span class="hljs-keyword">let</span> server <span class="hljs-operator">=</span> <span class="hljs-type">HttpServer</span>()<br />        server[<span class="hljs-string">&quot;/林隆璇&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />                .ok(.data(<span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;林隆璇&quot;</span>)<span class="hljs-operator">!</span>.data, contentType: <span class="hljs-string">&quot;application/json&quot;</span>))<br />        }<br />        server[<span class="hljs-string">&quot;/張智霖&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />                .ok(.data(<span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;張智霖&quot;</span>)<span class="hljs-operator">!</span>.data, contentType: <span class="hljs-string">&quot;application/json&quot;</span>))<br />        }<br />        <span class="hljs-keyword">try?</span> server.start()<br />        <span class="hljs-keyword">return</span> server<br />        <br />}()</span></pre><p name="de68" id="de68" class="graf graf--p graf-after--pre">從 Safari 測試。</p><figure name="566c" id="566c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HvFUwSJH_Kt6vqGkxsUrbg.png" data-width="2366" data-height="932" src="https://cdn-images-1.medium.com/max/800/1*HvFUwSJH_Kt6vqGkxsUrbg.png"></figure><ul class="postList"><li name="779b" id="779b" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">寫法2: 將 JSON 變成字串回傳。</strong></li></ul><p name="d44d" id="d44d" class="graf graf--p graf-after--li">從 asset 讀取 JSON，然後將它變成 String 回傳。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="0451" id="0451" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> server: <span class="hljs-type">HttpServer</span> <span class="hljs-operator">=</span> {<br />       <br />        <span class="hljs-keyword">let</span> server <span class="hljs-operator">=</span> <span class="hljs-type">HttpServer</span>()<br />        server[<span class="hljs-string">&quot;/林隆璇&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />                .ok(.text(<span class="hljs-type">String</span>(data: <span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;林隆璇&quot;</span>)<span class="hljs-operator">!</span>.data, encoding: .utf8)<span class="hljs-operator">!</span>))<br />        }<br />        server[<span class="hljs-string">&quot;/張智霖&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />                .ok(.text(<span class="hljs-type">String</span>(data: <span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;張智霖&quot;</span>)<span class="hljs-operator">!</span>.data, encoding: .utf8)<span class="hljs-operator">!</span>))<br />        }<br />        <span class="hljs-keyword">try?</span> server.start()<br />        <span class="hljs-keyword">return</span> server<br />        <br />}()</span></pre><h3 name="355c" id="355c" class="graf graf--h3 graf-after--pre">使用 URLSession 連線測試</h3><ul class="postList"><li name="1615" id="1615" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">iOS 15 以上的 async &amp; await 寫法</strong></li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="101a" id="101a" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchData</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> {<br />        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> urlString <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://localhost:8080/林隆璇&quot;</span>.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed),<br />           <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: urlString) {<br />            <br />            <span class="hljs-keyword">let</span> (data, <span class="hljs-keyword">_</span>) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)<br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> content <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(data: data, encoding: .utf8) {<br />                <span class="hljs-built_in">print</span>(content)<br />            }<br />}</span></pre><ul class="postList"><li name="96bf" id="96bf" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">舊版寫法</strong></li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="fadb" id="fadb" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchData</span>() {<br />        <br />        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> urlString <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://localhost:8080/林隆璇&quot;</span>.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed),<br />           <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: urlString) {<br />            <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { data, response, error <span class="hljs-keyword">in</span><br />                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data,<br />                   <span class="hljs-keyword">let</span> content <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(data: data, encoding: .utf8){<br />                    <span class="hljs-built_in">print</span>(content)<br />                }<br />            }.resume()<br />        }<br />}</span></pre><p name="f7cb" id="f7cb" class="graf graf--p graf-after--pre">值得注意的，在 iOS 15 以上可以直接連線 localhost，但 iOS 15 以前的版本要另外設定 Allows Local Networking。</p><div name="1e70" id="1e70" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%80%A3%E7%B7%9A-local-network-%E7%9A%84-allows-local-networking-be4e23ae7d80" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%80%A3%E7%B7%9A-local-network-%E7%9A%84-allows-local-networking-be4e23ae7d80" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%80%A3%E7%B7%9A-local-network-%E7%9A%84-allows-local-networking-be4e23ae7d80"><strong class="markup--strong markup--mixtapeEmbed-strong">連線 local network 的 Allows Local Networking</strong><br><em class="markup--em markup--mixtapeEmbed-em">根據 Apple 文件的說明，從 iOS 10 開始，App 可以連線到只有 http，沒有 https 的 local domain 或 ip address。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%80%A3%E7%B7%9A-local-network-%E7%9A%84-allows-local-networking-be4e23ae7d80" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="133c7cade12c2d605dd12cc14d8d72ac" data-thumbnail-img-id="1*tdIinKfIVEv4b0GyK3EsLg.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*tdIinKfIVEv4b0GyK3EsLg.png);"></a></div><h3 name="d0a9" id="d0a9" class="graf graf--h3 graf-after--mixtapeEmbed">將 TMDB 電影 App 改成搭配測試的 API</h3><p name="2d66" id="2d66" class="graf graf--p graf-after--h3">了解 Swifter 運作的原理後，接下來讓我們玩真的，試試將以下大大串接 TMDB API 的電影 App 改成搭配測試的 API 吧。</p><div name="fb8b" id="fb8b" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://github.com/DeluxeAlonso/UpcomingMovies" data-href="https://github.com/DeluxeAlonso/UpcomingMovies" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/DeluxeAlonso/UpcomingMovies"><strong class="markup--strong markup--mixtapeEmbed-strong">GitHub - DeluxeAlonso/UpcomingMovies: Movies app written in Swift 5 using the TMDb API and…</strong><br><em class="markup--em markup--mixtapeEmbed-em">Movies app written in Swift 5 using the TMDb API and demonstrating Clean Architecture, Dependency Injection, MVVM and…</em>github.com</a><a href="https://github.com/DeluxeAlonso/UpcomingMovies" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="00cbdca711d5b8660daba9a3a2056a07" data-thumbnail-img-id="0*i6XhwoGGB5WoooWf" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*i6XhwoGGB5WoooWf);"></a></div><ul class="postList"><li name="8841" id="8841" class="graf graf--li graf-after--mixtapeEmbed"><strong class="markup--strong markup--li-strong">從 GitHub 下載專案。</strong></li><li name="a3ae" id="a3ae" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">輸入 pod install 安裝套件。</strong></li><li name="c899" id="c899" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">使用 SPM 安裝 Swifter。</strong></li><li name="95b5" id="95b5" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">下載 upcoming 電影的 JSON。</strong></li></ul><pre name="60dc" id="60dc" class="graf graf--pre graf-after--li"><a href="https://drive.google.com/file/d/11iyQSic9VWzrrm0A9iYOSMoIvFE5FW9j/view?usp=sharing" data-href="https://drive.google.com/file/d/11iyQSic9VWzrrm0A9iYOSMoIvFE5FW9j/view?usp=sharing" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://drive.google.com/file/d/11iyQSic9VWzrrm0A9iYOSMoIvFE5FW9j/view?usp=sharing</a></pre><ul class="postList"><li name="4d20" id="4d20" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">將 JSON 檔加到 Assets。</strong></li></ul><figure name="f5d0" id="f5d0" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*ZLjTuNlX-33eBZJdacSHiw.png" data-width="2040" data-height="514" src="https://cdn-images-1.medium.com/max/800/1*ZLjTuNlX-33eBZJdacSHiw.png"></figure><div name="0685" id="0685" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%96%B9%E4%BE%BF%E5%AD%98%E6%94%BE%E6%B8%AC%E8%A9%A6%E6%AA%94%E6%A1%88%E7%9A%84-xcode-development-assets-5f0f7647423b" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%96%B9%E4%BE%BF%E5%AD%98%E6%94%BE%E6%B8%AC%E8%A9%A6%E6%AA%94%E6%A1%88%E7%9A%84-xcode-development-assets-5f0f7647423b" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%96%B9%E4%BE%BF%E5%AD%98%E6%94%BE%E6%B8%AC%E8%A9%A6%E6%AA%94%E6%A1%88%E7%9A%84-xcode-development-assets-5f0f7647423b"><strong class="markup--strong markup--mixtapeEmbed-strong">方便存放測試檔案的 Xcode development assets</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，我們時常會在專案裡準備一些方便測試的圖片或 JSON 檔，這樣當後台還不能串接或是彼得潘回 Neverland 過年沒有網路時，依然可以測試 App。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%96%B9%E4%BE%BF%E5%AD%98%E6%94%BE%E6%B8%AC%E8%A9%A6%E6%AA%94%E6%A1%88%E7%9A%84-xcode-development-assets-5f0f7647423b" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a2325e83a03a3d6934dc395a5d445a43" data-thumbnail-img-id="1*v-5FJCG52ITZ_uvsantipg.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*v-5FJCG52ITZ_uvsantipg.jpeg);"></a></div><ul class="postList"><li name="e065" id="e065" class="graf graf--li graf-after--mixtapeEmbed"><strong class="markup--strong markup--li-strong">修改 AppDelegate，設定 HttpServer。</strong></li></ul><p name="0221" id="0221" class="graf graf--p graf-after--li">抓取 upcoming 電影的路徑為 /3/movie/upcoming。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="7a0c" id="7a0c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppDelegate</span>: <span class="hljs-title class_">UIResponder</span>, <span class="hljs-title class_">UIApplicationDelegate</span> {<br /><span class="hljs-keyword">var</span> window: <span class="hljs-type">UIWindow</span>?<br />    <span class="hljs-keyword">var</span> navigationHandler: <span class="hljs-type">NavigationHandlerProtocol</span>?<br />    <br />    <span class="hljs-keyword">let</span> server: <span class="hljs-type">HttpServer</span> <span class="hljs-operator">=</span> {<br />       <br />        <span class="hljs-keyword">let</span> server <span class="hljs-operator">=</span> <span class="hljs-type">HttpServer</span>()<br />        server[<span class="hljs-string">&quot;/3/movie/upcoming&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />                .ok(.data(<span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;upcoming&quot;</span>)<span class="hljs-operator">!</span>.data, contentType: <span class="hljs-string">&quot;application/json&quot;</span>))<br />        }<br />        <span class="hljs-keyword">try?</span> server.start()<br />        <span class="hljs-keyword">return</span> server<br />        <br />    }()</span></pre><ul class="postList"><li name="4eb4" id="4eb4" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">修改 API 連線的網址。</strong></li></ul><p name="d89f" id="d89f" class="graf graf--p graf-after--li">API 連線的網址定義在 baseAPIURLString 裡，原本開頭是 <a href="https://api.themoviedb.org" data-href="https://api.themoviedb.org" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://api.themoviedb.org</a>，將它改成 <a href="http://localhost:8080" data-href="http://localhost:8080" class="markup--anchor markup--p-anchor" rel="nofollow" target="_blank">http://localhost:8080</a>。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="eec5" id="eec5" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkConfiguration</span> {<br />   <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">NetworkConfiguration</span>()<br />   <span class="hljs-keyword">private(set)</span> <span class="hljs-keyword">var</span> apiKey <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />   <span class="hljs-keyword">private(set)</span> <span class="hljs-keyword">var</span> readAccessToken <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />   <span class="hljs-keyword">var</span> baseAPIURLString: <span class="hljs-type">String</span> {<br />        <span class="hljs-comment">//return &quot;https://api.themoviedb.org&quot;</span><br />        <span class="hljs-string">&quot;http://localhost:8080&quot;</span><br />   }</span></pre><p name="5959" id="5959" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">測試 App</strong></p><p name="b0a9" id="b0a9" class="graf graf--p graf-after--p">Cool，現在連到 localhost 也可以抓到電影資料 ~</p><figure name="76e8" id="76e8" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*K3BGAA9Yzw4TNnIdLeQ07Q.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/800/1*K3BGAA9Yzw4TNnIdLeQ07Q.png"></figure><h3 name="f79b" id="f79b" class="graf graf--h3 graf-after--figure">切換正式 / 測試的 API</h3><p name="e05f" id="e05f" class="graf graf--p graf-after--h3">我們可以透過一些方法方便隨時切換正式 / 測試的 API。修改剛剛電影 App 的 NetworkConfiguration.swift，透過 APIEnvironment 控制 API 的網址，prod 是正式的網址，local 是測試的網址。在產生 NetworkConfiguration 時傳入欲連線的後台是正式 API 還是測試 API。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="4def" id="4def" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">APIEnvironment</span> {<br />  <span class="hljs-keyword">var</span> baseUrlString: <span class="hljs-type">String</span><br />}<br /><br /><span class="hljs-keyword">extension</span> <span class="hljs-title class_">APIEnvironment</span> {<br />  <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> prod <span class="hljs-operator">=</span> <span class="hljs-type">APIEnvironment</span>(baseUrlString: <span class="hljs-string">&quot;https://api.themoviedb.org&quot;</span>)<br />  <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> local <span class="hljs-operator">=</span> <span class="hljs-type">APIEnvironment</span>(baseUrlString: <span class="hljs-string">&quot;http://localhost:8080&quot;</span>)<br />}<br /><br /><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkConfiguration</span> {<br />    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">NetworkConfiguration</span>(environment: .local)<br />    <span class="hljs-keyword">let</span> environment: <span class="hljs-type">APIEnvironment</span><br />    <span class="hljs-keyword">private(set)</span> <span class="hljs-keyword">var</span> apiKey <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />    <span class="hljs-keyword">private(set)</span> <span class="hljs-keyword">var</span> readAccessToken <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />    <span class="hljs-keyword">var</span> baseAPIURLString: <span class="hljs-type">String</span> {<br />        environment.baseUrlString<br />    }<br />    <span class="hljs-keyword">init</span>(<span class="hljs-params">environment</span>: <span class="hljs-type">APIEnvironment</span> <span class="hljs-operator">=</span> .prod) {<br />        <span class="hljs-keyword">self</span>.environment <span class="hljs-operator">=</span> environment<br />    }</span></pre><p name="797b" id="797b" class="graf graf--p graf-after--pre">ps: 此方法參考 ray wenderlich 的 Make An App Like Instagram。</p><div name="4622" id="4622" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/156-%E5%8F%83%E8%80%83-raywenderlich-%E7%9A%84-make-an-app-like-instagram-%E8%A3%BD%E4%BD%9C-app-%E5%B0%88%E9%A1%8C-e8cd1310f480" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/156-%E5%8F%83%E8%80%83-raywenderlich-%E7%9A%84-make-an-app-like-instagram-%E8%A3%BD%E4%BD%9C-app-%E5%B0%88%E9%A1%8C-e8cd1310f480" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/156-%E5%8F%83%E8%80%83-raywenderlich-%E7%9A%84-make-an-app-like-instagram-%E8%A3%BD%E4%BD%9C-app-%E5%B0%88%E9%A1%8C-e8cd1310f480"><strong class="markup--strong markup--mixtapeEmbed-strong">#156 參考 raywenderlich 的 Make An App Like Instagram 製作 App 專題</strong><br><em class="markup--em markup--mixtapeEmbed-em">當我們剛學會基本的 iOS App 開發技術，想練習製作一個完整的 App 作品時，常常會因為以下幾點非程式的原因卡關:</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/156-%E5%8F%83%E8%80%83-raywenderlich-%E7%9A%84-make-an-app-like-instagram-%E8%A3%BD%E4%BD%9C-app-%E5%B0%88%E9%A1%8C-e8cd1310f480" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="806e4b184b034ad1fe92752e458650aa" data-thumbnail-img-id="1*9WLYUL_LTkxM2B73KoMy8A.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*9WLYUL_LTkxM2B73KoMy8A.png);"></a></div><h3 name="a6e0" id="a6e0" class="graf graf--h3 graf-after--mixtapeEmbed">其它的 HTTP method API</h3><p name="18cd" id="18cd" class="graf graf--p graf-after--h3">剛剛我們看到的例子都是 HTTP GET 的 API，其實其它的 HTTP method 也都可以搭配 Swifter 測試，例如以下例子:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="479c" id="479c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> server: <span class="hljs-type">HttpServer</span> <span class="hljs-operator">=</span> {<br />        <br />        <span class="hljs-keyword">let</span> server <span class="hljs-operator">=</span> <span class="hljs-type">HttpServer</span>()<br />        server.get[<span class="hljs-string">&quot;/api/users&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />                .ok(.data(<span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;users&quot;</span>)<span class="hljs-operator">!</span>.data, contentType: <span class="hljs-string">&quot;application/json&quot;</span>))<br />        }<br />        server.post[<span class="hljs-string">&quot;/api/users&quot;</span>] <span class="hljs-operator">=</span> { request <span class="hljs-keyword">in</span><br />                .ok(.data(<span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;peter&quot;</span>)<span class="hljs-operator">!</span>.data, contentType: <span class="hljs-string">&quot;application/json&quot;</span>))<br />        }<br />        <span class="hljs-keyword">try?</span> server.start()<br />        <span class="hljs-keyword">return</span> server<br />        <br />}()</span></pre><p name="d8c0" id="d8c0" class="graf graf--p graf-after--pre">說明:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="bbd1" id="bbd1" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">server.get[<span class="hljs-string">&quot;/api/users&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />   .ok(.data(<span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;users&quot;</span>)<span class="hljs-operator">!</span>.data, contentType: <span class="hljs-string">&quot;application/json&quot;</span>))<br />}</span></pre><p name="2b0f" id="2b0f" class="graf graf--p graf-after--pre">從 <a href="http://localhost:8080/api/users" data-href="http://localhost:8080/api/users" class="markup--anchor markup--p-anchor" rel="nofollow" target="_blank">http://localhost:8080/api/users</a> get API 讀取 user 清單，回傳 asset users 的 JSON 資料。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="4979" id="4979" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">server.post[<span class="hljs-string">&quot;/api/users&quot;</span>] <span class="hljs-operator">=</span> { request <span class="hljs-keyword">in</span><br />    .ok(.data(<span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;peter&quot;</span>)<span class="hljs-operator">!</span>.data, contentType: <span class="hljs-string">&quot;application/json&quot;</span>))<br />}</span></pre><p name="3570" id="3570" class="graf graf--p graf-after--pre">從 <a href="http://localhost:8080/api/users" data-href="http://localhost:8080/api/users" class="markup--anchor markup--p-anchor" rel="nofollow" target="_blank">http://localhost:8080/api/users</a> post API 新增 user，假設新增的 user 是帥氣的 Peter，回傳 asset peter 的 JSON 資料。</p><h3 name="1de2" id="1de2" class="graf graf--h3 graf-after--p">在正式的 App 裡移除 Swifter</h3><p name="3645" id="3645" class="graf graf--p graf-after--h3">Swifter 主要的目的是測試，我們通常只在從 Xcode 安裝的 App 會用到 Swifter，因此可加入 <code class="markup--code markup--p-code">#if DEBUG</code> 判斷是否加入 Swifter 的相關程式。(ps: 預設只有從 Xcode 安裝 App 時， #if DEBUG 的判斷為 true。)</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="c83c" id="c83c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><span class="hljs-keyword">#if</span> <span class="hljs-type">DEBUG</span><br /><span class="hljs-keyword">import</span> Swifter<br /><span class="hljs-keyword">#endif</span><br /><span class="hljs-keyword">@main</span><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DemoApp</span>: <span class="hljs-title class_">App</span> {<br />    <br /><span class="hljs-keyword">#if</span> <span class="hljs-type">DEBUG</span><br />    <span class="hljs-keyword">let</span> server: <span class="hljs-type">HttpServer</span> <span class="hljs-operator">=</span> {<br />        <br />        <span class="hljs-keyword">let</span> server <span class="hljs-operator">=</span> <span class="hljs-type">HttpServer</span>()<br />        server.get[<span class="hljs-string">&quot;/api/users&quot;</span>] <span class="hljs-operator">=</span> { <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span><br />                .ok(.data(<span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;users&quot;</span>)<span class="hljs-operator">!</span>.data, contentType: <span class="hljs-string">&quot;application/json&quot;</span>))<br />        }<br />        server.post[<span class="hljs-string">&quot;/api/users&quot;</span>] <span class="hljs-operator">=</span> { request <span class="hljs-keyword">in</span><br />                .ok(.data(<span class="hljs-type">NSDataAsset</span>(name: <span class="hljs-string">&quot;peter&quot;</span>)<span class="hljs-operator">!</span>.data, contentType: <span class="hljs-string">&quot;application/json&quot;</span>))<br />        }<br />        <span class="hljs-keyword">try?</span> server.start()<br />        <span class="hljs-keyword">return</span> server<br />        <br />    }()<br /><span class="hljs-keyword">#endif</span></span></pre><figure name="a6df" id="a6df" class="graf graf--figure graf-after--pre graf--trailing"><img class="graf-image" data-image-id="1*3ul1Wcr9pSAxUIx0XxOjxg.png" data-width="1768" data-height="1118" src="https://cdn-images-1.medium.com/max/800/1*3ul1Wcr9pSAxUIx0XxOjxg.png"><figcaption class="imageCaption">Xcode 專案預設只有 Debug Configuration 會加入 DEBUG， 從 Xcode 安裝 App 時會採用 Debug Configuration，因此 #if DEBUG 的判斷為 true</figcaption></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/d68517d37d61"><time class="dt-published" datetime="2021-09-07T08:26:55.205Z">September 7, 2021</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E6%96%B9%E4%BE%BF%E6%B8%AC%E8%A9%A6-api-%E7%9A%84-http-server-swifter-d68517d37d61" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>