<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>格子狀排列的 LazyVGrid &amp; LazyHGrid</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">格子狀排列的 LazyVGrid &amp; LazyHGrid</h1>
</header>
<section data-field="subtitle" class="p-summary">
新版的 SwiftUI 推出了專門呈現格子狀排版的 LazyVGrid &amp; LazyHGrid，實現類似 IG 的照片牆頁面變得容易許多。接下來彼得潘將以小時候看的亞森羅蘋為例，一步步介紹 LazyVGrid &amp; LazyHGrid。
</section>
<section data-field="body" class="e-content">
<section name="383a" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="4226" id="4226" class="graf graf--h3 graf--leading graf--title">格子狀排列的 LazyVGrid &amp; LazyHGrid</h3><p name="b7fe" id="b7fe" class="graf graf--p graf-after--h3">開發 SwiftUI App 時，我們有許多方法製作格子狀的排版，比方 iOS 16 的 Grid 和 iOS 14 的 LazyVGrid &amp; LazyHGrid。Apple 建議 cell 數量少時採用 Grid，cell 數量多時採用效能較好的 LazyVGrid &amp; LazyHGrid。接下來彼得潘以小時候看的亞森羅蘋為例，一步步介紹 LazyVGrid &amp; LazyHGrid。</p><div name="0e20" id="0e20" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/swiftui/lazyvgrid" data-href="https://developer.apple.com/documentation/swiftui/lazyvgrid" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/lazyvgrid"><strong class="markup--strong markup--mixtapeEmbed-strong">LazyVGrid | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">A container view that arranges its child views in a grid that grows vertically, creating items only as needed.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/lazyvgrid" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="2ab4061a4b9ca53f5fb2b2d42f22d4eb" data-thumbnail-img-id="0*9-Y3_XiTFZAexRbg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*9-Y3_XiTFZAexRbg);"></a></div><div name="7bcf" id="7bcf" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://developer.apple.com/documentation/swiftui/lazyhgrid" data-href="https://developer.apple.com/documentation/swiftui/lazyhgrid" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/lazyhgrid"><strong class="markup--strong markup--mixtapeEmbed-strong">LazyHGrid | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">A container view that arranges its child views in a grid that grows horizontally, creating items only as needed.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/lazyhgrid" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="aaec63ef83dd66677ce07f3d65f92f83" data-thumbnail-img-id="0*U1aCSDBjlsSLzXil" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*U1aCSDBjlsSLzXil);"></a></div><figure name="c3b4" id="c3b4" class="graf graf--figure graf-after--mixtapeEmbed"><img class="graf-image" data-image-id="1*LGg7-MXzgf_yYB1fPzrFQw.png" data-width="1125" data-height="2436" src="https://cdn-images-1.medium.com/max/800/1*LGg7-MXzgf_yYB1fPzrFQw.png"></figure><h3 name="7d0d" id="7d0d" class="graf graf--h3 graf-after--figure">讓元件一個個排列的 LazyVGrid</h3><p name="5b48" id="5b48" class="graf graf--p graf-after--h3">生成 LazyVGrid 時，我們必須傳入型別<code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong"> [GridItem]</strong></code> 的參數 columns，GridItem 的數量決定 column 的數量。我們傳入<code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong"> [GridItem()]</strong></code>，因此它只會有一個 column。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="03c0" id="03c0" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> books <span class="hljs-operator">=</span> [<br />        <span class="hljs-string">&quot;七大祕密&quot;</span>,<br />        <span class="hljs-string">&quot;虎牙&quot;</span>,<br />        <span class="hljs-string">&quot;魔女與羅蘋&quot;</span>,<br />        <span class="hljs-string">&quot;怪盜與名偵探&quot;</span>,<br />        <span class="hljs-string">&quot;綠眼睛的少女&quot;</span>,<br />        <span class="hljs-string">&quot;黃金三角&quot;</span>,<br />        <span class="hljs-string">&quot;八大奇案&quot;</span>,<br />        <span class="hljs-string">&quot;奇巖城&quot;</span><br />    ]<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> [<span class="hljs-type">GridItem</span>()]<br />        <span class="hljs-type">LazyVGrid</span>(columns: columns) {<br />            <span class="hljs-type">ForEach</span>(books, id: \.<span class="hljs-keyword">self</span>) { book <span class="hljs-keyword">in</span><br />                <span class="hljs-type">Text</span>(book)<br />            }<br />        }<br />    }<br />}</span></pre><figure name="2bc1" id="2bc1" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*AKuyf_AGBVLy6rby1FbtVA.png" data-width="1179" data-height="2556" src="https://cdn-images-1.medium.com/max/800/1*AKuyf_AGBVLy6rby1FbtVA.png"></figure><p name="ef0d" id="ef0d" class="graf graf--p graf-after--figure">接下來的例子我們將採用 ForEach 搭配 range 的寫法，它將讓我們更容易看出資料在畫面上排列的順序。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="d3e9" id="d3e9" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> books <span class="hljs-operator">=</span> [<br />        <span class="hljs-string">&quot;七大祕密&quot;</span>,<br />        <span class="hljs-string">&quot;虎牙&quot;</span>,<br />        <span class="hljs-string">&quot;魔女與羅蘋&quot;</span>,<br />        <span class="hljs-string">&quot;怪盜與名偵探&quot;</span>,<br />        <span class="hljs-string">&quot;綠眼睛的少女&quot;</span>,<br />        <span class="hljs-string">&quot;黃金三角&quot;</span>,<br />        <span class="hljs-string">&quot;八大奇案&quot;</span>,<br />        <span class="hljs-string">&quot;奇巖城&quot;</span><br />    ]<br /><br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> [<span class="hljs-type">GridItem</span>()]<br />        <span class="hljs-type">LazyVGrid</span>(columns: columns) {<br />            <span class="hljs-type">ForEach</span>(books.indices, id: \.<span class="hljs-keyword">self</span>) { item <span class="hljs-keyword">in</span><br />                <span class="hljs-type">VStack</span> {<br />                    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(item)</span>&quot;</span>)<br />                    <span class="hljs-type">Text</span>(books[item])<br />                }<br />            }<br />        }<br />        <br />    }<br />}</span></pre><figure name="a309" id="a309" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*WicISzGxSisnl3mX_9FOxQ.png" data-width="1179" data-height="2556" src="https://cdn-images-1.medium.com/max/800/1*WicISzGxSisnl3mX_9FOxQ.png"></figure><h3 name="3f39" id="3f39" class="graf graf--h3 graf-after--figure">顯示多個 Column 的 LazyVGrid</h3><p name="1efb" id="1efb" class="graf graf--p graf-after--h3">顯示多個 Column 完全不是問題，array 裡 GridItem 的數量即為 column 的數量，因此以下寫法將產生兩個 column 的頁面。</p><ul class="postList"><li name="e9aa" id="e9aa" class="graf graf--li graf-after--p">寫法 1。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="c4d5" id="c4d5" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> <span class="hljs-type">Array</span>(repeating: <span class="hljs-type">GridItem</span>(), count: <span class="hljs-number">2</span>)</span></pre><ul class="postList"><li name="bf7d" id="bf7d" class="graf graf--li graf-after--pre">寫法 2。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1bde" id="1bde" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> [<span class="hljs-type">GridItem</span>(), <span class="hljs-type">GridItem</span>()]</span></pre><p name="0daa" id="0daa" class="graf graf--p graf-after--pre">當有多個 column 時，LazyVGrid 的元件將從第一個 row 開始排列，從頭排到尾後再排到第二個 row，其它以此類推。</p><figure name="d71f" id="d71f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*T0696Urn-5eKeV_D03I9WA.png" data-width="1179" data-height="2556" src="https://cdn-images-1.medium.com/max/800/1*T0696Urn-5eKeV_D03I9WA.png"></figure><h3 name="ba72" id="ba72" class="graf graf--h3 graf-after--figure">上下捲動的 LazyVGrid</h3><p name="e3a9" id="e3a9" class="graf graf--p graf-after--h3">以 ScrollView 包著 LazyVGrid 即可實現上下捲動的格子狀排版。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="5866" id="5866" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> books <span class="hljs-operator">=</span> [<br />        <span class="hljs-string">&quot;七大祕密&quot;</span>,<br />        <span class="hljs-string">&quot;虎牙&quot;</span>,<br />        <span class="hljs-string">&quot;魔女與羅蘋&quot;</span>,<br />        <span class="hljs-string">&quot;怪盜與名偵探&quot;</span>,<br />        <span class="hljs-string">&quot;綠眼睛的少女&quot;</span>,<br />        <span class="hljs-string">&quot;黃金三角&quot;</span>,<br />        <span class="hljs-string">&quot;八大奇案&quot;</span>,<br />        <span class="hljs-string">&quot;奇巖城&quot;</span><br />    ]<br /><br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> [<span class="hljs-type">GridItem</span>()]<br />        <span class="hljs-type">ScrollView</span> {<br />            <span class="hljs-type">LazyVGrid</span>(columns: columns) {<br />                <span class="hljs-type">ForEach</span>(books.indices, id: \.<span class="hljs-keyword">self</span>) { item <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">BookView</span>(book: books[item], number: item <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)<br />                }<br />            }<br />        }<br />        <br />    }<br />}</span></pre><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="cd05" id="cd05" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BookView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> book: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> number: <span class="hljs-type">Int</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Image</span>(book)<br />                .resizable()<br />                .scaledToFill()<br />                .frame(width: <span class="hljs-number">150</span>, height: <span class="hljs-number">150</span>)<br />                .clipped()<br />            <span class="hljs-type">Text</span>(book)<br />        }<br />        .overlay(alignment: .topLeading) {<br />            <span class="hljs-type">NumberImage</span>(number: number)<br />        }<br />    }<br />}</span></pre><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="41ea" id="41ea" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">NumberImage</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> number: <span class="hljs-type">Int</span><br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;<span class="hljs-subst">\(number)</span>.circle.fill&quot;</span>)<br />            .font(.largeTitle)<br />            .foregroundStyle(.white)<br />    }<br />}</span></pre><p name="cde5" id="cde5" class="graf graf--p graf-after--pre">LazyVGrid 開頭的 lazy 暗示著裡面的元件將在需要時才生成，因此如下圖所示，一開始畫面只看到五本書時，它只需要產生五本書的元件，其它書的元件等滑到時再產生即可。</p><figure name="b62f" id="b62f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*JEGyJTO5P1QrAsn0ZJRseg.png" data-width="1174" data-height="1164" src="https://cdn-images-1.medium.com/max/800/1*JEGyJTO5P1QrAsn0ZJRseg.png"></figure><p name="d84c" id="d84c" class="graf graf--p graf-after--figure">剛剛的例子也可以改成多個 column，例如以下例子。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="55fc" id="55fc" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> <span class="hljs-type">Array</span>(repeating: <span class="hljs-type">GridItem</span>(), count: <span class="hljs-number">2</span>)</span></pre><figure name="8fc4" id="8fc4" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*THpy3d_kG-o9HmKgIM5Frw.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*THpy3d_kG-o9HmKgIM5Frw.png"></figure><h3 name="7eeb" id="7eeb" class="graf graf--h3 graf-after--figure">GridItem 的 init</h3><p name="efcf" id="efcf" class="graf graf--p graf-after--h3">剛剛我們以 GridItem() 產生 GirdItem，它的 init 如下。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="bf77" id="bf77" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">init</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">size</span>: <span class="hljs-type">GridItem</span>.<span class="hljs-type">Size</span> <span class="hljs-operator">=</span> .flexible(), <span class="hljs-params">spacing</span>: <span class="hljs-type">CGFloat</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>, <span class="hljs-params">alignment</span>: <span class="hljs-type">Alignment</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>)</span></pre><p name="d3a8" id="d3a8" class="graf graf--p graf-after--pre">參數 size 採用的預設值是 .flexible()，表示 column 的寬度將依據可用空間自動算出合適的大小，待會我們會再介紹其它設定 size 的方法。</p><div name="eb89" id="eb89" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/swiftui/griditem/init%28_:spacing:alignment:%29" data-href="https://developer.apple.com/documentation/swiftui/griditem/init(_:spacing:alignment:)" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/griditem/init(_:spacing:alignment:)"><strong class="markup--strong markup--mixtapeEmbed-strong">Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/griditem/init%28_:spacing:alignment:%29" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="7320410560f7d6bcd57ba39cedb919b4"></a></div><h3 name="4bd8" id="4bd8" class="graf graf--h3 graf-after--mixtapeEmbed">讓圖片寬度隨 column 寬度調整的 LazyVGrid</h3><p name="6a6f" id="6a6f" class="graf graf--p graf-after--h3">我們也可以讓圖片寬度隨 column 寬度調整。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="5d19" id="5d19" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BookView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> book: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> number: <span class="hljs-type">Int</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Image</span>(book)<br />                .resizable()<br />                .scaledToFill()<br />                .frame(height: <span class="hljs-number">100</span>)<br />                .clipped()<br />            <span class="hljs-type">Text</span>(book)<br />        }<br />        .overlay(alignment: .topLeading) {<br />            <span class="hljs-type">NumberImage</span>(number: number)<br />        }<br />    }<br />}</span></pre><p name="6375" id="6375" class="graf graf--p graf-after--pre">以上程式的 Image 我們只設定它的高度為 100，有 2 個 column 時，圖片將平分螢幕扣掉間距的寬度，因此螢幕愈大時圖片也會愈大。</p><figure name="3e70" id="3e70" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*e_ggmiUk2uI3QIRrKyWziw.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*e_ggmiUk2uI3QIRrKyWziw.png"></figure><h3 name="2e37" id="2e37" class="graf graf--h3 graf-after--figure">調整 LazyVGrid 的間距</h3><p name="8f6c" id="8f6c" class="graf graf--p graf-after--h3">生成 LazyVGrid 時，我們可以傳入參數 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">spacing</strong></code> 控制 row 之間的間距。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="b9b8" id="b9b8" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">LazyVGrid</span>(columns: columns, spacing: <span class="hljs-number">100</span>) {</span></pre><figure name="6dad" id="6dad" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*u2W6hxGSSnxkHgxNk-F38w.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*u2W6hxGSSnxkHgxNk-F38w.png"></figure><p name="d3ab" id="d3ab" class="graf graf--p graf-after--figure">生成 GridItem 時，從參數 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">spacing</strong></code> 可控制 column 之間的間距。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="f3cb" id="f3cb" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> [<span class="hljs-type">GridItem</span>(spacing: <span class="hljs-number">100</span>), <span class="hljs-type">GridItem</span>()]<br />        <span class="hljs-type">ScrollView</span> {<br />            <span class="hljs-type">LazyVGrid</span>(columns: columns) {<br />                <span class="hljs-type">ForEach</span>(books.indices, id: \.<span class="hljs-keyword">self</span>) { item <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">BookView</span>(book: books[item], number: item <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)<br />                }<br />            }<br />        }<br />}</span></pre><p name="e744" id="e744" class="graf graf--p graf-after--pre">如下圖所示，兩個 column 時只會有一個 column 間的間距，因此我們在第一個 GridItem 設定間距 100，第二個 GirdItem 不須設定。</p><figure name="d591" id="d591" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*9Czx6R5vsrBm8vnI_y161w.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*9Czx6R5vsrBm8vnI_y161w.png"></figure><p name="fd0c" id="fd0c" class="graf graf--p graf-after--figure">若想讓 column 之間 0 間距，則可在生成 GridItem 時傳入 spacing 0。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="a2da" id="a2da" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> [<span class="hljs-type">GridItem</span>(spacing: <span class="hljs-number">0</span>), <span class="hljs-type">GridItem</span>()]</span></pre><figure name="9b64" id="9b64" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*mEwA4-Sf40-KFS76yqt25Q.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*mEwA4-Sf40-KFS76yqt25Q.png"></figure><h3 name="ec95" id="ec95" class="graf graf--h3 graf-after--figure">讓圖片固定比例的 LazyVGrid</h3><p name="701a" id="701a" class="graf graf--p graf-after--h3">我們也可以讓 LazyVGrid 裡的圖片寬度隨 column 寬度調整，而且圖片維持固定比例。</p><p name="9477" id="9477" class="graf graf--p graf-after--p">以下程式將顯示正方形的圖片，超出的地方切除。</p><ul class="postList"><li name="0ef4" id="0ef4" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">方法 1: 使用 Rectangle &amp; overlay</strong></li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="0ebf" id="0ebf" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> books <span class="hljs-operator">=</span> [<br />        <span class="hljs-string">&quot;七大祕密&quot;</span>,<br />        <span class="hljs-string">&quot;虎牙&quot;</span>,<br />        <span class="hljs-string">&quot;魔女與羅蘋&quot;</span>,<br />        <span class="hljs-string">&quot;怪盜與名偵探&quot;</span>,<br />        <span class="hljs-string">&quot;綠眼睛的少女&quot;</span>,<br />        <span class="hljs-string">&quot;黃金三角&quot;</span>,<br />        <span class="hljs-string">&quot;八大奇案&quot;</span>,<br />        <span class="hljs-string">&quot;奇巖城&quot;</span><br />    ]<br /><br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> <span class="hljs-type">Array</span>(repeating: <span class="hljs-type">GridItem</span>(), count: <span class="hljs-number">2</span>)<br />        <span class="hljs-type">ScrollView</span> {<br />            <span class="hljs-type">LazyVGrid</span>(columns: columns) {<br />                <span class="hljs-type">ForEach</span>(books.indices, id: \.<span class="hljs-keyword">self</span>) { item <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">BookView</span>(book: books[item], number: item <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)<br />                }<br />            }<br />        }<br />        <br />    }<br />}</span></pre><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="4430" id="4430" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BookView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> book: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> number: <span class="hljs-type">Int</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Rectangle</span>()<br />                .aspectRatio(<span class="hljs-number">1</span>, contentMode: .fit)<br />                .overlay {<br />                    <span class="hljs-type">Image</span>(book)<br />                        .resizable()<br />                        .scaledToFill()<br />                }<br />                .clipped()<br />            <span class="hljs-type">Text</span>(book)<br />        }<br />        .overlay(alignment: .topLeading) {<br />            <span class="hljs-type">NumberImage</span>(number: number)<br />        }<br />    }<br />}</span></pre><p name="349c" id="349c" class="graf graf--p graf-after--pre">從 Rectangle() 呼叫 <code class="markup--code markup--p-code">.aspectRatio(1, contentMode: .fit)</code> 設定比例 1:1，讓 Rectangle 變成正方形，然後利用 overlay 將 Image 加到 Rectangle 上，再搭配 clipped 切成正方形。</p><figure name="ee70" id="ee70" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*yL9HIAvaZdY1lehQY_z-Wg.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*yL9HIAvaZdY1lehQY_z-Wg.png"></figure><p name="b30d" id="b30d" class="graf graf--p graf-after--figure">aspectRatio 傳入 4/3 時將顯示 4:3 的圖片。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="cc62" id="cc62" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">Rectangle</span>()<br />   .aspectRatio(<span class="hljs-number">4</span><span class="hljs-operator">/</span><span class="hljs-number">3</span>, contentMode: .fit)</span></pre><figure name="d633" id="d633" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*R4DMplo0KXBXsb1-b1OwBQ.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*R4DMplo0KXBXsb1-b1OwBQ.png"></figure><ul class="postList"><li name="9261" id="9261" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">方法 2: 使用 GeometryReader</strong></li></ul><p name="8482" id="8482" class="graf graf--p graf-after--li">我們也可以使用 GeometryReader 實現圖片固定比例。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="dcbc" id="dcbc" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BookView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> book: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> number: <span class="hljs-type">Int</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">GeometryReader</span> { proxy <span class="hljs-keyword">in</span><br />                <span class="hljs-type">Image</span>(book)<br />                    .resizable()<br />                    .scaledToFill()<br />                    .frame(width: proxy.size.width)<br />                    .clipped()<br />            }<br />            .aspectRatio(<span class="hljs-number">1</span>, contentMode: .fit)<br />            <span class="hljs-type">Text</span>(book)<br />        }<br />        .overlay(alignment: .topLeading) {<br />            <span class="hljs-type">NumberImage</span>(number: number)<br />        }<br />    }<br />}</span></pre><h3 name="dc60" id="dc60" class="graf graf--h3 graf-after--pre">讓 GridItem 自動計算 column 數量的 adaptive size</h3><p name="b7ea" id="b7ea" class="graf graf--p graf-after--h3">我們也可以在生成 GridItem 時傳入型別 GridItem.Size 的資料控制 column 的寬度。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="e82c" id="e82c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> books <span class="hljs-operator">=</span> [<br />        <span class="hljs-string">&quot;七大祕密&quot;</span>,<br />        <span class="hljs-string">&quot;虎牙&quot;</span>,<br />        <span class="hljs-string">&quot;魔女與羅蘋&quot;</span>,<br />        <span class="hljs-string">&quot;怪盜與名偵探&quot;</span>,<br />        <span class="hljs-string">&quot;綠眼睛的少女&quot;</span>,<br />        <span class="hljs-string">&quot;黃金三角&quot;</span>,<br />        <span class="hljs-string">&quot;八大奇案&quot;</span>,<br />        <span class="hljs-string">&quot;奇巖城&quot;</span><br />    ]<br /><br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> [<span class="hljs-type">GridItem</span>(.adaptive(minimum: <span class="hljs-number">150</span>))]<br />        <span class="hljs-type">ScrollView</span> {<br />            <span class="hljs-type">LazyVGrid</span>(columns: columns) {<br />                <span class="hljs-type">ForEach</span>(books.indices, id: \.<span class="hljs-keyword">self</span>) { item <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">BookView</span>(book: books[item], number: item <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)<br />                }<br />            }<br />        }<br />        <br />    }<br />}</span></pre><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="0121" id="0121" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BookView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> book: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> number: <span class="hljs-type">Int</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Image</span>(book)<br />                .resizable()<br />                .scaledToFill()<br />                .frame(height: <span class="hljs-number">200</span>)<br />                .clipped()<br />            <span class="hljs-type">Text</span>(book)<br />        }<br />        .overlay(alignment: .topLeading) {<br />            <span class="hljs-type">NumberImage</span>(number: number)<br />        }<br />    }<br />}</span></pre><p name="e97d" id="e97d" class="graf graf--p graf-after--pre"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">[GridItem(.adaptive(minimum: 150))]</strong></code> 表示我們希望 column 的最小寬度 150，但比 150 大也 ok，然後 LazyVGrid 將以此為條件盡可能塞入愈多的 column。因此在直向時有 2 個 column，在橫向時變成 4 個 column。</p><figure name="3338" id="3338" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Su014FhWzzzqomO6K0gq_w.png" data-width="1106" data-height="724" src="https://cdn-images-1.medium.com/max/800/1*Su014FhWzzzqomO6K0gq_w.png"></figure><h3 name="1851" id="1851" class="graf graf--h3 graf-after--figure">左右捲動的 LazyHGrid</h3><p name="00f6" id="00f6" class="graf graf--p graf-after--h3">LazyHGrid 的使用方式跟 LazyVGrid 大同小異，LazyHGrid 的元件將從第一個 column 開始排列，從頭排到尾後再排到第二個 column，其它以此類推。</p><p name="dd06" id="dd06" class="graf graf--p graf-after--p">以下程式以 ScrollView 包著 LazyHGrid，GridItem 的數量為 1，實現元件由左而右排列的水平捲動頁面。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1ef8" id="1ef8" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> books <span class="hljs-operator">=</span> [<br />        <span class="hljs-string">&quot;七大祕密&quot;</span>,<br />        <span class="hljs-string">&quot;虎牙&quot;</span>,<br />        <span class="hljs-string">&quot;魔女與羅蘋&quot;</span>,<br />        <span class="hljs-string">&quot;怪盜與名偵探&quot;</span>,<br />        <span class="hljs-string">&quot;綠眼睛的少女&quot;</span>,<br />        <span class="hljs-string">&quot;黃金三角&quot;</span>,<br />        <span class="hljs-string">&quot;八大奇案&quot;</span>,<br />        <span class="hljs-string">&quot;奇巖城&quot;</span><br />    ]<br /><br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">ScrollView</span>(.horizontal) {<br />                <span class="hljs-keyword">let</span> rows <span class="hljs-operator">=</span> [<span class="hljs-type">GridItem</span>()]<br />                <span class="hljs-type">LazyHGrid</span>(rows: rows) {               <br />                    <span class="hljs-type">ForEach</span>(books.indices, id: \.<span class="hljs-keyword">self</span>) { item <span class="hljs-keyword">in</span><br />                        <span class="hljs-type">BookView</span>(book: books[item], number: item <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)<br />                    }<br />                }<br />            }<br />            .fixedSize(horizontal: <span class="hljs-literal">false</span>, vertical: <span class="hljs-literal">true</span>)<br />            <span class="hljs-type">Spacer</span>()<br />        }<br />    }<br />}</span></pre><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="f828" id="f828" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BookView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> book: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> number: <span class="hljs-type">Int</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Image</span>(book)<br />                .resizable()<br />                .scaledToFill()<br />                .frame(width: <span class="hljs-number">150</span>, height: <span class="hljs-number">150</span>)<br />                .clipped()<br />            <span class="hljs-type">Text</span>(book)<br />        }<br />        .overlay(alignment: .topLeading) {<br />            <span class="hljs-type">NumberImage</span>(number: number)<br />        }<br />    }<br />}</span></pre><p name="ef0f" id="ef0f" class="graf graf--p graf-after--pre">值得注意的，我們在 ScrollView 上呼叫 <code class="markup--code markup--p-code">fixedSize(horizontal: false, vertical: true)</code>，讓它的高度維持顯示出全部內容的理想高度，如此 ScrollView 的高度才會剛好等於內容的高度，而非佔滿螢幕。</p><figure name="5893" id="5893" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*PoB3OqrgcYsM9qKExMKuow.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*PoB3OqrgcYsM9qKExMKuow.png"></figure><h3 name="b3ce" id="b3ce" class="graf graf--h3 graf-after--figure">搭配 NavigationLink 點選換頁</h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="6d7c" id="6d7c" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> books <span class="hljs-operator">=</span> [<br />        <span class="hljs-string">&quot;七大祕密&quot;</span>,<br />        <span class="hljs-string">&quot;虎牙&quot;</span>,<br />        <span class="hljs-string">&quot;魔女與羅蘋&quot;</span>,<br />        <span class="hljs-string">&quot;怪盜與名偵探&quot;</span>,<br />        <span class="hljs-string">&quot;綠眼睛的少女&quot;</span>,<br />        <span class="hljs-string">&quot;黃金三角&quot;</span>,<br />        <span class="hljs-string">&quot;八大奇案&quot;</span>,<br />        <span class="hljs-string">&quot;奇巖城&quot;</span><br />    ]<br /><br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">NavigationStack</span> {<br />            <span class="hljs-type">ScrollView</span> {<br />                <span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> <span class="hljs-type">Array</span>(repeating: <span class="hljs-type">GridItem</span>(), count: <span class="hljs-number">2</span>)<br />                <span class="hljs-type">LazyVGrid</span>(columns: columns) {<br />                    <span class="hljs-type">ForEach</span>(books.indices, id: \.<span class="hljs-keyword">self</span>) { item <span class="hljs-keyword">in</span><br />                        <span class="hljs-type">NavigationLink</span> {<br />                            <span class="hljs-type">Image</span>(books[item])<br />                                .resizable()<br />                                .scaledToFit()<br />                        } label: {<br />                            <span class="hljs-type">BookView</span>(book: books[item], number: item <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)<br />                        }<br />                        <br />                    }<br />                }<br />            }<br />        }<br />        <br />    }<br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BookView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> book: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> number: <span class="hljs-type">Int</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Image</span>(book)<br />                .resizable()<br />                .scaledToFill()<br />                .frame(width: <span class="hljs-number">150</span>, height: <span class="hljs-number">150</span>)<br />                .clipped()<br />            <span class="hljs-type">Text</span>(book)<br />        }<br />        .overlay(alignment: .topLeading) {<br />            <span class="hljs-type">NumberImage</span>(number: number)<br />        }<br />    }<br />}</span></pre><figure name="8a44" id="8a44" class="graf graf--figure graf-after--pre graf--trailing"><img class="graf-image" data-image-id="1*r3nvFHYdhFSwtBVRpiZ4rg.png" data-width="924" data-height="896" src="https://cdn-images-1.medium.com/max/800/1*r3nvFHYdhFSwtBVRpiZ4rg.png"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/338a21a7afc3"><time class="dt-published" datetime="2020-08-13T10:39:40.216Z">August 13, 2020</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E6%A0%BC%E5%AD%90%E7%8B%80%E6%8E%92%E5%88%97%E7%9A%84-lazyvgrid-lazyhgrid-338a21a7afc3" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>