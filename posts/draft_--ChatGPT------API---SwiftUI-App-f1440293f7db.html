<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>用 ChatGPT 開發串接 API 的 SwiftUI App</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">用 ChatGPT 開發串接 API 的 SwiftUI App</h1>
</header>
<section data-field="subtitle" class="p-summary">
從 Apple 的 RSS Builder 產生取得台灣最常播放歌曲的 API 網址
</section>
<section data-field="body" class="e-content">
<section name="c39c" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2c23" id="2c23" class="graf graf--h3 graf--leading graf--title">用 ChatGPT 開發串接 API 的 SwiftUI App </h3><p name="9f74" id="9f74" class="graf graf--p graf--empty graf-after--h3"><br></p><h3 name="5df3" id="5df3" class="graf graf--h3 graf-after--p">從 Apple 的 RSS Builder 產生取得台灣最常播放歌曲的 API 網址</h3><pre data-code-block-mode="0" spellcheck="false" name="1d0c" id="1d0c" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content">https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/songs.json</span></pre><div name="84eb" id="84eb" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://rss.applemarketingtools.com/" data-href="https://rss.applemarketingtools.com/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://rss.applemarketingtools.com/"><strong class="markup--strong markup--mixtapeEmbed-strong">RSS Builder</strong><br><em class="markup--em markup--mixtapeEmbed-em">Use the dropdowns to pick setting to generate a new RSS feed URL.</em>rss.applemarketingtools.com</a><a href="https://rss.applemarketingtools.com/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="889975654bb2d48c255dc0b6a2cebb1f" data-thumbnail-img-id="0*hat-p1HB_0S3w5J8" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*hat-p1HB_0S3w5J8);"></a></div><figure name="b295" id="b295" class="graf graf--figure graf-after--mixtapeEmbed"><img class="graf-image" data-image-id="1*1nhUf5gIEJ0gvy5Yb1Ylew.png" data-width="2150" data-height="1230" src="https://cdn-images-1.medium.com/max/800/1*1nhUf5gIEJ0gvy5Yb1Ylew.png"></figure><h3 name="13fe" id="13fe" class="graf graf--h3 graf-after--figure">用 PostMan 抓取 &amp; 複製剛剛 API 網址的 JSON</h3><p name="bd93" id="bd93" class="graf graf--p graf-after--h3">點選下圖紅色框框的按鈕複製 JSON。 </p><figure name="a309" id="a309" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*N63a4mvW1owIGdpBnnooEA.png" data-width="1826" data-height="1212" src="https://cdn-images-1.medium.com/max/800/1*N63a4mvW1owIGdpBnnooEA.png"></figure><h3 name="5192" id="5192" class="graf graf--h3 graf-after--figure">連到 ChatGPT</h3><pre data-code-block-mode="0" spellcheck="false" name="1d03" id="1d03" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content">http://chat.openai.com/</span></pre><h3 name="bad2" id="bad2" class="graf graf--h3 graf-after--pre">請 ChatGPT 定義 JSON 對應的 Decodable typ</h3><p name="9b62" id="9b62" class="graf graf--p graf-after--h3">輸入 </p><pre data-code-block-mode="0" spellcheck="false" name="c0f6" id="c0f6" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><br>define ObservableObject to fetch data from https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/songs.json and decode to FeedResponse <br>  <br><br>struct FeedResponse: Decodable {<br>    let feed: Feed<br>}<br><br>struct Feed: Decodable {<br>    let results: [Song]<br>}<br><br>struct Song: Decodable {<br>    let artistName: String<br>    let id: String<br>    let name: String<br>    let releaseDate: Date<br>    let artworkUrl100: URL<br>    let url: URL<br>}</span></pre><p name="b3f1" id="b3f1" class="graf graf--p graf--empty graf-after--pre"><br></p><p name="c5b6" id="c5b6" class="graf graf--p graf--empty graf-after--p"><br></p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="2101" id="2101" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MusicFeed</span>: <span class="hljs-title class_">ObservableObject</span> {<br />    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>] <span class="hljs-operator">=</span> []<br /><br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchSongs</span>() {<br />        <span class="hljs-comment">// Create a URL instance for the music feed</span><br />        <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/songs.json&quot;</span>)<span class="hljs-operator">!</span><br /><br />        <span class="hljs-comment">// Create a URLSession to fetch the data from the URL</span><br />        <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">URLSession</span>(configuration: .default)<br /><br />        <span class="hljs-comment">// Fetch the data from the URL</span><br />        session.dataTask(with: url) { data, response, error <span class="hljs-keyword">in</span><br />            <span class="hljs-comment">// Handle any errors that may occur</span><br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error {<br />                <span class="hljs-built_in">print</span>(error.localizedDescription)<br />                <span class="hljs-keyword">return</span><br />            }<br /><br />            <span class="hljs-comment">// Use the JSONDecoder class to decode the data into a FeedResponse instance</span><br />            <span class="hljs-keyword">let</span> decoder <span class="hljs-operator">=</span> <span class="hljs-type">JSONDecoder</span>()<br />            <span class="hljs-keyword">let</span> feedResponse <span class="hljs-operator">=</span> <span class="hljs-keyword">try!</span> decoder.decode(<span class="hljs-type">FeedResponse</span>.<span class="hljs-keyword">self</span>, from: data<span class="hljs-operator">!</span>)<br /><br />            <span class="hljs-comment">// Assign the songs from the feed to the @Published property</span><br />            <span class="hljs-type">DispatchQueue</span>.main.async {<br />                <span class="hljs-keyword">self</span>.songs <span class="hljs-operator">=</span> feedResponse.feed.results<br />            }<br />        }.resume()<br />    }<br />}</span></pre><p name="87a8" id="87a8" class="graf graf--p graf-after--pre">問</p><pre data-code-block-mode="0" spellcheck="false" name="6001" id="6001" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">use SwiftUI view to show songs of MusicFeed</span></pre><p name="d387" id="d387" class="graf graf--p graf-after--pre">答</p><pre data-code-block-mode="0" spellcheck="false" name="5cc9" id="5cc9" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">To use a SwiftUI view to show the songs of a MusicFeed object, you would first create a MusicFeed instance and call the fetchSongs method to populate the songs property with data. Then, you would create a SwiftUI View that uses the @ObservedObject property wrapper to bind to the MusicFeed instance and display the songs.<br><br><br></span></pre><p name="0e9a" id="0e9a" class="graf graf--p graf-after--pre">d</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="561f" id="561f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@ObservedObject</span> <span class="hljs-keyword">var</span> musicFeed <span class="hljs-operator">=</span> <span class="hljs-type">MusicFeed</span>()<br /><br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">List</span> {<br />                <span class="hljs-type">ForEach</span>(musicFeed.songs, id: \.id) { song <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">HStack</span> {<br />                        <span class="hljs-type">Image</span>(song.artworkUrl100)<br />                        <span class="hljs-type">Text</span>(song.name)<br />                    }<br />                }<br />            }<br />        }.onAppear(perform: musicFeed.fetchSongs)<br />    }<br />}</span></pre><p name="a1d5" id="a1d5" class="graf graf--p graf-after--pre">問</p><p name="a25e" id="a25e" class="graf graf--p graf-after--p">show ProgressView when MusicFeed fetchSongs</p><p name="2377" id="2377" class="graf graf--p graf-after--p">答</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1bad" id="1bad" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MusicFeed</span>: <span class="hljs-title class_">ObservableObject</span> {<br />    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>] <span class="hljs-operator">=</span> []<br />    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> isFetching: <span class="hljs-type">Bool</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br /><br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchSongs</span>() {<br />        <span class="hljs-comment">// Set the isFetching property to true to indicate that the fetch operation has started</span><br />        <span class="hljs-keyword">self</span>.isFetching <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br /><br />        <span class="hljs-comment">// Create a URL instance for the music feed</span><br />        <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/songs.json&quot;</span>)<span class="hljs-operator">!</span><br /><br />        <span class="hljs-comment">// Create a URLSession to fetch the data from the URL</span><br />        <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">URLSession</span>(configuration: .default)<br /><br />        <span class="hljs-comment">// Fetch the data from the URL</span><br />        session.dataTask(with: url) { data, response, error <span class="hljs-keyword">in</span><br />            <span class="hljs-comment">// Handle any errors that may occur</span><br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error {<br />                <span class="hljs-built_in">print</span>(error.localizedDescription)<br />                <span class="hljs-keyword">return</span><br />            }<br /><br />            <span class="hljs-comment">// Use the JSONDecoder class to decode the data into a FeedResponse instance</span><br />            <span class="hljs-keyword">let</span> decoder <span class="hljs-operator">=</span> <span class="hljs-type">JSONDecoder</span>()<br />            <span class="hljs-keyword">let</span> feedResponse <span class="hljs-operator">=</span> <span class="hljs-keyword">try!</span> decoder.decode(<span class="hljs-type">FeedResponse</span>.<span class="hljs-keyword">self</span>, from: data<span class="hljs-operator">!</span>)<br /><br />            <span class="hljs-comment">// Assign the songs from the feed to the @Published property</span><br />            <span class="hljs-type">DispatchQueue</span>.main.async {<br />                <span class="hljs-keyword">self</span>.songs <span class="hljs-operator">=</span> feedResponse.feed.results<br />                <span class="hljs-comment">// Set the isFetching property to false to indicate that the fetch operation has finished</span><br />                <span class="hljs-keyword">self</span>.isFetching <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />            }<br />        }.resume()<br />    }<br />}</span></pre><p name="9626" id="9626" class="graf graf--p graf--empty graf-after--pre"><br></p><p name="f15b" id="f15b" class="graf graf--p graf--empty graf-after--p"><br></p><pre data-code-block-mode="0" spellcheck="false" name="281d" id="281d" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">define an ObservableObject to fetch data from https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/songs.json and decode to FeedResponse<br>use a SwiftUI view to show the songs of an ObservableObject<br>The view show ProgressView when ObservableObject fetch data<br>The view show alert when MusicFeed fail fetch data</span></pre><p name="f8a2" id="f8a2" class="graf graf--p graf-after--pre"> 答</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="fb84" id="fb84" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MusicFeed</span>: <span class="hljs-title class_">ObservableObject</span> {<br />    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> songs <span class="hljs-operator">=</span> [<span class="hljs-type">Song</span>]()<br />    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> error: <span class="hljs-type">Error</span>?<br /><br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchSongs</span>() {<br />        isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br />        error <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span><br /><br />        <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/songs.json&quot;</span>)<span class="hljs-operator">!</span><br />        <span class="hljs-keyword">let</span> task <span class="hljs-operator">=</span> <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { (data, response, error) <span class="hljs-keyword">in</span><br />            <span class="hljs-type">DispatchQueue</span>.main.async {<br />                <span class="hljs-keyword">self</span>.isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br /><br />                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error {<br />                    <span class="hljs-keyword">self</span>.error <span class="hljs-operator">=</span> error<br />                    <span class="hljs-keyword">return</span><br />                }<br /><br />                <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> data <span class="hljs-keyword">else</span> {<br />                    <span class="hljs-keyword">self</span>.error <span class="hljs-operator">=</span> <span class="hljs-type">NSError</span>(domain: <span class="hljs-string">&quot;&quot;</span>, code: <span class="hljs-number">0</span>, userInfo: [NSLocalizedDescriptionKey: <span class="hljs-string">&quot;Data was not returned from the request&quot;</span>]) <span class="hljs-keyword">as</span> <span class="hljs-type">Error</span><br />                    <span class="hljs-keyword">return</span><br />                }<br /><br />                <span class="hljs-keyword">do</span> {<br />                    <span class="hljs-keyword">let</span> feedResponse <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">FeedResponse</span>.<span class="hljs-keyword">self</span>, from: data)<br />                    <span class="hljs-keyword">self</span>.songs <span class="hljs-operator">=</span> feedResponse.feed.results<br />                } <span class="hljs-keyword">catch</span> {<br />                    <span class="hljs-keyword">self</span>.error <span class="hljs-operator">=</span> error<br />                }<br />            }<br />        }<br />        task.resume()<br />    }<br />}<br /><br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MusicFeedView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@ObservedObject</span> <span class="hljs-keyword">var</span> musicFeed <span class="hljs-operator">=</span> <span class="hljs-type">MusicFeed</span>()<br /><br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> error: <span class="hljs-type">Error</span>?<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> songs <span class="hljs-operator">=</span> [<span class="hljs-type">Song</span>]()<br /><br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-keyword">if</span> isLoading {<br />                <span class="hljs-type">ProgressView</span>()<br />            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> error <span class="hljs-operator">!=</span> <span class="hljs-literal">nil</span> {<br />                <span class="hljs-type">Alert</span>(title: <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Error&quot;</span>), message: <span class="hljs-type">Text</span>(error<span class="hljs-operator">!</span>.localizedDescription), dismissButton: .default(<span class="hljs-type">Text</span>(<span class="hljs-string">&quot;OK&quot;</span>)))<br />            } <span class="hljs-keyword">else</span> {<br />                <span class="hljs-type">List</span>(songs) { song <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">Text</span>(song.name)<br />                }<br />            }<br />        }<br />        .onAppear(perform: musicFeed.fetchSongs)<br />        .onReceive(musicFeed.<span class="hljs-variable">$isLoading</span>) { <span class="hljs-keyword">self</span>.isLoading <span class="hljs-operator">=</span> <span class="hljs-variable">$0</span> }<br />        .onReceive(musicFeed.<span class="hljs-variable">$error</span>) { <span class="hljs-keyword">self</span>.error <span class="hljs-operator">=</span> <span class="hljs-variable">$0</span> }<br />        .onReceive(musicFeed.<span class="hljs-variable">$songs</span>) { <span class="hljs-keyword">self</span>.songs <span class="hljs-operator">=</span> <span class="hljs-variable">$0</span> }<br />    }<br />}</span></pre><figure name="1f90" id="1f90" class="graf graf--figure graf--iframe graf-after--pre"><iframe src="https://www.youtube.com/embed/RmaCJyvSyUE?feature=oembed" width="700" height="393" frameborder="0" scrolling="no"></iframe></figure><p name="f0f6" id="f0f6" class="graf graf--p graf--empty graf-after--figure graf--trailing"><br></p></div></div></section>
</section>
<footer><p><a href="https://medium.com/p/f1440293f7db">View original.</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>