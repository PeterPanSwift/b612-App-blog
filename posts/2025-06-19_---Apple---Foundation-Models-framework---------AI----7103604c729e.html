<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>使用 Apple 的 Foundation Models framework 開發生成文字的 AI 功能</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">使用 Apple 的 Foundation Models framework 開發生成文字的 AI 功能</h1>
</header>
<section data-field="subtitle" class="p-summary">
Apple 在 iOS 26 推出全新的 Foundation Models framework，App 可直接透過裝置的 model 實現跟生成文字有關的 AI 功能。它具有以下優點。
</section>
<section data-field="body" class="e-content">
<section name="2219" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="7f23" id="7f23" class="graf graf--h3 graf--leading graf--title">使用 Apple 的 Foundation Models framework 開發生成文字的 AI 功能</h3><p name="7ed1" id="7ed1" class="graf graf--p graf-after--h3">Apple 在 iOS 26 推出全新的 Foundation Models framework，App 可直接透過裝置的 model 實現跟生成文字有關的 AI 功能。它具有以下優點。</p><ul class="postList"><li name="081a" id="081a" class="graf graf--li graf-after--p">不需要網路，沒有網路也能使用。</li><li name="c445" id="c445" class="graf graf--li graf-after--li">不需要花錢。OpenAI、Claude、Gemini 等透過網路串接的 AI 雖然比較聰明，但使用愈多要付愈多錢。</li><li name="ac87" id="ac87" class="graf graf--li graf-after--li">可無限詢問，沒有數量限制。</li><li name="9fc7" id="9fc7" class="graf graf--li graf-after--li">不需要 API key。</li><li name="a7c0" id="a7c0" class="graf graf--li graf-after--li">串接的程式簡單易用。</li></ul><p name="c99c" id="c99c" class="graf graf--p graf-after--li">目前開發生成文字內容的 AI 程式時，主要透過下 prompt 給 AI model，然後 model 生成 response 的架構組成。</p><figure name="9f43" id="9f43" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*qUWzIMVIrfElK8BQ" data-width="1536" data-height="1024" src="https://cdn-images-1.medium.com/max/800/0*qUWzIMVIrfElK8BQ"></figure><p name="33a1" id="33a1" class="graf graf--p graf-after--figure">相較於串接 OpenAI、Claude、Gemini API 的程式，串接 Apple Foundation Models framework 的程式簡單許多，不用花時間申請 API key，只要兩行程式即可下 prompt 得到 response。</p><p name="a7be" id="a7be" class="graf graf--p graf-after--p">以下我們用 #Playground 示範說明。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="c655" id="c655" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> FoundationModels<br /><span class="hljs-keyword">import</span> Playgrounds<br /><br />#<span class="hljs-type">Playground</span> {<br />    <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()<br />    <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">&quot;請說個笑話&quot;</span>)<br />    <span class="hljs-built_in">print</span>(response.content)<br />}</span></pre><figure name="1d45" id="1d45" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*aAHkjfzrA560k8roLDs_dQ.png" data-width="2236" data-height="1388" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*aAHkjfzrA560k8roLDs_dQ.png"></figure><p name="2b33" id="2b33" class="graf graf--p graf-after--figure">剛剛的程式十分簡單，首先 import FoundationModels，生成 LanguageModelSession 物件，然後呼叫 respond 詢問 AI model。參數 to 傳入 prompt 字串，respond function 回傳 Response 型別的資料，透過它的 content 即可取得 model 生成的文字內容。</p><p name="1839" id="1839" class="graf graf--p graf-after--p">透過 LanguageModelSession 我們可以快速實現問答 App，例如以下 App 透過 AI model 回答水瓶座的優點。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="aa1d" id="aa1d" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> FoundationModels<br /><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> answer <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />    <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">ScrollView</span> {<br />                <span class="hljs-type">Text</span>(answer)<br />            }<br />            .contentMargins(<span class="hljs-number">10</span>)<br />            .overlay {<br />                <span class="hljs-keyword">if</span> session.isResponding {<br />                    <span class="hljs-type">ProgressView</span>()<br />                }<br />            }<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;水瓶座的優點&quot;</span>) {<br />                <span class="hljs-type">Task</span> {<br />                    <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">&quot;水瓶座的優點&quot;</span>)<br />                    answer <span class="hljs-operator">=</span> response.content<br />                }<br />            }<br />            .buttonStyle(.glass)<br />            .font(.largeTitle)<br />            .disabled(session.isResponding)<br />        }<br />    }<br />}</span></pre><p name="f727" id="f727" class="graf graf--p graf-after--pre">App 畫面。</p><figure name="8232" id="8232" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*E5ZTL00s3WzcOEGoNsLM2A.png" data-width="1206" data-height="2622" src="https://cdn-images-1.medium.com/max/800/1*E5ZTL00s3WzcOEGoNsLM2A.png"></figure><p name="6ff6" id="6ff6" class="graf graf--p graf-after--figure">值得注意的，LanguageModelSession 需要花一些時間思考生成 response，當它正在生成 response 時，若是我們再呼叫 respond 詢問新的問題，程式將直接閃退，顯示錯誤訊息。</p><pre data-code-block-mode="0" spellcheck="false" name="38ba" id="38ba" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">Fatal error: You attempted to call `respond(to:)` a second time before letting the first call complete. This is a programmer error.</span></pre><figure name="d972" id="d972" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*W0I6QZrkqLoDnFPg6h8b8A.png" data-width="1934" data-height="198" src="https://cdn-images-1.medium.com/max/800/1*W0I6QZrkqLoDnFPg6h8b8A.png"></figure><p name="1d24" id="1d24" class="graf graf--p graf-after--figure">為了防止閃退並讓 LanguageModelSession 在生成 response 時顯示 ProgressView，我們可用 session.isResponding 判斷它是否正在生成 response。</p><p name="1e9e" id="1e9e" class="graf graf--p graf-after--p">Apple 的 Language Model 雖然能回答問題，不過要記得它畢竟是運行在裝置上的小型 model，知識沒有運行在網路上的大 model 淵博，加上它無法連網查詢最新資料，所以詢問它一些知識性的問題是可能出錯的，比方以下它回答中華職棒的球隊有 10 隊，正確答案應該是 6 隊。</p><figure name="2635" id="2635" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*3mD_82QcwGf4u5-Z14rw3A.png" data-width="1998" data-height="970" src="https://cdn-images-1.medium.com/max/800/1*3mD_82QcwGf4u5-Z14rw3A.png"></figure><p name="4506" id="4506" class="graf graf--p graf-after--figure">ps: 透過 Tool 可協助 AI model 取得回答問題需要的知識，比方串接 API 取得來自網路的資料。</p><div name="bddc" id="bddc" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/foundationmodels/tool" data-href="https://developer.apple.com/documentation/foundationmodels/tool" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/foundationmodels/tool"><strong class="markup--strong markup--mixtapeEmbed-strong">Tool | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">A tool that a model can call to gather information at runtime or perform side effects.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/foundationmodels/tool" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="30c516c7e1c72e68c64fa9d8d7a80854" data-thumbnail-img-id="0*aUvklmTvmIKs6dWM" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*aUvklmTvmIKs6dWM);"></a></div><p name="625a" id="625a" class="graf graf--p graf-after--mixtapeEmbed">Apple 的 AI model 也有不錯的記性，同一個 LanguageModelSession 會記得之前的對話。</p><p name="06be" id="06be" class="graf graf--p graf-after--p">透過以下程式證明 AI model 成功記得彼得潘提到的三個名字，雖然它扯到不相關的西遊記。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="c6da" id="c6da" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">#<span class="hljs-type">Playground</span> {<br />    <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()<br />    <span class="hljs-keyword">let</span> response1 <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">&quot;請記住以下名字，以下我會開始介紹&quot;</span>)<br />    <span class="hljs-keyword">let</span> response2 <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">&quot;小龍女&quot;</span>)<br />    <span class="hljs-keyword">let</span> response3 <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">&quot;黃蓉&quot;</span>)<br />    <span class="hljs-keyword">let</span> response4 <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">&quot;任盈盈&quot;</span>)<br />    <span class="hljs-keyword">let</span> response5 <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">&quot;我剛剛提到哪些名字&quot;</span>)<br />}</span></pre><figure name="d57f" id="d57f" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*zDQwUWHDOzLobDFsayjF0w.png" data-width="3104" data-height="1448" src="https://cdn-images-1.medium.com/max/800/1*zDQwUWHDOzLobDFsayjF0w.png"></figure><p name="073b" id="073b" class="graf graf--p graf-after--figure">最後我們再示範一下利用 Apple 的 AI model 實現完整的問答 App。</p><ul class="postList"><li name="f7ee" id="f7ee" class="graf graf--li graf-after--p">版本 1: 只顯示最新一次問答。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1bc8" id="1bc8" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> FoundationModels<br /><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> prompt <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> answer <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> oldPrompt <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />    <span class="hljs-meta">@FocusState</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isPromptFocused<br />    <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">ScrollView</span> {<br />            <span class="hljs-type">VStack</span>(alignment: .trailing) {<br />                <span class="hljs-type">Text</span>(oldPrompt)<br />                    .padding()<br />                    .background(.yellow, in: .rect(cornerRadius: <span class="hljs-number">10</span>))<br />                    .opacity(oldPrompt.isEmpty <span class="hljs-operator">?</span> <span class="hljs-number">0</span> : <span class="hljs-number">1</span>)<br />                <span class="hljs-type">Text</span>(answer)<br />                    .padding()<br />                    .frame(maxWidth: .infinity, alignment: .leading)<br />            }<br />        }<br />        .contentMargins(<span class="hljs-number">10</span>, for: .scrollContent)<br />        .overlay {<br />            <span class="hljs-keyword">if</span> session.isResponding {<br />                <span class="hljs-type">ProgressView</span>()<br />            }<br />        }<br />        .safeAreaInset(<br />            edge: .bottom,<br />            content: {<br />                inputView<br />            }<br />        )<br />        .onAppear {<br />            isPromptFocused <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br />        }<br />    }<br />    <br />    <span class="hljs-keyword">var</span> inputView: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span>(alignment: .trailing) {<br />            <span class="hljs-type">TextField</span>(<span class="hljs-string">&quot;prompt&quot;</span>, text: <span class="hljs-variable">$prompt</span>, axis: .vertical)<br />                .lineLimit(<span class="hljs-number">3</span>)<br />                .focused(<span class="hljs-variable">$isPromptFocused</span>)<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;&quot;</span>, systemImage: <span class="hljs-string">&quot;arrow.up.circle.fill&quot;</span>, action: sendPrompt)<br />                .labelStyle(.iconOnly)<br />                .font(.largeTitle)<br />                .disabled(isSendDisabled)<br />        }<br />        .padding()<br />        .glassEffect()<br />        .padding()<br />    }<br />    <br />    <span class="hljs-keyword">var</span> isSendDisabled: <span class="hljs-type">Bool</span> {<br />        prompt.trimmingCharacters(in: .whitespacesAndNewlines).isEmpty<br />        <span class="hljs-operator">||</span> session.isResponding<br />    }<br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sendPrompt</span>() {<br />        oldPrompt <span class="hljs-operator">=</span> prompt.trimmingCharacters(in: .whitespacesAndNewlines)<br />        prompt <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />        answer <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />        <span class="hljs-type">Task</span> {<br />            <span class="hljs-keyword">do</span> {<br />                <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: oldPrompt)<br />                answer <span class="hljs-operator">=</span> response.content<br />            } <span class="hljs-keyword">catch</span> {<br />                <span class="hljs-built_in">print</span>(error)<br />            }<br />        }<br />    }<br />}</span></pre><p name="15ea" id="15ea" class="graf graf--p graf-after--pre">畫面出現時即顯示鍵盤。</p><figure name="4e93" id="4e93" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*zB1lhvHQqye7xpbyweto8Q.png" data-width="1206" data-height="2622" src="https://cdn-images-1.medium.com/max/800/1*zB1lhvHQqye7xpbyweto8Q.png"></figure><p name="afcf" id="afcf" class="graf graf--p graf-after--figure">請 AI 說個睡前故事。</p><figure name="6732" id="6732" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*6LIEA17HE_LDoQdY0g3fhg.png" data-width="1206" data-height="2622" src="https://cdn-images-1.medium.com/max/800/1*6LIEA17HE_LDoQdY0g3fhg.png"></figure><p name="512a" id="512a" class="graf graf--p graf-after--figure">AI 思考中。</p><figure name="36d7" id="36d7" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*dx6CJ8IG71vBK9gyLbotXQ.png" data-width="1206" data-height="2622" src="https://cdn-images-1.medium.com/max/800/1*dx6CJ8IG71vBK9gyLbotXQ.png"></figure><p name="794e" id="794e" class="graf graf--p graf-after--figure">AI 生成可愛的小白兔故事。</p><figure name="ae41" id="ae41" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*gJNowGmIwW0YRcDgtFEsQA.png" data-width="1206" data-height="2622" src="https://cdn-images-1.medium.com/max/800/1*gJNowGmIwW0YRcDgtFEsQA.png"></figure><p name="8932" id="8932" class="graf graf--p graf-after--figure">詢問新的問題將覆蓋之前的問答。</p><figure name="57bc" id="57bc" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*GEUx5H49qKdSwJtaJQAdNA.png" data-width="1206" data-height="2622" src="https://cdn-images-1.medium.com/max/800/1*GEUx5H49qKdSwJtaJQAdNA.png"></figure><ul class="postList"><li name="14b7" id="14b7" class="graf graf--li graf-after--figure">版本 2: 顯示歷次的問答。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="6a79" id="6a79" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MessagePair</span>: <span class="hljs-title class_">Identifiable</span> {<br />    <span class="hljs-keyword">let</span> id <span class="hljs-operator">=</span> <span class="hljs-type">UUID</span>()<br />    <span class="hljs-keyword">let</span> prompt: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">var</span> answer <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />}</span></pre><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="f2b3" id="f2b3" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MessagePairView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> messagePair: <span class="hljs-type">MessagePair</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span>(alignment: .trailing) {<br />            <span class="hljs-type">Text</span>(messagePair.prompt)<br />                .padding()<br />                .background(.yellow, in: .rect(cornerRadius: <span class="hljs-number">10</span>))<br />                .opacity(messagePair.prompt.isEmpty <span class="hljs-operator">?</span> <span class="hljs-number">0</span> : <span class="hljs-number">1</span>)<br />            <span class="hljs-type">Text</span>(messagePair.answer)<br />                .padding()<br />                .frame(maxWidth: .infinity, alignment: .leading)<br />        }<br />    }<br />}</span></pre><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1d0f" id="1d0f" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> FoundationModels<br /><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> messagePairs <span class="hljs-operator">=</span> [<span class="hljs-type">MessagePair</span>]()<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> prompt <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />    <span class="hljs-meta">@FocusState</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isPromptFocused<br />    <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">ScrollView</span> {<br />            <span class="hljs-type">LazyVStack</span> {<br />                <span class="hljs-type">ForEach</span>(messagePairs) { messagePair <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">MessagePairView</span>(messagePair: messagePair)<br />                }<br />            }<br />        }<br />        .contentMargins(<span class="hljs-number">10</span>, for: .scrollContent)<br />        .overlay {<br />            <span class="hljs-keyword">if</span> session.isResponding {<br />                <span class="hljs-type">ProgressView</span>()<br />            }<br />        }<br />        .safeAreaInset(<br />            edge: .bottom,<br />            content: {<br />                inputView<br />            }<br />        )<br />        .onAppear {<br />            isPromptFocused <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br />        }<br />    }<br />    <br />    <span class="hljs-keyword">var</span> inputView: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span>(alignment: .trailing) {<br />            <span class="hljs-type">TextField</span>(<span class="hljs-string">&quot;prompt&quot;</span>, text: <span class="hljs-variable">$prompt</span>, axis: .vertical)<br />                .lineLimit(<span class="hljs-number">3</span>)<br />                .focused(<span class="hljs-variable">$isPromptFocused</span>)<br />            <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;&quot;</span>, systemImage: <span class="hljs-string">&quot;arrow.up.circle.fill&quot;</span>, action: sendPrompt)<br />                .labelStyle(.iconOnly)<br />                .font(.largeTitle)<br />                .disabled(isSendDisabled)<br />        }<br />        .padding()<br />        .glassEffect()<br />        .padding()<br />    }<br />    <br />    <span class="hljs-keyword">var</span> isSendDisabled: <span class="hljs-type">Bool</span> {<br />        prompt.trimmingCharacters(in: .whitespacesAndNewlines).isEmpty<br />        <span class="hljs-operator">||</span> session.isResponding<br />    }<br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sendPrompt</span>() {<br />        <span class="hljs-keyword">let</span> messagePair <span class="hljs-operator">=</span> <span class="hljs-type">MessagePair</span>(prompt: prompt.trimmingCharacters(in: .whitespacesAndNewlines))<br />        prompt <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />        messagePairs.append(messagePair)<br />        <span class="hljs-type">Task</span> {<br />            <span class="hljs-keyword">do</span> {<br />                <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: messagePair.prompt)<br />                messagePairs[messagePairs.count<span class="hljs-operator">-</span><span class="hljs-number">1</span>].answer <span class="hljs-operator">=</span> response.content<br />            } <span class="hljs-keyword">catch</span> {<br />                <span class="hljs-built_in">print</span>(error)<br />            }<br />        }<br />    }<br />}</span></pre><p name="51fc" id="51fc" class="graf graf--p graf-after--pre">App 畫面。</p><figure name="beb4" id="beb4" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*SDLOMCqu4lribfdTn6d1Zg.png" data-width="1206" data-height="2622" src="https://cdn-images-1.medium.com/max/800/1*SDLOMCqu4lribfdTn6d1Zg.png"></figure><p name="dda5" id="dda5" class="graf graf--p graf-after--figure">以上只是 Apple Foundation Models framework 的基本功能介紹，有興趣的朋友可進一步參考以下連結學習更多進階功能。</p><h3 name="e47a" id="e47a" class="graf graf--h3 graf-after--p">相關連結</h3><div name="a7c3" id="a7c3" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://developer.apple.com/documentation/FoundationModels/generating-content-and-performing-tasks-with-foundation-models" data-href="https://developer.apple.com/documentation/FoundationModels/generating-content-and-performing-tasks-with-foundation-models" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/FoundationModels/generating-content-and-performing-tasks-with-foundation-models"><strong class="markup--strong markup--mixtapeEmbed-strong">Generating content and performing tasks with Foundation Models | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Enhance the experience in your app by prompting an on-device large language model.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/FoundationModels/generating-content-and-performing-tasks-with-foundation-models" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="c679cac7e95452c5c9a6b0f26cb616e7" data-thumbnail-img-id="0*zLusUoWxxHI6b-nR" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*zLusUoWxxHI6b-nR);"></a></div><div name="7f34" id="7f34" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://developer.apple.com/videos/play/wwdc2025/286/" data-href="https://developer.apple.com/videos/play/wwdc2025/286/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/videos/play/wwdc2025/286/"><strong class="markup--strong markup--mixtapeEmbed-strong">Meet the Foundation Models framework - WWDC25 - Videos - Apple Developer</strong><br><em class="markup--em markup--mixtapeEmbed-em">Learn how to tap into the on-device large language model behind Apple Intelligence! This high-level overview covers…</em>developer.apple.com</a><a href="https://developer.apple.com/videos/play/wwdc2025/286/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="f2cba778adb60cc0dd38d4f56e24a773" data-thumbnail-img-id="0*T0U9vqHntOokphpu" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*T0U9vqHntOokphpu);"></a></div><div name="5479" id="5479" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed graf--trailing"><a href="https://developer.apple.com/documentation/foundationmodels" data-href="https://developer.apple.com/documentation/foundationmodels" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/foundationmodels"><strong class="markup--strong markup--mixtapeEmbed-strong">Foundation Models | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Perform tasks with the on-device model that specializes in language understanding, structured output, and tool calling.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/foundationmodels" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="c70d6b85a76e35b0da8b1f659e947f8f" data-thumbnail-img-id="0*PnwVls2-XVhuz8hR" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*PnwVls2-XVhuz8hR);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/7103604c729e"><time class="dt-published" datetime="2025-06-19T16:49:24.812Z">June 19, 2025</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E4%BD%BF%E7%94%A8-apple-%E7%9A%84-foundation-models-framework-%E9%96%8B%E7%99%BC%E7%94%9F%E6%88%90%E6%96%87%E5%AD%97%E7%9A%84-ai-%E5%8A%9F%E8%83%BD-7103604c729e" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>