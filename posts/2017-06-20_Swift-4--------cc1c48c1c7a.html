<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Swift 4 相關功能介紹</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Swift 4 相關功能介紹</h1>
</header>
<section data-field="subtitle" class="p-summary">
為什麼 Swift 的新功能都是 SE-xxxx
</section>
<section data-field="body" class="e-content">
<section name="62f1" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="cb1d" id="cb1d" class="graf graf--h3 graf--leading graf--title">Swift 4 相關功能介紹</h3><p name="3cc6" id="3cc6" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">為什麼 Swift 的新功能都是 SE-xxxx</strong></p><div name="8692" id="8692" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%82%BA%E4%BB%80%E9%BA%BC-swift-%E7%9A%84%E6%96%B0%E5%8A%9F%E8%83%BD%E9%83%BD%E6%98%AF-se-xxxx-cb16aa194df7" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%82%BA%E4%BB%80%E9%BA%BC-swift-%E7%9A%84%E6%96%B0%E5%8A%9F%E8%83%BD%E9%83%BD%E6%98%AF-se-xxxx-cb16aa194df7" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%82%BA%E4%BB%80%E9%BA%BC-swift-%E7%9A%84%E6%96%B0%E5%8A%9F%E8%83%BD%E9%83%BD%E6%98%AF-se-xxxx-cb16aa194df7"><strong class="markup--strong markup--mixtapeEmbed-strong">為什麼 Swift 的新功能都是 SE-xxxx</strong><br><em class="markup--em markup--mixtapeEmbed-em">SE 是 Swift Evolution 的縮寫， Swift 的每個新功能一開始會先從 Swift Evolution proposal(提案) 開始，經過層層考驗，經歷底下列出的各種狀態，順利的話最後才會變成 Implemented…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%82%BA%E4%BB%80%E9%BA%BC-swift-%E7%9A%84%E6%96%B0%E5%8A%9F%E8%83%BD%E9%83%BD%E6%98%AF-se-xxxx-cb16aa194df7" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="4ce3449554b327ac5a06ecd7aa61030d" data-thumbnail-img-id="1*vVzeV8dzr6CHM5WeFDDLbA.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*vVzeV8dzr6CHM5WeFDDLbA.jpeg);"></a></div><p name="550c" id="550c" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">設定 target 的 Swift 版本</strong><br>可針對 target 個別設定<br>Build Settings &gt; Swift Language Version</p><figure name="f705" id="f705" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*cFTQmkeVM_pkN--WSsUdQA.jpeg" data-width="1590" data-height="474" src="https://cdn-images-1.medium.com/max/800/1*cFTQmkeVM_pkN--WSsUdQA.jpeg"></figure><p name="f024" id="f024" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Swift 版本轉換</strong><br>可針對 target 個別設定</p><p name="16e3" id="16e3" class="graf graf--p graf-after--p">Edit &gt; Convert &gt; To Current Swift Syntax</p><figure name="0910" id="0910" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*10c8cotKgkaoffNV_XnW_Q.jpeg" data-width="1182" data-height="854" src="https://cdn-images-1.medium.com/max/800/1*10c8cotKgkaoffNV_XnW_Q.jpeg"></figure><figure name="2939" id="2939" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*CKPIf41saOUIGHRQmRh93w.jpeg" data-width="1434" data-height="842" src="https://cdn-images-1.medium.com/max/800/1*CKPIf41saOUIGHRQmRh93w.jpeg"></figure><p name="2532" id="2532" class="graf graf--p graf-after--figure">Swift 4 @objc inference 的選擇，勾選 Minimize Inference 生成的 App size 較小。</p><figure name="4801" id="4801" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*fTSfIHfbWF5x2Ok_UoFZ8Q.jpeg" data-width="1430" data-height="830" src="https://cdn-images-1.medium.com/max/800/1*fTSfIHfbWF5x2Ok_UoFZ8Q.jpeg"></figure><figure name="fd6e" id="fd6e" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*qZ-2JrS9SLm5GgdA03_pug.jpeg" data-width="2098" data-height="1092" src="https://cdn-images-1.medium.com/max/800/1*qZ-2JrS9SLm5GgdA03_pug.jpeg"></figure><div name="778d" id="778d" class="graf graf--mixtapeEmbed graf-after--figure"><a href="http://evgenii.com/blog/disabling-swift3-objc-inference-in-xcode9/" data-href="http://evgenii.com/blog/disabling-swift3-objc-inference-in-xcode9/" class="markup--anchor markup--mixtapeEmbed-anchor" title="http://evgenii.com/blog/disabling-swift3-objc-inference-in-xcode9/"><strong class="markup--strong markup--mixtapeEmbed-strong">Disabling Swift 3 @objc inference in Xcode 9</strong><br><em class="markup--em markup--mixtapeEmbed-em">This quick tutorial shows how to disable Swift 3 @objc inference in Xcode 9 and prevent build warnings from showing up.</em>evgenii.com</a><a href="http://evgenii.com/blog/disabling-swift3-objc-inference-in-xcode9/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="f21bdf87241fa4cbbf3d2ff92f8da7d1" data-thumbnail-img-id="0*bb_BYajD3llZj4eG." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*bb_BYajD3llZj4eG.);"></a></div><p name="5f47" id="5f47" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">SE-0168 Multi-Line String Literals，多行字串</strong></p><pre name="d2a1" id="d2a1" class="graf graf--pre graf-after--p">let name = “peter”</pre><pre name="8d7b" id="8d7b" class="graf graf--pre graf-after--pre">let song = “””</pre><pre name="d6c5" id="d6c5" class="graf graf--pre graf-after--pre">原來\(name)是我最想留住的幸運</pre><pre name="8a2f" id="8a2f" class="graf graf--pre graf-after--pre">原來我們和愛情曾經靠得那麼近</pre><pre name="1cef" id="1cef" class="graf graf--pre graf-after--pre">那為我對抗世界的決定那陪我淋的雨</pre><pre name="a9b1" id="a9b1" class="graf graf--pre graf-after--pre">  一幕幕都是你一塵不染的真心</pre><pre name="4cac" id="4cac" class="graf graf--pre graf--startsWithDoubleQuote graf-after--pre">“””</pre><div name="96bd" id="96bd" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0168-multi-line-string-literals.md" data-href="https://github.com/apple/swift-evolution/blob/master/proposals/0168-multi-line-string-literals.md" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/apple/swift-evolution/blob/master/proposals/0168-multi-line-string-literals.md"><strong class="markup--strong markup--mixtapeEmbed-strong">apple/swift-evolution</strong><br><em class="markup--em markup--mixtapeEmbed-em">swift-evolution - This maintains proposals for changes and user-visible enhancements to the Swift Programming Language.</em>github.com</a><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0168-multi-line-string-literals.md" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="e7ce9fb7c844c18f274c4ec4baded194" data-thumbnail-img-id="0*HnmCwO-BPTiPlv-E." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*HnmCwO-BPTiPlv-E.);"></a></div><p name="31c9" id="31c9" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">SE-0172 One-sided Ranges，省略頭尾的 range</strong></p><pre name="e3b8" id="e3b8" class="graf graf--pre graf-after--p">let movies = [“你的名字”, “我的名字”, “他的名字”]<br>movies[...1]<br>movies[..&lt;1]<br>movies[1...]<br>movies[...]</pre><p name="7e98" id="7e98" class="graf graf--p graf-after--pre">注意: ..&lt; 一定要指定結尾， 1..&lt; 是錯的</p><div name="2c4a" id="2c4a" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0172-one-sided-ranges.md" data-href="https://github.com/apple/swift-evolution/blob/master/proposals/0172-one-sided-ranges.md" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/apple/swift-evolution/blob/master/proposals/0172-one-sided-ranges.md"><strong class="markup--strong markup--mixtapeEmbed-strong">apple/swift-evolution</strong><br><em class="markup--em markup--mixtapeEmbed-em">swift-evolution - This maintains proposals for changes and user-visible enhancements to the Swift Programming Language.</em>github.com</a><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0172-one-sided-ranges.md" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="f399122bd51c288304ca777280b1594e" data-thumbnail-img-id="0*FYYYAQ2N8YDUGaeb." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*FYYYAQ2N8YDUGaeb.);"></a></div><p name="6aef" id="6aef" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">SE-0104 Protocol-oriented integers，Int 和 UInt32 可以比較</strong></p><div name="3d19" id="3d19" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/@apppeterpan/swift-4-%E7%9A%84-int-%E5%92%8C-uint32-%E7%B5%82%E6%96%BC%E5%8F%AF%E4%BB%A5%E6%AF%94%E8%BC%83%E4%BA%86-45f5c67d0ab0" data-href="https://medium.com/@apppeterpan/swift-4-%E7%9A%84-int-%E5%92%8C-uint32-%E7%B5%82%E6%96%BC%E5%8F%AF%E4%BB%A5%E6%AF%94%E8%BC%83%E4%BA%86-45f5c67d0ab0" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/@apppeterpan/swift-4-%E7%9A%84-int-%E5%92%8C-uint32-%E7%B5%82%E6%96%BC%E5%8F%AF%E4%BB%A5%E6%AF%94%E8%BC%83%E4%BA%86-45f5c67d0ab0"><strong class="markup--strong markup--mixtapeEmbed-strong">Swift 4 的 Int 和 UInt32 終於可以比較了</strong><br><em class="markup--em markup--mixtapeEmbed-em">本是同根生，相煎何太急。在 Swift 3，Int 和 UInt32 都是整數，卻偏偏不能比較。如以下例子，我們想判斷利用 arc4random_uniform 隨機產生的 answer 和 Int 型別的 guessNumber 是否…</em>medium.com</a><a href="https://medium.com/@apppeterpan/swift-4-%E7%9A%84-int-%E5%92%8C-uint32-%E7%B5%82%E6%96%BC%E5%8F%AF%E4%BB%A5%E6%AF%94%E8%BC%83%E4%BA%86-45f5c67d0ab0" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="563e5d2b2928c6b4ff2af9a50f5fde62" data-thumbnail-img-id="1*OZLtKQ6rErN9NMqvmH4Wmw.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*OZLtKQ6rErN9NMqvmH4Wmw.jpeg);"></a></div><p name="e4d0" id="e4d0" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">SE-0169: Improve Interaction Between Private Declarations and Extensions，extension 可以讀取 private 成員</strong></p><p name="f838" id="f838" class="graf graf--p graf-after--p">Swift 3: <br>因為 private 造成 extension 裡 function intro 無法讀取 age。</p><figure name="2d40" id="2d40" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*vhPOnd2PMhxXjzPQ0-17aA.jpeg" data-width="1522" data-height="696" src="https://cdn-images-1.medium.com/max/800/1*vhPOnd2PMhxXjzPQ0-17aA.jpeg"></figure><p name="a699" id="a699" class="graf graf--p graf-after--figure">解法: 改成 fileprivate。</p><figure name="fb27" id="fb27" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*QaKt5x8bGDnJ0_wJjQxwKA.jpeg" data-width="1242" data-height="676" src="https://cdn-images-1.medium.com/max/800/1*QaKt5x8bGDnJ0_wJjQxwKA.jpeg"></figure><p name="1e54" id="1e54" class="graf graf--p graf-after--figure">Swift 4: 可以直接用 private。<br>注意: extension 必須跟型別定義在同一個檔案，才能讀取 private 的資料。</p><pre name="bde1" id="bde1" class="graf graf--pre graf-after--p">struct Woman {</pre><pre name="0882" id="0882" class="graf graf--pre graf-after--pre">  private var age = 18</pre><pre name="129f" id="129f" class="graf graf--pre graf-after--pre">  }</pre><pre name="47a8" id="47a8" class="graf graf--pre graf-after--pre">extension Woman {</pre><pre name="255b" id="255b" class="graf graf--pre graf-after--pre">  func intro() {</pre><pre name="95ac" id="95ac" class="graf graf--pre graf-after--pre">    print(“我的年紀是\(age)”)</pre><pre name="569e" id="569e" class="graf graf--pre graf-after--pre">  }</pre><pre name="aae8" id="aae8" class="graf graf--pre graf-after--pre">}</pre><div name="c0a9" id="c0a9" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0169-improve-interaction-between-private-declarations-and-extensions.md" data-href="https://github.com/apple/swift-evolution/blob/master/proposals/0169-improve-interaction-between-private-declarations-and-extensions.md" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/apple/swift-evolution/blob/master/proposals/0169-improve-interaction-between-private-declarations-and-extensions.md"><strong class="markup--strong markup--mixtapeEmbed-strong">apple/swift-evolution</strong><br><em class="markup--em markup--mixtapeEmbed-em">swift-evolution - This maintains proposals for changes and user-visible enhancements to the Swift Programming Language.</em>github.com</a><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0169-improve-interaction-between-private-declarations-and-extensions.md" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="89ee6eda394c50bc29e9c809bd11768c" data-thumbnail-img-id="0*L4Fu0WNnESZ0jxmK." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*L4Fu0WNnESZ0jxmK.);"></a></div><p name="53ec" id="53ec" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">SE-0156: Class and Subtype Existentials，可以用 &amp; 結合 class 和 protocol</strong></p><pre name="caa3" id="caa3" class="graf graf--pre graf-after--p">protocol Shakeable {</pre><pre name="5e30" id="5e30" class="graf graf--pre graf-after--pre">func shake()</pre><pre name="feb0" id="feb0" class="graf graf--pre graf-after--pre">}</pre><pre name="17ca" id="17ca" class="graf graf--pre graf-after--pre">extension UIButton: Shakeable {</pre><pre name="dca2" id="dca2" class="graf graf--pre graf-after--pre">func shake() {</pre><pre name="c9fd" id="c9fd" class="graf graf--pre graf-after--pre">print(“shake”)</pre><pre name="598d" id="598d" class="graf graf--pre graf-after--pre">}</pre><pre name="8585" id="8585" class="graf graf--pre graf-after--pre">}</pre><pre name="f84c" id="f84c" class="graf graf--pre graf-after--pre">func shakeThem(controls: [UIControl]) {</pre><pre name="1f4b" id="1f4b" class="graf graf--pre graf-after--pre">for control in controls where control.isEnabled {</pre><pre name="0ef7" id="0ef7" class="graf graf--pre graf-after--pre">control.shake()</pre><pre name="244f" id="244f" class="graf graf--pre graf-after--pre">}</pre><pre name="404c" id="404c" class="graf graf--pre graf-after--pre">}</pre><pre name="3c09" id="3c09" class="graf graf--pre graf-after--pre">shakeThem(controls: [UIButton(), UIButton()])</pre><figure name="708b" id="708b" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*QC1xqxyvnJW4HnH8h1gbOA.jpeg" data-width="1684" data-height="712" src="https://cdn-images-1.medium.com/max/800/1*QC1xqxyvnJW4HnH8h1gbOA.jpeg"></figure><pre name="d41f" id="d41f" class="graf graf--pre graf-after--figure">func shakeThem(controls: [Shakeable]) {</pre><pre name="777d" id="777d" class="graf graf--pre graf-after--pre">for control in controls where control.isEnabled {</pre><pre name="05b5" id="05b5" class="graf graf--pre graf-after--pre">control.shake()</pre><pre name="c025" id="c025" class="graf graf--pre graf-after--pre">}</pre><pre name="49a9" id="49a9" class="graf graf--pre graf-after--pre">}</pre><figure name="e3d3" id="e3d3" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*CY3ya4BdUNHioNyudxAE4w.jpeg" data-width="1688" data-height="734" src="https://cdn-images-1.medium.com/max/800/1*CY3ya4BdUNHioNyudxAE4w.jpeg"></figure><p name="e310" id="e310" class="graf graf--p graf-after--figure">在 Swift 3， &amp; 只能結合 protocol。在 Swift 4，&amp; 也可以結合 class 和 protocol。</p><pre name="c1af" id="c1af" class="graf graf--pre graf-after--p">func shakeThem(controls: [UIControl &amp; Shakeable]) {</pre><pre name="0c05" id="0c05" class="graf graf--pre graf-after--pre">for control in controls where control.isEnabled {</pre><pre name="825f" id="825f" class="graf graf--pre graf-after--pre">control.shake()</pre><pre name="13a0" id="13a0" class="graf graf--pre graf-after--pre">}</pre><pre name="6f80" id="6f80" class="graf graf--pre graf-after--pre">}</pre><pre name="2ba4" id="2ba4" class="graf graf--pre graf-after--pre">var but:UIControl &amp; Shakeable = UIButton()</pre><div name="d730" id="d730" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0156-subclass-existentials.md" data-href="https://github.com/apple/swift-evolution/blob/master/proposals/0156-subclass-existentials.md" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/apple/swift-evolution/blob/master/proposals/0156-subclass-existentials.md"><strong class="markup--strong markup--mixtapeEmbed-strong">apple/swift-evolution</strong><br><em class="markup--em markup--mixtapeEmbed-em">swift-evolution - This maintains proposals for changes and user-visible enhancements to the Swift Programming Language.</em>github.com</a><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0156-subclass-existentials.md" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="c66b195d4112af02c2e22a0dca10c972" data-thumbnail-img-id="0*v6mDagUykYFXJkNh." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*v6mDagUykYFXJkNh.);"></a></div><p name="f316" id="f316" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">SE-0163 String as a Collection，把字串當成集合來使用</strong></p><p name="a479" id="a479" class="graf graf--p graf-after--p">Swift 3 要透過 characters。</p><pre name="61a6" id="61a6" class="graf graf--pre graf-after--p">var song = “原來你是我最想留住的幸運”</pre><pre name="e2a9" id="e2a9" class="graf graf--pre graf-after--pre">for char in song.characters {</pre><pre name="1c5c" id="1c5c" class="graf graf--pre graf-after--pre">print(char)</pre><pre name="579a" id="579a" class="graf graf--pre graf-after--pre">}</pre><pre name="760d" id="760d" class="graf graf--pre graf-after--pre">song.characters.count</pre><pre name="7372" id="7372" class="graf graf--pre graf-after--pre">song.characters.dropFirst()</pre><pre name="0668" id="0668" class="graf graf--pre graf-after--pre">song.characters.dropFirst(2)</pre><pre name="50c2" id="50c2" class="graf graf--pre graf-after--pre">song.characters.dropLast()</pre><pre name="627c" id="627c" class="graf graf--pre graf-after--pre">song.characters.dropLast(2)</pre><pre name="fd66" id="fd66" class="graf graf--pre graf-after--pre">song.characters.reversed()</pre><pre name="8ef9" id="8ef9" class="graf graf--pre graf-after--pre">song.characters.filter { (char) -&gt; Bool in</pre><pre name="3df8" id="3df8" class="graf graf--pre graf-after--pre">if char == “彼” || char == “得” || char == “潘” {</pre><pre name="5b95" id="5b95" class="graf graf--pre graf-after--pre">return true</pre><pre name="1cbe" id="1cbe" class="graf graf--pre graf-after--pre">}</pre><pre name="d0ec" id="d0ec" class="graf graf--pre graf-after--pre">else {</pre><pre name="4837" id="4837" class="graf graf--pre graf-after--pre">return false</pre><pre name="b161" id="b161" class="graf graf--pre graf-after--pre">}</pre><pre name="ecea" id="ecea" class="graf graf--pre graf-after--pre">}</pre><p name="5239" id="5239" class="graf graf--p graf-after--pre">Swift 4 可以直接把字串當成集合來使用。</p><pre name="4ec0" id="4ec0" class="graf graf--pre graf-after--p">var song = “原來彼得潘是我最想留住的幸運”</pre><pre name="bd12" id="bd12" class="graf graf--pre graf-after--pre">for char in song {</pre><pre name="c0d7" id="c0d7" class="graf graf--pre graf-after--pre">print(char)</pre><pre name="9b16" id="9b16" class="graf graf--pre graf-after--pre">}</pre><pre name="24ae" id="24ae" class="graf graf--pre graf-after--pre">song.count</pre><pre name="dc87" id="dc87" class="graf graf--pre graf-after--pre">song.dropFirst()</pre><pre name="917b" id="917b" class="graf graf--pre graf-after--pre">song.dropFirst(2)</pre><pre name="d9de" id="d9de" class="graf graf--pre graf-after--pre">song.dropLast()</pre><pre name="2b12" id="2b12" class="graf graf--pre graf-after--pre">song.dropLast(2)</pre><pre name="9ced" id="9ced" class="graf graf--pre graf-after--pre">song.reversed()</pre><pre name="f09a" id="f09a" class="graf graf--pre graf-after--pre">song.filter { (char) -&gt; Bool in</pre><pre name="f1f6" id="f1f6" class="graf graf--pre graf-after--pre">if char == “彼” || char == “得” || char == “潘” {</pre><pre name="d241" id="d241" class="graf graf--pre graf-after--pre">return true</pre><pre name="d735" id="d735" class="graf graf--pre graf-after--pre">}</pre><pre name="b9e8" id="b9e8" class="graf graf--pre graf-after--pre">else {</pre><pre name="1046" id="1046" class="graf graf--pre graf-after--pre">return false</pre><pre name="a19d" id="a19d" class="graf graf--pre graf-after--pre">}</pre><pre name="1f4d" id="1f4d" class="graf graf--pre graf-after--pre">}</pre><div name="8b95" id="8b95" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0163-string-revision-1.md" data-href="https://github.com/apple/swift-evolution/blob/master/proposals/0163-string-revision-1.md" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/apple/swift-evolution/blob/master/proposals/0163-string-revision-1.md"><strong class="markup--strong markup--mixtapeEmbed-strong">apple/swift-evolution</strong><br><em class="markup--em markup--mixtapeEmbed-em">swift-evolution - This maintains proposals for changes and user-visible enhancements to the Swift Programming Language.</em>github.com</a><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0163-string-revision-1.md" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="6854b93243131b65dbbe853181a79e3c" data-thumbnail-img-id="0*ela9G54O7tGpE1aj." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*ela9G54O7tGpE1aj.);"></a></div><p name="3f21" id="3f21" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">SE-0165 Dictionary &amp; Set Enhancements</strong></p><p name="3e0b" id="3e0b" class="graf graf--p graf-after--p">dictionary 找不到對應 value 時有預設值。</p><pre name="78b4" id="78b4" class="graf graf--pre graf-after--p">let dic = [“楊過”:”小龍女”, “彼得潘”:”溫蒂”]</pre><pre name="97b2" id="97b2" class="graf graf--pre graf-after--pre">dic[“虎克”, default:”虎姑婆”]</pre><p name="d54a" id="d54a" class="graf graf--p graf-after--pre">將 array 裡的成員分類，生成 dictionary。</p><pre name="9280" id="9280" class="graf graf--pre graf-after--p">struct Idol {</pre><pre name="ac65" id="ac65" class="graf graf--pre graf-after--pre">var name: String</pre><pre name="576b" id="576b" class="graf graf--pre graf-after--pre">var gender: String</pre><pre name="f5ba" id="f5ba" class="graf graf--pre graf-after--pre">}</pre><pre name="968d" id="968d" class="graf graf--pre graf-after--pre">var myIdols = [Idol(name: “劉德華”, gender: “男”), Idol(name: “張智霖”, gender: “男”), Idol(name: “戴佩妮”, gender: “女”)]</pre><pre name="04bd" id="04bd" class="graf graf--pre graf-after--pre">let idolDic = Dictionary(grouping: myIdols) { (idol) -&gt; String in</pre><pre name="c47c" id="c47c" class="graf graf--pre graf-after--pre">return idol.gender</pre><pre name="b1a3" id="b1a3" class="graf graf--pre graf-after--pre">}</pre><pre name="9a88" id="9a88" class="graf graf--pre graf-after--pre">idolDic[“男”]</pre><figure name="230f" id="230f" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*KUcY9pRepZ42p_-cAaGqSw.jpeg" data-width="962" data-height="410" src="https://cdn-images-1.medium.com/max/800/1*KUcY9pRepZ42p_-cAaGqSw.jpeg"></figure><div name="7b70" id="7b70" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://developer.apple.com/documentation/swift/dictionary/2893436-init" data-href="https://developer.apple.com/documentation/swift/dictionary/2893436-init" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swift/dictionary/2893436-init"><strong class="markup--strong markup--mixtapeEmbed-strong">init(grouping:by:) - Dictionary | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Creates a new dictionary where the keys are the groupings returned by the given closure and the values are arrays of…</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swift/dictionary/2893436-init" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="8c11e51f87a499d6cf08db369c5bd214"></a></div><p name="9d5f" id="9d5f" class="graf graf--p graf-after--mixtapeEmbed">從 sequence 產生 dictionary</p><pre name="a66b" id="a66b" class="graf graf--pre graf-after--p">let names = [&quot;楊過&quot;, &quot;郭靖&quot;, &quot;令狐沖&quot;]</pre><pre name="1e10" id="1e10" class="graf graf--pre graf-after--pre">let skills = [&quot;黯然銷魂掌&quot;, &quot;降龍十八掌&quot;, &quot;獨孤九劍&quot;]</pre><pre name="6139" id="6139" class="graf graf--pre graf-after--pre">let nameAndSkills = zip(names, skills)</pre><pre name="35b8" id="35b8" class="graf graf--pre graf-after--pre">for data in nameAndSkills {</pre><pre name="b30b" id="b30b" class="graf graf--pre graf-after--pre">print(data)</pre><pre name="01bf" id="01bf" class="graf graf--pre graf-after--pre">}</pre><pre name="ec79" id="ec79" class="graf graf--pre graf-after--pre">let dic = Dictionary(uniqueKeysWithValues: nameAndSkills)</pre><pre name="51f2" id="51f2" class="graf graf--pre graf-after--pre">dic</pre><figure name="85cd" id="85cd" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*aXzbuIn9LmdtG7LevTDTfA.jpeg" data-width="1040" data-height="420" src="https://cdn-images-1.medium.com/max/800/1*aXzbuIn9LmdtG7LevTDTfA.jpeg"></figure><div name="8c52" id="8c52" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0165-dict.md" data-href="https://github.com/apple/swift-evolution/blob/master/proposals/0165-dict.md" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/apple/swift-evolution/blob/master/proposals/0165-dict.md"><strong class="markup--strong markup--mixtapeEmbed-strong">apple/swift-evolution</strong><br><em class="markup--em markup--mixtapeEmbed-em">swift-evolution - This maintains proposals for changes and user-visible enhancements to the Swift Programming Language.</em>github.com</a><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0165-dict.md" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="caa9a578d9b0ed173533be23dc89a252" data-thumbnail-img-id="0*44KAJkeLauXA0h-1." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*44KAJkeLauXA0h-1.);"></a></div><p name="cad4" id="cad4" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">SE-0173 Array Swap</strong></p><pre name="aad1" id="aad1" class="graf graf--pre graf-after--p">var boyFriends = [“劉德華”, “梁朝偉”, “金城武”, “彼得潘”]</pre><pre name="3519" id="3519" class="graf graf--pre graf-after--pre">boyFriends.swapAt(0, 3)</pre><figure name="88e1" id="88e1" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*vBNjEv-JtnBrSWQ576GHWw.jpeg" data-width="1964" data-height="532" src="https://cdn-images-1.medium.com/max/800/1*vBNjEv-JtnBrSWQ576GHWw.jpeg"></figure><div name="eef6" id="eef6" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0173-swap-indices.md" data-href="https://github.com/apple/swift-evolution/blob/master/proposals/0173-swap-indices.md" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/apple/swift-evolution/blob/master/proposals/0173-swap-indices.md"><strong class="markup--strong markup--mixtapeEmbed-strong">apple/swift-evolution</strong><br><em class="markup--em markup--mixtapeEmbed-em">swift-evolution - This maintains proposals for changes and user-visible enhancements to the Swift Programming Language.</em>github.com</a><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0173-swap-indices.md" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="c391be304a74b22757d96797f9c99a8e" data-thumbnail-img-id="0*d-P4RAE3iyNN_xKM." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*d-P4RAE3iyNN_xKM.);"></a></div><p name="dc5c" id="dc5c" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">SE-0166 Swift Archival &amp; Serialization</strong></p><p name="561f" id="561f" class="graf graf--p graf-after--p">可作用於 class, struct, enum</p><p name="96e0" id="96e0" class="graf graf--p graf-after--p">例子: song.json</p><pre name="c3b8" id="c3b8" class="graf graf--pre graf-after--p">{</pre><pre name="d5c6" id="d5c6" class="graf graf--pre graf--startsWithDoubleQuote graf-after--pre">“name”:”街角的祝福”,</pre><pre name="db00" id="db00" class="graf graf--pre graf--startsWithDoubleQuote graf-after--pre">“album”:”Just Sing It”,</pre><pre name="1501" id="1501" class="graf graf--pre graf--startsWithDoubleQuote graf-after--pre">“artist”:”戴佩妮”</pre><pre name="3c49" id="3c49" class="graf graf--pre graf-after--pre">}</pre><p name="af80" id="af80" class="graf graf--p graf-after--pre">從 JSON data 生成自訂的型別</p><pre name="fcd1" id="fcd1" class="graf graf--pre graf-after--p">struct Song:Codable {</pre><pre name="6f83" id="6f83" class="graf graf--pre graf-after--pre">var name:String</pre><pre name="590b" id="590b" class="graf graf--pre graf-after--pre">var album:String</pre><pre name="d2e5" id="d2e5" class="graf graf--pre graf-after--pre">var artist:String</pre><pre name="4f52" id="4f52" class="graf graf--pre graf-after--pre">}</pre><pre name="6d8c" id="6d8c" class="graf graf--pre graf-after--pre">let url = Bundle.main.url(forResource: “song”, withExtension: “json”)</pre><pre name="e0e3" id="e0e3" class="graf graf--pre graf-after--pre">let data = try? Data(contentsOf: url!)</pre><pre name="4669" id="4669" class="graf graf--pre graf-after--pre">if let data = data {</pre><pre name="4f58" id="4f58" class="graf graf--pre graf-after--pre">let jsonDecoder = JSONDecoder()</pre><pre name="918d" id="918d" class="graf graf--pre graf-after--pre">let song = try? jsonDecoder.decode(Song.self, from: data)</pre><pre name="4cdb" id="4cdb" class="graf graf--pre graf-after--pre">if let song = song {</pre><pre name="c29c" id="c29c" class="graf graf--pre graf-after--pre">print(song.name)</pre><pre name="417b" id="417b" class="graf graf--pre graf-after--pre">}</pre><pre name="bd82" id="bd82" class="graf graf--pre graf-after--pre">}</pre><p name="15f1" id="15f1" class="graf graf--p graf-after--pre">從自訂的型別生成 JSON data</p><pre name="b44f" id="b44f" class="graf graf--pre graf-after--p">struct Song:Codable {</pre><pre name="2427" id="2427" class="graf graf--pre graf-after--pre">var name:String</pre><pre name="9e9c" id="9e9c" class="graf graf--pre graf-after--pre">var album:String</pre><pre name="8326" id="8326" class="graf graf--pre graf-after--pre">var artist:String</pre><pre name="9d75" id="9d75" class="graf graf--pre graf-after--pre">}</pre><pre name="654f" id="654f" class="graf graf--pre graf-after--pre">let jsonEncoder = JSONEncoder()</pre><pre name="5d76" id="5d76" class="graf graf--pre graf-after--pre">let song = Song(name: “怎樣”, album: “怎樣”, artist: “戴佩妮”)</pre><pre name="e64f" id="e64f" class="graf graf--pre graf-after--pre">let jsonData = try? jsonEncoder.encode(song)</pre><pre name="2b07" id="2b07" class="graf graf--pre graf-after--pre">if let jsonData = jsonData {</pre><pre name="16ba" id="16ba" class="graf graf--pre graf-after--pre">let jsonString = String(data: jsonData, encoding: .utf8)</pre><pre name="2e2b" id="2e2b" class="graf graf--pre graf-after--pre">}</pre><div name="182b" id="182b" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0166-swift-archival-serialization.md" data-href="https://github.com/apple/swift-evolution/blob/master/proposals/0166-swift-archival-serialization.md" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/apple/swift-evolution/blob/master/proposals/0166-swift-archival-serialization.md"><strong class="markup--strong markup--mixtapeEmbed-strong">apple/swift-evolution</strong><br><em class="markup--em markup--mixtapeEmbed-em">swift-evolution - This maintains proposals for changes and user-visible enhancements to the Swift Programming Language.</em>github.com</a><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0166-swift-archival-serialization.md" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="cb6e20b00e650d67c5c0fc24de2855d0" data-thumbnail-img-id="0*N_9RZpR7QbpJSTeQ." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*N_9RZpR7QbpJSTeQ.);"></a></div><p name="1c4e" id="1c4e" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">SE-0161 Key-Value Coding</strong></p><p name="4b1b" id="4b1b" class="graf graf--p graf-after--p">利用 key path 方便存取 property</p><pre name="6f67" id="6f67" class="graf graf--pre graf-after--p">struct Woman {</pre><pre name="52ec" id="52ec" class="graf graf--pre graf-after--pre">var name:String</pre><pre name="e7ae" id="e7ae" class="graf graf--pre graf-after--pre">}</pre><pre name="8646" id="8646" class="graf graf--pre graf-after--pre">struct Man {</pre><pre name="5fa1" id="5fa1" class="graf graf--pre graf-after--pre">var name:String</pre><pre name="6edb" id="6edb" class="graf graf--pre graf-after--pre">var girlFriend:Woman</pre><pre name="8eac" id="8eac" class="graf graf--pre graf-after--pre">}</pre><pre name="0ed8" id="0ed8" class="graf graf--pre graf-after--pre">let woman1 = Woman(name: “wendy”)</pre><pre name="264d" id="264d" class="graf graf--pre graf-after--pre">let woman2 = Woman(name: “虎姑婆”)</pre><pre name="673f" id="673f" class="graf graf--pre graf-after--pre">let man1 = Man(name:”peter”, girlFriend:woman1)</pre><pre name="64e7" id="64e7" class="graf graf--pre graf-after--pre">let man2 = Man(name:”hook”, girlFriend:woman2)</pre><pre name="db2e" id="db2e" class="graf graf--pre graf-after--pre">let nameKeyPath = \Man.girlFriend.name</pre><pre name="6787" id="6787" class="graf graf--pre graf-after--pre">let name1 = man1[keyPath:nameKeyPath]</pre><pre name="6dc9" id="6dc9" class="graf graf--pre graf-after--pre">let name2 = man2[keyPath:nameKeyPath]</pre><div name="a6c2" id="a6c2" class="graf graf--mixtapeEmbed graf-after--pre graf--trailing"><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0161-key-paths.md" data-href="https://github.com/apple/swift-evolution/blob/master/proposals/0161-key-paths.md" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/apple/swift-evolution/blob/master/proposals/0161-key-paths.md"><strong class="markup--strong markup--mixtapeEmbed-strong">apple/swift-evolution</strong><br><em class="markup--em markup--mixtapeEmbed-em">swift-evolution - This maintains proposals for changes and user-visible enhancements to the Swift Programming Language.</em>github.com</a><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0161-key-paths.md" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="11890cdab51b4548d54e3a5b827e768c" data-thumbnail-img-id="0*_gQTO3WU1gmAcJwz." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*_gQTO3WU1gmAcJwz.);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/cc1c48c1c7a"><time class="dt-published" datetime="2017-06-20T08:52:44.163Z">June 20, 2017</time></a>.</p><p><a href="https://medium.com/@apppeterpan/swift-4-%E7%9B%B8%E9%97%9C%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%B4%B9-cc1c48c1c7a" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>