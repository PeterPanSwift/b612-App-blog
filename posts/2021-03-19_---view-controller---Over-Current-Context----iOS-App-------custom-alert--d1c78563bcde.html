<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>利用 view controller 的 Over Current Context 實現 iOS App 的彈出視窗(custom alert)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">利用 view controller 的 Over Current Context 實現 iOS App 的彈出視窗(custom alert)</h1>
</header>
<section data-field="subtitle" class="p-summary">
使用 iOS App 時，我們時常看到以下兩種彈出視窗的設計。以 IG App 為例，左邊的登入視窗以淡入淡出的動畫出現在畫面的中間，右邊的選單視窗則以由下而上的動畫出現。
</section>
<section data-field="body" class="e-content">
<section name="298d" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="6d8d" id="6d8d" class="graf graf--h3 graf--leading graf--title">利用 view controller 的 Over Current Context 實現 iOS App 的彈出視窗(custom alert)</h3><p name="c97a" id="c97a" class="graf graf--p graf-after--h3">使用 iOS App 時，我們時常看到以下兩種彈出視窗的設計。以 IG App 為例，左邊的登入視窗以淡入淡出的動畫出現在畫面的中間，右邊的新增 po 文視窗則以由下而上的動畫出現。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="11c3" id="11c3" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*PfIyj9XoBBWKPueTDxIsUQ.png" data-width="1125" data-height="2436" src="https://cdn-images-1.medium.com/max/600/1*PfIyj9XoBBWKPueTDxIsUQ.png"></figure><figure name="86da" id="86da" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*l2aVJtZpya7UbvUuIcYYeA.png" data-width="1125" data-height="2436" data-is-featured="true" src="https://cdn-images-1.medium.com/max/600/1*l2aVJtZpya7UbvUuIcYYeA.png"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="c518" id="c518" class="graf graf--p graf-after--figure">實現彈出視窗的方法很多，接下來我們將介紹其中一種方法，利用 view controller 製作彈出視窗的畫面。</p><h3 name="fd0b" id="fd0b" class="graf graf--h3 graf-after--p">淡入淡出動畫出現在畫面中間的彈出視窗</h3><h4 name="0a0f" id="0a0f" class="graf graf--h4 graf-after--h3"><strong class="markup--strong markup--h4-strong">利用 view controller 製作彈出視窗的畫面</strong></h4><p name="c232" id="c232" class="graf graf--p graf-after--h4">利用 AlertViewController 實現登出畫面的彈出視窗。(ps: 為了方便示範，我們利用 image view 貼圖實現畫面的內容。)</p><figure name="a897" id="a897" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*fPSvmvI8MXHoJ-uPnza6GA.png" data-width="1556" data-height="1010" src="https://cdn-images-1.medium.com/max/800/1*fPSvmvI8MXHoJ-uPnza6GA.png"></figure><h4 name="12bc" id="12bc" class="graf graf--h4 graf-after--figure"><strong class="markup--strong markup--h4-strong">拉 segue 時選擇 Present Modally</strong></h4><figure name="6c42" id="6c42" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*uUrmKDh6G3Tqoe-kRTA_eA.png" data-width="338" data-height="298" src="https://cdn-images-1.medium.com/max/800/1*uUrmKDh6G3Tqoe-kRTA_eA.png"></figure><figure name="c72f" id="c72f" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*7DguEIkvo4IPHaEN2tipSg.png" data-width="1582" data-height="1006" src="https://cdn-images-1.medium.com/max/800/1*7DguEIkvo4IPHaEN2tipSg.png"></figure><h4 name="35e6" id="35e6" class="graf graf--h4 graf-after--figure">AlertViewController 的 Transition Style 設為 Cross Dissolve， Presentation 選擇 Over Current Context</h4><p name="996f" id="996f" class="graf graf--p graf-after--h4">Cross Dissolve: 讓 AlertViewController 以淡入淡出的動畫呈現。</p><p name="f3f6" id="f3f6" class="graf graf--p graf-after--p">Over Current Context: 讓 AlertViewController 的畫面全螢幕顯示，並且可以顯示前個 controller 的畫面。</p><figure name="ac92" id="ac92" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*gwQUNSOq6wUsYTuutzsqtA.png" data-width="526" data-height="834" src="https://cdn-images-1.medium.com/max/800/1*gwQUNSOq6wUsYTuutzsqtA.png"></figure><h4 name="c560" id="c560" class="graf graf--h4 graf-after--figure">將 AlertViewController 的 view 的背景顏色設為半透明</h4><p name="8b3c" id="8b3c" class="graf graf--p graf-after--h4">如此 AlertViewController 顯示時才能顯示前一個 controller 的畫面，不會遮住前一個畫面。</p><figure name="bbed" id="bbed" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*V2n9D7nycavmnc7yPKa8fQ.png" data-width="526" data-height="540" src="https://cdn-images-1.medium.com/max/800/1*V2n9D7nycavmnc7yPKa8fQ.png"></figure><figure name="23b3" id="23b3" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*JKlglyUZ2l-gBQqn3we9uw.png" data-width="458" data-height="828" src="https://cdn-images-1.medium.com/max/800/1*JKlglyUZ2l-gBQqn3we9uw.png"></figure><h4 name="3f23" id="3f23" class="graf graf--h4 graf-after--figure">Demo</h4><p name="62fd" id="62fd" class="graf graf--p graf-after--h4">Cool，AlertViewController 的畫面順利地以淡入淡出動畫出現在畫面中間。</p><figure name="740e" id="740e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*lL5GeyE4AdQVq3pUPmgVAQ.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/800/1*lL5GeyE4AdQVq3pUPmgVAQ.png"></figure><h4 name="798d" id="798d" class="graf graf--h4 graf-after--figure">以程式實作的方法</h4><p name="1d7f" id="1d7f" class="graf graf--p graf-after--h4">剛剛的 AlertViewController 若想從程式建立顯示，而不是透過 segue，則可參考以下寫法，關鍵在設定 modalTransitionStyle &amp; modalPresentationStyle。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="6e74" id="6e74" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> controller <span class="hljs-operator">=</span> storyboard<span class="hljs-operator">?</span>.instantiateViewController(withIdentifier: <span class="hljs-string">&quot;AlertViewController&quot;</span>) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }<br />controller.modalTransitionStyle <span class="hljs-operator">=</span> .crossDissolve<br />controller.modalPresentationStyle <span class="hljs-operator">=</span> .overCurrentContext<br />present(controller, animated: <span class="hljs-literal">true</span>)</span></pre><h4 name="1d1e" id="1d1e" class="graf graf--h4 graf-after--pre">關閉彈出視窗</h4><p name="b2fa" id="b2fa" class="graf graf--p graf-after--h4">由於我們是用 Present Modally 顯示彈出視窗，因此我們可在點選 button 時呼叫 dismiss(animated:completion:) 關閉視窗 。</p><p name="43d9" id="43d9" class="graf graf--p graf-after--p">了解如何實現置中的彈出視窗後，接下來讓我們試試另一種常見的設計，由下而上出現的彈出視窗。</p><h3 name="5000" id="5000" class="graf graf--h3 graf-after--p">由下而上動畫出現的彈出視窗</h3><h4 name="dc11" id="dc11" class="graf graf--h4 graf-after--h3">利用 view controller 製作彈出視窗的畫面</h4><p name="4d2b" id="4d2b" class="graf graf--p graf-after--h4">利用 AddPostViewController 實現新增 po 文的彈出視窗。(ps: 為了方便示範，我們利用 image view 貼圖實現畫面的內容。)</p><figure name="815a" id="815a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*A3Q-E5xQHd89q7XScmpcjw.png" data-width="1568" data-height="958" src="https://cdn-images-1.medium.com/max/800/1*A3Q-E5xQHd89q7XScmpcjw.png"></figure><h4 name="5f92" id="5f92" class="graf graf--h4 graf-after--figure">拉 segue 時選擇 Present Modally</h4><figure name="98bc" id="98bc" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*dOj3iJTScQoiTby72dCX4g.png" data-width="858" data-height="882" src="https://cdn-images-1.medium.com/max/800/1*dOj3iJTScQoiTby72dCX4g.png"></figure><h4 name="d93e" id="d93e" class="graf graf--h4 graf-after--figure">AddPostViewController 的 Transition Style 設為 Cover Vertical， Presentation 選擇 Over Current Context</h4><p name="a0bb" id="a0bb" class="graf graf--p graf-after--h4">Cover Vertical: 讓 AddPostViewController 以由下而上的動畫呈現。</p><p name="bee0" id="bee0" class="graf graf--p graf-after--p">Over Current Context: 讓 AddPostViewController 的畫面全螢幕顯示，並且可以顯示前個 controller 的畫面。</p><figure name="efd7" id="efd7" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*wbqSFR0thTuXUd00pM4ing.png" data-width="1044" data-height="1218" src="https://cdn-images-1.medium.com/max/800/1*wbqSFR0thTuXUd00pM4ing.png"></figure><h4 name="0cc3" id="0cc3" class="graf graf--h4 graf-after--figure">將 AddPostViewController 的 view 的背景顏色設為 Clear Color</h4><p name="31c1" id="31c1" class="graf graf--p graf-after--h4">如此 AddPostViewController 顯示時才能顯示前一個 controller 的畫面，不會遮住前一個畫面。值得注意的，在此我們設定 Clear Color，而不是半透明。如果設為半透明，半透明的背景將因 Transition Style 設為 Cover Vertical 而以由下而上的動畫出現。我們希望半透明的背景以淡入的方式呈現，等下我們將另外從程式加入半透明的 view 實現淡入的動畫效果。</p><figure name="ca94" id="ca94" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*5xqCtZfnK67URjav5wMiuw.png" data-width="970" data-height="1094" src="https://cdn-images-1.medium.com/max/800/1*5xqCtZfnK67URjav5wMiuw.png"></figure><h4 name="1fd3" id="1fd3" class="graf graf--h4 graf-after--figure">加入半透明的黑色背景</h4><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="dcb3" id="dcb3" class="graf graf--pre graf-after--h4 graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AddPostViewController</span>: <span class="hljs-title class_">UIViewController</span> {<br /><br />   <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {<br />        <span class="hljs-keyword">super</span>.viewDidLoad()<br />        <span class="hljs-keyword">let</span> blackView <span class="hljs-operator">=</span> <span class="hljs-type">UIView</span>(frame: <span class="hljs-type">UIScreen</span>.main.bounds)<br />        blackView.backgroundColor <span class="hljs-operator">=</span> .black<br />        blackView.alpha <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />        presentingViewController<span class="hljs-operator">?</span>.view.addSubview(blackView)<br />        <span class="hljs-type">UIViewPropertyAnimator</span>.runningPropertyAnimator(withDuration: <span class="hljs-number">0.5</span>, delay: <span class="hljs-number">0</span>) {<br />            blackView.alpha <span class="hljs-operator">=</span> <span class="hljs-number">0.5</span><br />        }<br />   }</span></pre><p name="67ca" id="67ca" class="graf graf--p graf-after--pre">presentingViewController 代表前一頁的 view controller，我們在它的 view 加上半透明的 blackView，並且調整 alpha，實現淡入的動畫效果。</p><h4 name="2313" id="2313" class="graf graf--h4 graf-after--p">Demo</h4><figure name="bc79" id="bc79" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*0ABK28WolbIYJUVHI9Xfqg.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/800/1*0ABK28WolbIYJUVHI9Xfqg.png"></figure><h4 name="d0f9" id="d0f9" class="graf graf--h4 graf-after--figure">關閉彈出視窗</h4><p name="70a0" id="70a0" class="graf graf--p graf-after--h4 graf--trailing">由於我們是用 Present Modally 顯示彈出視窗，因此可在 AddPostViewController 的 view 加入 UITapGestureRecognizer，然後在點選時呼叫 dismiss(animated:completion:) 關閉視窗 。</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/d1c78563bcde"><time class="dt-published" datetime="2021-03-19T09:20:48.465Z">March 19, 2021</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%88%A9%E7%94%A8-view-controller-%E5%AF%A6%E7%8F%BE-ios-app-%E7%9A%84%E5%BD%88%E5%87%BA%E8%A6%96%E7%AA%97-d1c78563bcde" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>