<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>點選 List row 不同區塊跳到不同頁面 — 使用 NavigationStack 搭配 path 或 navigationDestination(item:destination:)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">點選 List row 不同區塊跳到不同頁面 — 使用 NavigationStack 搭配 path 或 navigationDestination(item:destination:)</h1>
</header>
<section data-field="subtitle" class="p-summary">
在 SwiftUI 利用 NavigationStack、List &amp; NavigationLink 可以快速實現點選切換頁面的列表。但若想讓 List row 有多個可點選的區塊，點選跳到不同的頁面，卻要額外費一番功夫。
</section>
<section data-field="body" class="e-content">
<section name="8f32" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="ee4b" id="ee4b" class="graf graf--h3 graf--leading graf--title">點選 List row 不同區塊跳到不同頁面 — 使用 NavigationStack 搭配 path 或 navigationDestination(item:destination:)</h3><p name="7ffa" id="7ffa" class="graf graf--p graf-after--h3">在 SwiftUI 利用 NavigationStack、List &amp; NavigationLink 可以快速實現點選切換頁面的列表，但若想點選 List row 不同區塊跳到不同頁面，卻要額外費一番功夫。</p><p name="d96a" id="d96a" class="graf graf--p graf-after--p">以下圖的 Threads App 為例，紅色框框代表一則 po 文的 row，點選不同地方有不同的效果。</p><ul class="postList"><li name="9c9d" id="9c9d" class="graf graf--li graf-after--p">點選紅色框會跳到 po 文頁面。</li><li name="dc9b" id="dc9b" class="graf graf--li graf-after--li">點選藍綠色框的作者名會跳到作者的個人頁面。</li><li name="d920" id="d920" class="graf graf--li graf-after--li">點選黃色框的紙飛機會顯示分享選單。</li></ul><figure name="4dc4" id="4dc4" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*5HvcfTqntnVyDtdX2Glcuw.png" data-width="1136" data-height="1066" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*5HvcfTqntnVyDtdX2Glcuw.png"></figure><p name="8d20" id="8d20" class="graf graf--p graf-after--figure">SwiftUI 在 iOS 16 推出的 NavigationStack 讓程式控制頁面切換變得容易許多。</p><figure name="9f78" id="9f78" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*YPjmic7HDEYvOQPg6esohg.png" data-width="128" data-height="128" src="https://cdn-images-1.medium.com/max/800/1*YPjmic7HDEYvOQPg6esohg.png"></figure><p name="985e" id="985e" class="graf graf--p graf-after--figure">以下我們模仿 Threads App 製作一個簡化的 po 文列表，先看看 NavigationLink 做法的問題，再示範兩種實現點選 List row 不同區塊跳到不同頁面的解法。</p><ul class="postList"><li name="6fbd" id="6fbd" class="graf graf--li graf-after--p">解法 1: 使用 NavigationStack 搭配 path。</li><li name="d4f5" id="d4f5" class="graf graf--li graf-after--li">解法 2: 使用 navigationDestination(item:destination:)。</li></ul><h3 name="ff32" id="ff32" class="graf graf--h3 graf-after--li">使用 NavigationLink 做法的問題</h3><p name="608e" id="608e" class="graf graf--p graf-after--h3">以下我們分別定義 Post、PostRow、PostList &amp; PostDetail。</p><ul class="postList"><li name="5b00" id="5b00" class="graf graf--li graf-after--p">Post。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="8623" id="8623" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Post</span>: <span class="hljs-title class_">Identifiable</span> {<br />    <span class="hljs-keyword">let</span> id <span class="hljs-operator">=</span> <span class="hljs-type">UUID</span>()<br />    <span class="hljs-keyword">let</span> author: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> content: <span class="hljs-type">String</span><br />}</span></pre><ul class="postList"><li name="1f89" id="1f89" class="graf graf--li graf-after--pre">PostRow。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="f87f" id="f87f" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PostRow</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> post: <span class="hljs-type">Post</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span>(alignment: .leading) {<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;person.circle.fill&quot;</span>)<br />                    .resizable()<br />                    .frame(width: <span class="hljs-number">40</span>, height: <span class="hljs-number">40</span>)<br />                <span class="hljs-type">Text</span>(post.author)<br />                    .onTapGesture {<br />                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;顯示 profile&quot;</span>)<br />                    }<br />                <span class="hljs-type">Spacer</span>()<br />            }<br />            <span class="hljs-type">Text</span>(post.content)<br />                .lineLimit(<span class="hljs-number">2</span>)<br />                .foregroundStyle(.secondary)<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;heart&quot;</span>)<br />                    .onTapGesture {<br />                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;按讚 / 取消讚&quot;</span>)<br />                    }<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;bubble.right&quot;</span>)<br />                    .onTapGesture {<br />                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;留言&quot;</span>)<br />                    }<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;paperplane&quot;</span>)<br />                    .onTapGesture {<br />                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;顯示分享選單&quot;</span>)<br />                    }<br />            }<br />            .foregroundStyle(.primary)<br />        }<br />    }<br />}</span></pre><ul class="postList"><li name="d1d0" id="d1d0" class="graf graf--li graf-after--pre">PostList。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="3e57" id="3e57" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PostList</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> posts <span class="hljs-operator">=</span> [<br />        <span class="hljs-type">Post</span>(author: <span class="hljs-string">&quot;小王子&quot;</span>, content: <span class="hljs-string">&quot;給我畫一隻綿羊。&quot;</span>),<br />        <span class="hljs-type">Post</span>(author: <span class="hljs-string">&quot;狐狸&quot;</span>, content: <span class="hljs-string">&quot;如果你馴養了我，我們就彼此需要了。對我，你就是世界上獨一無二的。對你，我也是世界上獨一無二的。&quot;</span>),<br />    ]<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">NavigationStack</span> {<br />            <span class="hljs-type">List</span> {<br />                <span class="hljs-type">ForEach</span>(posts) { post <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">NavigationLink</span> {<br />                        <span class="hljs-type">PostDetail</span>(post: post)<br />                    } label: {<br />                        <span class="hljs-type">PostRow</span>(post: post)<br />                    }<br />                }<br />            }<br />        }<br />    }<br />}</span></pre><ul class="postList"><li name="c34d" id="c34d" class="graf graf--li graf-after--pre">PostDetail。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="bc46" id="bc46" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PostDetail</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> post: <span class="hljs-type">Post</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span>(alignment: .leading) {<br />            <span class="hljs-type">Text</span>(post.author)<br />            <span class="hljs-type">Text</span>(post.content)<br />                .foregroundStyle(.secondary)<br />            <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;留言列表&quot;</span>)<br />            <span class="hljs-type">Spacer</span>()<br />        }<br />        .frame(maxWidth: .infinity, alignment: .leading)<br />        .padding()<br />    }<br />}</span></pre><p name="3263" id="3263" class="graf graf--p graf-after--pre">如下圖所示，NavigationLink 幫助我們點選 PostRow 跳到 PostDetail，但是它還有幾個要實現的功能。</p><ul class="postList"><li name="e69c" id="e69c" class="graf graf--li graf-after--p">點選 row 裡不同區塊跳到不同頁面，比方點選作者名要跳到個人頁面。</li><li name="4ad6" id="4ad6" class="graf graf--li graf-after--li">隱藏右邊向右的箭頭。</li></ul><figure name="539f" id="539f" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*tWM3Xt9JV5yMAMcg9lcGKQ.jpeg" data-width="2358" data-height="2556" src="https://cdn-images-1.medium.com/max/800/1*tWM3Xt9JV5yMAMcg9lcGKQ.jpeg"></figure><h3 name="4a84" id="4a84" class="graf graf--h3 graf-after--figure">解法 1: 使用 NavigationStack 搭配 path</h3><p name="2451" id="2451" class="graf graf--p graf-after--h3">為了讓 PostRow 裡的作者名點選跳到個人頁面，也許有人想到可以將 <code class="markup--code markup--p-code">Text(post.author) </code>包在 NavigationLink，變成多層的 NavigationLink。不過 List 包多層 NavigationLink 會遇到許多問題，甚至還會可怕地出現多個向右的箭頭。</p><div name="bc1b" id="bc1b" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-list-%E8%A3%A1%E5%A4%9A%E5%B1%A4-navigationlink-%E7%9A%84%E5%95%8F%E9%A1%8C-3636823afd24" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-list-%E8%A3%A1%E5%A4%9A%E5%B1%A4-navigationlink-%E7%9A%84%E5%95%8F%E9%A1%8C-3636823afd24" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-list-%E8%A3%A1%E5%A4%9A%E5%B1%A4-navigationlink-%E7%9A%84%E5%95%8F%E9%A1%8C-3636823afd24"><strong class="markup--strong markup--mixtapeEmbed-strong">SwiftUI List 包多層 NavigationLink 的問題</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 SwiftUI App 時我們常用 NavigationLink 切換頁面，不過當 List 裡有多層 NavigationLink，NavigationLink 裡包著另一個 NavigationLink 時，卻會發生特別的問題。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-list-%E8%A3%A1%E5%A4%9A%E5%B1%A4-navigationlink-%E7%9A%84%E5%95%8F%E9%A1%8C-3636823afd24" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="eeb52ff00897613c180de190c8e687c3" data-thumbnail-img-id="1*kcXUyz9FLxpKE2qeabUwMg.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*kcXUyz9FLxpKE2qeabUwMg.png);"></a></div><p name="aff2" id="aff2" class="graf graf--p graf-after--mixtapeEmbed">因此以下我們將拿掉 NavigationLink，拿掉它後向右箭頭的問題就解決了，因為沒有 NavigationLink 就不會生成向右箭頭。</p><p name="9a24" id="9a24" class="graf graf--p graf-after--p">然後我們使用 NavigationStack 搭配 path 從程式控制頁面切換，透過修改 path 控制點擊 row 裡不同區塊前往不同頁面。</p><ul class="postList"><li name="1677" id="1677" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">定義個人頁面。</strong></li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="4844" id="4844" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ProfileView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> author: <span class="hljs-type">String</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span>(alignment: .leading) {<br />            <span class="hljs-type">Text</span>(author)<br />                .font(.largeTitle)<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;Follow&quot;</span>) {<br />                }<br />                <span class="hljs-type">Button</span>(<span class="hljs-string">&quot;Mention&quot;</span>) {<br />                }<br />            }<br />            .buttonStyle(.borderedProminent)<br />            <br />            <span class="hljs-type">Spacer</span>()<br />        }<br />        .frame(maxWidth: .infinity, alignment: .leading)<br />        .padding()<br />    }<br />}</span></pre><ul class="postList"><li name="64e3" id="64e3" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">定義 PostList。</strong></li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="2d65" id="2d65" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PostList</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> posts <span class="hljs-operator">=</span> [<br />        <span class="hljs-type">Post</span>(author: <span class="hljs-string">&quot;小王子&quot;</span>, content: <span class="hljs-string">&quot;給我畫一隻綿羊。&quot;</span>),<br />        <span class="hljs-type">Post</span>(author: <span class="hljs-string">&quot;狐狸&quot;</span>, content: <span class="hljs-string">&quot;如果你馴養了我，我們就彼此需要了。對我，你就是世界上獨一無二的。對你，我也是世界上獨一無二的。&quot;</span>),<br />    ]<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> path <span class="hljs-operator">=</span> <span class="hljs-type">NavigationPath</span>()<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">NavigationStack</span>(path: <span class="hljs-variable">$path</span>) {<br />            <span class="hljs-type">List</span> {<br />                <span class="hljs-type">ForEach</span>(posts) { post <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">PostRow</span>(post: post, path: <span class="hljs-variable">$path</span>)<br />                        .contentShape(.rect)<br />                        .onTapGesture {<br />                            path.append(post)<br />                        }<br />                }<br />            }<br />            .navigationDestination(for: <span class="hljs-type">Post</span>.<span class="hljs-keyword">self</span>) { post <span class="hljs-keyword">in</span><br />                <span class="hljs-type">PostDetail</span>(post: post)<br />            }<br />            .navigationDestination(for: <span class="hljs-type">String</span>.<span class="hljs-keyword">self</span>) { author <span class="hljs-keyword">in</span><br />                <span class="hljs-type">ProfileView</span>(author: author)<br />            }<br />        }<br />    }<br />}</span></pre><p name="ad2d" id="ad2d" class="graf graf--p graf-after--pre">說明。</p><p name="90b8" id="90b8" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code u-paddingRight0 u-marginRight0"><a href="http://twitter.com/State" data-href="http://twitter.com/State" class="markup--anchor markup--p-anchor" title="Twitter profile for @State" rel="noopener" target="_blank">@</a>State private var path = NavigationPath()。</code></p><p name="3e26" id="3e26" class="graf graf--p graf-after--p">使用 NavigationPath 型別的 path 儲存 NavigationStack 顯示的頁面資料。</p><p name="e170" id="e170" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">NavigationStack(path: $path) {</code></p><p name="31f8" id="31f8" class="graf graf--p graf-after--p">建立 NavigationStack 時傳入 $path，讓 NavigationStack 綁定 path 儲存的頁面資料。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="27ef" id="27ef" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">PostRow</span>(post: post, path: <span class="hljs-variable">$path</span>)<br />    .contentShape(.rect)<br />    .onTapGesture {<br />        path.append(post)<br />    }</span></pre><p name="6ba9" id="6ba9" class="graf graf--p graf-after--pre">在 PostRow 按下時將 post 加到 path，觸發 NavigationStack 顯示 post 對應的頁面。path 儲存的資料必須是 Hashable，因此記得要讓 Post 遵從 Hashable。</p><p name="cd42" id="cd42" class="graf graf--p graf-after--p">建立 PostRow 時傳入 $path 是這裡的關鍵，它讓 PostRow 可以修改 path，因此 PostRow 裡的元件點選時可控制 NavigationStack 切換頁面</p><p name="8b59" id="8b59" class="graf graf--p graf-after--p">onTapGesture 預設無法偵測到空白處的點選，因此我們加入 <code class="markup--code markup--p-code">.contentShape(.rect)</code> 讓空白處也能點選。</p><div name="cf55" id="cf55" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%8E%A7%E5%88%B6%E9%BB%9E%E9%81%B8%E7%AF%84%E5%9C%8D%E7%9A%84-contentshape-394fa57e8b34" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%8E%A7%E5%88%B6%E9%BB%9E%E9%81%B8%E7%AF%84%E5%9C%8D%E7%9A%84-contentshape-394fa57e8b34" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%8E%A7%E5%88%B6%E9%BB%9E%E9%81%B8%E7%AF%84%E5%9C%8D%E7%9A%84-contentshape-394fa57e8b34"><strong class="markup--strong markup--mixtapeEmbed-strong">控制點選範圍的 contentShape</strong><br><em class="markup--em markup--mixtapeEmbed-em">利用 contentShape 我們可以控制點選的範圍，接下來讓我們看看以下幾種應用的例子。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%8E%A7%E5%88%B6%E9%BB%9E%E9%81%B8%E7%AF%84%E5%9C%8D%E7%9A%84-contentshape-394fa57e8b34" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="dbcdc799ffb2114c715d21da8bf651b7" data-thumbnail-img-id="1*bxrcxUdevoYCqstwYhVi3A.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*bxrcxUdevoYCqstwYhVi3A.png);"></a></div><p name="d9e1" id="d9e1" class="graf graf--p graf-after--mixtapeEmbed">ps: PostRow 裡可點選的元件<code class="markup--code markup--p-code"> Image(systemName: &quot;heart&quot;)</code> 目前以 onTapGesture 實現，如果改成使用 Button 的寫法呢 ?</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1e7c" id="1e7c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">Button</span> {<br />    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;按讚 / 取消讚&quot;</span>)<br />} label: {<br />    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;heart&quot;</span>)<br />}</span></pre><p name="b75b" id="b75b" class="graf graf--p graf-after--pre">很不幸的 Button 的點選會被 PostRow 本身的 onTapGesture 蓋過，此時 PostRow 必須再呼叫<code class="markup--code markup--p-code">buttonStyle</code> 才能讓 Button 可點選。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="171f" id="171f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">PostRow</span>(post: post, path: <span class="hljs-variable">$path</span>)<br />    .contentShape(.rect)<br />    .buttonStyle(.plain)<br />    .onTapGesture {<br />        path.append(post)<br />    }</span></pre><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="bf1f" id="bf1f" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content">.navigationDestination(for: <span class="hljs-type">Post</span>.<span class="hljs-keyword">self</span>) { post <span class="hljs-keyword">in</span><br />    <span class="hljs-type">PostDetail</span>(post: post)<br />}<br />.navigationDestination(for: <span class="hljs-type">String</span>.<span class="hljs-keyword">self</span>) { author <span class="hljs-keyword">in</span><br />    <span class="hljs-type">ProfileView</span>(author: author)<br />}</span></pre><div name="1240" id="1240" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-swiftui-list-form-row-%E8%A3%A1%E7%9A%84%E5%85%83%E4%BB%B6%E5%8F%AF%E4%BB%A5%E5%88%86%E5%88%A5%E9%BB%9E%E9%81%B8-b17b60ad14fe" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-swiftui-list-form-row-%E8%A3%A1%E7%9A%84%E5%85%83%E4%BB%B6%E5%8F%AF%E4%BB%A5%E5%88%86%E5%88%A5%E9%BB%9E%E9%81%B8-b17b60ad14fe" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-swiftui-list-form-row-%E8%A3%A1%E7%9A%84%E5%85%83%E4%BB%B6%E5%8F%AF%E4%BB%A5%E5%88%86%E5%88%A5%E9%BB%9E%E9%81%B8-b17b60ad14fe"><strong class="markup--strong markup--mixtapeEmbed-strong">讓 SwiftUI List / Form row 裡的元件可以分別點選</strong><br><em class="markup--em markup--mixtapeEmbed-em">SwiftUI 的 List / Form 很適合呈現清單頁面，然而若每筆資料的長方形區塊(row)想有不同的點擊區域，則需要額外處理。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-swiftui-list-form-row-%E8%A3%A1%E7%9A%84%E5%85%83%E4%BB%B6%E5%8F%AF%E4%BB%A5%E5%88%86%E5%88%A5%E9%BB%9E%E9%81%B8-b17b60ad14fe" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="0e4ee7b018c3dc4ec2834bed09766794" data-thumbnail-img-id="1*hcJb5VpvuVr-fjhnCDDtuQ.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*hcJb5VpvuVr-fjhnCDDtuQ.png);"></a></div><p name="641c" id="641c" class="graf graf--p graf-after--mixtapeEmbed">我們想要點選 PostRow 跳到 PostDetail，點選作者名字跳到 ProfileView，因此利用 <code class="markup--code markup--p-code">navigationDestination</code> 設定資料型別是 Post 時顯示 PostDetail，資料型別是字串時顯示 ProfileView。</p><ul class="postList"><li name="3a2d" id="3a2d" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">定義 PostRow。</strong></li></ul><p name="39e9" id="39e9" class="graf graf--p graf-after--li">按下作者名字時將 post.author 加到 path，觸發 NavigationStack 顯示字串對應的頁面 ProfileView。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="aa03" id="aa03" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PostRow</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> post: <span class="hljs-type">Post</span><br />    <span class="hljs-meta">@Binding</span> <span class="hljs-keyword">var</span> path: <span class="hljs-type">NavigationPath</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span>(alignment: .leading) {<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;person.circle.fill&quot;</span>)<br />                    .resizable()<br />                    .frame(width: <span class="hljs-number">40</span>, height: <span class="hljs-number">40</span>)<br />                <span class="hljs-type">Text</span>(post.author)<br />                    .onTapGesture {<br />                        path.append(post.author)<br />                    }<br />                <span class="hljs-type">Spacer</span>()<br />            }<br />            <span class="hljs-type">Text</span>(post.content)<br />                .lineLimit(<span class="hljs-number">2</span>)<br />                .foregroundStyle(.secondary)<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;heart&quot;</span>)<br />                    .onTapGesture {<br />                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;按讚 / 取消讚&quot;</span>)<br />                    }<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;bubble.right&quot;</span>)<br />                    .onTapGesture {<br />                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;留言&quot;</span>)<br />                    }<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;paperplane&quot;</span>)<br />                    .onTapGesture {<br />                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;顯示分享選單&quot;</span>)<br />                    }<br />            }<br />            .foregroundStyle(.primary)<br />            <br />        }<br />    }<br />}</span></pre><p name="4922" id="4922" class="graf graf--p graf-after--pre">大功告成 ! 現在 App 的 PostRow 點選不同地方可以跳到不同頁面或做特定的功能，而且右邊也不會有向右的箭頭了。</p><figure name="05fb" id="05fb" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*KEJuliENvMPkaLt92mYisw.png" data-width="1150" data-height="1302" src="https://cdn-images-1.medium.com/max/800/1*KEJuliENvMPkaLt92mYisw.png"></figure><div name="3d6e" id="3d6e" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://github.com/PeterPanSwift/MultipleNavigationDestination" data-href="https://github.com/PeterPanSwift/MultipleNavigationDestination" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/PeterPanSwift/MultipleNavigationDestination"><strong class="markup--strong markup--mixtapeEmbed-strong">GitHub — PeterPanSwift/MultipleNavigationDestination</strong><br><em class="markup--em markup--mixtapeEmbed-em">Contribute to PeterPanSwift/MultipleNavigationDestination development by creating an account on GitHub.</em>github.com</a><a href="https://github.com/PeterPanSwift/MultipleNavigationDestination" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="26af06e1e67860df0cdf9bab803358d4" data-thumbnail-img-id="0*ve8hUX5AQv65TbjT" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*ve8hUX5AQv65TbjT);"></a></div><h3 name="6ae0" id="6ae0" class="graf graf--h3 graf-after--mixtapeEmbed">解法 2: 使用 navigationDestination(item:destination:)</h3><ul class="postList"><li name="4c29" id="4c29" class="graf graf--li graf-after--h3">PostList.swift</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="73c0" id="73c0" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PostList</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> posts <span class="hljs-operator">=</span> [<br />        <span class="hljs-type">Post</span>(author: <span class="hljs-string">&quot;小王子&quot;</span>, content: <span class="hljs-string">&quot;給我畫一隻綿羊。&quot;</span>),<br />        <span class="hljs-type">Post</span>(author: <span class="hljs-string">&quot;狐狸&quot;</span>, content: <span class="hljs-string">&quot;如果你馴養了我，我們就彼此需要了。對我，你就是世界上獨一無二的。對你，我也是世界上獨一無二的。&quot;</span>),<br />    ]<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> selectedPost: <span class="hljs-type">Post</span>?<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> selectedAuthor: <span class="hljs-type">String</span>?<br /><br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">NavigationStack</span> {<br />            <span class="hljs-type">List</span> {<br />                <span class="hljs-type">ForEach</span>(posts) { post <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">PostRow</span>(post: post, selectedAuthor: <span class="hljs-variable">$selectedAuthor</span>)<br />                        .contentShape(.rect)<br />                        .onTapGesture {<br />                            selectedPost <span class="hljs-operator">=</span> post<br />                        }<br />                }<br />            }<br />            .navigationDestination(item: <span class="hljs-variable">$selectedPost</span>, destination: { post <span class="hljs-keyword">in</span><br />                <span class="hljs-type">PostDetail</span>(post: post)<br />            })<br />            .navigationDestination(item: <span class="hljs-variable">$selectedAuthor</span>, destination: { author <span class="hljs-keyword">in</span><br />                <span class="hljs-type">ProfileView</span>(author: author)<br />            })<br />        }<br />    }<br />}</span></pre><ul class="postList"><li name="1901" id="1901" class="graf graf--li graf-after--pre">PostRow.swift</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="ad6b" id="ad6b" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PostRow</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> post: <span class="hljs-type">Post</span><br />    <span class="hljs-meta">@Binding</span> <span class="hljs-keyword">var</span> selectedAuthor: <span class="hljs-type">String</span>?<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span>(alignment: .leading) {<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;person.circle.fill&quot;</span>)<br />                    .resizable()<br />                    .frame(width: <span class="hljs-number">40</span>, height: <span class="hljs-number">40</span>)<br />                <span class="hljs-type">Text</span>(post.author)<br />                    .onTapGesture {<br />                        selectedAuthor <span class="hljs-operator">=</span> post.author<br />                    }<br />                <span class="hljs-type">Spacer</span>()<br />            }<br />            <span class="hljs-type">Text</span>(post.content)<br />                .lineLimit(<span class="hljs-number">2</span>)<br />                .foregroundStyle(.secondary)<br />            <span class="hljs-type">HStack</span> {<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;heart&quot;</span>)<br />                    .onTapGesture {<br />                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;按讚 / 取消讚&quot;</span>)<br />                    }<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;bubble.right&quot;</span>)<br />                    .onTapGesture {<br />                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;留言&quot;</span>)<br />                    }<br />                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">&quot;paperplane&quot;</span>)<br />                    .onTapGesture {<br />                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;顯示分享選單&quot;</span>)<br />                    }<br />            }<br />            .foregroundStyle(.primary)<br />            <br />        }<br />    }<br />}</span></pre><p name="2b2d" id="2b2d" class="graf graf--p graf-after--pre"><code class="markup--code markup--p-code">navigationDestination(item:destination:)</code> 將在 item 有值時觸發切換頁面，因此我們宣告 selectedPost 和 selectedAuthor，然後在點擊 PostRow &amp; Text(post.author) 時設定 selectedPost 和 selectedAuthor 觸發頁面切換。</p><p name="3b85" id="3b85" class="graf graf--p graf-after--p graf--trailing">ps: 只有 List 包多層 NavigationLink 時會有問題，因此另一種可行的解法是改用 ScrollView 或 Table 包多層 NavigationLink。</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/991cacbb7317"><time class="dt-published" datetime="2024-07-02T05:45:28.084Z">July 2, 2024</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%88%A9%E7%94%A8-navigationstack-%E7%9A%84-path-%E8%AE%93-list-%E7%9A%84-row-%E5%8D%80%E5%88%86%E8%B7%B3%E5%88%B0%E4%B8%8D%E5%90%8C%E9%A0%81%E9%9D%A2%E7%9A%84%E5%8D%80%E5%A1%8A-991cacbb7317" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>