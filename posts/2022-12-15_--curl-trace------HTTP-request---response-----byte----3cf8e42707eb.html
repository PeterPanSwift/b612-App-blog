<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>用 curl trace 指令查詢 HTTP request &amp; response 的封包 byte 內容</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">用 curl trace 指令查詢 HTTP request &amp; response 的封包 byte 內容</h1>
</header>
<section data-field="subtitle" class="p-summary">
當我們跟網路上的 server 透過 HTTP 溝通時，我們會發送 request 給 server，然後 server 會回傳 response 給我們。
</section>
<section data-field="body" class="e-content">
<section name="525c" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="8e54" id="8e54" class="graf graf--h3 graf--leading graf--title">用 curl trace 指令查詢 HTTP request &amp; response 的封包 byte 內容</h3><figure name="a2d9" id="a2d9" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*9vHyu_LBv0X3hp295cgzdA.png" data-width="1584" data-height="656" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*9vHyu_LBv0X3hp295cgzdA.png"></figure><p name="b48f" id="b48f" class="graf graf--p graf-after--figure">當我們跟網路上的 server 透過 HTTP 溝通時，我們會發送 request 給 server，然後 server 會回傳 response 給我們。</p><figure name="5973" id="5973" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*pQdShUXnKB4Zfg-evsK4ZA.png" data-width="1916" data-height="632" src="https://cdn-images-1.medium.com/max/800/1*pQdShUXnKB4Zfg-evsK4ZA.png"></figure><p name="dbe8" id="dbe8" class="graf graf--p graf-after--figure">request &amp; response 其實是由多個 byte 組成的封包，接下來我們將用 curl 的 trace 指令印出封包每個 byte 的內容，一睹 request &amp; response 的廬山真面目。</p><ul class="postList"><li name="000a" id="000a" class="graf graf--li graf-after--p">測試 HTTP Get</li><li name="b652" id="b652" class="graf graf--li graf-after--li">測試 HTTP Get 搭配 HTTP Header</li><li name="84d5" id="84d5" class="graf graf--li graf-after--li">測試 HTTP POST 搭配 HTTP Header &amp; JSON data</li></ul><h3 name="8c71" id="8c71" class="graf graf--h3 graf-after--li">測試 HTTP Get</h3><p name="6b24" id="6b24" class="graf graf--p graf-after--h3">server 將回傳 JSON 格式的資料。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="bash" name="1007" id="1007" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">curl <span class="hljs-string">&quot;https://names.drycodes.com/3?nameOptions=boy_names&quot;</span> --trace -</span></pre><ul class="postList"><li name="a2eb" id="a2eb" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">request 的 header</strong></li></ul><p name="5568" id="5568" class="graf graf--p graf-after--li">HTTP method，path，host 等資訊。</p><pre data-code-block-mode="0" spellcheck="false" name="46d5" id="46d5" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">=&gt; Send header, 103 bytes (0x67)<br>0000: 47 45 54 20 2f 33 3f 6e 61 6d 65 4f 70 74 69 6f GET /3?nameOptio<br>0010: 6e 73 3d 62 6f 79 5f 6e 61 6d 65 73 20 48 54 54 ns=boy_names HTT<br>0020: 50 2f 32 0d 0a 48 6f 73 74 3a 20 6e 61 6d 65 73 P/2..Host: names<br>0030: 2e 64 72 79 63 6f 64 65 73 2e 63 6f 6d 0d 0a 75 .drycodes.com..u<br>0040: 73 65 72 2d 61 67 65 6e 74 3a 20 63 75 72 6c 2f ser-agent: curl/<br>0050: 37 2e 38 35 2e 30 0d 0a 61 63 63 65 70 74 3a 20 7.85.0..accept: <br>0060: 2a 2f 2a 0d 0a 0d 0a                            */*....                                   .</span></pre><ul class="postList"><li name="8407" id="8407" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">response 的 header</strong></li></ul><p name="9627" id="9627" class="graf graf--p graf-after--li">HTTP status code，content-type 等資訊。</p><pre data-code-block-mode="0" spellcheck="false" name="7889" id="7889" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">&lt;= Recv header, 13 bytes (0xd)<br>0000: 48 54 54 50 2f 32 20 32 30 30 20 0d 0a          HTTP/2 200 ..<br>&lt;= Recv header, 47 bytes (0x2f)<br>0000: 63 6f 6e 74 65 6e 74 2d 74 79 70 65 3a 20 61 70 content-type: ap<br>0010: 70 6c 69 63 61 74 69 6f 6e 2f 6a 73 6f 6e 3b 20 plication/json; <br>0020: 63 68 61 72 73 65 74 3d 75 74 66 2d 38 0d 0a    charset=utf-8..<br>&lt;= Recv header, 25 bytes (0x19)<br>0000: 63 61 63 68 65 2d 63 6f 6e 74 72 6f 6c 3a 20 6e cache-control: n<br>0010: 6f 2d 63 61 63 68 65 0d 0a                      o-cache..<br>&lt;= Recv header, 23 bytes (0x17)<br>0000: 76 61 72 79 3a 20 61 63 63 65 70 74 2d 65 6e 63 vary: accept-enc<br>0010: 6f 64 69 6e 67 0d 0a                            oding..<br>&lt;= Recv header, 22 bytes (0x16)<br>0000: 61 63 63 65 70 74 2d 72 61 6e 67 65 73 3a 20 62 accept-ranges: b<br>0010: 79 74 65 73 0d 0a                               ytes..<br>&lt;= Recv header, 61 bytes (0x3d)<br>0000: 78 2d 63 6c 6f 75 64 2d 74 72 61 63 65 2d 63 6f x-cloud-trace-co<br>0010: 6e 74 65 78 74 3a 20 34 32 33 31 37 62 38 35 35 ntext: 42317b855<br>0020: 31 35 65 64 38 37 61 36 33 33 32 37 65 36 31 33 15ed87a63327e613<br>0030: 31 37 37 66 34 34 32 3b 6f 3d 31 0d 0a          177f442;o=1..<br>&lt;= Recv header, 37 bytes (0x25)<br>0000: 64 61 74 65 3a 20 54 68 75 2c 20 31 35 20 44 65 date: Thu, 15 De<br>0010: 63 20 32 30 32 32 20 30 36 3a 32 33 3a 30 33 20 c 2022 06:23:03 <br>0020: 47 4d 54 0d 0a                                  GMT..<br>&lt;= Recv header, 25 bytes (0x19)<br>0000: 73 65 72 76 65 72 3a 20 47 6f 6f 67 6c 65 20 46 server: Google F<br>0010: 72 6f 6e 74 65 6e 64 0d 0a                      rontend..<br>&lt;= Recv header, 20 bytes (0x14)<br>0000: 63 6f 6e 74 65 6e 74 2d 6c 65 6e 67 74 68 3a 20 content-length: <br>0010: 34 31 0d 0a                                     41..<br>&lt;= Recv header, 17 bytes (0x11)<br>0000: 76 69 61 3a 20 31 2e 31 20 67 6f 6f 67 6c 65 0d via: 1.1 google.<br>0010: 0a                                              .<br>&lt;= Recv header, 57 bytes (0x39)<br>0000: 61 6c 74 2d 73 76 63 3a 20 68 33 3d 22 3a 34 34 alt-svc: h3=&quot;:44<br>0010: 33 22 3b 20 6d 61 3d 32 35 39 32 30 30 30 2c 68 3&quot;; ma=2592000,h<br>0020: 33 2d 32 39 3d 22 3a 34 34 33 22 3b 20 6d 61 3d 3-29=&quot;:443&quot;; ma=<br>0030: 32 35 39 32 30 30 30 0d 0a                      2592000..<br>&lt;= Recv header, 2 bytes (0x2)<br>0000: 0d 0a                                           ..</span></pre><ul class="postList"><li name="47b1" id="47b1" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">response 的 data</strong></li></ul><p name="3088" id="3088" class="graf graf--p graf-after--li">server 回傳的 JSON 資料。</p><pre data-code-block-mode="0" spellcheck="false" name="dab9" id="dab9" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">&lt;= Recv data, 41 bytes (0x29)<br>0000: 5b 22 43 61 73 65 79 5f 4d 69 6b 65 22 2c 22 57 [&quot;Casey_Mike&quot;,&quot;W<br>0010: 69 6c 62 75 72 5f 45 74 68 65 6e 22 2c 22 42 65 ilbur_Ethen&quot;,&quot;Be<br>0020: 76 5f 42 72 75 6e 6f 22 5d                      v_Bruno&quot;]</span></pre><h3 name="a3e2" id="a3e2" class="graf graf--h3 graf-after--pre">測試 HTTP Get 搭配 HTTP Header</h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="bash" name="9eb9" id="9eb9" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content">curl <span class="hljs-string">&quot;https://api.thecatapi.com/v1/images/search?limit=2&quot;</span> -H <span class="hljs-string">&quot;x-api-key: DEMO-API-KEY&quot;</span> --trace -</span></pre><ul class="postList"><li name="16ef" id="16ef" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">request 的 header</strong></li></ul><p name="a569" id="a569" class="graf graf--p graf-after--li">HTTP method，path，host，x-api-key 等資訊。</p><pre data-code-block-mode="0" spellcheck="false" name="e95d" id="e95d" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">=&gt; Send header, 128 bytes (0x80)<br>0000: 47 45 54 20 2f 76 31 2f 69 6d 61 67 65 73 2f 73 GET /v1/images/s<br>0010: 65 61 72 63 68 3f 6c 69 6d 69 74 3d 32 20 48 54 earch?limit=2 HT<br>0020: 54 50 2f 32 0d 0a 48 6f 73 74 3a 20 61 70 69 2e TP/2..Host: api.<br>0030: 74 68 65 63 61 74 61 70 69 2e 63 6f 6d 0d 0a 75 thecatapi.com..u<br>0040: 73 65 72 2d 61 67 65 6e 74 3a 20 63 75 72 6c 2f ser-agent: curl/<br>0050: 37 2e 38 35 2e 30 0d 0a 61 63 63 65 70 74 3a 20 7.85.0..accept: <br>0060: 2a 2f 2a 0d 0a 78 2d 61 70 69 2d 6b 65 79 3a 20 */*..x-api-key: <br>0070: 44 45 4d 4f 2d 41 50 49 2d 4b 45 59 0d 0a 0d 0a DEMO-API-KEY....                                          .</span></pre><ul class="postList"><li name="ef70" id="ef70" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">response 的 header</strong></li></ul><p name="dd58" id="dd58" class="graf graf--p graf-after--li">HTTP status code，content-type 等資訊。</p><pre data-code-block-mode="0" spellcheck="false" name="195c" id="195c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">&lt;= Recv header, 13 bytes (0xd)<br>0000: 48 54 54 50 2f 32 20 32 30 30 20 0d 0a          HTTP/2 200 ..<br>&lt;= Recv header, 29 bytes (0x1d)<br>0000: 78 2d 64 6e 73 2d 70 72 65 66 65 74 63 68 2d 63 x-dns-prefetch-c<br>0010: 6f 6e 74 72 6f 6c 3a 20 6f 66 66 0d 0a          ontrol: off..<br>&lt;= Recv header, 29 bytes (0x1d)<br>0000: 78 2d 66 72 61 6d 65 2d 6f 70 74 69 6f 6e 73 3a x-frame-options:<br>0010: 20 53 41 4d 45 4f 52 49 47 49 4e 0d 0a           SAMEORIGIN..<br>&lt;= Recv header, 64 bytes (0x40)<br>0000: 73 74 72 69 63 74 2d 74 72 61 6e 73 70 6f 72 74 strict-transport<br>0010: 2d 73 65 63 75 72 69 74 79 3a 20 6d 61 78 2d 61 -security: max-a<br>0020: 67 65 3d 31 35 35 35 32 30 30 30 3b 20 69 6e 63 ge=15552000; inc<br>0030: 6c 75 64 65 53 75 62 44 6f 6d 61 69 6e 73 0d 0a ludeSubDomains..<br>&lt;= Recv header, 28 bytes (0x1c)<br>0000: 78 2d 64 6f 77 6e 6c 6f 61 64 2d 6f 70 74 69 6f x-download-optio<br>0010: 6e 73 3a 20 6e 6f 6f 70 65 6e 0d 0a             ns: noopen..<br>&lt;= Recv header, 33 bytes (0x21)<br>0000: 78 2d 63 6f 6e 74 65 6e 74 2d 74 79 70 65 2d 6f x-content-type-o<br>0010: 70 74 69 6f 6e 73 3a 20 6e 6f 73 6e 69 66 66 0d ptions: nosniff.<br>0020: 0a                                              .<br>&lt;= Recv header, 33 bytes (0x21)<br>0000: 78 2d 78 73 73 2d 70 72 6f 74 65 63 74 69 6f 6e x-xss-protection<br>0010: 3a 20 31 3b 20 6d 6f 64 65 3d 62 6c 6f 63 6b 0d : 1; mode=block.<br>0020: 0a                                              .<br>&lt;= Recv header, 14 bytes (0xe)<br>0000: 76 61 72 79 3a 20 4f 72 69 67 69 6e 0d 0a       vary: Origin..<br>&lt;= Recv header, 40 bytes (0x28)<br>0000: 65 78 70 69 72 65 73 3a 20 54 75 65 2c 20 30 33 expires: Tue, 03<br>0010: 20 4a 75 6c 20 32 30 30 31 20 30 36 3a 30 30 3a  Jul 2001 06:00:<br>0020: 30 30 20 47 4d 54 0d 0a                         00 GMT..<br>&lt;= Recv header, 79 bytes (0x4f)<br>0000: 6c 61 73 74 2d 6d 6f 64 69 66 69 65 64 3a 20 54 last-modified: T<br>0010: 68 75 20 44 65 63 20 32 32 20 32 30 32 32 20 30 hu Dec 22 2022 0<br>0020: 36 3a 31 35 3a 33 30 20 47 4d 54 2b 30 30 30 30 6:15:30 GMT+0000<br>0030: 20 28 43 6f 6f 72 64 69 6e 61 74 65 64 20 55 6e  (Coordinated Un<br>0040: 69 76 65 72 73 61 6c 20 54 69 6d 65 29 0d 0a    iversal Time)..<br>&lt;= Recv header, 42 bytes (0x2a)<br>0000: 63 61 63 68 65 2d 63 6f 6e 74 72 6f 6c 3a 20 70 cache-control: p<br>0010: 6f 73 74 2d 63 68 65 63 6b 3d 30 2c 20 70 72 65 ost-check=0, pre<br>0020: 2d 63 68 65 63 6b 3d 30 0d 0a                   -check=0..<br>&lt;= Recv header, 21 bytes (0x15)<br>0000: 61 75 74 68 65 6e 74 69 63 61 74 65 64 3a 20 74 authenticated: t<br>0010: 72 75 65 0d 0a                                  rue..<br>&lt;= Recv header, 24 bytes (0x18)<br>0000: 70 61 67 69 6e 61 74 69 6f 6e 2d 63 6f 75 6e 74 pagination-count<br>0010: 3a 20 38 30 35 35 0d 0a                         : 8055..<br>&lt;= Recv header, 20 bytes (0x14)<br>0000: 70 61 67 69 6e 61 74 69 6f 6e 2d 70 61 67 65 3a pagination-page:<br>0010: 20 30 0d 0a                                      0..<br>&lt;= Recv header, 21 bytes (0x15)<br>0000: 70 61 67 69 6e 61 74 69 6f 6e 2d 6c 69 6d 69 74 pagination-limit<br>0010: 3a 20 32 0d 0a                                  : 2..<br>&lt;= Recv header, 84 bytes (0x54)<br>0000: 61 63 63 65 73 73 2d 63 6f 6e 74 72 6f 6c 2d 65 access-control-e<br>0010: 78 70 6f 73 65 2d 68 65 61 64 65 72 73 3a 20 50 xpose-headers: P<br>0020: 61 67 69 6e 61 74 69 6f 6e 2d 43 6f 75 6e 74 2c agination-Count,<br>0030: 20 50 61 67 69 6e 61 74 69 6f 6e 2d 50 61 67 65  Pagination-Page<br>0040: 2c 20 50 61 67 69 6e 61 74 69 6f 6e 2d 4c 69 6d , Pagination-Lim<br>0050: 69 74 0d 0a                                     it..<br>&lt;= Recv header, 47 bytes (0x2f)<br>0000: 63 6f 6e 74 65 6e 74 2d 74 79 70 65 3a 20 61 70 content-type: ap<br>0010: 70 6c 69 63 61 74 69 6f 6e 2f 6a 73 6f 6e 3b 20 plication/json; <br>0020: 63 68 61 72 73 65 74 3d 75 74 66 2d 38 0d 0a    charset=utf-8..<br>&lt;= Recv header, 24 bytes (0x18)<br>0000: 78 2d 72 65 73 70 6f 6e 73 65 2d 74 69 6d 65 3a x-response-time:<br>0010: 20 33 31 38 6d 73 0d 0a                          318ms..<br>&lt;= Recv header, 57 bytes (0x39)<br>0000: 78 2d 63 6c 6f 75 64 2d 74 72 61 63 65 2d 63 6f x-cloud-trace-co<br>0010: 6e 74 65 78 74 3a 20 36 63 33 61 64 31 32 38 33 ntext: 6c3ad1283<br>0020: 33 34 63 34 37 35 30 31 33 30 30 33 61 37 66 33 34c475013003a7f3<br>0030: 62 33 35 36 35 34 63 0d 0a                      b35654c..<br>&lt;= Recv header, 37 bytes (0x25)<br>0000: 64 61 74 65 3a 20 54 68 75 2c 20 32 32 20 44 65 date: Thu, 22 De<br>0010: 63 20 32 30 32 32 20 30 36 3a 31 35 3a 33 30 20 c 2022 06:15:30 <br>0020: 47 4d 54 0d 0a                                  GMT..<br>&lt;= Recv header, 25 bytes (0x19)<br>0000: 73 65 72 76 65 72 3a 20 47 6f 6f 67 6c 65 20 46 server: Google F<br>0010: 72 6f 6e 74 65 6e 64 0d 0a                      rontend..<br>&lt;= Recv header, 21 bytes (0x15)<br>0000: 63 6f 6e 74 65 6e 74 2d 6c 65 6e 67 74 68 3a 20 content-length: <br>0010: 32 34 34 0d 0a                                  244..<br>&lt;= Recv header, 2 bytes (0x2)<br>0000: 0d 0a                                           ..</span></pre><ul class="postList"><li name="8dd2" id="8dd2" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">response 的 data</strong></li></ul><p name="7e64" id="7e64" class="graf graf--p graf-after--li">server 回傳的 JSON 資料。</p><pre data-code-block-mode="0" spellcheck="false" name="80a4" id="80a4" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">&lt;= Recv data, 244 bytes (0xf4)<br>0000: 5b 7b 22 62 72 65 65 64 73 22 3a 5b 5d 2c 22 63 [{&quot;breeds&quot;:[],&quot;c<br>0010: 61 74 65 67 6f 72 69 65 73 22 3a 5b 7b 22 69 64 ategories&quot;:[{&quot;id<br>0020: 22 3a 36 2c 22 6e 61 6d 65 22 3a 22 63 61 74 75 &quot;:6,&quot;name&quot;:&quot;catu<br>0030: 72 64 61 79 22 7d 5d 2c 22 69 64 22 3a 22 33 74 rday&quot;}],&quot;id&quot;:&quot;3t<br>0040: 64 22 2c 22 75 72 6c 22 3a 22 68 74 74 70 73 3a d&quot;,&quot;url&quot;:&quot;https:<br>0050: 2f 2f 63 64 6e 32 2e 74 68 65 63 61 74 61 70 69 //cdn2.thecatapi<br>0060: 2e 63 6f 6d 2f 69 6d 61 67 65 73 2f 33 74 64 2e .com/images/3td.<br>0070: 6a 70 67 22 2c 22 77 69 64 74 68 22 3a 34 34 39 jpg&quot;,&quot;width&quot;:449<br>0080: 2c 22 68 65 69 67 68 74 22 3a 36 30 30 7d 2c 7b ,&quot;height&quot;:600},{<br>0090: 22 62 72 65 65 64 73 22 3a 5b 5d 2c 22 69 64 22 &quot;breeds&quot;:[],&quot;id&quot;<br>00a0: 3a 22 36 73 6e 22 2c 22 75 72 6c 22 3a 22 68 74 :&quot;6sn&quot;,&quot;url&quot;:&quot;ht<br>00b0: 74 70 73 3a 2f 2f 63 64 6e 32 2e 74 68 65 63 61 tps://cdn2.theca<br>00c0: 74 61 70 69 2e 63 6f 6d 2f 69 6d 61 67 65 73 2f tapi.com/images/<br>00d0: 36 73 6e 2e 6a 70 67 22 2c 22 77 69 64 74 68 22 6sn.jpg&quot;,&quot;width&quot;<br>00e0: 3a 36 38 33 2c 22 68 65 69 67 68 74 22 3a 31 30 :683,&quot;height&quot;:10<br>00f0: 32 34 7d 5d                                     24}]</span></pre><h3 name="73c0" id="73c0" class="graf graf--h3 graf-after--pre">測試 HTTP POST 搭配 HTTP Header &amp; JSON data</h3><p name="1120" id="1120" class="graf graf--p graf-after--h3">上傳 JSON 格式的資料。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="bash" name="5d05" id="5d05" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">curl <span class="hljs-string">&quot;https://reqres.in/api/users&quot;</span> -X POST -H <span class="hljs-string">&quot;content-type: application/json&quot;</span> -d <span class="hljs-string">&#x27;{&quot;name&quot;: &quot;morpheus&quot;,&quot;job&quot;: &quot;leader&quot;}&#x27;</span> --trace -</span></pre><ul class="postList"><li name="ec82" id="ec82" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">request 的 header</strong></li></ul><p name="0c98" id="0c98" class="graf graf--p graf-after--li">HTTP method，path，host，content-type 等資訊。</p><pre data-code-block-mode="0" spellcheck="false" name="eda2" id="eda2" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">=&gt; Send header, 133 bytes (0x85)<br>0000: 50 4f 53 54 20 2f 61 70 69 2f 75 73 65 72 73 20 POST /api/users <br>0010: 48 54 54 50 2f 32 0d 0a 48 6f 73 74 3a 20 72 65 HTTP/2..Host: re<br>0020: 71 72 65 73 2e 69 6e 0d 0a 75 73 65 72 2d 61 67 qres.in..user-ag<br>0030: 65 6e 74 3a 20 63 75 72 6c 2f 37 2e 38 35 2e 30 ent: curl/7.85.0<br>0040: 0d 0a 61 63 63 65 70 74 3a 20 2a 2f 2a 0d 0a 63 ..accept: */*..c<br>0050: 6f 6e 74 65 6e 74 2d 74 79 70 65 3a 20 61 70 70 ontent-type: app<br>0060: 6c 69 63 61 74 69 6f 6e 2f 6a 73 6f 6e 0d 0a 63 lication/json..c<br>0070: 6f 6e 74 65 6e 74 2d 6c 65 6e 67 74 68 3a 20 33 ontent-length: 3<br>0080: 36 0d 0a 0d 0a                                  6....</span></pre><ul class="postList"><li name="8bda" id="8bda" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">request 的 body</strong></li></ul><p name="993e" id="993e" class="graf graf--p graf-after--li">上傳的 JSON 資料。</p><pre data-code-block-mode="0" spellcheck="false" name="5fd3" id="5fd3" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">=&gt; Send data, 36 bytes (0x24)<br>0000: 7b 22 6e 61 6d 65 22 3a 20 22 6d 6f 72 70 68 65 {&quot;name&quot;: &quot;morphe<br>0010: 75 73 22 2c 22 6a 6f 62 22 3a 20 22 6c 65 61 64 us&quot;,&quot;job&quot;: &quot;lead<br>0020: 65 72 22 7d                                     er&quot;}</span></pre><ul class="postList"><li name="84fa" id="84fa" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">response 的 header</strong></li></ul><p name="2545" id="2545" class="graf graf--p graf-after--li">HTTP status code，content-type 等資訊。</p><pre data-code-block-mode="0" spellcheck="false" name="599f" id="599f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">&lt;= Recv header, 13 bytes (0xd)<br>0000: 48 54 54 50 2f 32 20 32 30 31 20 0d 0a          HTTP/2 201 ..<br>&lt;= Recv header, 37 bytes (0x25)<br>0000: 64 61 74 65 3a 20 54 68 75 2c 20 31 35 20 44 65 date: Thu, 15 De<br>0010: 63 20 32 30 32 32 20 30 36 3a 33 38 3a 31 37 20 c 2022 06:38:17 <br>0020: 47 4d 54 0d 0a                                  GMT..<br>&lt;= Recv header, 47 bytes (0x2f)<br>0000: 63 6f 6e 74 65 6e 74 2d 74 79 70 65 3a 20 61 70 content-type: ap<br>0010: 70 6c 69 63 61 74 69 6f 6e 2f 6a 73 6f 6e 3b 20 plication/json; <br>0020: 63 68 61 72 73 65 74 3d 75 74 66 2d 38 0d 0a    charset=utf-8..<br>&lt;= Recv header, 20 bytes (0x14)<br>0000: 63 6f 6e 74 65 6e 74 2d 6c 65 6e 67 74 68 3a 20 content-length: <br>0010: 38 34 0d 0a                                     84..<br>&lt;= Recv header, 23 bytes (0x17)<br>0000: 78 2d 70 6f 77 65 72 65 64 2d 62 79 3a 20 45 78 x-powered-by: Ex<br>0010: 70 72 65 73 73 0d 0a                            press..<br>&lt;= Recv header, 32 bytes (0x20)<br>0000: 61 63 63 65 73 73 2d 63 6f 6e 74 72 6f 6c 2d 61 access-control-a<br>0010: 6c 6c 6f 77 2d 6f 72 69 67 69 6e 3a 20 2a 0d 0a llow-origin: *..<br>&lt;= Recv header, 42 bytes (0x2a)<br>0000: 65 74 61 67 3a 20 57 2f 22 35 34 2d 69 6f 6d 73 etag: W/&quot;54-ioms<br>0010: 58 33 37 5a 70 6e 62 38 73 7a 67 58 73 32 48 56 X37Zpnb8szgXs2HV<br>0020: 2f 31 42 30 39 32 6f 22 0d 0a                   /1B092o&quot;..<br>&lt;= Recv header, 16 bytes (0x10)<br>0000: 76 69 61 3a 20 31 2e 31 20 76 65 67 75 72 0d 0a via: 1.1 vegur..<br>&lt;= Recv header, 26 bytes (0x1a)<br>0000: 63 66 2d 63 61 63 68 65 2d 73 74 61 74 75 73 3a cf-cache-status:<br>0010: 20 44 59 4e 41 4d 49 43 0d 0a                    DYNAMIC..<br>&lt;= Recv header, 252 bytes (0xfc)<br>0000: 72 65 70 6f 72 74 2d 74 6f 3a 20 7b 22 65 6e 64 report-to: {&quot;end<br>0010: 70 6f 69 6e 74 73 22 3a 5b 7b 22 75 72 6c 22 3a points&quot;:[{&quot;url&quot;:<br>0020: 22 68 74 74 70 73 3a 5c 2f 5c 2f 61 2e 6e 65 6c &quot;https:\/\/a.nel<br>0030: 2e 63 6c 6f 75 64 66 6c 61 72 65 2e 63 6f 6d 5c .cloudflare.com\<br>0040: 2f 72 65 70 6f 72 74 5c 2f 76 33 3f 73 3d 6a 77 /report\/v3?s=jw<br>0050: 39 6b 36 68 61 4b 6a 4e 33 41 4e 37 4c 31 66 49 9k6haKjN3AN7L1fI<br>0060: 59 6f 6d 50 47 4f 48 45 79 4f 48 50 49 45 4f 45 YomPGOHEyOHPIEOE<br>0070: 33 42 6e 41 57 25 32 46 44 39 30 43 32 67 47 52 3BnAW%2FD90C2gGR<br>0080: 68 74 25 32 46 62 70 37 67 62 63 76 72 32 48 47 ht%2Fbp7gbcvr2HG<br>0090: 77 7a 35 50 66 39 4e 4b 46 35 76 48 33 50 4d 70 wz5Pf9NKF5vH3PMp<br>00a0: 6b 4c 44 75 69 78 36 55 4c 44 25 32 42 4d 4b 46 kLDuix6ULD%2BMKF<br>00b0: 79 63 73 42 4b 4e 63 50 6f 6a 6b 4f 46 55 6d 33 ycsBKNcPojkOFUm3<br>00c0: 4c 4d 6f 74 64 41 50 38 33 57 48 76 55 77 25 33 LMotdAP83WHvUw%3<br>00d0: 44 25 33 44 22 7d 5d 2c 22 67 72 6f 75 70 22 3a D%3D&quot;}],&quot;group&quot;:<br>00e0: 22 63 66 2d 6e 65 6c 22 2c 22 6d 61 78 5f 61 67 &quot;cf-nel&quot;,&quot;max_ag<br>00f0: 65 22 3a 36 30 34 38 30 30 7d 0d 0a             e&quot;:604800}..<br>&lt;= Recv header, 67 bytes (0x43)<br>0000: 6e 65 6c 3a 20 7b 22 73 75 63 63 65 73 73 5f 66 nel: {&quot;success_f<br>0010: 72 61 63 74 69 6f 6e 22 3a 30 2c 22 72 65 70 6f raction&quot;:0,&quot;repo<br>0020: 72 74 5f 74 6f 22 3a 22 63 66 2d 6e 65 6c 22 2c rt_to&quot;:&quot;cf-nel&quot;,<br>0030: 22 6d 61 78 5f 61 67 65 22 3a 36 30 34 38 30 30 &quot;max_age&quot;:604800<br>0040: 7d 0d 0a                                        }..<br>&lt;= Recv header, 20 bytes (0x14)<br>0000: 73 65 72 76 65 72 3a 20 63 6c 6f 75 64 66 6c 61 server: cloudfla<br>0010: 72 65 0d 0a                                     re..<br>&lt;= Recv header, 30 bytes (0x1e)<br>0000: 63 66 2d 72 61 79 3a 20 37 37 39 64 32 63 65 62 cf-ray: 779d2ceb<br>0010: 34 38 35 30 31 30 39 32 2d 48 4b 47 0d 0a       48501092-HKG..<br>&lt;= Recv header, 2 bytes (0x2)<br>0000: 0d 0a                                           ..</span></pre><ul class="postList"><li name="98ec" id="98ec" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">response 的 data</strong></li></ul><p name="e8be" id="e8be" class="graf graf--p graf-after--li">server 回傳的 JSON 資料。</p><pre data-code-block-mode="0" spellcheck="false" name="9656" id="9656" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">&lt;= Recv data, 84 bytes (0x54)<br>0000: 7b 22 6e 61 6d 65 22 3a 22 6d 6f 72 70 68 65 75 {&quot;name&quot;:&quot;morpheu<br>0010: 73 22 2c 22 6a 6f 62 22 3a 22 6c 65 61 64 65 72 s&quot;,&quot;job&quot;:&quot;leader<br>0020: 22 2c 22 69 64 22 3a 22 31 30 36 22 2c 22 63 72 &quot;,&quot;id&quot;:&quot;106&quot;,&quot;cr<br>0030: 65 61 74 65 64 41 74 22 3a 22 32 30 32 32 2d 31 eatedAt&quot;:&quot;2022-1<br>0040: 32 2d 31 35 54 30 36 3a 33 38 3a 31 37 2e 31 36 2-15T06:38:17.16<br>0050: 35 5a 22 7d                                     5Z&quot;}</span></pre><h3 name="7673" id="7673" class="graf graf--h3 graf-after--pre">curl 的其它參數</h3><p name="a633" id="a633" class="graf graf--p graf-after--h3">搭配參數 trace 會印出 request 和 response 的詳細內容。如果只想看簡化版的內容，則可搭配參數 -i 或 -v。</p><ul class="postList"><li name="cd7a" id="cd7a" class="graf graf--li graf-after--p">參數 -i。</li></ul><p name="e904" id="e904" class="graf graf--p graf-after--li">只印出 response 的 header 和 data。</p><pre data-code-block-mode="0" spellcheck="false" name="9b2e" id="9b2e" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">curl &quot;https://reqres.in/api/users&quot; -X POST -H &quot;content-type: application/json&quot; -d &#39;{&quot;name&quot;: &quot;morpheus&quot;,&quot;job&quot;: &quot;leader&quot;}&#39; -i   </span></pre><p name="92da" id="92da" class="graf graf--p graf-after--pre">結果。</p><pre data-code-block-mode="0" spellcheck="false" name="95e9" id="95e9" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">HTTP/2 201 <br>date: Tue, 25 Apr 2023 10:48:18 GMT<br>content-type: application/json; charset=utf-8<br>content-length: 84<br>x-powered-by: Express<br>access-control-allow-origin: *<br>etag: W/&quot;54-WO86s465T9yb84HZuvmtQvI0iuo&quot;<br>via: 1.1 vegur<br>cf-cache-status: DYNAMIC<br>report-to: {&quot;endpoints&quot;:[{&quot;url&quot;:&quot;https:\/\/a.nel.cloudflare.com\/report\/v3?s=bhOyCnW%2Fi6LJKkfoC4AkSb8Bg4F3veZ2Xacol6n37EuWDXmYc%2BWUigJMuLHpQouo7H3MaN8PlcuskoQ2o8hZG%2BOX756wUtGy8fuiTIAMl%2BytAstU379M2jgivg%3D%3D&quot;}],&quot;group&quot;:&quot;cf-nel&quot;,&quot;max_age&quot;:604800}<br>nel: {&quot;success_fraction&quot;:0,&quot;report_to&quot;:&quot;cf-nel&quot;,&quot;max_age&quot;:604800}<br>server: cloudflare<br>cf-ray: 7bd6034bec7a7cd3-LAX<br><br>{&quot;name&quot;:&quot;morpheus&quot;,&quot;job&quot;:&quot;leader&quot;,&quot;id&quot;:&quot;331&quot;,&quot;createdAt&quot;:&quot;2023-04-25T10:48:18.779Z&quot;}</span></pre><ul class="postList"><li name="0bf6" id="0bf6" class="graf graf--li graf-after--pre">參數 -v。</li></ul><pre data-code-block-mode="0" spellcheck="false" name="bca8" id="bca8" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content">curl &quot;https://reqres.in/api/users&quot; -X POST -H &quot;content-type: application/json&quot; -d &#39;{&quot;name&quot;: &quot;morpheus&quot;,&quot;job&quot;: &quot;leader&quot;}&#39; -v</span></pre><p name="1b1c" id="1b1c" class="graf graf--p graf-after--pre">結果。</p><p name="0a26" id="0a26" class="graf graf--p graf-after--p">&gt;&gt;&gt; 開頭的是 request header，&lt;&lt;&lt; 開頭的是 response header。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="markdown" name="7e11" id="7e11" class="graf graf--pre graf-after--p graf--trailing graf--preV2"><span class="pre--content">Note: Unnecessary use of -X or --request, POST is already inferred.<br /><span class="hljs-bullet">*</span>   Trying 104.26.11.213:443...<br /><span class="hljs-bullet">*</span> Connected to reqres.in (104.26.11.213) port 443 (#0)<br /><span class="hljs-bullet">*</span> ALPN: offers h2<br /><span class="hljs-bullet">*</span> ALPN: offers http/1.1<br /><span class="hljs-bullet">*</span>  CAfile: /etc/ssl/cert.pem<br /><span class="hljs-bullet">*</span>  CApath: none<br /><span class="hljs-bullet">*</span> (304) (OUT), TLS handshake, Client hello (1):<br /><span class="hljs-bullet">*</span> (304) (IN), TLS handshake, Server hello (2):<br /><span class="hljs-bullet">*</span> (304) (IN), TLS handshake, Unknown (8):<br /><span class="hljs-bullet">*</span> (304) (IN), TLS handshake, Certificate (11):<br /><span class="hljs-bullet">*</span> (304) (IN), TLS handshake, CERT verify (15):<br /><span class="hljs-bullet">*</span> (304) (IN), TLS handshake, Finished (20):<br /><span class="hljs-bullet">*</span> (304) (OUT), TLS handshake, Finished (20):<br /><span class="hljs-bullet">*</span> SSL connection using TLSv1.3 / AEAD-CHACHA20-POLY1305-SHA256<br /><span class="hljs-bullet">*</span> ALPN: server accepted h2<br /><span class="hljs-bullet">*</span> Server certificate:<br /><span class="hljs-bullet">*</span>  subject: C=US; ST=California; L=San Francisco; O=Cloudflare, Inc.; CN=sni.cloudflaressl.com<br /><span class="hljs-bullet">*</span>  start date: Jun 13 00:00:00 2022 GMT<br /><span class="hljs-bullet">*</span>  expire date: Jun 13 23:59:59 2023 GMT<br /><span class="hljs-bullet">*</span>  subjectAltName: host &quot;reqres.in&quot; matched cert&#x27;s &quot;reqres.in&quot;<br /><span class="hljs-bullet">*</span>  issuer: C=US; O=Cloudflare, Inc.; CN=Cloudflare Inc ECC CA-3<br /><span class="hljs-bullet">*</span>  SSL certificate verify ok.<br /><span class="hljs-bullet">*</span> Using HTTP2, server supports multiplexing<br /><span class="hljs-bullet">*</span> Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0<br /><span class="hljs-bullet">*</span> h2h3 [:method: POST]<br /><span class="hljs-bullet">*</span> h2h3 [:path: /api/users]<br /><span class="hljs-bullet">*</span> h2h3 [:scheme: https]<br /><span class="hljs-bullet">*</span> h2h3 [:authority: reqres.in]<br /><span class="hljs-bullet">*</span> h2h3 [user-agent: curl/7.85.0]<br /><span class="hljs-bullet">*</span> h2h3 [accept: <span class="hljs-emphasis">*/*</span>]<br /><span class="hljs-bullet">*</span> h2h3 [content-type: application/json]<br /><span class="hljs-bullet">*</span> h2h3 [content-length: 36]<br /><span class="hljs-bullet">*</span> Using Stream ID: 1 (easy handle 0x14e811400)<br /><span class="hljs-quote">&gt; POST /api/users HTTP/2</span><br /><span class="hljs-quote">&gt; Host: reqres.in</span><br /><span class="hljs-quote">&gt; user-agent: curl/7.85.0</span><br /><span class="hljs-quote">&gt; accept: <span class="hljs-emphasis">*/*</span></span><br /><span class="hljs-quote">&gt; content-type: application/json</span><br /><span class="hljs-quote">&gt; content-length: 36</span><br /><span class="hljs-quote">&gt; <br />* We are completely uploaded and fine</span><br /><span class="hljs-bullet">*</span> Connection state changed (MAX<span class="hljs-emphasis">_CONCURRENT_</span>STREAMS == 256)!<br />&lt; HTTP/2 201 <br />&lt; date: Tue, 25 Apr 2023 10:49:00 GMT<br />&lt; content-type: application/json; charset=utf-8<br />&lt; content-length: 84<br />&lt; x-powered-by: Express<br />&lt; access-control-allow-origin: *<br />&lt; etag: W/&quot;54-Dn170/dOmStV6RIFG+1FajG+6hw&quot;<br />&lt; via: 1.1 vegur<br />&lt; cf-cache-status: DYNAMIC<br />&lt; report-to: {&quot;endpoints&quot;:[{&quot;url&quot;:&quot;https:\/\/a.nel.cloudflare.com\/report\/v3?s=17clh08jwZcc00HqpAlm4QKoYYlCC59JH1KAA5uTMgFJtGXsrwnJvSqnXjnHrg0iklWFoPmG4Hb9YWoRsALo85spyW1LtDqWR8Qfwshb5WsqBKnUGES713FbIw%3D%3D&quot;}],&quot;group&quot;:&quot;cf-nel&quot;,&quot;max<span class="hljs-emphasis">_age&quot;:604800}<br />&lt; nel: {&quot;success_</span>fraction&quot;:0,&quot;report<span class="hljs-emphasis">_to&quot;:&quot;cf-nel&quot;,&quot;max_</span>age&quot;:604800}<br />&lt; server: cloudflare<br />&lt; cf-ray: 7bd6044dbc362a9e-LAX<br />&lt; <br /><span class="hljs-bullet">*</span> Connection #0 to host reqres.in left intact<br />{&quot;name&quot;:&quot;morpheus&quot;,&quot;job&quot;:&quot;leader&quot;,&quot;id&quot;:&quot;331&quot;,&quot;createdAt&quot;:&quot;2023-04-25T10:49:00.050Z&quot;}</span></pre></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/3cf8e42707eb"><time class="dt-published" datetime="2022-12-15T07:12:25.872Z">December 15, 2022</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E7%94%A8-curl-trace-%E6%8C%87%E4%BB%A4%E6%9F%A5%E8%A9%A2-http-request-response-%E7%9A%84%E5%B0%81%E5%8C%85-byte-%E5%85%A7%E5%AE%B9-3cf8e42707eb" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>