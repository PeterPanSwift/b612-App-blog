<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>viewDidLoad &amp; viewDidLayoutSubviews 時元件的位置大小</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">viewDidLoad &amp; viewDidLayoutSubviews 時元件的位置大小</h1>
</header>
<section data-field="subtitle" class="p-summary">
開發 iOS App 時，我們時常在 view controller 的 viewDidLoad 做事，比方抓取網路資料或設定畫面的內容。不過當使用 auto layout 設計畫面時，元件要等到 viewDidLayoutSubviews 才會變成真正的位置大小。
</section>
<section data-field="body" class="e-content">
<section name="591b" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="7ca8" id="7ca8" class="graf graf--h3 graf--leading graf--title">viewDidLoad &amp; viewDidLayoutSubviews 時元件的位置大小</h3><p name="60b5" id="60b5" class="graf graf--p graf-after--h3">開發 iOS App 時，我們時常在 view controller 的 viewDidLoad 做事，比方抓取網路資料或設定畫面的內容。不過當使用 auto layout 設計畫面時，元件要等到 viewDidLayoutSubviews 才會變成真正的位置大小。</p><p name="4ff3" id="4ff3" class="graf graf--p graf-after--p">接下來就讓我們以 Apple TV 上好看的影集 Defending Jacob 說明吧。</p><ul class="postList"><li name="f91a" id="f91a" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">在 storyboard 加入顯示 Defending Jacob 的 image view。</strong></li></ul><p name="3cc5" id="3cc5" class="graf graf--p graf-after--li">加入 4 個條件，圖片的高度是 300，圖片和 safe area 的左，右，上間距為 10。</p><figure name="1412" id="1412" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*e6indlf9PM1mHZriDZumBw.jpeg" data-width="1422" data-height="638" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*e6indlf9PM1mHZriDZumBw.jpeg"></figure><ul class="postList"><li name="269c" id="269c" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">連接 image view 的 outlet。</strong></li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="f005" id="f005" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIViewController</span> {<br /><br />   <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> imageView: <span class="hljs-type">UIImageView</span>!</span></pre><ul class="postList"><li name="4506" id="4506" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">在 viewDidLoad 印出圖片的位置大小。</strong></li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="10e2" id="10e2" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {<br />        <span class="hljs-keyword">super</span>.viewDidLoad()<br />        <span class="hljs-comment">// Do any additional setup after loading the view.</span><br />        <span class="hljs-built_in">print</span>(imageView.frame)<br />}</span></pre><ul class="postList"><li name="0cfe" id="0cfe" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">測試 App</strong></li></ul><p name="590a" id="590a" class="graf graf--p graf-after--li">iPhone 11</p><pre name="79b6" id="79b6" class="graf graf--pre graf-after--p">(10.0, 54.0, 394.0, 300.0)</pre><p name="cfd0" id="cfd0" class="graf graf--p graf-after--pre">iPhone 8</p><pre name="9907" id="9907" class="graf graf--pre graf-after--p">(10.0, 54.0, 394.0, 300.0)</pre><p name="54b5" id="54b5" class="graf graf--p graf-after--pre">沒可能呀 ! iPhone 8 &amp; iPhone 11 的圖片位置大小一模一樣，明明在較大的 iPhone 11 時圖片比較大呀。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="a265" id="a265" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50.457%;"><img class="graf-image" data-image-id="1*IzwOlFr6M9Wgnx7URbB3kw.jpeg" data-width="910" data-height="1648" src="https://cdn-images-1.medium.com/max/800/1*IzwOlFr6M9Wgnx7URbB3kw.jpeg"></figure><figure name="d462" id="d462" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 49.543%;"><img class="graf-image" data-image-id="1*jnW0ZPBQdNmE1qqN5GywMA.jpeg" data-width="896" data-height="1652" src="https://cdn-images-1.medium.com/max/600/1*jnW0ZPBQdNmE1qqN5GywMA.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="b868" id="b868" class="graf graf--h3 graf-after--figure">viewDidLoad 的元件位置大小依據 storyboard 設定的 iPhone 尺寸</h3><p name="d181" id="d181" class="graf graf--p graf-after--h3">為什麼 viewDidLoad 印出的位置大小怪怪的呢 ? 因為在 viewDidLoad 時元件尚未以 Auto Layout 結合 iPhone 算出真正的位置大小，此時它的位置大小是依據 storyboard 裡設定的 iPhone 尺寸搭配 auto layout 決定的。</p><p name="0b0d" id="0b0d" class="graf graf--p graf-after--p">如下圖所示，storyboard 設為 iPhone 11，因此當 App 跑在 iPhone 8，在 viewDidLoad 時圖片還是 iPhone 11 下 Auto Layout 算出的位置大小。圖片的寬度 394 等於 iPhone 11 螢幕寬度 414 扣掉左右間距 10。</p><figure name="441e" id="441e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Z6FMIn4kzSXFWxjeudqW9Q.jpeg" data-width="1248" data-height="824" src="https://cdn-images-1.medium.com/max/800/1*Z6FMIn4kzSXFWxjeudqW9Q.jpeg"></figure><p name="9826" id="9826" class="graf graf--p graf-after--figure">當 storyboard 改成顯示 iPhone SE(2nd generation)，在 viewDidLoad 時圖片變成 iPhone SE 2下 Auto Layout 算出的位置大小，因此寬度從剛剛的 394 縮小為 355。(iPhone SE 2 螢幕寬度 375 扣掉左右間距 10)</p><figure name="da6a" id="da6a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*IQkW1lqJA2xNYmK5tXbIGg.jpeg" data-width="1250" data-height="664" src="https://cdn-images-1.medium.com/max/800/1*IQkW1lqJA2xNYmK5tXbIGg.jpeg"></figure><pre name="d95a" id="d95a" class="graf graf--pre graf-after--figure">(10.0, 10.0, 355.0, 300.0)</pre><h3 name="4d95" id="4d95" class="graf graf--h3 graf-after--pre">元件在 viewDidLayoutSubviews 才變成 Auto Layout 搭配 iPhone 算出的位置大小</h3><p name="07cf" id="07cf" class="graf graf--p graf-after--h3">所以什麼時候才能取得元件真正的位置大小呢 ? 要等到 view controller 的 function viewDidLayoutSubviews 執行時。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="3c04" id="3c04" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLayoutSubviews</span>() {<br />        <span class="hljs-keyword">super</span>.viewDidLayoutSubviews()<br />        <span class="hljs-built_in">print</span>(imageView.frame)<br />}</span></pre><p name="c8c9" id="c8c9" class="graf graf--p graf-after--pre">因此若想依元件真正的位置大小做一些計算，記得要等到 viewDidLayoutSubviews。在 viewDidAppear 計算也可以，因為 viewDidAppear 會比 viewDidLayoutSubviews 還晚呼叫。</p><p name="a2c7" id="a2c7" class="graf graf--p graf-after--p">以下兩個例子都滿適合在 viewDidLayoutSubviews 做計算。</p><ul class="postList"><li name="13d5" id="13d5" class="graf graf--li graf-after--p">計算圓角 layer.cornerRadius。</li></ul><div name="6fbf" id="6fbf" class="graf graf--mixtapeEmbed graf-after--li"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/auto-layout-%E7%9A%84%E5%85%83%E4%BB%B6%E8%A9%B2%E5%9C%A8%E4%BD%95%E6%99%82%E8%A8%AD%E5%AE%9A%E5%9C%93%E8%A7%92%E7%9A%84-layer-cornerradius-669fae1c287c" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/auto-layout-%E7%9A%84%E5%85%83%E4%BB%B6%E8%A9%B2%E5%9C%A8%E4%BD%95%E6%99%82%E8%A8%AD%E5%AE%9A%E5%9C%93%E8%A7%92%E7%9A%84-layer-cornerradius-669fae1c287c" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/auto-layout-%E7%9A%84%E5%85%83%E4%BB%B6%E8%A9%B2%E5%9C%A8%E4%BD%95%E6%99%82%E8%A8%AD%E5%AE%9A%E5%9C%93%E8%A7%92%E7%9A%84-layer-cornerradius-669fae1c287c"><strong class="markup--strong markup--mixtapeEmbed-strong">Auto Layout 的元件該在何時設定圓角的 layer.cornerRadius</strong><br><em class="markup--em markup--mixtapeEmbed-em">利用 UIView 的 layer.cornerRadius，我們可以設定元件的圓角，比方將正方形元件的 cornerRadius 設為它寬度的一半，將它變成圓形。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/auto-layout-%E7%9A%84%E5%85%83%E4%BB%B6%E8%A9%B2%E5%9C%A8%E4%BD%95%E6%99%82%E8%A8%AD%E5%AE%9A%E5%9C%93%E8%A7%92%E7%9A%84-layer-cornerradius-669fae1c287c" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="1c3886730530d022034900d1382aced5" data-thumbnail-img-id="1*w6Vy01B1EfcJ3blLRezvgA.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*w6Vy01B1EfcJ3blLRezvgA.jpeg);"></a></div><ul class="postList"><li name="e8c1" id="e8c1" class="graf graf--li graf-after--mixtapeEmbed">從 collection view 的寬度計算 collection view cell 的尺寸。</li></ul><figure name="b291" id="b291" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*8GVFCFqEMQkPDtmxSoFNQQ.jpeg" data-width="1356" data-height="870" src="https://cdn-images-1.medium.com/max/800/1*8GVFCFqEMQkPDtmxSoFNQQ.jpeg"></figure><p name="9085" id="9085" class="graf graf--p graf-after--figure">ps: 值得注意的，若是元件已用 auto layout 設定位置大小，之後再修改它的 frame 調整位置大小是無用的。此時元件想改變位置大小只能透過以下方法:</p><ul class="postList"><li name="6a18" id="6a18" class="graf graf--li graf-after--p">修改 auto layout 的條件。</li><li name="7813" id="7813" class="graf graf--li graf-after--li">設定元件的 transform。</li><li name="e4c5" id="e4c5" class="graf graf--li graf-after--li graf--trailing">可設定 frame.origin 修改位置。</li></ul></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/d3e3c1c3290d"><time class="dt-published" datetime="2020-05-24T08:02:21.557Z">May 24, 2020</time></a>.</p><p><a href="https://medium.com/@apppeterpan/viewdidload-viewdidlayoutsubviews-%E6%99%82%E5%85%83%E4%BB%B6%E7%9A%84%E4%BD%8D%E7%BD%AE%E5%A4%A7%E5%B0%8F-d3e3c1c3290d" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>