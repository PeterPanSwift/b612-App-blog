<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>容納 SwiftUI view 的 UIHostingController ~ 從 storyboard 畫面切換到 SwiftUI 畫面</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">容納 SwiftUI view 的 UIHostingController ~ 從 storyboard 畫面切換到 SwiftUI 畫面</h1>
</header>
<section data-field="subtitle" class="p-summary">
Apple 發明了更方便製作 App 畫面的 SwiftUI 後，SwiftUI 將是未來設計 iOS App 畫面的主流，但目前仍然有許多 App 採用傳統的 UIKit view controller 開發，所以我們該如何選擇呢 ?
</section>
<section data-field="body" class="e-content">
<section name="2229" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="840b" id="840b" class="graf graf--h3 graf--leading graf--title">容納 SwiftUI view 的 UIHostingController ~ 從 storyboard 畫面切換到 SwiftUI 畫面</h3><p name="b9ac" id="b9ac" class="graf graf--p graf-after--h3">Apple 發明了更方便製作 App 畫面的 SwiftUI 後，SwiftUI 將是未來設計 iOS App 畫面的主流，但目前仍然有許多 App 採用傳統的 UIKit view controller 開發，所以我們該如何選擇呢 ?</p><p name="38ad" id="38ad" class="graf graf--p graf-after--p">別擔心，小孩子才做選擇，我們全都要。我們可以將 view controller 的畫面跟 SwiftUI 的畫面結合在同一個 App，接下來就讓我們一步步示範第一種常見的情境，利用容納 SwiftUI view 的 UIHostingController 從 view controller 切換到 SwiftUI 的畫面。</p><p name="5fd6" id="5fd6" class="graf graf--p graf-after--p">假設我們有兩個畫面，如下圖所示，第一個畫面是 storyboard 裡的 view controller，我們希望點選 controller 上的 button 後切換到 SwiftUI 的 view 顯示 Penny 佛跳牆超好聽的新歌，<code class="markup--code markup--p-code">可有可無</code>的歌詞。</p><figure name="02d9" id="02d9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*-1h-psP2mAKvMDG43qrk-w.jpeg" data-width="512" data-height="1038" src="https://cdn-images-1.medium.com/max/800/1*-1h-psP2mAKvMDG43qrk-w.jpeg"></figure><p name="4a56" id="4a56" class="graf graf--p graf-after--figure">SwiftUI 的畫面定義在 LyricsView 裡。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="23e8" id="23e8" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LyricsView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;&quot;&quot;<br />嘿 有些話我沒說清楚 是故意讓它變模糊<br />也為了避免 過於理智的衝突<br />嘿 有些事我沒有宣布 是無疑讓它更懸殊<br />也為了減少 重覆彼此不舒服<br />因為太有感觸 所以才會如此反撲<br />任一時糊塗 違規的信徒 恍恍惚惚<br />誰當眾地退出 主動地刪除 都視若無睹<br />你才真的可惡 莫名傷得體無完膚<br />為認真演出 結束得倉促 吞吞吐吐<br />誰抱頭地痛哭 熱情地歡呼 都可有可無<br />&quot;&quot;&quot;</span>)<br />        .padding()<br />        .background(.yellow)<br />    }<br />}</span></pre><figure name="da4b" id="da4b" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*g_UjXB7FdoamgeWU7s0vXg.png" data-width="1206" data-height="2622" src="https://cdn-images-1.medium.com/max/800/1*g_UjXB7FdoamgeWU7s0vXg.png"></figure><p name="b9ef" id="b9ef" class="graf graf--p graf-after--figure">當我們想從 storyboard 拉 segue 切換頁面時，每個畫面都要有個控制它的 controller ，因此我們只要能將 SwiftUI 的 view 包在一個 controller 裡，即可順利地切換到 SwiftUI 的畫面。</p><p name="c026" id="c026" class="graf graf--p graf-after--p">有哪個 controller 這麼厲害可以裝 SwiftUI view 呢 ? 答案就是 SwiftUI 全新發明的新類別，UIHostingController !</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="0474" id="0474" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UIHostingController</span>&lt;<span class="hljs-title class_">Content</span>&gt; : <span class="hljs-title class_">UIViewController</span> <span class="hljs-title class_">where</span> <span class="hljs-title class_">Content</span> : <span class="hljs-title class_">View</span></span></pre><div name="d196" id="d196" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://developer.apple.com/documentation/swiftui/uihostingcontroller" data-href="https://developer.apple.com/documentation/swiftui/uihostingcontroller" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/uihostingcontroller"><strong class="markup--strong markup--mixtapeEmbed-strong">UIHostingController | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">A UIKit view controller that manages a SwiftUI view hierarchy.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/uihostingcontroller" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="e7f080e4b5d7b5ae7c8b775e4d65ef88" data-thumbnail-img-id="0*22UZTOi0M2ILyWk7" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*22UZTOi0M2ILyWk7);"></a></div><h3 name="01a4" id="01a4" class="graf graf--h3 graf-after--mixtapeEmbed">從 Storyboard 加入 UIHostingController</h3><p name="3446" id="3446" class="graf graf--p graf-after--h3">如下圖所示，我們可從 storyboard 的 Objects library 視窗裡找到 Hosting View Controller，直接將它加到 storyboard 設計畫面的畫布上。</p><figure name="a741" id="a741" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*vC-6u0cdnavIus_XqsAjBg.png" data-width="1512" data-height="542" src="https://cdn-images-1.medium.com/max/800/1*vC-6u0cdnavIus_XqsAjBg.png"></figure><p name="b909" id="b909" class="graf graf--p graf-after--figure">UIHostingController 顯示的畫面將是 SwiftUI 的 view，不過它並不知道該顯示哪個 SwiftUI view，因此待會我們必須從程式設定。</p><figure name="2352" id="2352" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*hsjxRFT091W7ObJ4mGJ6jg.jpeg" data-width="1046" data-height="1040" src="https://cdn-images-1.medium.com/max/800/1*hsjxRFT091W7ObJ4mGJ6jg.jpeg"></figure><h3 name="5cd1" id="5cd1" class="graf graf--h3 graf-after--figure">利用 segue 切換頁面</h3><p name="c497" id="c497" class="graf graf--p graf-after--h3">在 storyboard 裡我們可以使用 segue 切換頁面，直接從 button 連 segue 到 UIHostingController。</p><figure name="bbe9" id="bbe9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*XJXBt6cRfU4mtft9wGixfw.jpeg" data-width="1082" data-height="1098" src="https://cdn-images-1.medium.com/max/800/1*XJXBt6cRfU4mtft9wGixfw.jpeg"></figure><h3 name="568e" id="568e" class="graf graf--h3 graf-after--figure">利用 <strong class="markup--strong markup--h3-strong">IBSegueAction </strong>設定 UIHostingController 顯示的 SwiftUI view</h3><p name="b604" id="b604" class="graf graf--p graf-after--h3">現在我們剩下最後一個難題，如何設定 UIHostingController 顯示的SwiftUI view 呢? 答案就藏在 iOS 13 新發明的 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">IBSegueAction</strong></code>。</p><p name="1297" id="1297" class="graf graf--p graf-after--p">segue 頁面切換時將觸發 IBSegueAction function，此 function 將回傳 segue 終點連接的 controller，在我們的例子裡將是 UIHostingController，因此我們可定義此 function，在產生 UIHostingController 時設定它顯示的 SwiftUI view。</p><p name="4b8c" id="4b8c" class="graf graf--p graf-after--p">產生 IBSegueAction function 的方法如下:</p><ul class="postList"><li name="7bc4" id="7bc4" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">將 segue 起點的 controller 類別設成自訂的類別。</strong></li></ul><p name="695d" id="695d" class="graf graf--p graf-after--li">IBSegueAction function 要定義在 segue 起點的 controller 裡，因此我們要先將 controller 類別設成自訂的類別，在此我們將類別設為 ViewController。</p><figure name="4fbd" id="4fbd" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*8nigfJCfN2zYJH4TKhusgQ.png" data-width="528" data-height="258" src="https://cdn-images-1.medium.com/max/800/1*8nigfJCfN2zYJH4TKhusgQ.png"></figure><p name="bc34" id="bc34" class="graf graf--p graf-after--figure">此步驟不清楚的同學可參考以下連結。</p><div name="e973" id="e973" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%A6%82%E4%BD%95%E8%A8%AD%E5%AE%9A-storyboard-%E8%A3%A1%E5%85%83%E4%BB%B6%E7%9A%84-class-820a0ffd8924" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%A6%82%E4%BD%95%E8%A8%AD%E5%AE%9A-storyboard-%E8%A3%A1%E5%85%83%E4%BB%B6%E7%9A%84-class-820a0ffd8924" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%A6%82%E4%BD%95%E8%A8%AD%E5%AE%9A-storyboard-%E8%A3%A1%E5%85%83%E4%BB%B6%E7%9A%84-class-820a0ffd8924"><strong class="markup--strong markup--mixtapeEmbed-strong">如何設定 storyboard 裡元件的 class</strong><br><em class="markup--em markup--mixtapeEmbed-em">在 storyboard 我們可以設計 iOS App 畫面，加入各式各樣的元件，比方 controller ，image view，label，button 等。這些元件的功能都由它們的 class 決定，因此我們只要將它們的…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%A6%82%E4%BD%95%E8%A8%AD%E5%AE%9A-storyboard-%E8%A3%A1%E5%85%83%E4%BB%B6%E7%9A%84-class-820a0ffd8924" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="b00967f7d409138573a79207dffe4548" data-thumbnail-img-id="1*oYE8U-YTwKMKG_2xngIrsg.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*oYE8U-YTwKMKG_2xngIrsg.jpeg);"></a></div><ul class="postList"><li name="ef1f" id="ef1f" class="graf graf--li graf-after--mixtapeEmbed"><strong class="markup--strong markup--li-strong">顯示 Assistant 頁面。</strong></li></ul><figure name="ac2c" id="ac2c" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*mcypjE6ONHOzk03eToUUGQ.png" data-width="1138" data-height="236" src="https://cdn-images-1.medium.com/max/800/1*mcypjE6ONHOzk03eToUUGQ.png"></figure><ul class="postList"><li name="9ac8" id="9ac8" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">在 Assistant 頁面顯示 segue 起點 controller 的程式。</strong></li></ul><p name="36c6" id="36c6" class="graf graf--p graf-after--li">點選 segue，點選 Assistant 頁面的 &lt;&gt; 切換檔案，在 Assistant 頁面顯示 segue 起點 controller 的類別 ViewController。</p><figure name="5fce" id="5fce" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*2MKOuFFgGAhZPQ1OIRJbiw.jpeg" data-width="1618" data-height="1014" src="https://cdn-images-1.medium.com/max/800/1*2MKOuFFgGAhZPQ1OIRJbiw.jpeg"></figure><div name="a368" id="a368" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AA%BF%E6%95%B4-assistant-editor-%E9%A1%AF%E7%A4%BA%E7%9A%84%E6%AA%94%E6%A1%88-e5385bb75634" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AA%BF%E6%95%B4-assistant-editor-%E9%A1%AF%E7%A4%BA%E7%9A%84%E6%AA%94%E6%A1%88-e5385bb75634" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AA%BF%E6%95%B4-assistant-editor-%E9%A1%AF%E7%A4%BA%E7%9A%84%E6%AA%94%E6%A1%88-e5385bb75634"><strong class="markup--strong markup--mixtapeEmbed-strong">調整 Assistant Editor 顯示的檔案</strong><br><em class="markup--em markup--mixtapeEmbed-em">當我們在拉 outlet / action 時，大部分的時候右邊的 Assistant Editor 都會聰明地顯示對應的程式檔，不過有時它沒那麼聰明，顯示的不是我們想要的檔案，比方以下例子:</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AA%BF%E6%95%B4-assistant-editor-%E9%A1%AF%E7%A4%BA%E7%9A%84%E6%AA%94%E6%A1%88-e5385bb75634" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="48c5362ec873d0cfd505ff6db178c92c" data-thumbnail-img-id="1*yZo-Fru7ws4wfZsCiFRapw.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*yZo-Fru7ws4wfZsCiFRapw.jpeg);"></a></div><ul class="postList"><li name="b924" id="b924" class="graf graf--li graf-after--mixtapeEmbed"><strong class="markup--strong markup--li-strong">從 segue 連線到 controller 的程式。</strong></li></ul><figure name="62f8" id="62f8" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*thhrLyaLqqts5NJwcBU3uQ.jpeg" data-width="1656" data-height="900" src="https://cdn-images-1.medium.com/max/800/1*thhrLyaLqqts5NJwcBU3uQ.jpeg"></figure><ul class="postList"><li name="3a69" id="3a69" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">輸入 function 的名字。</strong></li></ul><figure name="f145" id="f145" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*xHzF2PSttIvziv0RVU1gvQ.jpeg" data-width="576" data-height="344" src="https://cdn-images-1.medium.com/max/800/1*xHzF2PSttIvziv0RVU1gvQ.jpeg"></figure><p name="53b2" id="53b2" class="graf graf--p graf-after--figure">就像我們熟悉的 IBSegue &amp; IBAction，此時 Xcode 將貼心地幫我們輸入 IBSegueAction 的相關程式。</p><figure name="627c" id="627c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*9Q13pQcDYpb3VR-V5DPC8A.jpeg" data-width="1760" data-height="360" src="https://cdn-images-1.medium.com/max/800/1*9Q13pQcDYpb3VR-V5DPC8A.jpeg"></figure><p name="7b70" id="7b70" class="graf graf--p graf-after--figure">接著我們要在 function 裡產生要回傳的 UIHostingController，UIHostingController 的 init 如下，關鍵在它的第二個參數 rootView，它代表的即是我們想要 UIHostingController 顯示的 SwiftUI view。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="3707" id="3707" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">init?</span>(<span class="hljs-params">coder</span> <span class="hljs-params">aDecoder</span>: <span class="hljs-type">NSCoder</span>, <span class="hljs-params">rootView</span>: <span class="hljs-type">Content</span>)</span></pre><p name="f6b8" id="f6b8" class="graf graf--p graf-after--pre">請先點選 IBSegueAction function 裡等待我們輸入的灰色框框，讓它變藍色，然後按下 enter。</p><figure name="9071" id="9071" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*a37SmoZpObbyrLoYjS36yw.jpeg" data-width="1784" data-height="318" src="https://cdn-images-1.medium.com/max/800/1*a37SmoZpObbyrLoYjS36yw.jpeg"></figure><figure name="3934" id="3934" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*-8vSn2QewywCSATU42kbEw.jpeg" data-width="1730" data-height="374" src="https://cdn-images-1.medium.com/max/800/1*-8vSn2QewywCSATU42kbEw.jpeg"></figure><p name="4109" id="4109" class="graf graf--p graf-after--figure">此時 Xcode 將幫我們輸入部分內容，我們只要自己輸入參數 rootView 的內容即可。因此我們輸入想要顯示的 <code class="markup--code markup--p-code">LyricsView()</code>。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="8f85" id="8f85" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBSegueAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showLyrics</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) -&gt; <span class="hljs-type">UIViewController</span>? {<br />    <span class="hljs-keyword">return</span> <span class="hljs-type">UIHostingController</span>(coder: coder, rootView: <span class="hljs-type">LyricsView</span>())<br />}</span></pre><p name="ff2e" id="ff2e" class="graf graf--p graf-after--pre">另外在程式的前面記得 import SwiftUI，不然會有紅色錯誤，因為 UIHostingController 是 SwiftUI 定義的類別。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="3c54" id="3c54" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI</span></pre><p name="bb15" id="bb15" class="graf graf--p graf-after--pre">如果只有一行程式，我們還可以更精簡，省略 return。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="78f4" id="78f4" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBSegueAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showLyrics</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) -&gt; <span class="hljs-type">UIViewController</span>? {<br />    <span class="hljs-type">UIHostingController</span>(coder: coder, rootView: <span class="hljs-type">LyricsView</span>())<br />}</span></pre><div name="1a5a" id="1a5a" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-function-computed-property-%E8%A3%A1%E7%9C%81%E7%95%A5-return-swift-5-1-4b24a175c8e6" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-function-computed-property-%E8%A3%A1%E7%9C%81%E7%95%A5-return-swift-5-1-4b24a175c8e6" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-function-computed-property-%E8%A3%A1%E7%9C%81%E7%95%A5-return-swift-5-1-4b24a175c8e6"><strong class="markup--strong markup--mixtapeEmbed-strong">在 function &amp; computed property 裡省略 return — Swift 5.1</strong><br><em class="markup--em markup--mixtapeEmbed-em">在 Swift 5.1，體貼的 Apple 為了讓我們少打一點字，決定不只 closure 裡只有一行程式時可以省略 return，當 function，computed property getter， subscript &amp;…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-function-computed-property-%E8%A3%A1%E7%9C%81%E7%95%A5-return-swift-5-1-4b24a175c8e6" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="429dd2923f348c1b27f2059b2741c4c6"></a></div><p name="7427" id="7427" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">App 執行</strong></p><p name="f3fa" id="f3fa" class="graf graf--p graf-after--p">Cool，點選 button 後我們成功地從 storyboard 設計的畫面切換到 SwiftUI 畫面。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="0e41" id="0e41" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*5MlWPOEXZnhjUsxUhrf_Yg.jpeg" data-width="806" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*5MlWPOEXZnhjUsxUhrf_Yg.jpeg"></figure><figure name="70e8" id="70e8" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*SgTCFmK16dfgpmyAEOA1yA.jpeg" data-width="806" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*SgTCFmK16dfgpmyAEOA1yA.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="ae6e" id="ae6e" class="graf graf--h3 graf-after--figure">利用 Container View 容納 SwiftUI view</h3><p name="1fc3" id="1fc3" class="graf graf--p graf-after--h3">SwiftUI view 不一定要霸道地佔滿整個螢幕，我們也可以利用 Container View 將 SwiftUI view 變成 view controller 裡某個區塊的畫面。</p><figure name="5801" id="5801" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*4X2L8nwUt2omDPsFuph4Fg.jpeg" data-width="1448" data-height="980" src="https://cdn-images-1.medium.com/max/800/1*4X2L8nwUt2omDPsFuph4Fg.jpeg"></figure><p name="6afc" id="6afc" class="graf graf--p graf-after--figure">程式和剛剛一樣，只是現在變成從 Container View 的 segue 拉線定義 IBSegueAction function。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="778f" id="778f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBSegueAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showLyrics</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) -&gt; <span class="hljs-type">UIViewController</span>? {<br />    <span class="hljs-type">UIHostingController</span>(coder: coder, rootView: <span class="hljs-type">LyricsView</span>())<br />}</span></pre><figure name="f79b" id="f79b" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*-7YZCebkNdSvA0hhOc58sQ.jpeg" data-width="806" data-height="1378" src="https://cdn-images-1.medium.com/max/800/1*-7YZCebkNdSvA0hhOc58sQ.jpeg"></figure><h3 name="d2df" id="d2df" class="graf graf--h3 graf-after--figure">切換到 SwiftUI view 時傳資料</h3><p name="f341" id="f341" class="graf graf--p graf-after--h3">我們也可以在切換到 SwiftUI view 時傳資料，比方以下例子:</p><ul class="postList"><li name="3cb1" id="3cb1" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">在 SwiftUI view 宣告儲存資料的變數。</strong></li></ul><p name="5dd3" id="5dd3" class="graf graf--p graf-after--li">在 LyricsView 裡顯示變數 name 儲存的歌名，name 的內容將由前一頁的 view controller 傳入。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="0e1b" id="0e1b" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LyricsView</span>: <span class="hljs-title class_">View</span> {    <br />    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">VStack</span> {<br />            <span class="hljs-type">Text</span>(name)<br />                .font(.largeTitle)<br />            <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;&quot;&quot;<br />            嘿 有些話我沒說清楚 是故意讓它變模糊<br />            也為了避免 過於理智的衝突<br />            嘿 有些事我沒有宣布 是無疑讓它更懸殊<br />            也為了減少 重覆彼此不舒服<br />因為太有感觸 所以才會如此反撲<br />            任一時糊塗 違規的信徒 恍恍惚惚<br />            誰當眾地退出 主動地刪除 都視若無睹<br />你才真的可惡 莫名傷得體無完膚<br />            為認真演出 結束得倉促 吞吞吐吐<br />            誰抱頭地痛哭 熱情地歡呼 都可有可無<br />            &quot;&quot;&quot;</span>)<br />                .padding()<br />                .background(.yellow)            <br />        }<br />    }<br />}</span></pre><ul class="postList"><li name="0664" id="0664" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">IBSegueAction 生成 SwiftUI view 時傳入資料。</strong></li></ul><p name="605a" id="605a" class="graf graf--p graf-after--li">在生成 LyricsView 時我們傳入歌名<code class="markup--code markup--p-code">可有可無</code>。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="ea15" id="ea15" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBSegueAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showLyrics</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) -&gt; <span class="hljs-type">UIViewController</span>? {<br />    <span class="hljs-type">UIHostingController</span>(coder: coder, rootView: <span class="hljs-type">LyricsView</span>(name: <span class="hljs-string">&quot;可有可無&quot;</span>))<br />}</span></pre><p name="fb41" id="fb41" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">App 執行</strong></p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="1a0f" id="1a0f" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*2tDOZnSu3rmzUnvtN_jPgw.jpeg" data-width="806" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*2tDOZnSu3rmzUnvtN_jPgw.jpeg"></figure><figure name="434f" id="434f" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*EbV0jyna3pdCq4jTtqzBZg.jpeg" data-width="806" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*EbV0jyna3pdCq4jTtqzBZg.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="5f04" id="5f04" class="graf graf--h3 graf-after--figure">從 view controller 的程式切換到 SwiftUI view</h3><p name="d68d" id="d68d" class="graf graf--p graf-after--h3">學會用 UIHostingController 容納 SwiftUI view 後，我們也可以不依靠 segue，直接從程式生成 UIHostingController，然後呼叫 present(_:animated:completion:)，pushViewController(_:animated:)，show(_:sender:) &amp; addChild(_:) 顯示。</p><ul class="postList"><li name="a512" id="a512" class="graf graf--li graf-after--p">例子 1: 呼叫 present(_:animated:completion:)</li></ul><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="7f09" id="7f09" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showLyrics</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-keyword">Any</span>) {<br />    <span class="hljs-keyword">let</span> controller <span class="hljs-operator">=</span> <span class="hljs-type">UIHostingController</span>(rootView: <span class="hljs-type">LyricsView</span>(name: <span class="hljs-string">&quot;可有可無&quot;</span>))<br />    present(controller, animated: <span class="hljs-literal">true</span>)<br />}</span></pre><div name="c3bd" id="c3bd" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://developer.apple.com/documentation/swiftui/uihostingcontroller/init%28rootview:%29" data-href="https://developer.apple.com/documentation/swiftui/uihostingcontroller/init(rootview:)" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/uihostingcontroller/init(rootview:)"><strong class="markup--strong markup--mixtapeEmbed-strong">init(rootView:) | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Creates a hosting controller object that wraps the specified SwiftUI view.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/uihostingcontroller/init%28rootview:%29" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="92c8ed06abe193c3e405e23ad35c17a2" data-thumbnail-img-id="0*ypf4-0aeDXKsrlOU" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*ypf4-0aeDXKsrlOU);"></a></div><ul class="postList"><li name="210b" id="210b" class="graf graf--li graf-after--mixtapeEmbed">例子 2: 呼叫 pushViewController(_:animated:)</li></ul><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="0f01" id="0f01" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showLyrics</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-keyword">Any</span>) {<br />    <span class="hljs-keyword">let</span> controller <span class="hljs-operator">=</span> <span class="hljs-type">UIHostingController</span>(rootView: <span class="hljs-type">LyricsView</span>(name: <span class="hljs-string">&quot;可有可無&quot;</span>))      <br />    navigationController<span class="hljs-operator">?</span>.pushViewController(controller, animated: <span class="hljs-literal">true</span>)<br />}</span></pre><figure name="79d1" id="79d1" class="graf graf--figure graf--iframe graf-after--pre graf--trailing"><iframe src="https://www.youtube.com/embed/_iFrrWKG_eA?feature=oembed" width="700" height="393" frameborder="0" scrolling="no"></iframe></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/4eda5147e55a"><time class="dt-published" datetime="2019-12-08T07:08:19.036Z">December 8, 2019</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%AE%B9%E7%B4%8D-swiftui-view-%E7%9A%84-uihostingcontroller-4eda5147e55a" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>