<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Swift package 的製作，使用和分享</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Swift package 的製作，使用和分享</h1>
</header>
<section data-field="subtitle" class="p-summary">
開發 iOS App 時，若能將常用的功能整理成重覆使用的套件，我們就能方便地在不同 App 使用，而且也能提供給需要的人使用。
</section>
<section data-field="body" class="e-content">
<section name="93ad" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="107a" id="107a" class="graf graf--h3 graf--leading graf--title">Swift package 的製作，使用和分享</h3><p name="07e8" id="07e8" class="graf graf--p graf-after--h3">開發 iOS App 時，若能將常用的功能整理成重覆使用的套件，我們就能方便地在不同 App 使用，而且也能提供給需要的人使用。</p><p name="5648" id="5648" class="graf graf--p graf-after--p">製作套件有許多方法，將程式包裝成 Swift package 是目前最流行的一種做法。以下我們先介紹 Swift package 的製作，然後再說明 App 如何用 SPM 加入 local 端的 package，最後再將 package 上傳分享到 GitHub，讓其它人也能使用。</p><h3 name="341f" id="341f" class="graf graf--h3 graf-after--p">Swift package 的內容</h3><p name="94b6" id="94b6" class="graf graf--p graf-after--h3">Swift Package 裡可加入程式，資源檔，和 binaries 檔，因此它不只提供 App 開發需要的功能，還能提供圖片，音樂等資源。</p><figure name="bdeb" id="bdeb" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*9M4X2idfWxYSZxQW4zVjEg.png" data-width="1270" data-height="364" src="https://cdn-images-1.medium.com/max/800/1*9M4X2idfWxYSZxQW4zVjEg.png"><figcaption class="imageCaption">Apple 官方文件的 Swift package 說明圖</figcaption></figure><h3 name="c3d4" id="c3d4" class="graf graf--h3 graf-after--figure">製作 Swift package</h3><ul class="postList"><li name="644b" id="644b" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">建立 package。</strong></li></ul><p name="5645" id="5645" class="graf graf--p graf-after--li">方法 1。</p><p name="9d1e" id="9d1e" class="graf graf--p graf-after--p">點選 Xcode menu 的 File &gt; New &gt; Package。</p><figure name="69af" id="69af" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*YRtjDgAgwRS_htCUYCXHMQ.png" data-width="970" data-height="526" src="https://cdn-images-1.medium.com/max/800/1*YRtjDgAgwRS_htCUYCXHMQ.png"></figure><p name="444f" id="444f" class="graf graf--p graf-after--figure">方法 2。</p><p name="9e6e" id="9e6e" class="graf graf--p graf-after--p">建立新專案，選擇 Multiplatform 下的 Swift Package</p><figure name="5110" id="5110" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*4NxvX47QZ266SW-upWRBqg.png" data-width="1422" data-height="1014" src="https://cdn-images-1.medium.com/max/800/1*4NxvX47QZ266SW-upWRBqg.png"></figure><ul class="postList"><li name="352f" id="352f" class="graf graf--li graf-after--figure">輸入 package 的名稱。</li></ul><p name="1d75" id="1d75" class="graf graf--p graf-after--li">彼得潘想做一個顯示 About 頁面的套件，因此輸入 About。</p><figure name="3b10" id="3b10" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*g3txfCWReJDJzgwx8bM1CQ.png" data-width="1600" data-height="944" src="https://cdn-images-1.medium.com/max/800/1*g3txfCWReJDJzgwx8bM1CQ.png"></figure><ul class="postList"><li name="6944" id="6944" class="graf graf--li graf-after--figure">設定套件資訊的 Package.swift。</li></ul><p name="a1e6" id="a1e6" class="graf graf--p graf-after--li">Package.swift 是 Swift Package 最重要的檔案，它以 Package 物件設定套件的相關資訊。</p><figure name="7c73" id="7c73" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ojxxPPMN9NS1tXpdjhg-7g.png" data-width="2280" data-height="1428" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*ojxxPPMN9NS1tXpdjhg-7g.png"></figure><p name="fc5d" id="fc5d" class="graf graf--p graf-after--figure">Package.swift 預設已幫我們填好基本資訊，不過我們想限制 iOS 至少要 16，因此我們修改 Package.swift，加入參數 platforms 設定 iOS 的最低支援版本。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="e56f" id="e56f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> package <span class="hljs-operator">=</span> <span class="hljs-type">Package</span>(<br />    name: <span class="hljs-string">&quot;About&quot;</span>,<br />    platforms: [.iOS(.v16)],<br />    products: [<br />        <span class="hljs-comment">// Products define the executables and libraries a package produces, and make them visible to other packages.</span><br />        .library(<br />            name: <span class="hljs-string">&quot;About&quot;</span>,<br />            targets: [<span class="hljs-string">&quot;About&quot;</span>]),<br />    ],<br />    dependencies: [<br />        <span class="hljs-comment">// Dependencies declare other packages that this package depends on.</span><br />        <span class="hljs-comment">// .package(url: /* package url */, from: &quot;1.0.0&quot;),</span><br />    ],<br />    targets: [<br />        <span class="hljs-comment">// Targets are the basic building blocks of a package. A target can define a module or a test suite.</span><br />        <span class="hljs-comment">// Targets can depend on other targets in this package, and on products in packages this package depends on.</span><br />        .target(<br />            name: <span class="hljs-string">&quot;About&quot;</span>,<br />            dependencies: []),<br />        .testTarget(<br />            name: <span class="hljs-string">&quot;AboutTests&quot;</span>,<br />            dependencies: [<span class="hljs-string">&quot;About&quot;</span>]),<br />    ]<br />)</span></pre><p name="d2a2" id="d2a2" class="graf graf--p graf-after--pre">Package 的主要參數說明如下。</p><ol class="postList"><li name="f1e6" id="f1e6" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">name。</strong></li></ol><p name="57b1" id="57b1" class="graf graf--p graf-after--li">package 的名稱。</p><p name="c617" id="c617" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">2. platforms。</strong></p><p name="3daf" id="3daf" class="graf graf--p graf-after--p">package 預設支援多個平台，我們可透過參數 platforms 限制它支援的系統版本。<code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong"> [.iOS(.v16)] </strong></code>表示在 iOS 要 16 以上才能使用 package。值得注意的，沒寫在 [ ] 裡不代表不支援，因此 macOS App 也能使用 package。</p><p name="0618" id="0618" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">3. products。</strong></p><p name="8f2f" id="8f2f" class="graf graf--p graf-after--p">package 生成的產品。我們主要目的是產生讓 App 使用的 library，所以傳入 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">.library(name: &quot;About&quot;, targets: [&quot;About&quot;])</strong></code>。library 的名稱是 About，它包含的 target 也叫 About。</p><p name="f24e" id="f24e" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">4. dependencies。</strong></p><p name="ba68" id="ba68" class="graf graf--p graf-after--p">package 的程式也可以使用其它 package。若有用到其它 package，可在 dependencies 欄位設定網路上 package 的網址或本機 package 的路經。</p><p name="973e" id="973e" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">5. targets。</strong></p><p name="a4fd" id="a4fd" class="graf graf--p graf-after--p">package 產生的 module。我們待會寫的程式將編譯成 About Target。</p><ul class="postList"><li name="1ae9" id="1ae9" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">新增 package 需要的資源檔。</strong></li></ul><p name="0e47" id="0e47" class="graf graf--p graf-after--li">Swift Package 可包含各式各樣的資源檔(resource)，預設會認得的有以下幾種。</p><ol class="postList"><li name="44ad" id="44ad" class="graf graf--li graf-after--p">Asset catalogs，可包含圖片，顏色，影音檔，文字檔等。</li></ol><p name="8df9" id="8df9" class="graf graf--p graf-after--li">2. 設計畫面的 storyboard 和 xib。</p><p name="ea14" id="ea14" class="graf graf--p graf-after--p">3. Core Data 的 xcdatamodeld 檔。</p><p name="0807" id="0807" class="graf graf--p graf-after--p">4. 多國語言的檔案。</p><p name="a966" id="a966" class="graf graf--p graf-after--p">為了讓 package 的程式能找到這些資源檔，比較簡單的方法是在下圖的 Sources &gt; Package 名稱下新增 Resources 資料夾，到時程式將能從 Resources 下找到它們。</p><figure name="7960" id="7960" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*69QMBX2_GXgsxr0_iU3bLw.png" data-width="692" data-height="1126" src="https://cdn-images-1.medium.com/max/800/1*69QMBX2_GXgsxr0_iU3bLw.png"></figure><figure name="2802" id="2802" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*IvkPXP6fmyqixq_uRxmeZg.png" data-width="524" data-height="480" src="https://cdn-images-1.medium.com/max/800/1*IvkPXP6fmyqixq_uRxmeZg.png"></figure><p name="35ea" id="35ea" class="graf graf--p graf-after--figure">ps: 我們也可以將資源檔放在 Resources 資料夾以外的地方，不過會麻煩許多，需要額外做一些設定才能存取。</p><p name="ed0c" id="ed0c" class="graf graf--p graf-after--p">以下我們在 Resources 下加入 Media.xcassets &amp; a-small-miracle.mp3，asset 裡加入帥氣的 peter 圖片。</p><figure name="1934" id="1934" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*hUe7R7GSrLXETOI6v1Xdrw.png" data-width="1546" data-height="604" src="https://cdn-images-1.medium.com/max/800/1*hUe7R7GSrLXETOI6v1Xdrw.png"></figure><p name="86df" id="86df" class="graf graf--p graf-after--figure">由於 mp3 檔不屬於預設會認得的資源檔，一種解法是放在 asset。若要放在 Project navigator ，則須在 Package.swift 的 target 透過參數 resources 描述路徑。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="e860" id="e860" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">.target(<br />     name: <span class="hljs-string">&quot;About&quot;</span>,<br />     dependencies: [],<br />     resources: [.process(<span class="hljs-string">&quot;Resources/a-small-miracle.mp3&quot;</span>)]),</span></pre><ul class="postList"><li name="2cb0" id="2cb0" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">新增 package 的程式。</strong></li></ul><p name="8fff" id="8fff" class="graf graf--p graf-after--li">Sources &gt; Package 名稱下可加入 Package 的程式，預設 Xcode 會幫我們產生跟 package 同名的 swift 檔。我們不需要它，因此先刪除 About.swift 和 AboutTests.swift 裡的 function testExample，然後新增 AboutView.swift，在裡面撰寫彼得潘的個人資訊頁面。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="f7d5" id="f7d5" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><span class="hljs-keyword">import</span> AVFoundation<br /><br /><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">AboutView</span>: <span class="hljs-title class_">View</span> {<br />   <br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> player <span class="hljs-operator">=</span> <span class="hljs-type">AVPlayer</span>()<br />    <br />    <span class="hljs-keyword">public</span> <span class="hljs-keyword">init</span>() {<br />    }<br />    <br />    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />            <span class="hljs-type">VStack</span> {<br />                <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;彼得潘&quot;</span>)<br />                    .font(.title)<br />                <span class="hljs-type">Image</span>(<span class="hljs-string">&quot;peter&quot;</span>, bundle: .module)<br />                    .resizable()<br />                    .scaledToFit()<br />                <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;&quot;&quot;<br />    擺渡人靈感來自梁朝偉的電影擺渡人，<br />    電影裡梁朝偉專門幫人解決愛情問題。<br />    由於之前時常有朋友向彼得潘求助工作或學校遇到的 iOS App 開發問題，<br />    彼得潘決定向偶像偉仔看齊，化身 iOS App 金牌擺渡人 !<br />    &quot;&quot;&quot;</span>)<br />            }<br />            .padding()<br />            .onAppear {<br />                <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">Bundle</span>.module.url(forResource: <span class="hljs-string">&quot;a-small-miracle&quot;</span>, withExtension: <span class="hljs-string">&quot;mp3&quot;</span>)<span class="hljs-operator">!</span><br />                <span class="hljs-keyword">let</span> item <span class="hljs-operator">=</span> <span class="hljs-type">AVPlayerItem</span>(url: url)<br />                player.replaceCurrentItem(with: item)<br />                player.play()<br />            }<br />            .onDisappear {<br />                player.pause()<br />            }<br />        }<br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">AboutView_Previews</span>: <span class="hljs-title class_">PreviewProvider</span> {<br />    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">AboutView</span>()<br />    }<br />}</span></pre><p name="9bf1" id="9bf1" class="graf graf--p graf-after--pre">以上程式較特別的地方有兩點。</p><ol class="postList"><li name="c08d" id="c08d" class="graf graf--li graf-after--p">public 權限。</li></ol><p name="c7af" id="c7af" class="graf graf--p graf-after--li">想讓 App 或別的 package 使用的功能必須宣告成 public，因此 AboutView，init &amp; body 被設為 public。</p><p name="22d2" id="22d2" class="graf graf--p graf-after--p">2. 資源檔的讀取。</p><p name="1db4" id="1db4" class="graf graf--p graf-after--p">讀取 Bundle 裡檔案的 URL 要透過 Bundle.module.url，產生 asset 的圖片要加上參數 bundle，傳入 .module。</p><ul class="postList"><li name="90f7" id="90f7" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">AboutView 的 preview。</strong></li></ul><p name="e97b" id="e97b" class="graf graf--p graf-after--li">Xcode 的 preview 成功顯示 AboutView 的畫面，而且還能聽到播放的音樂。</p><figure name="2003" id="2003" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*sXSZgaLGX7I6ud0MAegp4g.png" data-width="468" data-height="928" src="https://cdn-images-1.medium.com/max/800/1*sXSZgaLGX7I6ud0MAegp4g.png"></figure><p name="ccdc" id="ccdc" class="graf graf--p graf-after--figure">現在我們已經完成了 Swift package，之後在 Xcode 開發 App 時，都可以加入剛剛製作的 About Package。</p><h3 name="de8e" id="de8e" class="graf graf--h3 graf-after--p">使用 local 端的的 Swift package</h3><ul class="postList"><li name="d2b4" id="d2b4" class="graf graf--li graf-after--h3">打開 App 專案，點選 menu 的 File &gt; Add Packages。</li></ul><p name="d5f7" id="d5f7" class="graf graf--p graf-after--li">記得要關掉 About Package 的 Xcode 視窗，否則待會使用 Package 會出問題。</p><figure name="7b8b" id="7b8b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*B1rGipqfgKWCrn8ONIm74A.png" data-width="652" data-height="258" src="https://cdn-images-1.medium.com/max/800/1*B1rGipqfgKWCrn8ONIm74A.png"></figure><ul class="postList"><li name="3ad5" id="3ad5" class="graf graf--li graf-after--figure">點選 Add Local。</li></ul><figure name="e225" id="e225" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*ClQMQwiUkMbSJxj5xwEy9w.png" data-width="2420" data-height="1200" src="https://cdn-images-1.medium.com/max/800/1*ClQMQwiUkMbSJxj5xwEy9w.png"></figure><ul class="postList"><li name="7ea8" id="7ea8" class="graf graf--li graf-after--figure">選擇 Package 的資料夾 About，然後點選 Add Package。</li></ul><figure name="c513" id="c513" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*yV5GztkqBhXbXLU7Jkes9Q.png" data-width="1668" data-height="1068" src="https://cdn-images-1.medium.com/max/800/1*yV5GztkqBhXbXLU7Jkes9Q.png"></figure><p name="10dc" id="10dc" class="graf graf--p graf-after--figure">package 成功加入的畫面如下。</p><figure name="ca00" id="ca00" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*4rgZP5mjiNMIYACihNxhhw.png" data-width="542" data-height="672" src="https://cdn-images-1.medium.com/max/800/1*4rgZP5mjiNMIYACihNxhhw.png"></figure><p name="f3af" id="f3af" class="graf graf--p graf-after--figure">此時還無法使用 package，因為我們還沒加入它產生的 library。</p><ul class="postList"><li name="8c33" id="8c33" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">加入 package 產生的 library。</strong></li></ul><p name="8905" id="8905" class="graf graf--p graf-after--li">點選 Frameworks, Libraries, and Embedded Content 下的 +。</p><figure name="b973" id="b973" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*SY-oI-8tpDOhQ6pEwdFazA.png" data-width="2110" data-height="1360" src="https://cdn-images-1.medium.com/max/800/1*SY-oI-8tpDOhQ6pEwdFazA.png"></figure><p name="dfee" id="dfee" class="graf graf--p graf-after--figure">選擇 About library。</p><figure name="cbdc" id="cbdc" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*mYNsRbmrmx5u-uQKsGsdbA.png" data-width="776" data-height="904" src="https://cdn-images-1.medium.com/max/800/1*mYNsRbmrmx5u-uQKsGsdbA.png"></figure><p name="a0c6" id="a0c6" class="graf graf--p graf-after--figure">About library 成功出現在 Frameworks, Libraries, and Embedded Content。</p><figure name="dae5" id="dae5" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*oofUy_r8Piurep0Fqcmkpg.png" data-width="1252" data-height="338" src="https://cdn-images-1.medium.com/max/800/1*oofUy_r8Piurep0Fqcmkpg.png"></figure><ul class="postList"><li name="59cd" id="59cd" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">在 ContentView 使用 About package 的 AboutView。</strong></li></ul><p name="a33a" id="a33a" class="graf graf--p graf-after--li">現在我們可以 import About 和使用它裡面 Public 權限的程式，因此我們可以成功產生 AboutView。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="e9d5" id="e9d5" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><span class="hljs-keyword">import</span> About<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">TabView</span> {<br />            <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;製作中&quot;</span>)<br />                .tabItem {<br />                    <span class="hljs-type">Label</span>(<span class="hljs-string">&quot;Swift&quot;</span>, systemImage: <span class="hljs-string">&quot;swift&quot;</span>)<br />                }<br />            <span class="hljs-type">AboutView</span>()<br />                .tabItem {<br />                    <span class="hljs-type">Label</span>(<span class="hljs-string">&quot;About&quot;</span>, systemImage: <span class="hljs-string">&quot;info.circle&quot;</span>)<br />                }<br />        }<br />    }<br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView_Previews</span>: <span class="hljs-title class_">PreviewProvider</span> {<br />    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">ContentView</span>()<br />    }<br />}</span></pre><ul class="postList"><li name="d843" id="d843" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">ContentView 的 preview。</strong></li></ul><p name="1485" id="1485" class="graf graf--p graf-after--li">Preview 成功顯示來自 About package 的 AboutView，顯示的圖片和播放的音樂也來自 About package。</p><figure name="e518" id="e518" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*FpXffKMqUzi-zhudltuBrg.png" data-width="608" data-height="1196" src="https://cdn-images-1.medium.com/max/800/1*FpXffKMqUzi-zhudltuBrg.png"></figure><ul class="postList"><li name="42ca" id="42ca" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">修改 package 的程式。</strong></li></ul><p name="3b00" id="3b00" class="graf graf--p graf-after--li">若有需要也可以直接在 App 的 project 修改 package 的程式，它將修改 package 資料夾裡的程式。</p><figure name="e385" id="e385" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Wz3VNcDPDxgnqZVRnT92TA.png" data-width="1774" data-height="1338" src="https://cdn-images-1.medium.com/max/800/1*Wz3VNcDPDxgnqZVRnT92TA.png"></figure><ul class="postList"><li name="e35b" id="e35b" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">從 App 存取 Swift package 的資源檔。</strong></li></ul><p name="9202" id="9202" class="graf graf--p graf-after--li">App 的 Swift 程式無法直接存取 package 的資源檔，除非先在 package 的程式宣告 public 的常數。</p><p name="4cd3" id="4cd3" class="graf graf--p graf-after--p">比方以下 asset 圖片和檔案 URL 的例子。</p><ul class="postList"><li name="fda7" id="fda7" class="graf graf--li graf-after--p">宣告 computed property 儲存 Image 或 UIImage。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="3c72" id="3c72" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Image</span> {<br />    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> peterImage: <span class="hljs-type">Image</span> {<br />        <span class="hljs-type">Image</span>(<span class="hljs-string">&quot;peter&quot;</span>, bundle: .module)<br />    }<br /><br />}</span></pre><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="e291" id="e291" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">UIImage</span> {<br />    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> peterImage: <span class="hljs-type">UIImage</span>? {<br />        <span class="hljs-type">UIImage</span>(named: <span class="hljs-string">&quot;peter&quot;</span>, in: .module, with: <span class="hljs-literal">nil</span>)<br />    }<br /><br />}</span></pre><ul class="postList"><li name="605e" id="605e" class="graf graf--li graf-after--pre">宣告 musicURL 儲存音樂檔的位置。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="6f4f" id="6f4f" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">URL</span> {<br />    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> musicURL <span class="hljs-operator">=</span> <span class="hljs-type">Bundle</span>.module.url(forResource: <span class="hljs-string">&quot;a-small-miracle&quot;</span>, withExtension: <span class="hljs-string">&quot;mp3&quot;</span>)<span class="hljs-operator">!</span><br />}</span></pre><h3 name="7f4c" id="7f4c" class="graf graf--h3 graf-after--pre">將 Swift package 上傳到 GitHub，讓其它人使用</h3><p name="11de" id="11de" class="graf graf--p graf-after--h3">我們也可以分享 Swift package，讓其它人的 App 也顯示帥氣 Peter 的 AboutView。</p><p name="781a" id="781a" class="graf graf--p graf-after--p">分享的方法很簡單，只要將 package 上傳到 GitHub，之後其它人即可用 SPM 輸入 package 的 GitHub 連結安裝。</p><p name="9b94" id="9b94" class="graf graf--p graf-after--p">以下彼得潘從 Xcode 點選 New About Remote 將 About pakcage 上傳到 GitHub。</p><figure name="373f" id="373f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*eFvhbnXQxDdjTuXwMcnBFA.png" data-width="900" data-height="850" src="https://cdn-images-1.medium.com/max/800/1*eFvhbnXQxDdjTuXwMcnBFA.png"></figure><figure name="6313" id="6313" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*m6QInD6xLQEyxsKrl0ihhw.png" data-width="944" data-height="818" src="https://cdn-images-1.medium.com/max/800/1*m6QInD6xLQEyxsKrl0ihhw.png"></figure><p name="28d8" id="28d8" class="graf graf--p graf-after--figure">產生的 GitHub 連結如下。</p><pre data-code-block-mode="0" spellcheck="false" name="4ceb" id="4ceb" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">https://github.com/AppPeterPan/About</span></pre><p name="9d34" id="9d34" class="graf graf--p graf-after--pre">之後其它人開發 App 時只要用 SPM 加入以上網址即可使用 About package。</p><figure name="bec1" id="bec1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*E3SZtXlQKn9bFVQcANzzEw.png" data-width="2428" data-height="1212" src="https://cdn-images-1.medium.com/max/800/1*E3SZtXlQKn9bFVQcANzzEw.png"></figure><figure name="bfb5" id="bfb5" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*KPUkh0orp49dSlor1N9ABw.png" data-width="1292" data-height="598" src="https://cdn-images-1.medium.com/max/800/1*KPUkh0orp49dSlor1N9ABw.png"></figure><figure name="0df6" id="0df6" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*d7mg1TTqM0qefPfKUhENDA.png" data-width="532" data-height="944" src="https://cdn-images-1.medium.com/max/800/1*d7mg1TTqM0qefPfKUhENDA.png"></figure><div name="202f" id="202f" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-spm-%E5%AE%89%E8%A3%9D%E7%AC%AC%E4%B8%89%E6%96%B9%E5%A5%97%E4%BB%B6-xcode-11-%E6%96%B0%E5%8A%9F%E8%83%BD-2c4ffcf85b4b" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-spm-%E5%AE%89%E8%A3%9D%E7%AC%AC%E4%B8%89%E6%96%B9%E5%A5%97%E4%BB%B6-xcode-11-%E6%96%B0%E5%8A%9F%E8%83%BD-2c4ffcf85b4b" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-spm-%E5%AE%89%E8%A3%9D%E7%AC%AC%E4%B8%89%E6%96%B9%E5%A5%97%E4%BB%B6-xcode-11-%E6%96%B0%E5%8A%9F%E8%83%BD-2c4ffcf85b4b"><strong class="markup--strong markup--mixtapeEmbed-strong">使用 SPM 安裝第三方套件 — 以抓圖套件 Kingfisher 為例</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，我們有許多管理安裝第三方套件的方法，其中最為人熟知的三大套件管理天王為 CocoaPods，SPM(Swift Package Manager) &amp; Carthage。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-spm-%E5%AE%89%E8%A3%9D%E7%AC%AC%E4%B8%89%E6%96%B9%E5%A5%97%E4%BB%B6-xcode-11-%E6%96%B0%E5%8A%9F%E8%83%BD-2c4ffcf85b4b" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="68d7ca0f1f357213624de0f00073e1ac" data-thumbnail-img-id="1*iWbMi_VzCywsTrlwWDeNjw.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*iWbMi_VzCywsTrlwWDeNjw.png);"></a></div><h3 name="ee0e" id="ee0e" class="graf graf--h3 graf-after--mixtapeEmbed">將專案程式模組化的 local Swift packag</h3><p name="5cdb" id="5cdb" class="graf graf--p graf-after--h3">有時我們只想將 App 專案裡的程式模組化，不需要讓不同的 App 專案共享，而且也不想分享給其它人使用呢 ?</p><p name="c0b4" id="c0b4" class="graf graf--p graf-after--p">此情況可製作存在 App 專案下的 local Swift package。</p><div name="f018" id="f018" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87%E5%B0%88%E6%A1%88%E7%A8%8B%E5%BC%8F%E6%A8%A1%E7%B5%84%E5%8C%96%E7%9A%84-local-swift-package-1d522501cedf" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87%E5%B0%88%E6%A1%88%E7%A8%8B%E5%BC%8F%E6%A8%A1%E7%B5%84%E5%8C%96%E7%9A%84-local-swift-package-1d522501cedf" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87%E5%B0%88%E6%A1%88%E7%A8%8B%E5%BC%8F%E6%A8%A1%E7%B5%84%E5%8C%96%E7%9A%84-local-swift-package-1d522501cedf"><strong class="markup--strong markup--mixtapeEmbed-strong">將專案程式模組化的 local Swift package</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，我們可以將常用的功能整理成 Swift package，之後即可方便地在不同的 App 專案使用，而且也能將 package 上傳到 GitHub，分享給需要的人下載使用。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87%E5%B0%88%E6%A1%88%E7%A8%8B%E5%BC%8F%E6%A8%A1%E7%B5%84%E5%8C%96%E7%9A%84-local-swift-package-1d522501cedf" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="cbce2108db926b5b79d38696aac8390f" data-thumbnail-img-id="1*7Fsx8B7H6RteIqrbQUW3pQ.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*7Fsx8B7H6RteIqrbQUW3pQ.png);"></a></div><h3 name="a369" id="a369" class="graf graf--h3 graf-after--mixtapeEmbed">參考連結</h3><ul class="postList"><li name="678a" id="678a" class="graf graf--li graf-after--h3">Creating a standalone Swift package with Xcode</li></ul><div name="f93b" id="f93b" class="graf graf--mixtapeEmbed graf-after--li"><a href="https://developer.apple.com/documentation/xcode/creating-a-standalone-swift-package-with-xcode" data-href="https://developer.apple.com/documentation/xcode/creating-a-standalone-swift-package-with-xcode" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/xcode/creating-a-standalone-swift-package-with-xcode"><strong class="markup--strong markup--mixtapeEmbed-strong">Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/xcode/creating-a-standalone-swift-package-with-xcode" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="04f041e90954a5d9a3e6555788e33ba1"></a></div><ul class="postList"><li name="e40b" id="e40b" class="graf graf--li graf-after--mixtapeEmbed">Bundling resources with a Swift package</li></ul><div name="6bec" id="6bec" class="graf graf--mixtapeEmbed graf-after--li"><a href="https://developer.apple.com/documentation/xcode/bundling-resources-with-a-swift-package" data-href="https://developer.apple.com/documentation/xcode/bundling-resources-with-a-swift-package" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/xcode/bundling-resources-with-a-swift-package"><strong class="markup--strong markup--mixtapeEmbed-strong">Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/xcode/bundling-resources-with-a-swift-package" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="3d51abea43862db2d46166578ae6414d"></a></div><ul class="postList"><li name="abbc" id="abbc" class="graf graf--li graf-after--mixtapeEmbed">Publishing a Swift package with Xcode</li></ul><div name="d266" id="d266" class="graf graf--mixtapeEmbed graf-after--li graf--trailing"><a href="https://developer.apple.com/documentation/xcode/publishing-a-swift-package-with-xcode" data-href="https://developer.apple.com/documentation/xcode/publishing-a-swift-package-with-xcode" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/xcode/publishing-a-swift-package-with-xcode"><strong class="markup--strong markup--mixtapeEmbed-strong">Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/xcode/publishing-a-swift-package-with-xcode" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="93a38864c2a346cc638daac4a2c2b760"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/531882182565"><time class="dt-published" datetime="2023-02-07T18:12:08.570Z">February 7, 2023</time></a>.</p><p><a href="https://medium.com/@apppeterpan/swift-package-%E7%9A%84%E8%A3%BD%E4%BD%9C-%E4%BD%BF%E7%94%A8%E5%92%8C%E5%88%86%E4%BA%AB-531882182565" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>