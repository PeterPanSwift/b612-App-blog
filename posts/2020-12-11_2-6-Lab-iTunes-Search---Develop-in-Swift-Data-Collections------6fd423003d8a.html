<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>2.6 Lab iTunes Search — Develop in Swift Data Collections 重點整理</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">2.6 Lab iTunes Search — Develop in Swift Data Collections 重點整理</h1>
</header>
<section data-field="subtitle" class="p-summary">
Search Bar 加在 table view header，segmented control 加在 navigation item 的 titleView
</section>
<section data-field="body" class="e-content">
<section name="de1d" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="65dd" id="65dd" class="graf graf--h3 graf--leading graf--title">2.6 Lab iTunes Search — Develop in Swift Data Collections Xcode 12 重點整理</h3><div name="fb38" id="fb38" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://books.apple.com/tw/book/develop-in-swift-data-collections/id1556365920?l=en-GB" data-href="https://books.apple.com/tw/book/develop-in-swift-data-collections/id1556365920?l=en-GB" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://books.apple.com/tw/book/develop-in-swift-data-collections/id1556365920?l=en-GB"><strong class="markup--strong markup--mixtapeEmbed-strong">‎Develop in Swift Data Collections</strong><br><em class="markup--em markup--mixtapeEmbed-em">Students expand on the knowledge and skills they developed in Develop in Swift Fundamentals by extending their work in…</em>books.apple.com</a><a href="https://books.apple.com/tw/book/develop-in-swift-data-collections/id1556365920?l=en-GB" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="14801202d9765ed00cf90b13307c14cb" data-thumbnail-img-id="0*SN8Naoh25PQj53TJ" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*SN8Naoh25PQj53TJ);"></a></div><p name="322b" id="322b" class="graf graf--p graf-after--mixtapeEmbed">Lesson 2.6 Working with the Web: Concurrency 的 Lab iTunes Search。</p><figure name="91f9" id="91f9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*InLbDuk0x12_wb9Cuw0HkQ.png" data-width="1184" data-height="1492" src="https://cdn-images-1.medium.com/max/800/1*InLbDuk0x12_wb9Cuw0HkQ.png"></figure><figure name="32e4" id="32e4" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*YwPlW9z4gJYjHfjmBQW1TA.png" data-width="1332" data-height="1470" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*YwPlW9z4gJYjHfjmBQW1TA.png"></figure></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="e2d9" id="e2d9" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*l9duXRnteKP1xtTEvpgvYA.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/600/1*l9duXRnteKP1xtTEvpgvYA.png"></figure><figure name="8022" id="8022" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*rHprZZpDklqMfJKNeMUphQ.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/600/1*rHprZZpDklqMfJKNeMUphQ.png"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="47e4" id="47e4" class="graf graf--h3 graf-after--figure">Search Bar 加在 table view header，segmented control 加在 navigation item 的 titleView</h3><figure name="e986" id="e986" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*LpqEGFpoCA-Fy0B_Jh1Diw.png" data-width="1076" data-height="1044" src="https://cdn-images-1.medium.com/max/800/1*LpqEGFpoCA-Fy0B_Jh1Diw.png"></figure><h3 name="6d08" id="6d08" class="graf graf--h3 graf-after--figure">table viewe 的 Row Height 設為固定高度</h3><figure name="0b96" id="0b96" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*Sxbn0Wgk9CxJ7rw6-0au0g.png" data-width="528" data-height="242" src="https://cdn-images-1.medium.com/max/800/1*Sxbn0Wgk9CxJ7rw6-0au0g.png"></figure><h3 name="cb78" id="cb78" class="graf graf--h3 graf-after--figure">串接 API 的 function 定義在 StoreItemController，搭配 Result type</h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="b729" id="b729" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StoreItemController</span> {<br />    <span class="hljs-keyword">internal</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchItems</span>(<span class="hljs-params">matching</span> <span class="hljs-params">query</span>: [<span class="hljs-params">String</span> : <span class="hljs-type">String</span>], <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Result</span>&lt;[<span class="hljs-type">StoreItem</span>], <span class="hljs-type">Error</span>&gt;) -&gt; <span class="hljs-type">Void</span>)<br />    <span class="hljs-keyword">internal</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">StoreItemError</span> : <span class="hljs-title class_">Error</span>, <span class="hljs-title class_">LocalizedError</span> {<br />        <span class="hljs-keyword">case</span> imageDataMissing<br />    }<br />    <span class="hljs-keyword">internal</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchImage</span>(<span class="hljs-params">from</span> <span class="hljs-params">url</span>: <span class="hljs-type">URL</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Result</span>&lt;<span class="hljs-type">UIImage</span>, <span class="hljs-type">Error</span>&gt;) -&gt; <span class="hljs-type">Void</span>) {<br />    }</span></pre><div name="8566" id="8566" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%88%90%E5%8A%9F%E5%92%8C%E5%A4%B1%E6%95%97%E4%BA%8C%E6%93%87%E4%B8%80%E7%9A%84-result-type-e234c6fccc9c" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%88%90%E5%8A%9F%E5%92%8C%E5%A4%B1%E6%95%97%E4%BA%8C%E6%93%87%E4%B8%80%E7%9A%84-result-type-e234c6fccc9c" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%88%90%E5%8A%9F%E5%92%8C%E5%A4%B1%E6%95%97%E4%BA%8C%E6%93%87%E4%B8%80%E7%9A%84-result-type-e234c6fccc9c"><strong class="markup--strong markup--mixtapeEmbed-strong">成功和失敗二擇一的 Result type</strong><br><em class="markup--em markup--mixtapeEmbed-em">Swift 裡有個很特別的型別叫 Result，就像它名字 result(結果)暗示的，它可以告訴我們結果。而結果也跟我們生活中大部分的事一樣，只有兩種可能，成功或失敗。就像彼得潘會不會跟 IU…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%88%90%E5%8A%9F%E5%92%8C%E5%A4%B1%E6%95%97%E4%BA%8C%E6%93%87%E4%B8%80%E7%9A%84-result-type-e234c6fccc9c" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="d3dfb3729858762fd2b0873abc3cac36" data-thumbnail-img-id="1*U8AOGxBMfdD8VkKKpureyQ.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*U8AOGxBMfdD8VkKKpureyQ.jpeg);"></a></div><div name="c119" id="c119" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-closure-%E5%9C%A8-function-%E5%A4%96%E7%B9%BC%E7%BA%8C%E4%BD%BF%E7%94%A8%E7%9A%84-escaping-40d50b17f75b" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-closure-%E5%9C%A8-function-%E5%A4%96%E7%B9%BC%E7%BA%8C%E4%BD%BF%E7%94%A8%E7%9A%84-escaping-40d50b17f75b" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-closure-%E5%9C%A8-function-%E5%A4%96%E7%B9%BC%E7%BA%8C%E4%BD%BF%E7%94%A8%E7%9A%84-escaping-40d50b17f75b"><strong class="markup--strong markup--mixtapeEmbed-strong">讓 closure 在 function 外繼續使用的 @escaping</strong><br><em class="markup--em markup--mixtapeEmbed-em">@escaping 是個讓 closure 在 function 外繼續使用的特別語法。它有點難懂，但你卻不能忽略，因為 iOS SDK 裡不少 function 的參數都加了…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-closure-%E5%9C%A8-function-%E5%A4%96%E7%B9%BC%E7%BA%8C%E4%BD%BF%E7%94%A8%E7%9A%84-escaping-40d50b17f75b" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="d50ef5942aff583b42da27281a507bee" data-thumbnail-img-id="1*QnkVr6acfggHlR9EaoinQA.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*QnkVr6acfggHlR9EaoinQA.jpeg);"></a></div><h3 name="5a99" id="5a99" class="graf graf--h3 graf-after--mixtapeEmbed">使用 URLComponents 產生網址</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="4307" id="4307" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchItems</span>(<span class="hljs-params">matching</span> <span class="hljs-params">query</span>: [<span class="hljs-params">String</span>: <span class="hljs-type">String</span>], <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Result</span>&lt;[<span class="hljs-type">StoreItem</span>], <span class="hljs-type">Error</span>&gt;) -&gt; <span class="hljs-type">Void</span>) {<br />    <span class="hljs-keyword">var</span> urlComponents <span class="hljs-operator">=</span> <span class="hljs-type">URLComponents</span>(string: <span class="hljs-string">&quot;https://itunes.apple.com/search&quot;</span>)<span class="hljs-operator">!</span><br />    urlComponents.queryItems <span class="hljs-operator">=</span> query.map { <span class="hljs-type">URLQueryItem</span>(name: <span class="hljs-variable">$0</span>.key, value: <span class="hljs-variable">$0</span>.value) }</span></pre><div name="79bb" id="79bb" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-baseurl-urlcomponents-urlqueryitem-%E7%94%A2%E7%94%9F-url-1e4539a33a89" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-baseurl-urlcomponents-urlqueryitem-%E7%94%A2%E7%94%9F-url-1e4539a33a89" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-baseurl-urlcomponents-urlqueryitem-%E7%94%A2%E7%94%9F-url-1e4539a33a89"><strong class="markup--strong markup--mixtapeEmbed-strong">使用 baseURL，URLComponents &amp; URLQueryItem 產生 URL</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，我們時常串接後台的 API。通常 API 前面的網址是固定的，只有後面的 path 跟 query 參數會變動，比方以下 iTunes API 的例子:</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-baseurl-urlcomponents-urlqueryitem-%E7%94%A2%E7%94%9F-url-1e4539a33a89" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="04704c889d06333ce25e878df77f2bb3" data-thumbnail-img-id="1*MKgXFUnTKLcu5TUVfiAPhg.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*MKgXFUnTKLcu5TUVfiAPhg.jpeg);"></a></div><h3 name="d8d5" id="d8d5" class="graf graf--h3 graf-after--mixtapeEmbed">search bar 設定 delegate &amp; 定義 UISearchBarDelegate 的 function searchBarSearchButtonClicked(_:)</h3><figure name="bc2b" id="bc2b" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*zBeg4uotN3PZAP-ETPZfrQ.png" data-width="1178" data-height="766" src="https://cdn-images-1.medium.com/max/800/1*zBeg4uotN3PZAP-ETPZfrQ.png"></figure><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="3f4f" id="3f4f" class="graf graf--pre graf-after--figure graf--preV2"><span class="pre--content"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">StoreItemListTableViewController</span>: <span class="hljs-title class_">UISearchBarDelegate</span> {<br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">searchBarSearchButtonClicked</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">searchBar</span>: <span class="hljs-type">UISearchBar</span>) {<br />        fetchMatchingItems()<br />        searchBar.resignFirstResponder()<br />    }<br />}</span></pre><h3 name="3649" id="3649" class="graf graf--h3 graf-after--pre">按下 search button 或切換 segmented control 時呼叫 fetchMatchingItems 抓資料和更新畫面</h3><ul class="postList"><li name="75a5" id="75a5" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">切換 segmented control</strong></li></ul><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="fca2" id="fca2" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">filterOptionUpdated</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-type">UISegmentedControl</span>) {<br />        <br />    fetchMatchingItems()<br />}</span></pre><ul class="postList"><li name="4142" id="4142" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">按下 search button</strong></li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="c6d7" id="c6d7" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">func</span> <span class="hljs-title function_">searchBarSearchButtonClicked</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">searchBar</span>: <span class="hljs-type">UISearchBar</span>) {<br />    fetchMatchingItems()<br />    searchBar.resignFirstResponder()<br />}</span></pre><h3 name="617b" id="617b" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">JSON 對應的 Codable 型別</strong></h3><p name="65c8" id="65c8" class="graf graf--p graf-after--h3">利用 CodingKey &amp; init(from:) 將不同的 JSON key 對應到同一個 property。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="e543" id="e543" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">StoreItem</span>: <span class="hljs-title class_">Codable</span> {<br />    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> artist: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">var</span> kind: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">var</span> description: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">var</span> artworkURL: <span class="hljs-type">URL</span><br />    <br />    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">CodingKeys</span>: <span class="hljs-title class_">String</span>, <span class="hljs-title class_">CodingKey</span> {<br />        <span class="hljs-keyword">case</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;trackName&quot;</span><br />        <span class="hljs-keyword">case</span> artist <span class="hljs-operator">=</span> <span class="hljs-string">&quot;artistName&quot;</span><br />        <span class="hljs-keyword">case</span> kind<br />        <span class="hljs-keyword">case</span> description <span class="hljs-operator">=</span> <span class="hljs-string">&quot;longDescription&quot;</span><br />        <span class="hljs-keyword">case</span> artworkURL <span class="hljs-operator">=</span> <span class="hljs-string">&quot;artworkUrl100&quot;</span><br />    }<br />    <br />    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">AdditionalKeys</span>: <span class="hljs-title class_">String</span>, <span class="hljs-title class_">CodingKey</span> {<br />        <span class="hljs-keyword">case</span> description <span class="hljs-operator">=</span> <span class="hljs-string">&quot;description&quot;</span><br />    }</span></pre><div name="4429" id="4429" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-codingkey-init-from-%E5%B0%87%E4%B8%8D%E5%90%8C%E7%9A%84-json-key-%E5%B0%8D%E6%87%89%E5%88%B0%E5%90%8C%E4%B8%80%E5%80%8B-property-f73438fdda10" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-codingkey-init-from-%E5%B0%87%E4%B8%8D%E5%90%8C%E7%9A%84-json-key-%E5%B0%8D%E6%87%89%E5%88%B0%E5%90%8C%E4%B8%80%E5%80%8B-property-f73438fdda10" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-codingkey-init-from-%E5%B0%87%E4%B8%8D%E5%90%8C%E7%9A%84-json-key-%E5%B0%8D%E6%87%89%E5%88%B0%E5%90%8C%E4%B8%80%E5%80%8B-property-f73438fdda10"><strong class="markup--strong markup--mixtapeEmbed-strong">利用 CodingKey &amp; init(from:) 將不同的 JSON key 對應到同一個 property</strong><br><em class="markup--em markup--mixtapeEmbed-em">串接 JSON API 時，有時我們會遇到 JSON 的某個 key 名字有多種可能，而我們希望能將它們對應到同一個 property。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-codingkey-init-from-%E5%B0%87%E4%B8%8D%E5%90%8C%E7%9A%84-json-key-%E5%B0%8D%E6%87%89%E5%88%B0%E5%90%8C%E4%B8%80%E5%80%8B-property-f73438fdda10" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="62aa8cd9fd20cc4bb3597318f156c48e" data-thumbnail-img-id="1*-S8FMTFV4vtKvhzbZxfHWw.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*-S8FMTFV4vtKvhzbZxfHWw.png);"></a></div><h3 name="75bf" id="75bf" class="graf graf--h3 graf-after--mixtapeEmbed">增加 cache size</h3><p name="7b64" id="7b64" class="graf graf--p graf-after--h3">在 App 啟動時設定 URLCache 的 memoryCapacity &amp; diskCapacity。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="4b21" id="4b21" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">func</span> <span class="hljs-title function_">application</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">application</span>: <span class="hljs-type">UIApplication</span>, <span class="hljs-params">didFinishLaunchingWithOptions</span> <span class="hljs-params">launchOptions</span>: [<span class="hljs-type">UIApplication</span>.<span class="hljs-params">LaunchOptionsKey</span>: <span class="hljs-keyword">Any</span>]<span class="hljs-operator">?</span>) -&gt; <span class="hljs-type">Bool</span> {<br />    <span class="hljs-comment">// Override point for customization after application launch.</span><br />        <br />    <span class="hljs-type">URLCache</span>.shared.memoryCapacity <span class="hljs-operator">=</span> <span class="hljs-number">25_000_000</span><br />    <span class="hljs-type">URLCache</span>.shared.diskCapacity <span class="hljs-operator">=</span> <span class="hljs-number">50_000_000</span><br />        <br />    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br />}</span></pre><p name="2c78" id="2c78" class="graf graf--p graf-after--pre">關於 cache 的相關應用，可進一步參考以下連結。</p><div name="58c8" id="58c8" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E4%B8%8B%E8%BC%89%E5%9C%96%E7%89%87%E7%9A%84%E5%B9%BE%E7%A8%AE%E6%96%B9%E6%B3%95-c8f3592db66f" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E4%B8%8B%E8%BC%89%E5%9C%96%E7%89%87%E7%9A%84%E5%B9%BE%E7%A8%AE%E6%96%B9%E6%B3%95-c8f3592db66f" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E4%B8%8B%E8%BC%89%E5%9C%96%E7%89%87%E7%9A%84%E5%B9%BE%E7%A8%AE%E6%96%B9%E6%B3%95-c8f3592db66f"><strong class="markup--strong markup--mixtapeEmbed-strong">Swift iOS App 下載圖片的幾種方法</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，我們時常需要撰寫下載圖片的程式，常見的抓圖程式是利用我們熟悉的 URLSessionDataTask，例如以下點選 button 下載圖片的例子:</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E4%B8%8B%E8%BC%89%E5%9C%96%E7%89%87%E7%9A%84%E5%B9%BE%E7%A8%AE%E6%96%B9%E6%B3%95-c8f3592db66f" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="fb46fde630cd5b3d453224f0571875ea" data-thumbnail-img-id="1*lfK9G4QGMRIc8V2gXKmpHw.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*lfK9G4QGMRIc8V2gXKmpHw.jpeg);"></a></div><h3 name="e9af" id="e9af" class="graf graf--h3 graf-after--mixtapeEmbed">改寫的簡化版本</h3><ul class="postList"><li name="57a3" id="57a3" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">抓資料的程式寫在 view controller</strong></li></ul><div name="ca56" id="ca56" class="graf graf--mixtapeEmbed graf-after--li"><a href="https://github.com/AppPeterPan/iTunesSearch-basic" data-href="https://github.com/AppPeterPan/iTunesSearch-basic" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/AppPeterPan/iTunesSearch-basic"><strong class="markup--strong markup--mixtapeEmbed-strong">GitHub - AppPeterPan/iTunesSearch-basic</strong><br><em class="markup--em markup--mixtapeEmbed-em">Contribute to AppPeterPan/iTunesSearch-basic development by creating an account on GitHub.</em>github.com</a><a href="https://github.com/AppPeterPan/iTunesSearch-basic" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="19a6abb03b55fa142583ba65e72132c1" data-thumbnail-img-id="0*aXfzuDEwITd1qb2Q" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*aXfzuDEwITd1qb2Q);"></a></div><ul class="postList"><li name="f4d1" id="f4d1" class="graf graf--li graf-after--mixtapeEmbed"><strong class="markup--strong markup--li-strong">抓資料的程式寫在 StoreItemController，使用 function 型別的 completion 參數，沒有使用 Result Type &amp; URLComponents</strong></li></ul><div name="346c" id="346c" class="graf graf--mixtapeEmbed graf-after--li graf--trailing"><a href="https://github.com/AppPeterPan/iTunesSearch-completion" data-href="https://github.com/AppPeterPan/iTunesSearch-completion" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/AppPeterPan/iTunesSearch-completion"><strong class="markup--strong markup--mixtapeEmbed-strong">GitHub - AppPeterPan/iTunesSearch-completion</strong><br><em class="markup--em markup--mixtapeEmbed-em">Contribute to AppPeterPan/iTunesSearch-completion development by creating an account on GitHub.</em>github.com</a><a href="https://github.com/AppPeterPan/iTunesSearch-completion" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="b0159c57e4ec1e65fb044f00d5bee8d9" data-thumbnail-img-id="0*ZBKrBpRXcgZiX04L" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*ZBKrBpRXcgZiX04L);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/6fd423003d8a"><time class="dt-published" datetime="2020-12-11T03:25:30.894Z">December 11, 2020</time></a>.</p><p><a href="https://medium.com/@apppeterpan/2-6-lab-itunes-search-develop-in-swift-data-collections-%E9%87%8D%E9%BB%9E%E6%95%B4%E7%90%86-6fd423003d8a" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>