<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>使用 SwiftUI 的ContentUnavailableView 顯示無資料畫面</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">使用 SwiftUI 的ContentUnavailableView 顯示無資料畫面</h1>
</header>
<section data-field="subtitle" class="p-summary">
開發 iOS App 時，我們時常要設計在某些情況呈現無資料的畫面，比方串接網路 API 抓到空的資料或是搜尋的關鍵字查無資料。
</section>
<section data-field="body" class="e-content">
<section name="010a" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="4379" id="4379" class="graf graf--h3 graf--leading graf--title">使用 SwiftUI 的ContentUnavailableView 顯示無資料畫面</h3><figure name="026d" id="026d" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*aQwxSaWmp747T6NNTx6mnA.png" data-width="1888" data-height="904" src="https://cdn-images-1.medium.com/max/800/1*aQwxSaWmp747T6NNTx6mnA.png"></figure><p name="5f3f" id="5f3f" class="graf graf--p graf-after--figure">開發 iOS App 時，我們時常要設計在某些情況呈現無資料的畫面，比方串接網路 API 抓到空的資料或是搜尋的關鍵字查無資料。</p><p name="8bd8" id="8bd8" class="graf graf--p graf-after--p">從前我們要自己花時間設計無資料的畫面，不過從 iOS 17 開始有更簡單的方法，我們可以使用方便呈現無資料畫面的 ContentUnavailableView。</p><div name="c692" id="c692" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/swiftui/contentunavailableview" data-href="https://developer.apple.com/documentation/swiftui/contentunavailableview" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/contentunavailableview"><strong class="markup--strong markup--mixtapeEmbed-strong">ContentUnavailableView | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">An interface, consisting of a label and additional content, that you display when the content of your app is…</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/contentunavailableview" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="d0acc8242d30890661e591f6c8a3aee5" data-thumbnail-img-id="0*SG5lKW0zfKo73Tkb" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*SG5lKW0zfKo73Tkb);"></a></div><p name="fbe2" id="fbe2" class="graf graf--p graf-after--mixtapeEmbed">ContentUnavailableView 適合呈現各種無資料的畫面，比方以下 4 種情況。</p><ul class="postList"><li name="0a19" id="0a19" class="graf graf--li graf-after--p">串接網路 API 抓到空的資料。</li><li name="04f5" id="04f5" class="graf graf--li graf-after--li">搜尋查無資料。</li><li name="a3cd" id="a3cd" class="graf graf--li graf-after--li">正在抓資料(loading)。</li><li name="2a9d" id="2a9d" class="graf graf--li graf-after--li">網路有問題抓不到資料時顯示錯誤。</li></ul><p name="ddb1" id="ddb1" class="graf graf--p graf-after--li">以下我們一步步介紹 ContentUnavailableView 和各種應用的例子。</p><ul class="postList"><li name="756b" id="756b" class="graf graf--li graf-after--p">顯示搜尋查無資料的 ContentUnavailableView.search。</li><li name="bcda" id="bcda" class="graf graf--li graf-after--li">用 overlay 顯示 ContentUnavailableView。</li><li name="f75d" id="f75d" class="graf graf--li graf-after--li">自訂文字和搭配 SF Symbol。</li><li name="3998" id="3998" class="graf graf--li graf-after--li">設定 ContentUnavailableView 的背景。</li><li name="2f1d" id="2f1d" class="graf graf--li graf-after--li">網路有問題抓不到資料時顯示錯誤。</li><li name="1086" id="1086" class="graf graf--li graf-after--li">自訂文字和搭配 asset 圖片。</li><li name="c9df" id="c9df" class="graf graf--li graf-after--li">自由客製 ContentUnavailableView，甚至加入 button。</li><li name="77e7" id="77e7" class="graf graf--li graf-after--li">搭配 ProgressView 顯示 loading 狀態。</li></ul><h3 name="a85d" id="a85d" class="graf graf--h3 graf-after--li">顯示搜尋查無資料的 ContentUnavailableView.search</h3><p name="f255" id="f255" class="graf graf--p graf-after--h3">我們可以自訂 ContentUnavailableView 顯示的文字和圖片，不過當目的是顯示搜尋查無資料時，則可使用內建的 ContentUnavailableView.search。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="cf9b" id="cf9b" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">ContentUnavailableView</span>.search<br />    }<br />}</span></pre><p name="a0d0" id="a0d0" class="graf graf--p graf-after--pre">如下圖所示，ContentUnavailableView 標準的設計由上而下分成三部分，依序是圖案、大字的標題和小字的說明。</p><figure name="b0eb" id="b0eb" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*apQ9P1f0TCC0wnk5fDNHfA.png" data-width="698" data-height="1396" src="https://cdn-images-1.medium.com/max/800/1*apQ9P1f0TCC0wnk5fDNHfA.png"></figure><h3 name="cd0f" id="cd0f" class="graf graf--h3 graf-after--figure">用 overlay 顯示 ContentUnavailableView</h3><p name="6758" id="6758" class="graf graf--p graf-after--h3">通常我們會在某些條件成立時顯示 ContentUnavailableView，比方在搜尋查無資料時顯示找不到資料，因此 modifier overlay 常被用來加入 ContentUnavailableView，在無資料時將 ContentUnavailableView 覆蓋在畫面上。</p><p name="239e" id="239e" class="graf graf--p graf-after--p">以下我們實作一個搜尋 xmas 歌曲的例子，搜尋不到歌曲時用 overlay 加入 ContentUnavailableView.search。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="282b" id="282b" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-keyword">let</span> xmasSongs <span class="hljs-operator">=</span> [<br />        <span class="hljs-string">&quot;Jingle Bells&quot;</span>,<br />        <span class="hljs-string">&quot;Frosty the Snowman&quot;</span>,<br />        <span class="hljs-string">&quot;Rudolph the Red-Nosed Reindeer&quot;</span>,<br />        <span class="hljs-string">&quot;Santa Claus is Coming to Town&quot;</span>,<br />        <span class="hljs-string">&quot;Silent Night&quot;</span>,<br />        <span class="hljs-string">&quot;Deck the Halls&quot;</span>,<br />        <span class="hljs-string">&quot;We Wish You a Merry Christmas&quot;</span>,<br />        <span class="hljs-string">&quot;The Twelve Days of Christmas&quot;</span>,<br />        <span class="hljs-string">&quot;All I Want for Christmas Is You&quot;</span>,<br />        <span class="hljs-string">&quot;Let It Snow! Let It Snow! Let It Snow!&quot;</span><br />    ]<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> searchText <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />    <span class="hljs-keyword">var</span> searchResult: [<span class="hljs-type">String</span>] {<br />        <span class="hljs-keyword">if</span> searchText.isEmpty {<br />            xmasSongs<br />        } <span class="hljs-keyword">else</span> {<br />            xmasSongs.filter { song <span class="hljs-keyword">in</span><br />                song.localizedCaseInsensitiveContains(searchText)<br />            }<br />        }<br />    }<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">NavigationStack</span> {<br />            <span class="hljs-type">List</span> {<br />                <span class="hljs-type">ForEach</span>(searchResult, id: \.<span class="hljs-keyword">self</span>) { song <span class="hljs-keyword">in</span><br />                    <span class="hljs-type">Text</span>(song)<br />                }<br />            }<br />            .navigationTitle(<span class="hljs-string">&quot;Xmas Songs&quot;</span>)<br />            .overlay {<br />                <span class="hljs-keyword">if</span> <span class="hljs-operator">!</span>searchText.isEmpty, searchResult.isEmpty {<br />                    <span class="hljs-type">ContentUnavailableView</span>.search<br />                }<br />            }<br />        }<br />        .searchable(text: <span class="hljs-variable">$searchText</span>)<br />    }<br />}</span></pre><p name="3664" id="3664" class="graf graf--p graf-after--pre">找到歌曲時，表格顯示著找到的歌單。</p><figure name="c1d7" id="c1d7" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*yNj1PyEmy0HQGvymm9hT8A.png" data-width="698" data-height="1396" src="https://cdn-images-1.medium.com/max/800/1*yNj1PyEmy0HQGvymm9hT8A.png"></figure><p name="8c07" id="8c07" class="graf graf--p graf-after--figure">下圖為找不到歌曲的畫面，ContentUnavailableView.search 十分聰明，還會顯示 search bar 的內容，用大大的標題顯示 No Results for ABC。</p><figure name="386c" id="386c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*I3RK6Z6QloYDhk8vcP7EnQ.png" data-width="698" data-height="1396" src="https://cdn-images-1.medium.com/max/800/1*I3RK6Z6QloYDhk8vcP7EnQ.png"></figure><h3 name="5687" id="5687" class="graf graf--h3 graf-after--figure">自訂文字和搭配 SF Symbol</h3><p name="6ebe" id="6ebe" class="graf graf--p graf-after--h3">ContentUnavailableView 提供多種 init，我們可以自由地客製顯示的圖片和文字。</p><figure name="908c" id="908c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*8ICREY4NjbbgddFwRPKYBA.png" data-width="1542" data-height="676" src="https://cdn-images-1.medium.com/max/800/1*8ICREY4NjbbgddFwRPKYBA.png"></figure><p name="29ee" id="29ee" class="graf graf--p graf-after--figure">以下為自訂文字和搭配 SF Symbol 的例子。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="dad6" id="dad6" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">ContentUnavailableView</span>(<br />    <span class="hljs-string">&quot;沒有符合的 Xmas song&quot;</span>,<br />    systemImage: <span class="hljs-string">&quot;gift.fill&quot;</span>,<br />    description: <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;找不到 <span class="hljs-subst">\(searchText)</span>，好傷心&quot;</span>)<br />)</span></pre><figure name="a202" id="a202" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*4w6udz0rphzC2ofohSFpYw.png" data-width="698" data-height="1396" src="https://cdn-images-1.medium.com/max/800/1*4w6udz0rphzC2ofohSFpYw.png"></figure><h3 name="05ac" id="05ac" class="graf graf--h3 graf-after--figure">設定 ContentUnavailableView 的背景</h3><p name="67b1" id="67b1" class="graf graf--p graf-after--h3">ContentUnavailableView 其實就是 view，因此我們也可以調整它的背景。</p><ul class="postList"><li name="b3a3" id="b3a3" class="graf graf--li graf-after--p">設定背景顏色。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="acec" id="acec" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-type">ContentUnavailableView</span>(<br />    <span class="hljs-string">&quot;沒有符合的 Xmas song&quot;</span>,<br />    systemImage: <span class="hljs-string">&quot;gift.fill&quot;</span>,<br />    description: <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;找不到 <span class="hljs-subst">\(searchText)</span>，好傷心&quot;</span>)<br />)<br />.background(.mint)</span></pre><figure name="8a48" id="8a48" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*bywrR8rwBZi4unL7vfeC5g.png" data-width="698" data-height="1396" src="https://cdn-images-1.medium.com/max/800/1*bywrR8rwBZi4unL7vfeC5g.png"></figure><ul class="postList"><li name="0238" id="0238" class="graf graf--li graf-after--figure">設定背景圖片。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="97f4" id="97f4" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-type">ContentUnavailableView</span>(<br />    <span class="hljs-string">&quot;沒有符合的 Xmas song&quot;</span>, <br />    systemImage: <span class="hljs-string">&quot;gift.fill&quot;</span>, <br />    description: <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;找不到 <span class="hljs-subst">\(searchText)</span>，好傷心&quot;</span>)<br />)<br />.background {<br />    <span class="hljs-type">Image</span>(.christmasBackground)<br />        .resizable()<br />        .scaledToFill()<br />        .brightness(<span class="hljs-number">0.5</span>)<br />        .blur(radius: <span class="hljs-number">10</span>)<br />}</span></pre><figure name="d831" id="d831" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*vpoZzoOgNYVN5Rquv0XRWw.png" data-width="698" data-height="1396" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*vpoZzoOgNYVN5Rquv0XRWw.png"></figure><h3 name="8130" id="8130" class="graf graf--h3 graf-after--figure">網路有問題抓不到資料時顯示錯誤</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="less" name="e71c" id="e71c" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-selector-tag">ContentUnavailableView</span>(<br />    <span class="hljs-string">&quot;網路有問題&quot;</span>, <br />    <span class="hljs-attribute">systemImage</span>: <span class="hljs-string">&quot;exclamationmark.triangle.fill&quot;</span>, <br />    <span class="hljs-attribute">description</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">&quot;請檢查網路&quot;</span>)<br />)</span></pre><figure name="63b4" id="63b4" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*XkOgBe-8QkL0iwywS0BD4Q.png" data-width="698" data-height="1396" src="https://cdn-images-1.medium.com/max/800/1*XkOgBe-8QkL0iwywS0BD4Q.png"></figure><h3 name="0399" id="0399" class="graf graf--h3 graf-after--figure">自訂文字和搭配 asset 圖片</h3><p name="e568" id="e568" class="graf graf--p graf-after--h3">我們可在參數 image 傳入 asset 的圖片名字，讓 ContentUnavailableView 顯示 asset 的圖片。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="4706" id="4706" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">ContentUnavailableView</span>(<br />    <span class="hljs-string">&quot;沒有符合的 Xmas song&quot;</span>,<br />    image: <span class="hljs-string">&quot;santaNoGift&quot;</span>,<br />    description: <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;找不到 <span class="hljs-subst">\(searchText)</span>，好傷心&quot;</span>)<br />)</span></pre><figure name="07b2" id="07b2" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*Wg1QgQfDshH8P0iiaUR-mw.png" data-width="588" data-height="1148" src="https://cdn-images-1.medium.com/max/800/1*Wg1QgQfDshH8P0iiaUR-mw.png"></figure><p name="5185" id="5185" class="graf graf--p graf-after--figure">值得注意的，圖片會顯示原本的大小，不會聰明地自動縮放。當圖片太大時，ContentUnavailableView 還會完全拋棄圖片，只顯示文字。</p><figure name="d1f4" id="d1f4" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*sLf1gqgc1p7xEClYmeGp6Q.png" data-width="698" data-height="1396" src="https://cdn-images-1.medium.com/max/800/1*sLf1gqgc1p7xEClYmeGp6Q.png"></figure><h3 name="e558" id="e558" class="graf graf--h3 graf-after--figure">自由客製 ContentUnavailableView，甚至加入 button</h3><p name="382c" id="382c" class="graf graf--p graf-after--h3">使用 ContentUnavailableView 的 <code class="markup--code markup--p-code">init(label:description:actions:) </code>可以自由客製 ContentUnavailableView，參數 label、description 和 actions 皆可傳入任意的 view。</p><figure name="2149" id="2149" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*zevBRKXYhzZv-NwfbEzDHg.png" data-width="1532" data-height="834" src="https://cdn-images-1.medium.com/max/800/1*zevBRKXYhzZv-NwfbEzDHg.png"></figure><p name="fe87" id="fe87" class="graf graf--p graf-after--figure">如以下程式所示，參數 actions 通常用於傳入讓使用者點選的 button。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="6426" id="6426" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">ContentUnavailableView</span>(<br />    label: {<br />        <span class="hljs-type">Label</span>(<span class="hljs-string">&quot;No Mail&quot;</span>, systemImage: <span class="hljs-string">&quot;tray.fill&quot;</span>)<br />    }, <br />    description: {<br />        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;New mails you receive will appear here.&quot;</span>)<br />    }, <br />    actions: {<br />        <span class="hljs-type">Button</span>(action: {}) {<br />            <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Refresh&quot;</span>)<br />        }<br />    }<br />)</span></pre><figure name="6a65" id="6a65" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*tqBJIFDUIlA60ROmroEXhQ.png" data-width="698" data-height="1396" src="https://cdn-images-1.medium.com/max/800/1*tqBJIFDUIlA60ROmroEXhQ.png"></figure><h3 name="c065" id="c065" class="graf graf--h3 graf-after--figure">搭配 ProgressView 顯示 loading 狀態</h3><p name="1383" id="1383" class="graf graf--p graf-after--h3">串接網路 API 抓資料需要時間，很適合用 ContentUnavailableView 搭配 ProgressView 顯示資料下載中的狀態。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="174b" id="174b" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">ContentUnavailableView</span>(label: {<br />    <span class="hljs-type">ProgressView</span>()<br />}, description: {<br />    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Loading...&quot;</span>)<br />})</span></pre><figure name="ec1e" id="ec1e" class="graf graf--figure graf-after--pre graf--trailing"><img class="graf-image" data-image-id="1*0xwLA4klutgbQZaGbcXnzg.png" data-width="698" data-height="1396" src="https://cdn-images-1.medium.com/max/800/1*0xwLA4klutgbQZaGbcXnzg.png"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/cea967856300"><time class="dt-published" datetime="2023-11-26T14:43:03.215Z">November 26, 2023</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E4%BD%BF%E7%94%A8-swiftui-%E7%9A%84contentunavailableview-%E9%A1%AF%E7%A4%BA%E7%84%A1%E8%B3%87%E6%96%99%E7%95%AB%E9%9D%A2-cea967856300" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>