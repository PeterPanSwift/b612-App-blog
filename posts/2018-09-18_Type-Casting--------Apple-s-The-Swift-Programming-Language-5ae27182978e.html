<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Type Casting 程式範例 — Apple’s The Swift Programming Language</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Type Casting 程式範例 — Apple’s The Swift Programming Language</h1>
</header>
<section data-field="subtitle" class="p-summary">
Defining a Class Hierarchy for Type Casting
</section>
<section data-field="body" class="e-content">
<section name="04ee" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="dc5e" id="dc5e" class="graf graf--h3 graf--leading graf--title">Type Casting 程式範例 — Apple’s The Swift Programming Language</h3><div name="212c" id="212c" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://docs.swift.org/swift-book/LanguageGuide/TypeCasting.html" data-href="https://docs.swift.org/swift-book/LanguageGuide/TypeCasting.html" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://docs.swift.org/swift-book/LanguageGuide/TypeCasting.html"><strong class="markup--strong markup--mixtapeEmbed-strong">Type Casting - The Swift Programming Language (Swift 4.2)</strong><br><em class="markup--em markup--mixtapeEmbed-em">Type casting is a way to check the type of an instance, or to treat that instance as a different superclass or subclass…</em>docs.swift.org</a><a href="https://docs.swift.org/swift-book/LanguageGuide/TypeCasting.html" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="32b362c9f77aca1622281c9c5bdc68a8"></a></div><blockquote name="b5ba" id="b5ba" class="graf graf--blockquote graf-after--mixtapeEmbed"><strong class="markup--strong markup--blockquote-strong">Defining a Class Hierarchy for Type Casting</strong></blockquote><pre name="e3a9" id="e3a9" class="graf graf--pre graf-after--blockquote">class MediaItem {</pre><pre name="83e4" id="83e4" class="graf graf--pre graf-after--pre">   var name: String</pre><pre name="947f" id="947f" class="graf graf--pre graf-after--pre">   init(name: String) {</pre><pre name="ebbc" id="ebbc" class="graf graf--pre graf-after--pre">      self.name = name</pre><pre name="43c6" id="43c6" class="graf graf--pre graf-after--pre">   }</pre><pre name="c615" id="c615" class="graf graf--pre graf-after--pre">}</pre><pre name="b9b4" id="b9b4" class="graf graf--pre graf-after--pre">class Movie: MediaItem {</pre><pre name="c46e" id="c46e" class="graf graf--pre graf-after--pre">   var director: String</pre><pre name="bce2" id="bce2" class="graf graf--pre graf-after--pre">   init(name: String, director: String) {</pre><pre name="56ca" id="56ca" class="graf graf--pre graf-after--pre">      self.director = director</pre><pre name="4c34" id="4c34" class="graf graf--pre graf-after--pre">      super.init(name: name)</pre><pre name="9497" id="9497" class="graf graf--pre graf-after--pre">   }</pre><pre name="005a" id="005a" class="graf graf--pre graf-after--pre">}</pre><pre name="7ce0" id="7ce0" class="graf graf--pre graf-after--pre">class Song: MediaItem {</pre><pre name="8e6c" id="8e6c" class="graf graf--pre graf-after--pre">   var artist: String</pre><pre name="cb08" id="cb08" class="graf graf--pre graf-after--pre">   init(name: String, artist: String) {</pre><pre name="0145" id="0145" class="graf graf--pre graf-after--pre">      self.artist = artist</pre><pre name="49e3" id="49e3" class="graf graf--pre graf-after--pre">      super.init(name: name)</pre><pre name="c209" id="c209" class="graf graf--pre graf-after--pre">   }</pre><pre name="247f" id="247f" class="graf graf--pre graf-after--pre">}</pre><pre name="b411" id="b411" class="graf graf--pre graf-after--pre">let library = [</pre><pre name="b9f2" id="b9f2" class="graf graf--pre graf-after--pre">   Movie(name: &quot;Casablanca&quot;, director: &quot;Michael Curtiz&quot;),</pre><pre name="c14d" id="c14d" class="graf graf--pre graf-after--pre">   Song(name: &quot;Blue Suede Shoes&quot;, artist: &quot;Elvis Presley&quot;),</pre><pre name="99bc" id="99bc" class="graf graf--pre graf-after--pre">   Movie(name: &quot;Citizen Kane&quot;, director: &quot;Orson Welles&quot;),</pre><pre name="dafb" id="dafb" class="graf graf--pre graf-after--pre">   Song(name: &quot;The One And Only&quot;, artist: &quot;Chesney Hawkes&quot;),</pre><pre name="e463" id="e463" class="graf graf--pre graf-after--pre">   Song(name: &quot;Never Gonna Give You Up&quot;, artist: &quot;Rick Astley&quot;)</pre><pre name="05a2" id="05a2" class="graf graf--pre graf-after--pre">]</pre><pre name="7dd0" id="7dd0" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// the type of &quot;library&quot; is inferred to be [MediaItem]</em></pre><blockquote name="fd22" id="fd22" class="graf graf--blockquote graf-after--pre"><strong class="markup--strong markup--blockquote-strong">Checking Type</strong></blockquote><p name="48bb" id="48bb" class="graf graf--p graf-after--blockquote">利用 is 檢查型別。</p><pre name="f7cb" id="f7cb" class="graf graf--pre graf-after--p">var movieCount = 0</pre><pre name="df7f" id="df7f" class="graf graf--pre graf-after--pre">var songCount = 0</pre><pre name="fd5a" id="fd5a" class="graf graf--pre graf-after--pre">for item in library {</pre><pre name="aade" id="aade" class="graf graf--pre graf-after--pre">   if item is Movie {</pre><pre name="bc61" id="bc61" class="graf graf--pre graf-after--pre">      movieCount += 1</pre><pre name="be58" id="be58" class="graf graf--pre graf-after--pre">   } else if item is Song {</pre><pre name="a596" id="a596" class="graf graf--pre graf-after--pre">      songCount += 1</pre><pre name="1623" id="1623" class="graf graf--pre graf-after--pre">   }</pre><pre name="352f" id="352f" class="graf graf--pre graf-after--pre">}</pre><pre name="b2cc" id="b2cc" class="graf graf--pre graf-after--pre">print(&quot;Media library contains \(movieCount) movies and \(songCount) songs&quot;)</pre><pre name="d7c2" id="d7c2" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// Prints &quot;Media library contains 2 movies and 3 songs&quot;</em></pre><blockquote name="2f0e" id="2f0e" class="graf graf--blockquote graf-after--pre"><strong class="markup--strong markup--blockquote-strong">Downcasting</strong></blockquote><pre name="bef6" id="bef6" class="graf graf--pre graf-after--blockquote">for item in library {</pre><pre name="ff0c" id="ff0c" class="graf graf--pre graf-after--pre">   if let movie = item as? Movie {</pre><pre name="6267" id="6267" class="graf graf--pre graf-after--pre">      print(&quot;Movie: \(movie.name), dir. \(movie.director)&quot;)</pre><pre name="dc85" id="dc85" class="graf graf--pre graf-after--pre">   } else if let song = item as? Song {</pre><pre name="198c" id="198c" class="graf graf--pre graf-after--pre">      print(&quot;Song: \(song.name), by \(song.artist)&quot;)</pre><pre name="7817" id="7817" class="graf graf--pre graf-after--pre">   }</pre><pre name="3a8c" id="3a8c" class="graf graf--pre graf-after--pre">}</pre><pre name="8ef5" id="8ef5" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// Movie: Casablanca, dir. Michael Curtiz</em></pre><pre name="6083" id="6083" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// Song: Blue Suede Shoes, by Elvis Presley</em></pre><pre name="542e" id="542e" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// Movie: Citizen Kane, dir. Orson Welles</em></pre><pre name="0971" id="0971" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// Song: The One And Only, by Chesney Hawkes</em></pre><pre name="c1ca" id="c1ca" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// Song: Never Gonna Give You Up, by Rick Astley</em></pre><blockquote name="8401" id="8401" class="graf graf--blockquote graf-after--pre"><strong class="markup--strong markup--blockquote-strong">Type Casting for Any and AnyObject</strong></blockquote><p name="0d10" id="0d10" class="graf graf--p graf-after--blockquote">轉型: 利用 as? 或 as!</p><pre name="4bc7" id="4bc7" class="graf graf--pre graf-after--p">var things = [Any]()</pre><pre name="68f6" id="68f6" class="graf graf--pre graf-after--pre">things.append(0)</pre><pre name="138b" id="138b" class="graf graf--pre graf-after--pre">things.append(0.0)</pre><pre name="6db3" id="6db3" class="graf graf--pre graf-after--pre">things.append(42)</pre><pre name="84f5" id="84f5" class="graf graf--pre graf-after--pre">things.append(3.14159)</pre><pre name="cfcd" id="cfcd" class="graf graf--pre graf-after--pre">things.append(&quot;hello&quot;)</pre><pre name="018e" id="018e" class="graf graf--pre graf-after--pre">things.append((3.0, 5.0))</pre><pre name="2985" id="2985" class="graf graf--pre graf-after--pre">things.append(Movie(name: &quot;Ghostbusters&quot;, director: &quot;Ivan Reitman&quot;))</pre><pre name="9ab4" id="9ab4" class="graf graf--pre graf-after--pre">things.append({ (name: String) -&gt; String in &quot;Hello, \(name)&quot; })</pre><pre name="1326" id="1326" class="graf graf--pre graf-after--pre">for thing in things {</pre><pre name="1da5" id="1da5" class="graf graf--pre graf-after--pre">   switch thing {</pre><pre name="fc6d" id="fc6d" class="graf graf--pre graf-after--pre">   case 0 as Int:</pre><pre name="83d8" id="83d8" class="graf graf--pre graf-after--pre">      print(&quot;zero as an Int&quot;)</pre><pre name="156d" id="156d" class="graf graf--pre graf-after--pre">   case 0 as Double:</pre><pre name="01b3" id="01b3" class="graf graf--pre graf-after--pre">      print(&quot;zero as a Double&quot;)</pre><pre name="fc77" id="fc77" class="graf graf--pre graf-after--pre">   case let someInt as Int:</pre><pre name="e34b" id="e34b" class="graf graf--pre graf-after--pre">      print(&quot;an integer value of \(someInt)&quot;)</pre><pre name="ed03" id="ed03" class="graf graf--pre graf-after--pre">   case let someDouble as Double where someDouble &gt; 0:</pre><pre name="d712" id="d712" class="graf graf--pre graf-after--pre">      print(&quot;a positive double value of \(someDouble)&quot;)</pre><pre name="1eff" id="1eff" class="graf graf--pre graf-after--pre">   case is Double:</pre><pre name="17ff" id="17ff" class="graf graf--pre graf-after--pre">      print(&quot;some other double value that I don&#39;t want to print&quot;)</pre><pre name="ec3d" id="ec3d" class="graf graf--pre graf-after--pre">   case let someString as String:</pre><pre name="6531" id="6531" class="graf graf--pre graf-after--pre">      print(&quot;a string value of \&quot;\(someString)\&quot;&quot;)</pre><pre name="ef58" id="ef58" class="graf graf--pre graf-after--pre">   case let (x, y) as (Double, Double):</pre><pre name="663a" id="663a" class="graf graf--pre graf-after--pre">      print(&quot;an (x, y) point at \(x), \(y)&quot;)</pre><pre name="8ae5" id="8ae5" class="graf graf--pre graf-after--pre">   case let movie as Movie:</pre><pre name="809a" id="809a" class="graf graf--pre graf-after--pre">      print(&quot;a movie called \(movie.name), dir. \(movie.director)&quot;)</pre><pre name="304c" id="304c" class="graf graf--pre graf-after--pre">   case let stringConverter as (String) -&gt; String:</pre><pre name="c323" id="c323" class="graf graf--pre graf-after--pre">      print(stringConverter(&quot;Michael&quot;))</pre><pre name="8363" id="8363" class="graf graf--pre graf-after--pre">   default:</pre><pre name="daaa" id="daaa" class="graf graf--pre graf-after--pre">      print(&quot;something else&quot;)</pre><pre name="f9d4" id="f9d4" class="graf graf--pre graf-after--pre">   }</pre><pre name="e48a" id="e48a" class="graf graf--pre graf-after--pre">}</pre><pre name="763c" id="763c" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// zero as an Int</em></pre><pre name="3d20" id="3d20" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// zero as a Double</em></pre><pre name="caa6" id="caa6" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// an integer value of 42</em></pre><pre name="f4a3" id="f4a3" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// a positive double value of 3.14159</em></pre><pre name="1452" id="1452" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// a string value of &quot;hello&quot;</em></pre><pre name="8b81" id="8b81" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// an (x, y) point at 3.0, 5.0</em></pre><pre name="63a4" id="63a4" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// a movie called Ghostbusters, dir. Ivan Reitman</em></pre><pre name="4044" id="4044" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// Hello, Michael</em></pre><p name="eab1" id="eab1" class="graf graf--p graf-after--pre">any 也可以儲存 optional。</p><pre name="f0e3" id="f0e3" class="graf graf--pre graf-after--p">let optionalNumber: Int? = 3</pre><pre name="a924" id="a924" class="graf graf--pre graf-after--pre">things.append(optionalNumber)        <em class="markup--em markup--pre-em">// Warning</em></pre><pre name="ccbf" id="ccbf" class="graf graf--pre graf-after--pre graf--trailing">things.append(optionalNumber as Any) <em class="markup--em markup--pre-em">// No warning</em></pre></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/5ae27182978e"><time class="dt-published" datetime="2018-09-18T08:32:07.750Z">September 18, 2018</time></a>.</p><p><a href="https://medium.com/@apppeterpan/type-casting-%E7%A8%8B%E5%BC%8F%E7%AF%84%E4%BE%8B-apples-the-swift-programming-language-5ae27182978e" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>