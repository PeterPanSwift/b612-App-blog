<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Add Explicit Codable Implementation — Xcode 14 新功能</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Add Explicit Codable Implementation — Xcode 14 新功能</h1>
</header>
<section data-field="subtitle" class="p-summary">
當我們串接 REST API 時，時常會定義遵從 protocol Codable 的資料型別對應 API 回傳的 JSON 資料，例如以下的 StoreItem 例子。
</section>
<section data-field="body" class="e-content">
<section name="a332" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="31e0" id="31e0" class="graf graf--h3 graf--leading graf--title">Add Explicit Codable Implementation — Xcode 14 新功能</h3><p name="08cb" id="08cb" class="graf graf--p graf-after--h3">當我們串接 REST API 時，時常會定義遵從 protocol Codable 的資料型別對應 API 回傳的 JSON 資料，例如以下的 StoreItem 例子。</p><pre name="eda6" id="eda6" class="graf graf--pre graf-after--p">struct StoreItem: Codable {<br>    let artistName: String<br>    let trackName: String<br>    let collectionName: String?<br>    let previewUrl: URL<br>    let artworkUrl100: URL<br>    let trackPrice: Double?<br>    let releaseDate: Date<br>    let isStreamable: Bool?<br>}</pre><p name="01f8" id="01f8" class="graf graf--p graf-after--pre">不過有時在解析比較複雜的 JSON 時，我們必須自己撰寫 Codable 的相關程式，比方型別 <code class="markup--code markup--p-code">CodingKeys</code> &amp; function <code class="markup--code markup--p-code">init(from:)</code> &amp; <code class="markup--code markup--p-code">encode(to:)</code>。</p><div name="3f9e" id="3f9e" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-enum-codingkeys-%E5%AE%A2%E8%A3%BD-json-%E5%B0%8D%E6%87%89%E7%9A%84-property-1b27f29c0c32" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-enum-codingkeys-%E5%AE%A2%E8%A3%BD-json-%E5%B0%8D%E6%87%89%E7%9A%84-property-1b27f29c0c32" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-enum-codingkeys-%E5%AE%A2%E8%A3%BD-json-%E5%B0%8D%E6%87%89%E7%9A%84-property-1b27f29c0c32"><strong class="markup--strong markup--mixtapeEmbed-strong">利用 CodingKey 客製 JSON 對應的 property</strong><br><em class="markup--em markup--mixtapeEmbed-em">利用 JSONDecoder 我們可以方便地串接 API，將網路上的 JSON 資料轉換成方便 App 使用的自訂型別。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-enum-codingkeys-%E5%AE%A2%E8%A3%BD-json-%E5%B0%8D%E6%87%89%E7%9A%84-property-1b27f29c0c32" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="f9911457c2d20b76f9dea0fff2d83a17" data-thumbnail-img-id="1*BEnqHultUN2yBm6iZwfeAw.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*BEnqHultUN2yBm6iZwfeAw.jpeg);"></a></div><div name="1371" id="1371" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%87%AA%E8%A8%82-init-from-decoder-%E8%A7%A3%E6%9E%90-json-f9c8d420cda4" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%87%AA%E8%A8%82-init-from-decoder-%E8%A7%A3%E6%9E%90-json-f9c8d420cda4" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%87%AA%E8%A8%82-init-from-decoder-%E8%A7%A3%E6%9E%90-json-f9c8d420cda4"><strong class="markup--strong markup--mixtapeEmbed-strong">定義 Decodable 的 init(from:) 解析 JSON</strong><br><em class="markup--em markup--mixtapeEmbed-em">透過 JSONDecoder，我們可以方便地將 JSON 資料變成遵從 protocol Decodable 的自訂型別，而且大部分的時候我們只要宣告型別裡的 property，不用自己撰寫解析 JSON 的 init(from…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%87%AA%E8%A8%82-init-from-decoder-%E8%A7%A3%E6%9E%90-json-f9c8d420cda4" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="f2f0a35aa460b7489fcc5705881cd7d1" data-thumbnail-img-id="1*rvyZe7kQUWeREkieUQqrug.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*rvyZe7kQUWeREkieUQqrug.png);"></a></div><div name="0697" id="0697" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%80%8F%E9%81%8E-encode-to-%E5%B0%87-json-%E8%A3%A1%E7%9A%84-array-%E6%88%96%E7%89%A9%E4%BB%B6%E8%AE%8A%E6%88%90%E5%AD%97%E4%B8%B2%E4%B8%8A%E5%82%B3-40e3118de1b0" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%80%8F%E9%81%8E-encode-to-%E5%B0%87-json-%E8%A3%A1%E7%9A%84-array-%E6%88%96%E7%89%A9%E4%BB%B6%E8%AE%8A%E6%88%90%E5%AD%97%E4%B8%B2%E4%B8%8A%E5%82%B3-40e3118de1b0" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%80%8F%E9%81%8E-encode-to-%E5%B0%87-json-%E8%A3%A1%E7%9A%84-array-%E6%88%96%E7%89%A9%E4%BB%B6%E8%AE%8A%E6%88%90%E5%AD%97%E4%B8%B2%E4%B8%8A%E5%82%B3-40e3118de1b0"><strong class="markup--strong markup--mixtapeEmbed-strong">透過 encode(to:) 將 JSON 裡的 array 或物件變成字串上傳</strong><br><em class="markup--em markup--mixtapeEmbed-em">透過 JSONEncoder 的幫忙，我們可以將自訂型別的資料轉換成 Data 型別，上傳 JSON 格式的資料到後台。例如以下例子:</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%80%8F%E9%81%8E-encode-to-%E5%B0%87-json-%E8%A3%A1%E7%9A%84-array-%E6%88%96%E7%89%A9%E4%BB%B6%E8%AE%8A%E6%88%90%E5%AD%97%E4%B8%B2%E4%B8%8A%E5%82%B3-40e3118de1b0" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="99ca4dd70922f49fad141a1b68d69116" data-thumbnail-img-id="1*aD06ncgwZIuXKktpWkUnFA.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*aD06ncgwZIuXKktpWkUnFA.jpeg);"></a></div><p name="df2c" id="df2c" class="graf graf--p graf-after--mixtapeEmbed">自己寫 CodingKeys，init(from:) &amp; encode(to:) 其實滿辛苦的，有很多重覆且冗長的程式。從 Xcode 14 開始，Xcode 可以自動幫我們生成這些程式，然後我們再依自己的需求做調整。</p><p name="38bb" id="38bb" class="graf graf--p graf-after--p">以下介紹三種輸入的方式。</p><ul class="postList"><li name="28e2" id="28e2" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">點選 Add Explicit Codable Implementation，自動完成 CodingKeys，init(from:) &amp; encode(to:) 的輸入。</strong></li><li name="a7af" id="a7af" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">輸入 cod，自動完成 CodingKeys 的輸入。</strong></li><li name="dc61" id="dc61" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">輸入 ini，自動完成 init(from:) 的輸入。</strong></li><li name="dcde" id="dcde" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">輸入 en，自動完成 encode(to:) 的輸入。</strong></li></ul><h3 name="45c1" id="45c1" class="graf graf--h3 graf-after--li">點選 Add Explicit Codable Implementation，<strong class="markup--strong markup--h3-strong">自動完成 CodingKeys，init(from:) &amp; encode(to:) 的輸入</strong></h3><p name="06c4" id="06c4" class="graf graf--p graf-after--h3">以剛剛的 StoreItem 為例，將滑鼠游標移到 StoreItem，然後按住 cmd 鍵點擊左鍵。</p><figure name="a919" id="a919" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*vilTDGwsmLW9FuKIJjPBNg.png" data-width="842" data-height="592" src="https://cdn-images-1.medium.com/max/800/1*vilTDGwsmLW9FuKIJjPBNg.png"></figure><p name="b59a" id="b59a" class="graf graf--p graf-after--figure">從選單選擇 Add Explicit Codable Implementation。</p><figure name="d05b" id="d05b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*nUdQP_Ai_KzZeWU0LCrWzA.png" data-width="1050" data-height="1002" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*nUdQP_Ai_KzZeWU0LCrWzA.png"></figure><p name="7a71" id="7a71" class="graf graf--p graf-after--figure">Xcode 瞬間幫我們生成 CodingKeys，init(from:) &amp; encode(to:) 的定義。</p><pre name="2f9a" id="2f9a" class="graf graf--pre graf-after--p">struct StoreItem: Codable {<br>    let artistName: String<br>    let trackName: String<br>    let collectionName: String?<br>    let previewUrl: URL<br>    let artworkUrl100: URL<br>    let trackPrice: Double?<br>    let releaseDate: Date<br>    let isStreamable: Bool?<br>    <br>    enum CodingKeys: CodingKey {<br>        case artistName<br>        case trackName<br>        case collectionName<br>        case previewUrl<br>        case artworkUrl100<br>        case trackPrice<br>        case releaseDate<br>        case isStreamable<br>    }<br>    <br>    init(from decoder: Decoder) throws {<br>        let container: KeyedDecodingContainer&lt;StoreItem.CodingKeys&gt; = try decoder.container(keyedBy: StoreItem.CodingKeys.self)<br>        <br>        self.artistName = try container.decode(String.self, forKey: StoreItem.CodingKeys.artistName)<br>        self.trackName = try container.decode(String.self, forKey: StoreItem.CodingKeys.trackName)<br>        self.collectionName = try container.decodeIfPresent(String.self, forKey: StoreItem.CodingKeys.collectionName)<br>        self.previewUrl = try container.decode(URL.self, forKey: StoreItem.CodingKeys.previewUrl)<br>        self.artworkUrl100 = try container.decode(URL.self, forKey: StoreItem.CodingKeys.artworkUrl100)<br>        self.trackPrice = try container.decodeIfPresent(Double.self, forKey: StoreItem.CodingKeys.trackPrice)<br>        self.releaseDate = try container.decode(Date.self, forKey: StoreItem.CodingKeys.releaseDate)<br>        self.isStreamable = try container.decodeIfPresent(Bool.self, forKey: StoreItem.CodingKeys.isStreamable)<br>        <br>    }<br>    <br>    func encode(to encoder: Encoder) throws {<br>        var container: KeyedEncodingContainer&lt;StoreItem.CodingKeys&gt; = encoder.container(keyedBy: StoreItem.CodingKeys.self)<br>        <br>        try container.encode(self.artistName, forKey: StoreItem.CodingKeys.artistName)<br>        try container.encode(self.trackName, forKey: StoreItem.CodingKeys.trackName)<br>        try container.encodeIfPresent(self.collectionName, forKey: StoreItem.CodingKeys.collectionName)<br>        try container.encode(self.previewUrl, forKey: StoreItem.CodingKeys.previewUrl)<br>        try container.encode(self.artworkUrl100, forKey: StoreItem.CodingKeys.artworkUrl100)<br>        try container.encodeIfPresent(self.trackPrice, forKey: StoreItem.CodingKeys.trackPrice)<br>        try container.encode(self.releaseDate, forKey: StoreItem.CodingKeys.releaseDate)<br>        try container.encodeIfPresent(self.isStreamable, forKey: StoreItem.CodingKeys.isStreamable)<br>    }<br>}</pre><h3 name="def2" id="def2" class="graf graf--h3 graf-after--pre">輸入 cod，自動完成 CodingKeys 的輸入</h3><figure name="7c25" id="7c25" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*wMLtwyT__NejA53SqBBsjg.png" data-width="1006" data-height="872" src="https://cdn-images-1.medium.com/max/800/1*wMLtwyT__NejA53SqBBsjg.png"></figure><pre name="b664" id="b664" class="graf graf--pre graf-after--figure">struct StoreItem: Codable {<br>    let artistName: String<br>    let trackName: String<br>    let collectionName: String?<br>    let previewUrl: URL<br>    let artworkUrl100: URL<br>    let trackPrice: Double?<br>    let releaseDate: Date<br>    let isStreamable: Bool?<br>    <br>    enum CodingKeys: CodingKey {<br>        case artistName<br>        case trackName<br>        case collectionName<br>        case previewUrl<br>        case artworkUrl100<br>        case trackPrice<br>        case releaseDate<br>        case isStreamable<br>    }<br>}</pre><h3 name="7947" id="7947" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">輸入 ini，自動完成 init(from:) 的輸入</strong></h3><figure name="f876" id="f876" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*p_0Ww1xteCQgIOmR8fCtsg.png" data-width="1104" data-height="832" src="https://cdn-images-1.medium.com/max/800/1*p_0Ww1xteCQgIOmR8fCtsg.png"></figure><pre name="8847" id="8847" class="graf graf--pre graf-after--figure">struct StoreItem: Codable {<br>    let artistName: String<br>    let trackName: String<br>    let collectionName: String?<br>    let previewUrl: URL<br>    let artworkUrl100: URL<br>    let trackPrice: Double?<br>    let releaseDate: Date<br>    let isStreamable: Bool?<br>    <br>    init(from decoder: Decoder) throws {<br>        let container = try decoder.container(keyedBy: CodingKeys.self)<br>        self.artistName = try container.decode(String.self, forKey: .artistName)<br>        self.trackName = try container.decode(String.self, forKey: .trackName)<br>        self.collectionName = try container.decodeIfPresent(String.self, forKey: .collectionName)<br>        self.previewUrl = try container.decode(URL.self, forKey: .previewUrl)<br>        self.artworkUrl100 = try container.decode(URL.self, forKey: .artworkUrl100)<br>        self.trackPrice = try container.decodeIfPresent(Double.self, forKey: .trackPrice)<br>        self.releaseDate = try container.decode(Date.self, forKey: .releaseDate)<br>        self.isStreamable = try container.decodeIfPresent(Bool.self, forKey: .isStreamable)<br>    }<br>}</pre><h3 name="aca1" id="aca1" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">輸入 en，自動完成 encode(to:) 的輸入</strong></h3><figure name="f9d8" id="f9d8" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*Iv9W2LJ_RJXTD7CJXJT1ug.png" data-width="1264" data-height="848" src="https://cdn-images-1.medium.com/max/800/1*Iv9W2LJ_RJXTD7CJXJT1ug.png"></figure><pre name="bf4c" id="bf4c" class="graf graf--pre graf-after--figure graf--trailing">struct StoreItem: Codable {<br>    let artistName: String<br>    let trackName: String<br>    let collectionName: String?<br>    let previewUrl: URL<br>    let artworkUrl100: URL<br>    let trackPrice: Double?<br>    let releaseDate: Date<br>    let isStreamable: Bool?<br>    <br>    func encode(to encoder: Encoder) throws {<br>        var container = encoder.container(keyedBy: CodingKeys.self)<br>        try container.encode(self.artistName, forKey: .artistName)<br>        try container.encode(self.trackName, forKey: .trackName)<br>        try container.encodeIfPresent(self.collectionName, forKey: .collectionName)<br>        try container.encode(self.previewUrl, forKey: .previewUrl)<br>        try container.encode(self.artworkUrl100, forKey: .artworkUrl100)<br>        try container.encodeIfPresent(self.trackPrice, forKey: .trackPrice)<br>        try container.encode(self.releaseDate, forKey: .releaseDate)<br>        try container.encodeIfPresent(self.isStreamable, forKey: .isStreamable)<br>    }<br>}</pre></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/86be0b2ceafc"><time class="dt-published" datetime="2022-06-07T07:24:45.809Z">June 7, 2022</time></a>.</p><p><a href="https://medium.com/@apppeterpan/add-explicit-codable-implementation-xcode-14-%E6%96%B0%E5%8A%9F%E8%83%BD-86be0b2ceafc" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>