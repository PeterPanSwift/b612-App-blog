<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Dart 3.8 有值才加入集合的 Null-aware elements</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Dart 3.8 有值才加入集合的 Null-aware elements</h1>
</header>
<section data-field="subtitle" class="p-summary">
Dart 3.8 推出了新的語法 Null-aware elements，當我們在集合裡加入 nullable 的資料時，只要在前面加上問號，即可自動依據是否有值將資料加入集合。
</section>
<section data-field="body" class="e-content">
<section name="ac60" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="c819" id="c819" class="graf graf--h3 graf--leading graf--title">Dart 3.8 有值才加入集合的 Null-aware elements</h3><figure name="a90f" id="a90f" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="0*8zOEZCFk5HSebp2P" data-width="1024" data-height="1024" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/0*8zOEZCFk5HSebp2P"></figure><p name="f7c6" id="f7c6" class="graf graf--p graf-after--figure">Dart 3.8 推出了新的語法 Null-aware elements，當我們在集合裡加入 nullable 的資料時，只要在前面加上問號，即可自動依據是否有值將資料加入集合。</p><p name="bc4e" id="bc4e" class="graf graf--p graf-after--p">用以下的 names 為例，從前我們希望當 name 有值才加入 names 時，必須麻煩地先用 if 判斷。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="361d" id="361d" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">void</span> test(<span class="hljs-built_in">String?</span> name) {<br />  <span class="hljs-keyword">var</span> names = [<br />    <span class="hljs-string">&#x27;Little Prince&#x27;</span>, <br />    <span class="hljs-string">&#x27;Fox&#x27;</span>, <br />    <span class="hljs-keyword">if</span> (name != <span class="hljs-keyword">null</span>) name<br />  ];<br />  <span class="hljs-built_in">print</span>(names);<br />}<br /><br /><span class="hljs-keyword">void</span> main() {<br />  test(<span class="hljs-string">&#x27;Rose&#x27;</span>);<br />}</span></pre><p name="c584" id="c584" class="graf graf--p graf-after--pre">有了 Null-aware elements，程式變得簡潔許多，只要在 [ ] 裡輸入 ?name 即可讓 name 在有值時才加入。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="ccab" id="ccab" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">void</span> test(<span class="hljs-built_in">String?</span> name) {<br />  <span class="hljs-keyword">var</span> names = [<br />    <span class="hljs-string">&#x27;Little Prince&#x27;</span>, <br />    <span class="hljs-string">&#x27;Fox&#x27;</span>, <br />    ?name<br />  ];<br />  <span class="hljs-built_in">print</span>(names);<br />}<br /><br /><span class="hljs-keyword">void</span> main() {<br />  test(<span class="hljs-string">&#x27;Rose&#x27;</span>);<br />}</span></pre><p name="bf27" id="bf27" class="graf graf--p graf-after--pre">以下我們再看個 Flutter 實際運用 Null-aware elements 的例子。我們將在畫面上用 Column 由上而下顯示 User 的 name、gender、country 和 height，若遇到 property 無值時則跳過不顯示。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="b57c" id="b57c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{<br />  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> name;<br />  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String?</span> gender;<br />  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String?</span> country;<br />  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double?</span> height;<br /><br />  User({<span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.name, <span class="hljs-keyword">this</span>.gender, <span class="hljs-keyword">this</span>.country, <span class="hljs-keyword">this</span>.height});<br />}</span></pre><p name="3847" id="3847" class="graf graf--p graf-after--pre">沒有 Null-aware elements 時，我們必須在 Column 的 children 加入多個 if 判斷是否有值。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="df88" id="df88" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> UserPage({<span class="hljs-keyword">super</span>.key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.user});<br />  <span class="hljs-keyword">final</span> User user;<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> Scaffold(<br />      appBar: AppBar(title: Text(<span class="hljs-string">&#x27;User Profile&#x27;</span>)),<br />      body: Center(<br />        child: Column(<br />          crossAxisAlignment: CrossAxisAlignment.start,<br />          children: [<br />            Text(user.name),<br />            <span class="hljs-keyword">if</span> (user.gender != <span class="hljs-keyword">null</span>) Text(user.gender!),<br />            <span class="hljs-keyword">if</span> (user.country != <span class="hljs-keyword">null</span>) Text(user.country!),<br />            <span class="hljs-keyword">if</span> (user.height != <span class="hljs-keyword">null</span>) Text(<span class="hljs-string">&#x27;<span class="hljs-subst">${user.height}</span>&#x27;</span>),<br />          ],<br />        ),<br />      ),<br />    );<br />  }<br />}</span></pre><p name="9c40" id="9c40" class="graf graf--p graf-after--pre">當 user 只有 name、country &amp; height 時，gender 欄位將跳過不顯示。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="dfdb" id="dfdb" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});<br /><br />  <span class="hljs-comment">// This widget is the root of your application.</span><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> MaterialApp(<br />      title: <span class="hljs-string">&#x27;Flutter Demo&#x27;</span>,<br />      theme: ThemeData(<br />        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),<br />      ),<br />      home: UserPage(<br />        user: User(name: <span class="hljs-string">&#x27;peter&#x27;</span>, country: <span class="hljs-string">&#x27;Taiwan&#x27;</span>, height: <span class="hljs-number">180</span>),<br />      ),<br />    );<br />  }<br />}</span></pre><figure name="4e9e" id="4e9e" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*8ixG25fCZxFOs3XW57AUCQ.png" data-width="1290" data-height="2796" src="https://cdn-images-1.medium.com/max/800/1*8ixG25fCZxFOs3XW57AUCQ.png"></figure><p name="afb2" id="afb2" class="graf graf--p graf-after--figure">透過 Null-aware elements，即可用 <code class="markup--code markup--p-code">?user.gender、?user.country、?user.height</code> 取代麻煩的 if 判斷。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="770f" id="770f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> UserPage({<span class="hljs-keyword">super</span>.key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.user});<br />  <span class="hljs-keyword">final</span> User user;<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> Scaffold(<br />      appBar: AppBar(title: Text(<span class="hljs-string">&#x27;User Profile&#x27;</span>)),<br />      body: Center(<br />        child: Column(<br />          crossAxisAlignment: CrossAxisAlignment.start,<br />          children: [<br />            user.name,<br />            ?user.gender,<br />            ?user.country,<br />            ?user.height,<br />          ].map((e) =&gt; Text(<span class="hljs-string">&#x27;<span class="hljs-subst">$e</span>&#x27;</span>)).toList(),<br />        ),<br />      ),<br />    );<br />  }<br />}</span></pre><h3 name="aa73" id="aa73" class="graf graf--h3 graf-after--pre">參考連結</h3><div name="557a" id="557a" class="graf graf--mixtapeEmbed graf-after--h3 graf--trailing"><a href="https://dart.dev/language/collections#null-aware-element" data-href="https://dart.dev/language/collections#null-aware-element" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://dart.dev/language/collections#null-aware-element"><strong class="markup--strong markup--mixtapeEmbed-strong">Collections</strong><br><em class="markup--em markup--mixtapeEmbed-em">Summary of the different types of collections in Dart.</em>dart.dev</a><a href="https://dart.dev/language/collections#null-aware-element" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="1ef8e1632c6b7021913d3a3d6c7ecf19" data-thumbnail-img-id="0*dutTHdMCF_B2smEc" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*dutTHdMCF_B2smEc);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/2a60a4310e7e"><time class="dt-published" datetime="2025-05-25T16:24:24.058Z">May 25, 2025</time></a>.</p><p><a href="https://medium.com/@apppeterpan/dart-3-8-%E6%9C%89%E5%80%BC%E6%89%8D%E5%8A%A0%E5%85%A5%E9%9B%86%E5%90%88%E7%9A%84-null-aware-elements-2a60a4310e7e" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>