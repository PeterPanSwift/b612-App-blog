<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>精於算計的 computed property(偽裝成變數的 function)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">精於算計的 computed property(偽裝成變數的 function)</h1>
</header>
<section data-field="subtitle" class="p-summary">
在 Swift 的型別定義裡，我們可宣告屬性儲存寶貴的資訊，例如以下例子，真男人 RealMan 類別的 name 和 age 儲存著永遠 18 歲的彼得潘。
</section>
<section data-field="body" class="e-content">
<section name="0bbd" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="ef12" id="ef12" class="graf graf--h3 graf--leading graf--title">精於算計的 <strong class="markup--strong markup--h3-strong">computed property(偽裝成變數的 function)</strong></h3><figure name="7549" id="7549" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="0*UTLT6wmlJJTcad61" data-width="1024" data-height="1024" src="https://cdn-images-1.medium.com/max/800/0*UTLT6wmlJJTcad61"></figure><p name="cfcb" id="cfcb" class="graf graf--p graf-after--figure">在 Swift 的型別定義裡，我們可宣告屬性儲存寶貴的資訊，例如以下例子，真男人 RealMan 類別的 name 和 age 儲存著永遠 18 歲的彼得潘。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="9dc6" id="9dc6" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RealMan</span> {<br />   <span class="hljs-keyword">var</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;彼得潘&quot;</span><br />   <span class="hljs-keyword">var</span> age <span class="hljs-operator">=</span> <span class="hljs-number">18</span><br />}</span></pre><p name="f628" id="f628" class="graf graf--p graf-after--pre">這一類儲存資料的屬性稱為 stored property，擅長記憶，將資料存入記憶體方便我們隨時存取。然而 stored property 還有另一個精於算計的孿生兄弟，computed property。</p><p name="08bc" id="08bc" class="graf graf--p graf-after--p">以下我們以計算正方形面積為例，說明 computed property 的使用時機。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="7ba7" id="7ba7" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> {<br />   <span class="hljs-keyword">var</span> width: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />   <span class="hljs-keyword">var</span> area: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />}<br /><br /><span class="hljs-keyword">let</span> bigSquare <span class="hljs-operator">=</span> <span class="hljs-type">Square</span>()<br />bigSquare.width <span class="hljs-operator">=</span> <span class="hljs-number">10</span><br />bigSquare.area <span class="hljs-operator">=</span> bigSquare.width <span class="hljs-operator">*</span> bigSquare.width</span></pre><blockquote name="5ada" id="5ada" class="graf graf--blockquote graf-after--pre">結果</blockquote><figure name="14eb" id="14eb" class="graf graf--figure graf-after--blockquote"><img class="graf-image" data-image-id="1*jMd9J-fUplynIaVxo-Vgdw.jpeg" data-width="1460" data-height="262" src="https://cdn-images-1.medium.com/max/800/1*jMd9J-fUplynIaVxo-Vgdw.jpeg"></figure><p name="5232" id="5232" class="graf graf--p graf-after--figure">正方形 Square 有兩個屬性 width 和 area，分別儲存寬度和面積。每次我們修改寬度時，就得重新計算，再將結果存入屬性 area。如果哪天你修改了寬度，卻忘了重新計算更新面積，將造成面積和寬度對不起來的嚴重錯誤。</p><h3 name="c014" id="c014" class="graf graf--h3 graf-after--p">認識 computed property</h3><p name="f1ba" id="f1ba" class="graf graf--p graf-after--h3">這個問題其實有更好的解法，透過 computed property 即可迎刃而解。它的語法格式如下:</p><figure name="b8b0" id="b8b0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*_1exilok9Mz45o4sFA1oLg.jpeg" data-width="972" data-height="680" src="https://cdn-images-1.medium.com/max/800/1*_1exilok9Mz45o4sFA1oLg.jpeg"></figure><p name="190e" id="190e" class="graf graf--p graf-after--figure">computed property 是個愛好計算的數學神童，讀取時它將執行 get { } 裡的程式，費盡心思計算結果回傳，設定時則執行 set { } 裡的程式。</p><p name="776e" id="776e" class="graf graf--p graf-after--p">我們將剛剛 Square 的 area 改用 computed property 宣告，瞧瞧它的厲害之處。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="da26" id="da26" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> {<br />   <span class="hljs-keyword">var</span> width: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />   <span class="hljs-keyword">var</span> area: <span class="hljs-type">Double</span> {<br />      <span class="hljs-keyword">get</span> {<br />         <span class="hljs-keyword">return</span> width <span class="hljs-operator">*</span> width<br />      }<br />      <span class="hljs-keyword">set</span>(newArea) {<br />         width <span class="hljs-operator">=</span> sqrt(newArea)<br />      }<br />   }<br />}<br /><br /><span class="hljs-keyword">let</span> bigSquare <span class="hljs-operator">=</span> <span class="hljs-type">Square</span>()<br />bigSquare.width <span class="hljs-operator">=</span> <span class="hljs-number">10</span><br /><span class="hljs-built_in">print</span>(bigSquare.area)</span></pre><blockquote name="539a" id="539a" class="graf graf--blockquote graf-after--pre">結果</blockquote><figure name="eda8" id="eda8" class="graf graf--figure graf-after--blockquote"><img class="graf-image" data-image-id="1*H8FqeOK4R-1vFj3ADQHu7Q.jpeg" data-width="664" data-height="220" src="https://cdn-images-1.medium.com/max/800/1*H8FqeOK4R-1vFj3ADQHu7Q.jpeg"></figure><p name="8fe5" id="8fe5" class="graf graf--p graf-after--figure">當我們利用 bigSquare.area 讀取面積時，它將執行 get { } 裡的程式，因此得到的面積將利用最新的寬度重新計算，永遠不會發生寬度改變但面積忘了更新的憾事。</p><p name="5866" id="5866" class="graf graf--p graf-after--p">利用 = 設定 area 時，我們想將寬度更新為新面積的平方根。此時它將執行 set( 參 數 ) { } 裡的程式，( ) 裡的參數內容是我們在 = 右邊指定的內容。如以下例子，當我們將 area 改為 81 時，參數 newArea 的值為 81，透過內建計算平方根的 function sqrt，寬度成功更新為 9。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="4173" id="4173" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> bigSquare <span class="hljs-operator">=</span> <span class="hljs-type">Square</span>()<br />bigSquare.area <span class="hljs-operator">=</span> <span class="hljs-number">81</span><br /><span class="hljs-built_in">print</span>(bigSquare.width)</span></pre><blockquote name="44fc" id="44fc" class="graf graf--blockquote graf-after--pre">結果</blockquote><figure name="9a28" id="9a28" class="graf graf--figure graf-after--blockquote"><img class="graf-image" data-image-id="1*2-rlP-G0qPl5wuMtHy5vew.jpeg" data-width="650" data-height="210" src="https://cdn-images-1.medium.com/max/800/1*2-rlP-G0qPl5wuMtHy5vew.jpeg"></figure><p name="d05e" id="d05e" class="graf graf--p graf-after--figure">為了使用 function sqrt，你必須在 playground 的開頭先加入 import Foundation。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="6a75" id="6a75" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation</span></pre><p name="b60c" id="b60c" class="graf graf--p graf-after--pre">import 的後面可接你想加入的函式庫名稱。什麼是函式庫呢?函式庫就像哆啦 A 夢的百寶袋，裡面有許多別人寫好，方便我們實現酷炫功能的程式，比方剛剛的 sqrt 是計算平方根的 function。隨著之後你開發功能愈來愈豐富的 App，你將使用愈來愈多其它的函式庫，比方地圖，播音樂的函式庫等。在這裡，計算平方根是比較複雜的數學運算，所以我們加入 Foundation，它幫我們寫好許多方便的數學運算 function，讓你變得跟數學系一樣厲害。</p><p name="0c0f" id="0c0f" class="graf graf--p graf-after--p">如果忘了 import Foundation，程式將無法認得 sqrt，產生可怕的紅色錯誤。</p><pre data-code-block-mode="0" spellcheck="false" name="5350" id="5350" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">Use of unresolved identifier &#39;sqrt&#39;</span></pre><figure name="5edd" id="5edd" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*eKBxFpiJlQ8O3Dyw-jGqJg.jpeg" data-width="1184" data-height="694" src="https://cdn-images-1.medium.com/max/800/1*eKBxFpiJlQ8O3Dyw-jGqJg.jpeg"></figure><p name="f332" id="f332" class="graf graf--p graf-after--figure">AI 的動畫說明。</p><div name="89d2" id="89d2" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://claude.site/artifacts/e47cec10-20de-484f-b480-442a7d3d9783" data-href="https://claude.site/artifacts/e47cec10-20de-484f-b480-442a7d3d9783" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://claude.site/artifacts/e47cec10-20de-484f-b480-442a7d3d9783"><strong class="markup--strong markup--mixtapeEmbed-strong">Claude Artifact</strong><br><em class="markup--em markup--mixtapeEmbed-em">Try out Artifacts created by Claude users</em>claude.site</a><a href="https://claude.site/artifacts/e47cec10-20de-484f-b480-442a7d3d9783" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="7b4cd4140774f4e20942d90e34194d14" data-thumbnail-img-id="0*zQFI_3Emgw5rbETq" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*zQFI_3Emgw5rbETq);"></a></div><h3 name="b77a" id="b77a" class="graf graf--h3 graf-after--mixtapeEmbed">computed property 和 function 的比較</h3><p name="5d31" id="5d31" class="graf graf--p graf-after--h3">也許有人想到，剛剛的例子不一定要用 computed property，也可以另外定義 function getArea &amp; setArea 實現呀?</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="8967" id="8967" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> {<br />    <span class="hljs-keyword">var</span> width: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">getArea</span>() -&gt; <span class="hljs-type">Double</span> {<br />        <span class="hljs-keyword">return</span> width <span class="hljs-operator">*</span> width<br />    }<br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">setArea</span>(<span class="hljs-params">area</span>: <span class="hljs-type">Double</span>) {<br />        width <span class="hljs-operator">=</span> sqrt(area)<br />    }<br />}</span></pre><p name="8d92" id="8d92" class="graf graf--p graf-after--pre">的確，定義 computed property 和 function 都可以。然而在這個例子，使用前者更好，因為它讓我們的程式看起來更直覺，可讀性更好，畢竟正方形的面積，看起來就像屬性，就像彼得潘這個名字，看起來就像帥哥一樣。</p><h3 name="7cc7" id="7cc7" class="graf graf--h3 graf-after--p">computed property 自動生成的 newValue</h3><p name="93ae" id="93ae" class="graf graf--p graf-after--h3">關於 computed property 的 set 定義，還有更精簡的寫法。我們可以透過 Swift 貼心提供的 newValue 讀取新的設定值，因此 set 後的 ( 參數 ) 可以省略。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="a9ae" id="a9ae" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> {<br />   <span class="hljs-keyword">var</span> width: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />   <span class="hljs-keyword">var</span> area: <span class="hljs-type">Double</span> {<br />      <span class="hljs-keyword">get</span> {<br />         <span class="hljs-keyword">return</span> width <span class="hljs-operator">*</span> width <br />      }<br />      <span class="hljs-keyword">set</span> {<br />         width <span class="hljs-operator">=</span> sqrt(newValue)<br />      }<br />   }<br />}</span></pre><h3 name="9696" id="9696" class="graf graf--h3 graf-after--pre">只有讀取功能的 computed property</h3><p name="f03a" id="f03a" class="graf graf--p graf-after--h3">有些時候，我們可能只需讀取 computed property，只想知道某屬性的運算結果， 並不需要修改它。比方考試的平均分數，它是國英數三科分數除以三的結果，適合宣告為只能讀取的 computed property。它並不需要修改，因為我們不可能修改平 均分數，再倒推國英數的分數。</p><p name="8c56" id="8c56" class="graf graf--p graf-after--p">Swift 允許 computed property 只定義 get， 不定義 set， 例如以下歌曲時間 formattedDuration 的例子(但 get 可是一定要定義，不能沒有)。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="a2d8" id="a2d8" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Song</span> {<br />   <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />   <span class="hljs-keyword">let</span> duration: <span class="hljs-type">Int</span><br />   <span class="hljs-keyword">var</span> formattedDuration: <span class="hljs-type">String</span> {<br />      <span class="hljs-keyword">get</span> {<br />         <span class="hljs-keyword">let</span> minutes <span class="hljs-operator">=</span> duration <span class="hljs-operator">/</span> <span class="hljs-number">60</span><br />         <span class="hljs-keyword">let</span> seconds <span class="hljs-operator">=</span> duration <span class="hljs-operator">%</span> <span class="hljs-number">60</span><br />         <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;<span class="hljs-subst">\(minutes)</span>分<span class="hljs-subst">\(seconds)</span>秒&quot;</span><br />      }<br />   }<br />}<br /><br /><span class="hljs-keyword">let</span> song <span class="hljs-operator">=</span> <span class="hljs-type">Song</span>(name: <span class="hljs-string">&quot;一次就好&quot;</span>, duration: <span class="hljs-number">263</span>)<br /><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(song.name)</span>的歌曲長度為<span class="hljs-subst">\(song.formattedDuration)</span>&quot;</span>)</span></pre><blockquote name="b064" id="b064" class="graf graf--blockquote graf-after--pre">結果</blockquote><figure name="e4da" id="e4da" class="graf graf--figure graf-after--blockquote"><img class="graf-image" data-image-id="1*gA4KSzkk7DayfqOl4VRz7A.jpeg" data-width="1580" data-height="254" src="https://cdn-images-1.medium.com/max/800/1*gA4KSzkk7DayfqOl4VRz7A.jpeg"></figure><p name="c294" id="c294" class="graf graf--p graf-after--figure">歌曲的 duration 儲存歌曲時間的秒數，然而我們時常會以幾分幾秒的格式呈現在畫 面上，因此我們另外以 computed property 定義 formattedDuration，之後顯示歌曲幾分幾秒時，只要讀取它即可。很明顯的，這樣的 property 不需要修改，只要讀取，所以我們只定義 get。</p><p name="c3bb" id="c3bb" class="graf graf--p graf-after--p">只有 get 定義時，Swift 還提供更簡單的寫法，連 get { } 都可省略。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="02fd" id="02fd" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">var</span> formattedDuration: <span class="hljs-type">String</span> {<br />   <span class="hljs-keyword">let</span> minutes <span class="hljs-operator">=</span> duration <span class="hljs-operator">/</span> <span class="hljs-number">60</span><br />   <span class="hljs-keyword">let</span> seconds <span class="hljs-operator">=</span> duration <span class="hljs-operator">%</span> <span class="hljs-number">60</span><br />   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;<span class="hljs-subst">\(minutes)</span>分<span class="hljs-subst">\(seconds)</span>秒&quot;</span><br />}</span></pre><h3 name="5cfb" id="5cfb" class="graf graf--h3 graf-after--pre">省略 return 的 computed property</h3><p name="4c81" id="4c81" class="graf graf--p graf-after--h3">當 computed property 的 get 程式只有一行時，我們還可以省略 return，例如以下例子的 bmi。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="495b" id="495b" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Baby</span> {<br />    <span class="hljs-keyword">var</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Peter&quot;</span><br />    <span class="hljs-keyword">var</span> height <span class="hljs-operator">=</span> <span class="hljs-number">1.8</span><br />    <span class="hljs-keyword">var</span> weight: <span class="hljs-type">Double</span> <span class="hljs-operator">=</span> <span class="hljs-number">70</span><br />    <span class="hljs-keyword">var</span> bmi: <span class="hljs-type">Double</span> {<br />        weight <span class="hljs-operator">/</span> (height <span class="hljs-operator">*</span> height)<br />    }<br />}<br /><br /><span class="hljs-keyword">var</span> cuteBaby <span class="hljs-operator">=</span> <span class="hljs-type">Baby</span>()<br />cuteBaby.bmi</span></pre><h3 name="56f4" id="56f4" class="graf graf--h3 graf-after--pre">自動完成</h3><figure name="ee18" id="ee18" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*gPZm1FucHHFxSFu_8ovJsQ.png" data-width="1914" data-height="588" src="https://cdn-images-1.medium.com/max/800/1*gPZm1FucHHFxSFu_8ovJsQ.png"></figure><figure name="58d0" id="58d0" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*W0ZIX6fX95jEBcPNmo2enQ.png" data-width="1124" data-height="600" src="https://cdn-images-1.medium.com/max/800/1*W0ZIX6fX95jEBcPNmo2enQ.png"></figure><figure name="2b45" id="2b45" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*j04EVJ0P_tGWHzNEp9GgIA.png" data-width="1558" data-height="394" src="https://cdn-images-1.medium.com/max/800/1*j04EVJ0P_tGWHzNEp9GgIA.png"></figure><figure name="0bc2" id="0bc2" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*OVrLiA9qZlwdJFov9jXTXQ.png" data-width="888" data-height="240" src="https://cdn-images-1.medium.com/max/800/1*OVrLiA9qZlwdJFov9jXTXQ.png"></figure><h3 name="8e9b" id="8e9b" class="graf graf--h3 graf-after--figure">stored property 和 computed property 的比較</h3><p name="b508" id="b508" class="graf graf--p graf-after--h3">最後， 讓我們比較 stored property 和 computed property， 特別看看 computed property 幾點不同之處:</p><h4 name="3cbb" id="3cbb" class="graf graf--h4 graf-after--p">宣告時得加上型別</h4><p name="c4a5" id="c4a5" class="graf graf--p graf-after--h4">computed property 的結果乃計算而來，無法像 stored property 經由宣告時指定的預設值推理型別，因此必須另外指定型別。</p><figure name="9207" id="9207" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*XN5YhwUw3eMVWD_NsYN_Ow.jpeg" data-width="1750" data-height="410" src="https://cdn-images-1.medium.com/max/800/1*XN5YhwUw3eMVWD_NsYN_Ow.jpeg"></figure><p name="2b13" id="2b13" class="graf graf--p graf-after--figure">忘了指定型別，產生錯誤訊息。</p><pre data-code-block-mode="0" spellcheck="false" name="670a" id="670a" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">Computed property must have an explicit type</span></pre><h4 name="4525" id="4525" class="graf graf--h4 graf-after--pre">不需要初始值</h4><p name="0173" id="0173" class="graf graf--p graf-after--h4">每次讀取都會重新計算，回傳計算的結果，怎麼算也算不膩。</p><figure name="9cc8" id="9cc8" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*WO_A0tB_NxCO41IcZccGJA.jpeg" data-width="1726" data-height="388" src="https://cdn-images-1.medium.com/max/800/1*WO_A0tB_NxCO41IcZccGJA.jpeg"></figure><p name="1bfa" id="1bfa" class="graf graf--p graf-after--figure">設定初始值，產生錯誤訊息。</p><pre data-code-block-mode="0" spellcheck="false" name="ab82" id="ab82" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">Variable with getter/setter cannot have an initial value</span></pre><h4 name="b34b" id="b34b" class="graf graf--h4 graf-after--pre">只能以 var 宣告，不能用 let</h4><p name="fb09" id="fb09" class="graf graf--p graf-after--h4">computed property 的結果是計算而來，時常改變，不能用 let 宣告。</p><figure name="57cc" id="57cc" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*pSiTpBSLXg5madPJDqh2zw.tiff" data-width="1758" data-height="702" src="https://cdn-images-1.medium.com/max/800/1*pSiTpBSLXg5madPJDqh2zw.tiff"></figure><p name="3c9a" id="3c9a" class="graf graf--p graf-after--figure">錯誤訊息</p><pre data-code-block-mode="0" spellcheck="false" name="9484" id="9484" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">&#39;let&#39; declarations cannot be computed properties</span></pre><h3 name="95dd" id="95dd" class="graf graf--h3 graf-after--pre">iOS SDK 的 computed property 例子</h3><ul class="postList"><li name="bdca" id="bdca" class="graf graf--li graf-after--h3">String 的 isEmpty</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="31f3" id="31f3" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">var</span> isEmpty: <span class="hljs-type">Bool</span> { <span class="hljs-keyword">get</span> }</span></pre><ul class="postList"><li name="c9e7" id="c9e7" class="graf graf--li graf-after--pre">UIColor 的 blue</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="5ef9" id="5ef9" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">var</span> <span class="hljs-title class_">blue</span>: <span class="hljs-title class_">UIColor</span> { <span class="hljs-keyword">get</span> }</span></pre><ul class="postList"><li name="931e" id="931e" class="graf graf--li graf-after--pre">UIView 的 center</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="ec11" id="ec11" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">var</span> center: <span class="hljs-type">CGPoint</span> { <span class="hljs-keyword">get</span> <span class="hljs-keyword">set</span> }</span></pre><h3 name="d6d6" id="d6d6" class="graf graf--h3 graf-after--pre">Apple 電子書的 computed property 例子</h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1f03" id="1f03" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> UIKit<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {<br />    <span class="hljs-keyword">var</span> x <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>, y <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span><br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Size</span> {<br />    <span class="hljs-keyword">var</span> width <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>, height <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span><br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rect</span> {<br />    <span class="hljs-keyword">var</span> origin <span class="hljs-operator">=</span> <span class="hljs-type">Point</span>()<br />    <span class="hljs-keyword">var</span> size <span class="hljs-operator">=</span> <span class="hljs-type">Size</span>()<br />    <span class="hljs-keyword">var</span> center: <span class="hljs-type">Point</span> {<br />        <span class="hljs-keyword">get</span> {<br />            <span class="hljs-keyword">let</span> centerX <span class="hljs-operator">=</span> origin.x <span class="hljs-operator">+</span> (size.width <span class="hljs-operator">/</span> <span class="hljs-number">2</span>)<br />            <span class="hljs-keyword">let</span> centerY <span class="hljs-operator">=</span> origin.y <span class="hljs-operator">+</span> (size.height <span class="hljs-operator">/</span> <span class="hljs-number">2</span>)<br />            <span class="hljs-keyword">return</span> <span class="hljs-type">Point</span>(x: centerX, y: centerY)<br />        }<br />        <span class="hljs-keyword">set</span>(newCenter) {<br />            origin.x <span class="hljs-operator">=</span> newCenter.x <span class="hljs-operator">-</span> (size.width <span class="hljs-operator">/</span> <span class="hljs-number">2</span>)<br />            origin.y <span class="hljs-operator">=</span> newCenter.y <span class="hljs-operator">-</span> (size.height <span class="hljs-operator">/</span> <span class="hljs-number">2</span>)<br />        }<br />    }<br />}<br /><br /><span class="hljs-keyword">var</span> square <span class="hljs-operator">=</span> <span class="hljs-type">Rect</span>(origin: <span class="hljs-type">Point</span>(x: <span class="hljs-number">0.0</span>, y: <span class="hljs-number">0.0</span>),<br />                  size: <span class="hljs-type">Size</span>(width: <span class="hljs-number">10.0</span>, height: <span class="hljs-number">10.0</span>))<br /><span class="hljs-keyword">let</span> initialSquareCenter <span class="hljs-operator">=</span> square.center<br />square.center <span class="hljs-operator">=</span> <span class="hljs-type">Point</span>(x: <span class="hljs-number">15.0</span>, y: <span class="hljs-number">15.0</span>)<br /><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;square.origin is now at (<span class="hljs-subst">\(square.origin.x)</span>, <span class="hljs-subst">\(square.origin.y)</span>)&quot;</span>)<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">AlternativeRect</span> {<br />    <span class="hljs-keyword">var</span> origin <span class="hljs-operator">=</span> <span class="hljs-type">Point</span>()<br />    <span class="hljs-keyword">var</span> size <span class="hljs-operator">=</span> <span class="hljs-type">Size</span>()<br />    <span class="hljs-keyword">var</span> center: <span class="hljs-type">Point</span> {<br />        <span class="hljs-keyword">get</span> {<br />            <span class="hljs-keyword">let</span> centerX <span class="hljs-operator">=</span> origin.x <span class="hljs-operator">+</span> (size.width <span class="hljs-operator">/</span> <span class="hljs-number">2</span>)<br />            <span class="hljs-keyword">let</span> centerY <span class="hljs-operator">=</span> origin.y <span class="hljs-operator">+</span> (size.height <span class="hljs-operator">/</span> <span class="hljs-number">2</span>)<br />            <span class="hljs-keyword">return</span> <span class="hljs-type">Point</span>(x: centerX, y: centerY)<br />        }<br />        <span class="hljs-keyword">set</span> {<br />            origin.x <span class="hljs-operator">=</span> newValue.x <span class="hljs-operator">-</span> (size.width <span class="hljs-operator">/</span> <span class="hljs-number">2</span>)<br />            origin.y <span class="hljs-operator">=</span> newValue.y <span class="hljs-operator">-</span> (size.height <span class="hljs-operator">/</span> <span class="hljs-number">2</span>)<br />        }<br />    }<br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">CompactRect</span> {<br />    <span class="hljs-keyword">var</span> origin <span class="hljs-operator">=</span> <span class="hljs-type">Point</span>()<br />    <span class="hljs-keyword">var</span> size <span class="hljs-operator">=</span> <span class="hljs-type">Size</span>()<br />    <span class="hljs-keyword">var</span> center: <span class="hljs-type">Point</span> {<br />        <span class="hljs-keyword">get</span> {<br />            <span class="hljs-type">Point</span>(x: origin.x <span class="hljs-operator">+</span> (size.width <span class="hljs-operator">/</span> <span class="hljs-number">2</span>),<br />                  y: origin.y <span class="hljs-operator">+</span> (size.height <span class="hljs-operator">/</span> <span class="hljs-number">2</span>))<br />        }<br />        <span class="hljs-keyword">set</span> {<br />            origin.x <span class="hljs-operator">=</span> newValue.x <span class="hljs-operator">-</span> (size.width <span class="hljs-operator">/</span> <span class="hljs-number">2</span>)<br />            origin.y <span class="hljs-operator">=</span> newValue.y <span class="hljs-operator">-</span> (size.height <span class="hljs-operator">/</span> <span class="hljs-number">2</span>)<br />        }<br />    }<br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cuboid</span> {<br />    <span class="hljs-keyword">var</span> width <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>, height <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>, depth <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span><br />    <span class="hljs-keyword">var</span> volume: <span class="hljs-type">Double</span> {<br />        <span class="hljs-keyword">return</span> width <span class="hljs-operator">*</span> height <span class="hljs-operator">*</span> depth<br />    }<br />}<br /><br /><span class="hljs-keyword">let</span> fourByFiveByTwo <span class="hljs-operator">=</span> <span class="hljs-type">Cuboid</span>(width: <span class="hljs-number">4.0</span>, height: <span class="hljs-number">5.0</span>, depth: <span class="hljs-number">2.0</span>)<br /><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;the volume of fourByFiveByTwo is <span class="hljs-subst">\(fourByFiveByTwo.volume)</span>&quot;</span>)</span></pre><h3 name="a7bf" id="a7bf" class="graf graf--h3 graf-after--pre">computed property 應用實例</h3><div name="7482" id="7482" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/apple-%E7%9A%84%E5%89%AA%E5%88%80%E7%9F%B3%E9%A0%AD%E5%B8%83-rps-%E7%AF%84%E4%BE%8B-f8e807b16637" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/apple-%E7%9A%84%E5%89%AA%E5%88%80%E7%9F%B3%E9%A0%AD%E5%B8%83-rps-%E7%AF%84%E4%BE%8B-f8e807b16637" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/apple-%E7%9A%84%E5%89%AA%E5%88%80%E7%9F%B3%E9%A0%AD%E5%B8%83-rps-%E7%AF%84%E4%BE%8B-f8e807b16637"><strong class="markup--strong markup--mixtapeEmbed-strong">Apple 的剪刀石頭布(RPS)範例</strong><br><em class="markup--em markup--mixtapeEmbed-em">先模仿製作類似的功能跟畫面，然後再參考 Apple 的範例寫法。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/apple-%E7%9A%84%E5%89%AA%E5%88%80%E7%9F%B3%E9%A0%AD%E5%B8%83-rps-%E7%AF%84%E4%BE%8B-f8e807b16637" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="03c81c1b26cd474340d6639f0fe3c090" data-thumbnail-img-id="1*pI99LMjhMWH3ZMA7PEfQGw.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*pI99LMjhMWH3ZMA7PEfQGw.png);"></a></div><p name="cce2" id="cce2" class="graf graf--p graf-after--mixtapeEmbed">文章內容來自彼得潘的 Swift 程式設計入門 11–1 精於算計的 computer property。</p><div name="50ee" id="50ee" class="graf graf--mixtapeEmbed graf-after--p"><a href="http://swiftbook.strikingly.com" data-href="http://swiftbook.strikingly.com" class="markup--anchor markup--mixtapeEmbed-anchor" title="http://swiftbook.strikingly.com"><strong class="markup--strong markup--mixtapeEmbed-strong">彼得潘的 Swift 程式設計入門</strong><br><em class="markup--em markup--mixtapeEmbed-em">本書搭配全新的 Swift 4、Xcode 9 和 iOS 11 SDK，以各種生動有趣的實例帶領讀者由淺入深認識 Swift，並在 Xcode 全新打造的練功樂園 playground 盡情敞佯，學習關於 Swift 的點點滴滴。從初…</em>swiftbook.strikingly.com</a><a href="http://swiftbook.strikingly.com" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="fc2e5dddacd017ff26e6a0f6a524c76a" data-thumbnail-img-id="0*jg7VFp4-wHveqw_n." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*jg7VFp4-wHveqw_n.);"></a></div><h3 name="fae4" id="fae4" class="graf graf--h3 graf-after--mixtapeEmbed">請 AI 寫一些有趣的例子說明 computed property</h3><ul class="postList"><li name="ffe8" id="ffe8" class="graf graf--li graf-after--h3">GPT</li></ul><p name="8a96" id="8a96" class="graf graf--p graf-after--li"><a href="https://chat.openai.com/share/5cf63008-5434-4056-b113-7e4a4c4f7c13" data-href="https://chat.openai.com/share/5cf63008-5434-4056-b113-7e4a4c4f7c13" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://chat.openai.com/share/5cf63008-5434-4056-b113-7e4a4c4f7c13</a></p><ul class="postList"><li name="1265" id="1265" class="graf graf--li graf-after--p">Claude</li></ul><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="7308" id="7308" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">FormattedDate</span> {<br />    <span class="hljs-keyword">var</span> date <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>()<br />    <br />    <span class="hljs-keyword">var</span> shortDate: <span class="hljs-type">String</span> {<br />        <span class="hljs-keyword">let</span> dateFormatter <span class="hljs-operator">=</span> <span class="hljs-type">DateFormatter</span>()<br />        dateFormatter.dateFormat <span class="hljs-operator">=</span> <span class="hljs-string">&quot;yyyy/MM/dd&quot;</span><br />        <span class="hljs-keyword">return</span> dateFormatter.string(from: date)<br />    }<br />    <br />    <span class="hljs-keyword">var</span> longDate: <span class="hljs-type">String</span> {<br />        <span class="hljs-keyword">let</span> dateFormatter <span class="hljs-operator">=</span> <span class="hljs-type">DateFormatter</span>()<br />        dateFormatter.dateFormat <span class="hljs-operator">=</span> <span class="hljs-string">&quot;MMMM d, yyyy&quot;</span><br />        <span class="hljs-keyword">return</span> dateFormatter.string(from: date)<br />    }<br />}<br /><br /><span class="hljs-keyword">let</span> formattedDate <span class="hljs-operator">=</span> <span class="hljs-type">FormattedDate</span>()<br /><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Short Date: <span class="hljs-subst">\(formattedDate.shortDate)</span>&quot;</span>)<br /><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Long Date: <span class="hljs-subst">\(formattedDate.longDate)</span>&quot;</span>)</span></pre><h3 name="0ea4" id="0ea4" class="graf graf--h3 graf-after--pre">請 AI 寫押韻的程式教學文章介紹 computed property</h3><div name="5b70" id="5b70" class="graf graf--mixtapeEmbed graf-after--h3 graf--trailing"><a href="https://apppeterpan.medium.com/%E8%AB%8B-ai-%E5%AF%AB%E6%8A%BC%E9%9F%BB%E7%9A%84%E7%A8%8B%E5%BC%8F%E6%95%99%E5%AD%B8%E6%96%87%E7%AB%A0-4337e7294fd3" data-href="https://apppeterpan.medium.com/%E8%AB%8B-ai-%E5%AF%AB%E6%8A%BC%E9%9F%BB%E7%9A%84%E7%A8%8B%E5%BC%8F%E6%95%99%E5%AD%B8%E6%96%87%E7%AB%A0-4337e7294fd3" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://apppeterpan.medium.com/%E8%AB%8B-ai-%E5%AF%AB%E6%8A%BC%E9%9F%BB%E7%9A%84%E7%A8%8B%E5%BC%8F%E6%95%99%E5%AD%B8%E6%96%87%E7%AB%A0-4337e7294fd3"><strong class="markup--strong markup--mixtapeEmbed-strong">請 AI 寫押韻的程式教學文章</strong><br><em class="markup--em markup--mixtapeEmbed-em">聽說 AI 除了會寫程式，它也是個浪漫的詩人。網路上有許多 GPT 4 寫押韻文章的有趣例子。</em>apppeterpan.medium.com</a><a href="https://apppeterpan.medium.com/%E8%AB%8B-ai-%E5%AF%AB%E6%8A%BC%E9%9F%BB%E7%9A%84%E7%A8%8B%E5%BC%8F%E6%95%99%E5%AD%B8%E6%96%87%E7%AB%A0-4337e7294fd3" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a265057d40dd352cfea63ff13c8e47d2" data-thumbnail-img-id="1*XnQtKQbmnH0X1kHpWeptAA.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*XnQtKQbmnH0X1kHpWeptAA.png);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/e211db7d8a63"><time class="dt-published" datetime="2018-01-16T15:01:59.802Z">January 16, 2018</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E7%B2%BE%E6%96%BC%E7%AE%97%E8%A8%88%E7%9A%84-computed-property-e211db7d8a63" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>