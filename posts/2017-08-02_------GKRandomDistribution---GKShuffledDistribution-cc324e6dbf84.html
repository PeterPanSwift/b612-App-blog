<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>產生亂數的 GKRandomDistribution &amp; GKShuffledDistribution</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">產生亂數的 GKRandomDistribution &amp; GKShuffledDistribution</h1>
</header>
<section data-field="subtitle" class="p-summary">
亂數(random number)是我們在開發 iOS App 時常用到的功能。尤其在製作遊戲或測驗 App 時，利用亂數才能讓電腦隨機做決定，比方以下人類的偉大發明，剪刀石頭布，利用亂數，電腦才能隨機出拳，不會傻傻地每次都出布。
</section>
<section data-field="body" class="e-content">
<section name="466e" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="ecda" id="ecda" class="graf graf--h3 graf--leading graf--title">產生亂數的 GKRandomDistribution &amp; GKShuffledDistribution</h3><p name="d1d1" id="d1d1" class="graf graf--p graf-after--h3">亂數(random number)是我們在開發 iOS App 時常用到的功能。尤其在製作遊戲或測驗 App 時，利用亂數才能讓電腦隨機做決定，比方以下人類的偉大發明，剪刀石頭布，利用亂數，電腦才能隨機出拳，不會傻傻地每次都出布。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="dee6" id="dee6" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*WDawl4PhKSxCZrwNSqgpiA.png" data-width="1118" data-height="1962" data-is-featured="true" src="https://cdn-images-1.medium.com/max/600/1*WDawl4PhKSxCZrwNSqgpiA.png"></figure><figure name="6f98" id="6f98" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*Nsbtg5HggIiVfMn2vAu3jQ.png" data-width="1118" data-height="1962" src="https://cdn-images-1.medium.com/max/600/1*Nsbtg5HggIiVfMn2vAu3jQ.png"></figure></div><div class="section-inner sectionLayout--insetColumn"><div name="6edf" id="6edf" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/%E5%89%AA%E5%88%80-%E7%9F%B3%E9%A0%AD-%E5%B8%83-app-%E6%88%96%E5%85%B6%E5%AE%83%E7%8C%9C%E6%8B%B3%E9%81%8A%E6%88%B2-2643747a6eb6" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/%E5%89%AA%E5%88%80-%E7%9F%B3%E9%A0%AD-%E5%B8%83-app-%E6%88%96%E5%85%B6%E5%AE%83%E7%8C%9C%E6%8B%B3%E9%81%8A%E6%88%B2-2643747a6eb6" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/%E5%89%AA%E5%88%80-%E7%9F%B3%E9%A0%AD-%E5%B8%83-app-%E6%88%96%E5%85%B6%E5%AE%83%E7%8C%9C%E6%8B%B3%E9%81%8A%E6%88%B2-2643747a6eb6"><strong class="markup--strong markup--mixtapeEmbed-strong">#10 猜拳遊戲 App</strong><br><em class="markup--em markup--mixtapeEmbed-em">目的: 熟練 outlet，action 和亂數。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/%E5%89%AA%E5%88%80-%E7%9F%B3%E9%A0%AD-%E5%B8%83-app-%E6%88%96%E5%85%B6%E5%AE%83%E7%8C%9C%E6%8B%B3%E9%81%8A%E6%88%B2-2643747a6eb6" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="4c0b43fb66693b1382d912201f17afc4" data-thumbnail-img-id="1*dCJpCrfl40BgKVou9cN1Hw.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*dCJpCrfl40BgKVou9cN1Hw.png);"></a></div><p name="ccb0" id="ccb0" class="graf graf--p graf-after--mixtapeEmbed">從前我們習慣利用 function arc4random_uniform 生成亂數，例如以下例子:</p><pre name="b8be" id="b8be" class="graf graf--pre graf-after--p">let rps = [&quot;rock&quot;, &quot;paper&quot;, &quot;scissors&quot;]</pre><pre name="627d" id="627d" class="graf graf--pre graf-after--pre">let index = Int(arc4random_uniform(UInt32(rps.count)))</pre><pre name="6544" id="6544" class="graf graf--pre graf-after--pre">rps[index]</pre><p name="d49d" id="d49d" class="graf graf--p graf-after--pre">麻煩的地方在於我們要做很多轉換才能變成我們習慣使用的 Int，因為 arc4random_uniform 只愛 UInt32。</p><pre name="7bbc" id="7bbc" class="graf graf--pre graf-after--p">func arc4random_uniform(_ __upper_bound: UInt32) -&gt; UInt32</pre><p name="8380" id="8380" class="graf graf--p graf-after--pre">幸運的，iOS 9 為了幫助我們製作遊戲推出的 GameplayKit framework，裡頭就有一個方便產生 Int 亂數的 function，讓我們看看以下例子:</p><pre name="830f" id="830f" class="graf graf--pre graf-after--p">import GameplayKit</pre><pre name="8099" id="8099" class="graf graf--pre graf-after--pre">let randomDistribution = GKRandomDistribution(lowestValue: 0, highestValue: 2)</pre><pre name="216d" id="216d" class="graf graf--pre graf-after--pre">let number = randomDistribution.nextInt()</pre><ol class="postList"><li name="5cb3" id="5cb3" class="graf graf--li graf-after--pre">產生 GKRandomDistribution 物件， lowestValue 設定數字的最小值，highestValue 設定最大值。在此我們設定 0 &amp; 2，因此 randomDistribution 之後將可產生 0 ~ 2 之間的亂數。</li><li name="30c9" id="30c9" class="graf graf--li graf-after--li">呼叫 GKRandomDistribution 物件的 function nextInt, 產生一個 Int 型別的亂數。在剛剛的例子裡，我們產生的數字將有三種可能，0，1，2。</li></ol><div name="8c42" id="8c42" class="graf graf--mixtapeEmbed graf-after--li"><a href="https://developer.apple.com/documentation/gameplaykit/gkrandomdistribution" data-href="https://developer.apple.com/documentation/gameplaykit/gkrandomdistribution" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/gameplaykit/gkrandomdistribution"><strong class="markup--strong markup--mixtapeEmbed-strong">GKRandomDistribution</strong><br><em class="markup--em markup--mixtapeEmbed-em">Important The randomization services provided in GameplayKit are suitable for reliably creating deterministic…</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/gameplaykit/gkrandomdistribution" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="60a8bd42146a8ad713439fd9dbd6cf70"></a></div><p name="9fd4" id="9fd4" class="graf graf--p graf-after--mixtapeEmbed">開發 iOS App 時，我們也時常遇到這樣的情況，我們希望隨機決定 array 裡東西的順序，比方我們有三個女朋友，必須妥善地分配時間，每天跟不同人約會，不讓任何一個被冷落。或是像考題 App，題庫有一百題，隨機出十題測驗，這時候必須確保不會出到重覆的題目。</p><p name="ddd1" id="ddd1" class="graf graf--p graf-after--p">如果利用剛剛的 GKRandomDistribution，我們也是可以做到，只是可能會產生一樣的數字，造成悲劇，例如以下例子:</p><pre name="6e32" id="6e32" class="graf graf--pre graf-after--p">var girlFriends = [&quot;小龍女&quot;, &quot;黃蓉&quot;, &quot;任盈盈&quot;]</pre><pre name="233c" id="233c" class="graf graf--pre graf-after--pre">let randomDistribution = GKRandomDistribution(lowestValue: 0, highestValue: girlFriends.count-1)</pre><pre name="2a19" id="2a19" class="graf graf--pre graf-after--pre">for i in 0..&lt;girlFriends.count {</pre><pre name="f961" id="f961" class="graf graf--pre graf-after--pre">   let index  = randomDistribution.nextInt()</pre><pre name="4e41" id="4e41" class="graf graf--pre graf-after--pre">   let name = girlFriends[index]</pre><pre name="a3c6" id="a3c6" class="graf graf--pre graf-after--pre">   print(&quot;跟&quot; + name + &quot;一起吃法國菜&quot;)</pre><pre name="1088" id="1088" class="graf graf--pre graf-after--pre">}</pre><p name="47b8" id="47b8" class="graf graf--p graf-after--pre">亂數的結果，黃蓉比較幸運，吃到兩次法國菜，但小龍女就慘了，只能在家吃泡麵。</p><figure name="1d34" id="1d34" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HBJsGxFx-KitcUjOWm8uFA.png" data-width="486" data-height="268" src="https://cdn-images-1.medium.com/max/800/1*HBJsGxFx-KitcUjOWm8uFA.png"></figure></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="e8f3" id="e8f3" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--figure" style="width: 33.729%;"><img class="graf-image" data-image-id="1*nUNeTX0FHkLitRjt5zDjDg.png" data-width="872" data-height="876" src="https://cdn-images-1.medium.com/max/600/1*nUNeTX0FHkLitRjt5zDjDg.png"></figure><figure name="ae9e" id="ae9e" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 30.576%;"><img class="graf-image" data-image-id="1*WgHJCw85UigqzDZgMJiw0Q.png" data-width="790" data-height="876" src="https://cdn-images-1.medium.com/max/400/1*WgHJCw85UigqzDZgMJiw0Q.png"></figure><figure name="72b8" id="72b8" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 35.695%;"><img class="graf-image" data-image-id="1*9Wpt7CJl5ii2o7nxjneS0w.png" data-width="868" data-height="824" src="https://cdn-images-1.medium.com/max/600/1*9Wpt7CJl5ii2o7nxjneS0w.png"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="54f9" id="54f9" class="graf graf--p graf-after--figure">為了解決這個問題，我們必須額外寫程式處理。不過如果透過 GKShuffledDistribution，我們即可輕鬆實現每天跟不同女朋友約會的心願，因為它十分公平，它將確保每一個數字出現的機率一樣。</p><p name="a5dd" id="a5dd" class="graf graf--p graf-after--p">如以下例子，我們的 for 迴圈跑三次，產生的隨機數字將平均分布，0, 1, 2 各一次，每個女朋友都可以幸福地吃到法國菜。</p><pre name="2cb5" id="2cb5" class="graf graf--pre graf-after--p">var girlFriends = [&quot;小龍女&quot;, &quot;黃蓉&quot;, &quot;任盈盈&quot;]</pre><pre name="22bd" id="22bd" class="graf graf--pre graf-after--pre">let shuffledDistribution = GKShuffledDistribution(lowestValue: 0, highestValue: girlFriends.count - 1)</pre><pre name="432b" id="432b" class="graf graf--pre graf-after--pre">for i in 0..&lt;girlFriends.count {</pre><pre name="ea3d" id="ea3d" class="graf graf--pre graf-after--pre">   let index  = shuffledDistribution.nextInt()</pre><pre name="f123" id="f123" class="graf graf--pre graf-after--pre">   let name = girlFriends[index]</pre><pre name="e987" id="e987" class="graf graf--pre graf-after--pre">   print(&quot;跟&quot; + name + &quot;一起吃法國菜&quot;)</pre><pre name="395e" id="395e" class="graf graf--pre graf-after--pre">}</pre><figure name="82ea" id="82ea" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*6NUUS8_HbX-icslVDELACg.png" data-width="502" data-height="280" src="https://cdn-images-1.medium.com/max/800/1*6NUUS8_HbX-icslVDELACg.png"></figure><div name="7265" id="7265" class="graf graf--mixtapeEmbed graf-after--figure graf--trailing"><a href="https://developer.apple.com/documentation/gameplaykit/gkshuffleddistribution" data-href="https://developer.apple.com/documentation/gameplaykit/gkshuffleddistribution" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/gameplaykit/gkshuffleddistribution"><strong class="markup--strong markup--mixtapeEmbed-strong">GKShuffledDistribution - GameplayKit | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">In this example, each distribution generates 100 random integers from a simulated six-sided die. In both cases, the…</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/gameplaykit/gkshuffleddistribution" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="17ef9c199087510d1c0ec8d1b7e00db4"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/cc324e6dbf84"><time class="dt-published" datetime="2017-08-02T08:08:46.005Z">August 2, 2017</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E7%94%A2%E7%94%9F%E4%BA%82%E6%95%B8%E7%9A%84-gkrandomdistribution-cc324e6dbf84" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>