<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>隨著換頁更新的  page control 小圓點</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">隨著換頁更新的  page control 小圓點</h1>
</header>
<section data-field="subtitle" class="p-summary">
使用 iOS App 時，我們時常看到貼心顯示目前所在分頁的小圓點，比方以下 IG App 畫面顯示三張可愛的小王子圖片，小圓點暗示著目前看到的照片是第幾張。
</section>
<section data-field="body" class="e-content">
<section name="cb37" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="85d3" id="85d3" class="graf graf--h3 graf--leading graf--title">隨著換頁更新的 page control 小圓點</h3><p name="aef3" id="aef3" class="graf graf--p graf-after--h3">使用 iOS App 時，我們時常看到貼心顯示目前所在分頁的小圓點，比方以下 IG App 畫面顯示三張可愛的小王子圖片，小圓點暗示著目前看到的照片是第幾張。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="8bf0" id="8bf0" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><img class="graf-image" data-image-id="1*4x9yHoKbqgyIZ8PlObgzqA.png" data-width="1125" data-height="2436" src="https://cdn-images-1.medium.com/max/400/1*4x9yHoKbqgyIZ8PlObgzqA.png"></figure><figure name="85db" id="85db" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*lBY8SejsYNMgk0hGa3vluw.png" data-width="1125" data-height="2436" src="https://cdn-images-1.medium.com/max/400/1*lBY8SejsYNMgk0hGa3vluw.png"></figure><figure name="e8f7" id="e8f7" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*Lq3I-thGvFV2IfrtL3u2HA.png" data-width="1125" data-height="2436" src="https://cdn-images-1.medium.com/max/400/1*Lq3I-thGvFV2IfrtL3u2HA.png"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="b736" id="b736" class="graf graf--p graf-after--figure">小圓點的型別是 UIPageControl，接下來我們將一步步示範如何加入隨著換頁更新的小圓點。</p><figure name="ba83" id="ba83" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*bFE6zazDF_a_lid4mZS0Uw.jpeg" data-width="1698" data-height="1000" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*bFE6zazDF_a_lid4mZS0Uw.jpeg"></figure><h3 name="44e9" id="44e9" class="graf graf--h3 graf-after--figure">實作水平滑動的分頁畫面</h3><p name="cf42" id="cf42" class="graf graf--p graf-after--h3">實現水平滑動的分頁有許多做法，可以用 scroll view，collection view，page view controller，SwiftUI 等。接下來我們假設先參考以下連結，以 stack view 搭配 scroll view 實現。</p><div name="6758" id="6758" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/stack-view-scroll-view-%E8%A3%BD%E4%BD%9C%E5%88%86%E9%A0%81-tutorial-%E6%87%B6%E5%BE%97%E5%AF%AB%E7%A8%8B%E5%BC%8F%E7%89%88-7ff9021317a0" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/stack-view-scroll-view-%E8%A3%BD%E4%BD%9C%E5%88%86%E9%A0%81-tutorial-%E6%87%B6%E5%BE%97%E5%AF%AB%E7%A8%8B%E5%BC%8F%E7%89%88-7ff9021317a0" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/stack-view-scroll-view-%E8%A3%BD%E4%BD%9C%E5%88%86%E9%A0%81-tutorial-%E6%87%B6%E5%BE%97%E5%AF%AB%E7%A8%8B%E5%BC%8F%E7%89%88-7ff9021317a0"><strong class="markup--strong markup--mixtapeEmbed-strong">stack view + scroll view 製作分頁 tutorial (懶得寫程式版)</strong><br><em class="markup--em markup--mixtapeEmbed-em">在開發 iOS App 時，我們時常以表格實現上下捲動的畫面。那如果是水平左右捲動的畫面呢 ? 左右捲動一般而言比較麻煩，往往要搭配程式，使用 scroll view ，collection view 或 page view…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/stack-view-scroll-view-%E8%A3%BD%E4%BD%9C%E5%88%86%E9%A0%81-tutorial-%E6%87%B6%E5%BE%97%E5%AF%AB%E7%A8%8B%E5%BC%8F%E7%89%88-7ff9021317a0" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="7456af11059e9c9ebc60ddbcc2aca61b" data-thumbnail-img-id="1*dMdaxe9XGuJBz6-DUJ5fDA.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*dMdaxe9XGuJBz6-DUJ5fDA.jpeg);"></a></div></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="5dd0" id="5dd0" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--mixtapeEmbed" style="width: 50%;"><img class="graf-image" data-image-id="1*glUc8KIuXu1adJcxWIuyhw.jpeg" data-width="832" data-height="1556" src="https://cdn-images-1.medium.com/max/600/1*glUc8KIuXu1adJcxWIuyhw.jpeg"></figure><figure name="8353" id="8353" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*OtgrYCzG3m93PVTPqBEAvg.jpeg" data-width="832" data-height="1556" src="https://cdn-images-1.medium.com/max/600/1*OtgrYCzG3m93PVTPqBEAvg.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="8808" id="8808" class="graf graf--h3 graf-after--figure">加入 page control，設定 auto layout 條件</h3><p name="4d34" id="4d34" class="graf graf--p graf-after--h3">記得 page control 不能加在 scroll view 裡，如果加在 scroll view 上，它會隨著滑動一起移動。我們想要 page control 的小圓點固定在畫面上，滑動時只會更新目前所在頁面的小圓點顏色。</p><figure name="a6ac" id="a6ac" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*rSyypgDpPHt-bR2Gekw-3A.jpeg" data-width="952" data-height="898" src="https://cdn-images-1.medium.com/max/800/1*rSyypgDpPHt-bR2Gekw-3A.jpeg"></figure><p name="05ed" id="05ed" class="graf graf--p graf-after--figure">設定頁數為 5。(# of Pages)</p><figure name="c1d9" id="c1d9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*wGQFrTL2-HorPk2vCUhKEw.jpeg" data-width="522" data-height="274" src="https://cdn-images-1.medium.com/max/800/1*wGQFrTL2-HorPk2vCUhKEw.jpeg"></figure><p name="2091" id="2091" class="graf graf--p graf-after--figure">設定 page control 的 Auto Layout 條件。</p><figure name="8915" id="8915" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*eoOBhNRkYL3Eu8Rzio1swQ.jpeg" data-width="504" data-height="294" src="https://cdn-images-1.medium.com/max/800/1*eoOBhNRkYL3Eu8Rzio1swQ.jpeg"></figure><h3 name="0aca" id="0aca" class="graf graf--h3 graf-after--figure">連結 page control 的 outlet</h3><p name="e212" id="e212" class="graf graf--p graf-after--h3">page control 的 property currentPage 代表目前在第幾頁，當它為 0 時，表示在第一頁，第一個小圓點會變色。當它為 1 時，表示在第二頁，第二個小圓點會變色，其它以下類推。</p><div name="c82a" id="c82a" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/uikit/uipagecontrol/1621234-currentpage" data-href="https://developer.apple.com/documentation/uikit/uipagecontrol/1621234-currentpage" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/uikit/uipagecontrol/1621234-currentpage"><strong class="markup--strong markup--mixtapeEmbed-strong">Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/uikit/uipagecontrol/1621234-currentpage" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="13fc8abc8f3e667099fcf2b26c24d38f"></a></div><p name="0816" id="0816" class="graf graf--p graf-after--mixtapeEmbed">我們的目標是從程式判斷目前滑動到第幾頁，然後更新 page control 的 currentPage。所以我們的第一步是連結 page control 的 outlet，之後才能從程式設定它的 currentPage。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="4121" id="4121" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> pageControl: <span class="hljs-type">UIPageControl</span>!</span></pre><h3 name="10df" id="10df" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">設定 scroll view 的 delegate 為 view controller</strong></h3><p name="e57a" id="e57a" class="graf graf--p graf-after--h3">當 scroll view 滑動停在某個分頁時，它將呼叫 delegate 的 function，因此我們將 controller 設為 scroll view 的 delegate，之後再定義 delegate 的 function。</p><p name="b02a" id="b02a" class="graf graf--p graf-after--p">從 scroll view 連線到 view controller 後放開觸控板。</p><figure name="14bf" id="14bf" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*_8VDB587PkNNniL8WX2ZoA.jpeg" data-width="484" data-height="307" src="https://cdn-images-1.medium.com/max/800/1*_8VDB587PkNNniL8WX2ZoA.jpeg"></figure><p name="93ee" id="93ee" class="graf graf--p graf-after--figure">選擇 delegate。</p><figure name="bdc7" id="bdc7" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*pdCF46OaQX0X1urm_jpB-w.jpeg" data-width="532" data-height="264" src="https://cdn-images-1.medium.com/max/800/1*pdCF46OaQX0X1urm_jpB-w.jpeg"></figure><p name="6c05" id="6c05" class="graf graf--p graf-after--figure">此時 view controller 順利成為 scroll view 的 delegate。</p><figure name="6120" id="6120" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*fY9ipkzmhkxiMJZCBjqEiA.jpeg" data-width="1226" data-height="514" src="https://cdn-images-1.medium.com/max/800/1*fY9ipkzmhkxiMJZCBjqEiA.jpeg"></figure><h3 name="ab40" id="ab40" class="graf graf--h3 graf-after--figure"><strong class="markup--strong markup--h3-strong">讓 controller 遵從 protocol UIScrollViewDelegate</strong></h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="9db6" id="9db6" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIScrollViewDelegate</span> {<br />    <br />}</span></pre><h3 name="f99e" id="f99e" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">定義 protocol UIScrollViewDelegate 的 function scrollViewDidEndDecelerating(_:)</strong></h3><p name="c228" id="c228" class="graf graf--p graf-after--h3">此 function 將在 scroll view 滑動停止時呼叫。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="d8e0" id="d8e0" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIScrollViewDelegate</span> {<br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">scrollViewDidEndDecelerating</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">scrollView</span>: <span class="hljs-type">UIScrollView</span>) {<br />        <br />    }<br />}</span></pre><p name="7b30" id="7b30" class="graf graf--p graf-after--pre">我們在其中寫程式判斷目前在第幾頁，然後更新小圓點。以下程式算出目前所在頁數後，更新 page control 的 currentPage。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="9553" id="9553" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">func</span> <span class="hljs-title function_">scrollViewDidEndDecelerating</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">scrollView</span>: <span class="hljs-type">UIScrollView</span>) {<br />        <span class="hljs-keyword">let</span> page <span class="hljs-operator">=</span> scrollView.contentOffset.x <span class="hljs-operator">/</span> scrollView.bounds.width<br />        pageControl.currentPage <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(page)<br />}</span></pre><p name="42f7" id="42f7" class="graf graf--p graf-after--pre">scrollView.bounds.width 是 scroll view 的寬度，也是分頁的寬度。假設分頁的寬度是 100，那麼第一頁的 x 座標將是 0 ~ 100，第二頁是 100 ~ 200。</p><p name="b056" id="b056" class="graf graf--p graf-after--p">而 scrollView.contentOffset.x 則是目前滑動的水平距離，比方數字 50 表示向左滑動了 50 的距離。由於我們將 scroll view 設為分頁模式(isPagingEnabled 為 true)，當 scroll view 滑動停止時，它一定剛好停在某個分頁。當 function scrollViewDidEndDecelerating(_:) 被呼叫時，scrollView.contentOffset.x 將為分頁寬度的倍數。比方分頁寬度 100，x 可能會是 0，100，200。因此 <code class="markup--code markup--p-code">scrollView.contentOffset.x / scrollView.bounds.width</code> 可算出目前所在的分頁。比方 scrollView.contentOffset.x 為 200 時，200 / 100 是 2，表示在第三頁。(別忘了第一頁的數字是 0)</p><h3 name="0845" id="0845" class="graf graf--h3 graf-after--p">結果</h3><p name="5812" id="5812" class="graf graf--p graf-after--h3">當我們滑動分頁時，下方的小圓點也乖乖聽話地更新顏色了。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="c21f" id="c21f" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><img class="graf-image" data-image-id="1*ivpXHJ2Rh59MbBmxzzPqRw.jpeg" data-width="832" data-height="1556" src="https://cdn-images-1.medium.com/max/400/1*ivpXHJ2Rh59MbBmxzzPqRw.jpeg"></figure><figure name="3798" id="3798" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*B_2me1xAgdBElQ2xQd5aRA.jpeg" data-width="832" data-height="1556" src="https://cdn-images-1.medium.com/max/400/1*B_2me1xAgdBElQ2xQd5aRA.jpeg"></figure><figure name="0642" id="0642" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*g1xnvihSjahhuW6Hd_L6Uw.jpeg" data-width="832" data-height="1556" src="https://cdn-images-1.medium.com/max/400/1*g1xnvihSjahhuW6Hd_L6Uw.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="80a1" id="80a1" class="graf graf--h3 graf-after--figure">點選或拖曳小圓點時更新頁面</h3><p name="56c8" id="56c8" class="graf graf--p graf-after--h3">我們可以在小圓點上用點選或拖曳的方式快速移動到某個小圓點(ps: iOS 14 才支援拖曳)，不過預設只有小圓點會更新，頁面並不會更新，我們必須另外加入更新頁面的程式。</p><ul class="postList"><li name="0256" id="0256" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">連結 scroll view 的 outlet。</strong></li></ul><p name="bdb0" id="bdb0" class="graf graf--p graf-after--li">為了從程式控制 scroll view 移動到某一頁，我們必須先連結它的 outlet。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="6828" id="6828" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> scrollView: <span class="hljs-type">UIScrollView</span>!</span></pre><ul class="postList"><li name="eb90" id="eb90" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">連結 page control 的 action function，綁定 value changed event。</strong></li></ul><p name="fe92" id="fe92" class="graf graf--p graf-after--li">在小圓點上點選或拖曳造成小圓點更新時，將觸發 page control 的 value change event。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="7278" id="7278" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">changePage</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-type">UIPageControl</span>) {<br />       <br />        <br />}</span></pre><figure name="1d8a" id="1d8a" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*ootfgslVJA2xNSQ6hmu4dA.jpeg" data-width="1302" data-height="908" src="https://cdn-images-1.medium.com/max/800/1*ootfgslVJA2xNSQ6hmu4dA.jpeg"></figure><ul class="postList"><li name="629a" id="629a" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">更新頁面。</strong></li></ul><p name="85ce" id="85ce" class="graf graf--p graf-after--li">依據 page control 的 currentPage 計算 scroll view 要移動到的 offset。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="d8b8" id="d8b8" class="graf graf--pre graf-after--p graf--trailing graf--preV2"><span class="pre--content"><span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">changePage</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-type">UIPageControl</span>) {<br />        <span class="hljs-keyword">let</span> point <span class="hljs-operator">=</span> <span class="hljs-type">CGPoint</span>(x: scrollView.bounds.width <span class="hljs-operator">*</span> <span class="hljs-type">CGFloat</span>(sender.currentPage), y: <span class="hljs-number">0</span>)<br />        scrollView.setContentOffset(point, animated: <span class="hljs-literal">true</span>)<br />        <br />}</span></pre></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/24f631c1928c"><time class="dt-published" datetime="2020-08-05T08:10:02.062Z">August 5, 2020</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E9%9A%A8%E8%91%97%E6%8F%9B%E9%A0%81%E6%9B%B4%E6%96%B0%E7%9A%84-page-control-%E5%B0%8F%E5%9C%93%E9%BB%9E-24f631c1928c" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>