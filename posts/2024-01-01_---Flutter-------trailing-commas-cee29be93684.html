<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>幫助 Flutter 縮排程式的 trailing-commas</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">幫助 Flutter 縮排程式的 trailing-commas</h1>
</header>
<section data-field="subtitle" class="p-summary">
從 Dart 3.7 開始，IDE 在縮排程式時將貼心地檢查程式。當它發現某行程式太長時，它會自動補上 trailing-commas(在 function、method、constructor、list…
</section>
<section data-field="body" class="e-content">
<section name="6da0" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="5829" id="5829" class="graf graf--h3 graf--leading graf--title">幫助 Flutter 縮排程式的 trailing-commas</h3><p name="fe29" id="fe29" class="graf graf--p graf-after--h3">從 Dart 3.7 開始，IDE 在縮排程式時將貼心地檢查程式。當它發現某行程式太長時，它會自動補上 trailing-commas(在 function、method、constructor、list 的最後一個參數或成員之後加逗號)，將每個參數或成員放在新的一行，讓程式有更好的可讀性。</p><div name="dde0" id="dde0" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/dartlang/announcing-dart-3-7-bf864a1b195c" data-href="https://medium.com/dartlang/announcing-dart-3-7-bf864a1b195c" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/dartlang/announcing-dart-3-7-bf864a1b195c"><strong class="markup--strong markup--mixtapeEmbed-strong">Announcing Dart 3.7</strong><br><em class="markup--em markup--mixtapeEmbed-em">It’s a new year, and time for a new Dart stable release. Welcome to Dart 3.7!</em>medium.com</a><a href="https://medium.com/dartlang/announcing-dart-3-7-bf864a1b195c" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="d684dbfe69c4b2a1a4dbf0f21f04cc9c" data-thumbnail-img-id="1*tdCaUfGrIk42FIuu2qs9Yw.gif" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*tdCaUfGrIk42FIuu2qs9Yw.gif);"></a></div><p name="b52d" id="b52d" class="graf graf--p graf-after--mixtapeEmbed">以下我們以 VS Code / Project IDX 為例，先介紹手動縮排，再介紹更方便的存檔時自動縮排。</p><ul class="postList"><li name="5d3b" id="5d3b" class="graf graf--li graf-after--p">手動點選 Format Document 縮排。</li><li name="e08e" id="e08e" class="graf graf--li graf-after--li">存檔時自動縮排。</li></ul><h3 name="4312" id="4312" class="graf graf--h3 graf-after--li">手動點選 Format Document 縮排</h3><p name="4a7d" id="4a7d" class="graf graf--p graf-after--h3">以下是沒有 trailing-commas 的例子，雖然只是簡單的 <code class="markup--code markup--p-code">Hello, SwiftUI</code>，全部擠在一行的 <code class="markup--code markup--p-code">return const Scaffold(body: Center(child: Text(&#39;I guess Peter Pan was right. Growing up is a waste of time.&#39;)));</code> 還是讓人看得有點辛苦。(ps: 文字內容來自 Anson Seabra 的 Peter Pan Was Right)</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="5164" id="5164" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> MyHomePage({<span class="hljs-keyword">super</span>.key});<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Scaffold(body: Center(child: Text(<span class="hljs-string">&#x27;I guess Peter Pan was right. Growing up is a waste of time.&#x27;</span>)));<br />  }<br />}</span></pre><p name="f150" id="f150" class="graf graf--p graf-after--pre">叫出 Command Palette(cmd + shift + p)，點選 Format Document。</p><figure name="10eb" id="10eb" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*KcZIf03Px5Jk8WpxEqUZDg.png" data-width="1776" data-height="190" src="https://cdn-images-1.medium.com/max/800/1*KcZIf03Px5Jk8WpxEqUZDg.png"></figure><p name="9a82" id="9a82" class="graf graf--p graf-after--figure">IDE 自動補上 trailing-commas，Scaffold，Center 和 Text 的 ( ) 裡都加上逗號，原本擠在一行的程式聰明地換行縮排，程式可讀性大大提高了 !</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="b19e" id="b19e" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> MyHomePage({<span class="hljs-keyword">super</span>.key});<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Scaffold(<br />      body: Center(<br />        child: Text(<br />          <span class="hljs-string">&#x27;I guess Peter Pan was right. Growing up is a waste of time.&#x27;</span>,<br />        ),<br />      ),<br />    );<br />  }<br />}</span></pre><p name="ccac" id="ccac" class="graf graf--p graf-after--pre">以下是另一個複雜一點加上參數 style 的例子。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="21f2" id="21f2" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> MyHomePage({<span class="hljs-keyword">super</span>.key});<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Scaffold(<br />      body: Center(<br />        child: Text(<br />          <span class="hljs-string">&#x27;I guess Peter Pan was right. Growing up is a waste of time.&#x27;</span>,<br />          style: TextStyle(fontSize: <span class="hljs-number">32</span>, fontWeight: FontWeight.bold),<br />        ),<br />      ),<br />    );<br />  }<br />}</span></pre><p name="affc" id="affc" class="graf graf--p graf-after--pre">值得注意的，IDE 只會在太長的程式補上 trailing-commas，因此以上程式的 TextStyle( ) 沒在最後一個參數 fontWeight 後加上逗號。</p><p name="f76c" id="f76c" class="graf graf--p graf-after--p">那如果我們自己替 fontWeight 補上逗號和縮排呢 ?</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="7e55" id="7e55" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> MyHomePage({<span class="hljs-keyword">super</span>.key});<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Scaffold(<br />      body: Center(<br />        child: Text(<br />          <span class="hljs-string">&#x27;I guess Peter Pan was right. Growing up is a waste of time.&#x27;</span>,<br />          style: TextStyle(<br />            fontSize: <span class="hljs-number">32</span>, <br />            fontWeight: FontWeight.bold,<br />          ),<br />        ),<br />      ),<br />    );<br />  }<br />}</span></pre><p name="f49d" id="f49d" class="graf graf--p graf-after--pre">點選 Format Document 後 IDE 會移除 fontWeight 的逗號和相關的縮排，因為它覺得 <code class="markup--code markup--p-code">style: TextStyle(fontSize: 32, fontWeight: FontWeight.bold)</code> 不夠長，不需要縮排。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="b6f1" id="b6f1" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> MyHomePage({<span class="hljs-keyword">super</span>.key});<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Scaffold(<br />      body: Center(<br />        child: Text(<br />          <span class="hljs-string">&#x27;I guess Peter Pan was right. Growing up is a waste of time.&#x27;</span>,<br />          style: TextStyle(fontSize: <span class="hljs-number">32</span>, fontWeight: FontWeight.bold),<br />        ),<br />      ),<br />    );<br />  }<br />}</span></pre><h3 name="b8f3" id="b8f3" class="graf graf--h3 graf-after--pre">存檔時自動縮排</h3><p name="37ae" id="37ae" class="graf graf--p graf-after--h3">如果不想每次縮排時麻煩地點選 Format Document，我們也可以設定 IDE 存檔時自動縮排，方法如下。</p><p name="b804" id="b804" class="graf graf--p graf-after--p">從 command palette 點選 Open Settings。</p><figure name="926b" id="926b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*t8k8yzXvaS9wd79UHRnGJg.png" data-width="1234" data-height="258" src="https://cdn-images-1.medium.com/max/800/1*t8k8yzXvaS9wd79UHRnGJg.png"></figure><p name="61fc" id="61fc" class="graf graf--p graf-after--figure">切換到 Text Editor &gt; Formatting 頁面，勾選 Format on Save。</p><figure name="4316" id="4316" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*8MXFclHvbra0T7uxyd2t4g.png" data-width="1385" data-height="711" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*8MXFclHvbra0T7uxyd2t4g.png"></figure><p name="ad42" id="ad42" class="graf graf--p graf-after--figure">之後想要縮排時，我們只要按下 <code class="markup--code markup--p-code">cmd + s</code> 即可讓檔案裡的程式自動縮排換行。</p><h3 name="4e1d" id="4e1d" class="graf graf--h3 graf-after--p">輸入結束符號時自動縮排</h3><p name="232c" id="232c" class="graf graf--p graf-after--h3">我們也可以輸入結束符號，比方 ; 時自動縮排，方法如下。</p><p name="fef4" id="fef4" class="graf graf--p graf-after--p">從 command palette 點選 Open Settings，勾選 Format on Type。</p><figure name="38ec" id="38ec" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*LCJxvkDkq5lEXtKQjYgg_w.png" data-width="2542" data-height="634" src="https://cdn-images-1.medium.com/max/800/1*LCJxvkDkq5lEXtKQjYgg_w.png"></figure><h3 name="30ae" id="30ae" class="graf graf--h3 graf-after--figure">設定縮排換行的長度</h3><p name="7e43" id="7e43" class="graf graf--p graf-after--h3">IDE 檢查到程式太長時會補上 trailing-commas 並換行縮排，若是不喜歡預設判斷的長度，我們也可以在 analysis_options.yaml 設定 formatter 的 page_width。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="yaml" name="3485" id="3485" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-attr">formatter:</span><br />  <span class="hljs-attr">page_width:</span> <span class="hljs-number">69</span></span></pre><p name="eb80" id="eb80" class="graf graf--p graf-after--pre">當我們加了 page_width: 69 後，TextStyle 那行程式也會補上 trailing-commas 和換行縮排。</p><figure name="5671" id="5671" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*zRizmeh0Y443ib81PcP1Dg.png" data-width="1790" data-height="872" src="https://cdn-images-1.medium.com/max/800/1*zRizmeh0Y443ib81PcP1Dg.png"></figure><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="dfc4" id="dfc4" class="graf graf--pre graf-after--figure graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> MyHomePage({<span class="hljs-keyword">super</span>.key});<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Scaffold(<br />      body: Center(<br />        child: Text(<br />          <span class="hljs-string">&#x27;I guess Peter Pan was right. Growing up is a waste of time.&#x27;</span>,<br />          style: TextStyle(<br />            fontSize: <span class="hljs-number">32</span>,<br />            fontWeight: FontWeight.bold,<br />          ),<br />        ),<br />      ),<br />    );<br />  }<br />}</span></pre><h3 name="c1ab" id="c1ab" class="graf graf--h3 graf-after--pre">One more thing，請 AI 加入 trailing commas</h3><p name="f12a" id="f12a" class="graf graf--p graf-after--h3">我們也可以請 AI 幫忙加入 trailing commas。</p><p name="a45b" id="a45b" class="graf graf--p graf-after--p">以下是沒有 trailing commas 的版本，程式的縮排有點凌亂。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="61f1" id="61f1" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SteveJobsPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> SteveJobsPage({<span class="hljs-keyword">super</span>.key});<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> Scaffold(<br />      appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;Steve Jobs&#x27;</span>)),<br />      body: Column(<br />        crossAxisAlignment: CrossAxisAlignment.start,<br />        children: [<br />          Image.asset(<span class="hljs-string">&#x27;assets/steve_jobs.jpg&#x27;</span>),<br />          <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;Steve Jobs&#x27;</span>, style: TextStyle(fontSize: <span class="hljs-number">24</span>, fontWeight: FontWeight.bold)),<br />          <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;Co-founder of Apple Inc.&#x27;</span>, style: TextStyle(fontSize: <span class="hljs-number">18</span>)),<br />          <span class="hljs-keyword">const</span> Padding(padding: EdgeInsets.all(<span class="hljs-number">8.0</span>), child: Text(<span class="hljs-string">&#x27;&quot;Your work is going to fill a large part of your life, and the only way to be truly satisfied is to do what you believe is great work. And the only way to do great work is to love what you do.&quot; - Steve Jobs&#x27;</span>, style: TextStyle(fontSize: <span class="hljs-number">16</span>, fontStyle: FontStyle.italic)))<br />        ]));<br />  }<br />}</span></pre><p name="8195" id="8195" class="graf graf--p graf-after--pre">以下是 AI 加上 trailing commas 的版本，搭配自動縮排後程式的可讀性大大提升。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="66ec" id="66ec" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SteveJobsPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> SteveJobsPage({<span class="hljs-keyword">super</span>.key});<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> Scaffold(<br />      appBar: AppBar(<br />        title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;Steve Jobs&#x27;</span>),<br />      ),<br />      body: Column(<br />        crossAxisAlignment: CrossAxisAlignment.start,<br />        children: [<br />          Image.asset(<span class="hljs-string">&#x27;assets/steve_jobs.jpg&#x27;</span>),<br />          <span class="hljs-keyword">const</span> Text(<br />            <span class="hljs-string">&#x27;Steve Jobs&#x27;</span>, <br />            style: TextStyle(<br />              fontSize: <span class="hljs-number">24</span>, <br />              fontWeight: FontWeight.bold,<br />            ),<br />          ),<br />          <span class="hljs-keyword">const</span> Text(<br />            <span class="hljs-string">&#x27;Co-founder of Apple Inc.&#x27;</span>, <br />            style: TextStyle(fontSize: <span class="hljs-number">18</span>),<br />          ),<br />          <span class="hljs-keyword">const</span> Padding(<br />            padding: EdgeInsets.all(<span class="hljs-number">8.0</span>), <br />            child: Text(<br />              <span class="hljs-string">&#x27;&quot;Your work is going to fill a large part of your life, and the only way to be truly satisfied is to do what you believe is great work. And the only way to do great work is to love what you do.&quot; - Steve Jobs&#x27;</span>, <br />              style: TextStyle(<br />                fontSize: <span class="hljs-number">16</span>, <br />                fontStyle: FontStyle.italic,<br />              ),<br />            ),<br />          ),<br />        ],<br />      ),<br />    );<br />  }<br />}</span></pre><h3 name="bf68" id="bf68" class="graf graf--h3 graf-after--pre">參考連結</h3><div name="c85f" id="c85f" class="graf graf--mixtapeEmbed graf-after--h3 graf--trailing"><a href="https://docs.flutter.dev/tools/formatting#using-trailing-commas" data-href="https://docs.flutter.dev/tools/formatting#using-trailing-commas" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://docs.flutter.dev/tools/formatting#using-trailing-commas"><strong class="markup--strong markup--mixtapeEmbed-strong">Code formatting</strong><br><em class="markup--em markup--mixtapeEmbed-em">Flutter&#39;s code formatter formats your code following recommended style guidelines.</em>docs.flutter.dev</a><a href="https://docs.flutter.dev/tools/formatting#using-trailing-commas" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="786ac5a31f5bdc389a0b6d80e1dff2c3" data-thumbnail-img-id="0*8vbLO7TeVYctOrOs" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*8vbLO7TeVYctOrOs);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/cee29be93684"><time class="dt-published" datetime="2024-01-01T08:06:54.465Z">January 1, 2024</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%B9%AB%E5%8A%A9-flutter-%E7%B8%AE%E6%8E%92%E7%A8%8B%E5%BC%8F%E7%9A%84-trailing-commas-cee29be93684" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>