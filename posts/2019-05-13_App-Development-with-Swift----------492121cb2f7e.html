<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>App Development with Swift 程式範例重點整理</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">App Development with Swift 程式範例重點整理</h1>
</header>
<section data-field="subtitle" class="p-summary">
自訂的類別繼承 iOS SDK 內建類別時，類別名常以父類別名稱結尾。
</section>
<section data-field="body" class="e-content">
<section name="75ce" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="410d" id="410d" class="graf graf--h3 graf--leading graf--title">App Development with Swift 程式範例重點整理</h3><h3 name="40d9" id="40d9" class="graf graf--h3 graf-after--h3">自訂的類別繼承 iOS SDK 內建類別時，類別名常以父類別名稱結尾。</h3><pre name="15f0" id="15f0" class="graf graf--pre graf-after--h3">class QuestionViewController: UIViewController</pre><pre name="af2c" id="af2c" class="graf graf--pre graf-after--pre">class ResultsViewController: UIViewController</pre><pre name="8423" id="8423" class="graf graf--pre graf-after--pre">class AddEditEmojiTableViewController: UITableViewController</pre><h3 name="700a" id="700a" class="graf graf--h3 graf-after--pre">表單 controller 的命名</h3><p name="022a" id="022a" class="graf graf--p graf-after--h3">使用 form，add，edit 等關鍵字。</p><pre name="b740" id="b740" class="graf graf--pre graf-after--p">class BookFormTableViewController: UITableViewController</pre><pre name="5093" id="5093" class="graf graf--pre graf-after--pre">class AddEditEmojiTableViewController: UITableViewController</pre><pre name="39fa" id="39fa" class="graf graf--pre graf-after--pre">class AthleteFormViewController: UIViewController</pre><pre name="5a44" id="5a44" class="graf graf--pre graf-after--pre">class AddRegistrationTableViewController: UITableViewController</pre><h3 name="2358" id="2358" class="graf graf--h3 graf-after--pre">detail 頁面的 controller 名稱</h3><p name="6da2" id="6da2" class="graf graf--p graf-after--h3">東西名加 Detail。</p><pre name="1ea8" id="1ea8" class="graf graf--pre graf-after--p">class FurnitureDetailViewController: UIViewController</pre><h3 name="4225" id="4225" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">畫面上的 UI 元件，變數名稱結尾和型別有關。</strong></h3><pre name="6512" id="6512" class="graf graf--pre graf-after--h3">@IBOutlet weak var questionLabel: UILabel!</pre><pre name="75f8" id="75f8" class="graf graf--pre graf-after--pre">@IBOutlet weak var multipleStackView: UIStackView!</pre><pre name="c921" id="c921" class="graf graf--pre graf-after--pre">@IBOutlet weak var rangedSlider: UISlider!</pre><pre name="66f6" id="66f6" class="graf graf--pre graf-after--pre">@IBOutlet weak var questionProgressView: UIProgressView!</pre><h3 name="fced" id="fced" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">array 型別的變數名加 s。</strong></h3><pre name="4c14" id="4c14" class="graf graf--pre graf-after--h3">var questions: [Question]</pre><pre name="90fe" id="90fe" class="graf graf--pre graf-after--pre">var answersChosen: [Answer]</pre><pre name="d23b" id="d23b" class="graf graf--pre graf-after--pre">var responses: [Answer]!</pre><pre name="1b6f" id="1b6f" class="graf graf--pre graf-after--pre">var meals: [Meal]</pre><h3 name="3785" id="3785" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">UI 元件事件觸發的 function 名和事件有關。</strong></h3><pre name="558d" id="558d" class="graf graf--pre graf-after--h3">@IBAction func singleAnswerButtonPressed(_ sender: UIButton)</pre><pre name="b9a4" id="b9a4" class="graf graf--pre graf-after--pre">@IBAction func multipleAnswerButtonPressed()</pre><pre name="d393" id="d393" class="graf graf--pre graf-after--pre">@IBAction func rangedAnswerButtonPressed()</pre><pre name="d959" id="d959" class="graf graf--pre graf-after--pre">@IBAction func sliderChanged(_ sender: UISlider)</pre><p name="7242" id="7242" class="graf graf--p graf-after--pre">button 按下的 function 常以 Pressed 或 Tapped 結尾。</p><pre name="8f30" id="8f30" class="graf graf--pre graf-after--p">@IBAction func rangedAnswerButtonPressed()</pre><pre name="5315" id="5315" class="graf graf--pre graf-after--pre">@IBAction func editButtonTapped(_ sender: UIBarButtonItem)</pre><h3 name="0639" id="0639" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">將設定畫面內容的程式定義成 update 開頭的 function</strong></h3><p name="8688" id="8688" class="graf graf--p graf-after--h3">controller 一般會有一段設定畫面內容的程式，而且會在多個時候設定，比方 viewDidLoad &amp; viewWillAppear，或是抓到網路上的資料後。所以你可將設定畫面內容的程式另外定義成 update 開頭的 function，如此需要設定畫面內容時，只要呼叫此 function 即可。</p><p name="ff88" id="ff88" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">UpdateUI: 設定 controller 的畫面。</strong></p><figure name="5aea" id="5aea" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*W2DfVbvuWer5Mj9rtPzVFw.jpeg" data-width="818" data-height="1378" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*W2DfVbvuWer5Mj9rtPzVFw.jpeg"></figure><pre name="1309" id="1309" class="graf graf--pre graf-after--figure">override func viewDidLoad() {</pre><pre name="cd41" id="cd41" class="graf graf--pre graf-after--pre">   super.viewDidLoad()</pre><pre name="19a1" id="19a1" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   updateUI()</strong></pre><pre name="e00d" id="e00d" class="graf graf--pre graf-after--pre">}</pre><pre name="dbfe" id="dbfe" class="graf graf--pre graf-after--pre">func nextQuestion() {</pre><pre name="c807" id="c807" class="graf graf--pre graf-after--pre">   questionIndex += 1</pre><pre name="c142" id="c142" class="graf graf--pre graf-after--pre">   if questionIndex &lt; questions.count {</pre><pre name="eaca" id="eaca" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      updateUI()</strong></pre><pre name="018a" id="018a" class="graf graf--pre graf-after--pre">   } else {</pre><pre name="0bb9" id="0bb9" class="graf graf--pre graf-after--pre">      performSegue(withIdentifier: &quot;ResultsSegue&quot;, sender: nil)</pre><pre name="facd" id="facd" class="graf graf--pre graf-after--pre">   }</pre><pre name="d202" id="d202" class="graf graf--pre graf-after--pre">}</pre><p name="f0f8" id="f0f8" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">updateSingleStack: 設定 stack view 的內容。</strong></p><pre name="b340" id="b340" class="graf graf--pre graf-after--p">func updateSingleStack(using answers: [Answer]) {</pre><pre name="34b3" id="34b3" class="graf graf--pre graf-after--pre">   singleStackView.isHidden = false</pre><pre name="d8ba" id="d8ba" class="graf graf--pre graf-after--pre">   singleButton1.setTitle(answers[0].text, for: .normal)</pre><pre name="94f4" id="94f4" class="graf graf--pre graf-after--pre">   singleButton2.setTitle(answers[1].text, for: .normal)</pre><pre name="4d38" id="4d38" class="graf graf--pre graf-after--pre">   singleButton3.setTitle(answers[2].text, for: .normal)</pre><pre name="b0b3" id="b0b3" class="graf graf--pre graf-after--pre">   singleButton4.setTitle(answers[3].text, for: .normal)</pre><pre name="e8d7" id="e8d7" class="graf graf--pre graf-after--pre">}</pre><p name="b1ea" id="b1ea" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">updateView: 設定 controller 的畫面。</strong></p><pre name="aaad" id="aaad" class="graf graf--pre graf-after--p">func updateView() {</pre><pre name="7f97" id="7f97" class="graf graf--pre graf-after--pre">   didFinishLaunchingLabel.text = &quot;The app has launched \(launchCount) times&quot;</pre><pre name="b8fc" id="b8fc" class="graf graf--pre graf-after--pre">   willResignActiveLabel.text = &quot;applicationWillResignActive has been called \(resignActiveCount) times&quot;</pre><pre name="e735" id="e735" class="graf graf--pre graf-after--pre">}</pre><pre name="75e2" id="75e2" class="graf graf--pre graf-after--pre">override func viewDidLoad() {</pre><pre name="b6b8" id="b6b8" class="graf graf--pre graf-after--pre">   super.viewDidLoad()</pre><pre name="7562" id="7562" class="graf graf--pre graf-after--pre">   updateView()</pre><pre name="bd23" id="bd23" class="graf graf--pre graf-after--pre">}</pre><p name="3572" id="3572" class="graf graf--p graf-after--pre">另外像設定 cell 內容的程式也常寫成 update 開頭的 function，詳情請看待會的說明。</p><h3 name="85d2" id="85d2" class="graf graf--h3 graf-after--p">將設定 cell 顯示內容的程式定義成 function</h3><p name="49e3" id="49e3" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">方法1: 在自訂 cell 裡定義名稱以 update 開頭的 function</strong></p><p name="cd09" id="cd09" class="graf graf--p graf-after--p">為了減少 tableView(_:cellForRowAt:) 的程式碼，我們可在自訂的 cell 類別裡定義設定內容的 function，名稱以 update 開頭，參數為要顯示的 model 資料。</p><p name="a876" id="a876" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">4.6 Intermediate table views</strong></p><figure name="0890" id="0890" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*awsG_Y6WOrWAU5wPnaZ5ww.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/800/1*awsG_Y6WOrWAU5wPnaZ5ww.jpeg"></figure><p name="ac37" id="ac37" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">class EmojiTableViewCell</strong></p><p name="3b68" id="3b68" class="graf graf--p graf-after--p">將外部參數名取名為 with，讓程式更好懂。</p><pre name="d59c" id="d59c" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">   func update(with emoji: Emoji) {</strong></pre><pre name="1357" id="1357" class="graf graf--pre graf-after--pre">      symbolLabel.text = emoji.symbol</pre><pre name="cb5e" id="cb5e" class="graf graf--pre graf-after--pre">      nameLabel.text = emoji.name</pre><pre name="f0e2" id="f0e2" class="graf graf--pre graf-after--pre">      descriptionLabel.text = emoji.detailDescription</pre><pre name="e834" id="e834" class="graf graf--pre graf-after--pre">   }</pre><p name="35c9" id="35c9" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">class EmojiTableViewController</strong></p><pre name="78ce" id="78ce" class="graf graf--pre graf-after--p">   override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {</pre><pre name="5753" id="5753" class="graf graf--pre graf-after--pre">      let cell = tableView.dequeueReusableCell(withIdentifier: &quot;EmojiCell&quot;, for: indexPath) as! EmojiTableViewCell</pre><pre name="405d" id="405d" class="graf graf--pre graf-after--pre">      let emoji = emojis[indexPath.row]</pre><pre name="1535" id="1535" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      cell.update(with: emoji)</strong></pre><pre name="2d03" id="2d03" class="graf graf--pre graf-after--pre">      cell.showsReorderControl = true</pre><pre name="8e6d" id="8e6d" class="graf graf--pre graf-after--pre">      return cell</pre><pre name="2aa2" id="2aa2" class="graf graf--pre graf-after--pre">   }</pre><p name="9037" id="9037" class="graf graf--p graf-after--pre">其它例子: 4.6 Lab — Favorite books</p><pre name="994a" id="994a" class="graf graf--pre graf-after--p">class BookTableViewCell: UITableViewCell {</pre><pre name="e353" id="e353" class="graf graf--pre graf-after--pre">   func update(with book: Book) {</pre><pre name="2082" id="2082" class="graf graf--pre graf-after--pre">   }</pre><pre name="193c" id="193c" class="graf graf--pre graf-after--pre">}</pre><p name="2672" id="2672" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">方法2: 在 controller 裡定義設定 cell 內容的 function，如以下例子裡的 configure(cell:forItemAt:)。</strong></p><p name="aae0" id="aae0" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Unit 5 Guided Project Restaurant</strong></p><figure name="f55f" id="f55f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*p4QEanb9lAnaT-JSwPjubA.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/800/1*p4QEanb9lAnaT-JSwPjubA.jpeg"></figure><p name="517a" id="517a" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">class CategoryTableViewController</strong></p><pre name="42ff" id="42ff" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">func configure(_ cell: UITableViewCell, forItemAt indexPath: IndexPath)</strong> {</pre><pre name="0a04" id="0a04" class="graf graf--pre graf-after--pre">   let categoryString = categories[indexPath.row]</pre><pre name="db57" id="db57" class="graf graf--pre graf-after--pre">   cell.textLabel?.text = categoryString.capitalized</pre><pre name="40f3" id="40f3" class="graf graf--pre graf-after--pre">}</pre><pre name="a269" id="a269" class="graf graf--pre graf-after--pre">override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {</pre><pre name="8113" id="8113" class="graf graf--pre graf-after--pre">   let cell = tableView.dequeueReusableCell(withIdentifier: &quot;CategoryCellIdentifier&quot;, for: indexPath)</pre><pre name="38fb" id="38fb" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   configure(cell, forItemAt: indexPath)</strong></pre><pre name="7288" id="7288" class="graf graf--pre graf-after--pre">   return cell</pre><pre name="0c99" id="0c99" class="graf graf--pre graf-after--pre">}</pre><h3 name="f3ef" id="f3ef" class="graf graf--h3 graf-after--pre">代表第幾個的變數名以 Index 結尾。</h3><p name="2a70" id="2a70" class="graf graf--p graf-after--h3">比方 array 裡儲存問題，利用 questionIndex 儲存使用者目前回答到第幾個問題。</p><pre name="0262" id="0262" class="graf graf--pre graf-after--p">var questionIndex = 0</pre><h3 name="dd82" id="dd82" class="graf graf--h3 graf-after--pre">常以 struct 定義資料(model)型別。</h3><pre name="2056" id="2056" class="graf graf--pre graf-after--h3">struct Question {</pre><pre name="52ab" id="52ab" class="graf graf--pre graf-after--pre">   var text: String</pre><pre name="fb84" id="fb84" class="graf graf--pre graf-after--pre">   var type: ResponseType</pre><pre name="4987" id="4987" class="graf graf--pre graf-after--pre">   var answers: [Answer]</pre><pre name="3d99" id="3d99" class="graf graf--pre graf-after--pre">}</pre><h3 name="0949" id="0949" class="graf graf--h3 graf-after--pre">大量使用 stack view</h3><p name="d023" id="d023" class="graf graf--p graf-after--h3">Apple 書本裡大量使用 stack view，因為大部分的 App 畫面都是單純地水平或垂直排列，很適合以 stack view 實作，大幅減少需要手動設定 auto layout 條件。</p><p name="5757" id="5757" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Unit 2 Guided Project Apple Pie</strong></p><figure name="fef0" id="fef0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*aOIsLafdXxS4SZsJy-ppPg.jpeg" data-width="1642" data-height="908" src="https://cdn-images-1.medium.com/max/800/1*aOIsLafdXxS4SZsJy-ppPg.jpeg"></figure><p name="2879" id="2879" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Unit 3 Guided Project Personality quiz</strong></p><figure name="4d43" id="4d43" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Y77I7gkFU3AWDKrZNI106A.jpeg" data-width="1054" data-height="984" src="https://cdn-images-1.medium.com/max/800/1*Y77I7gkFU3AWDKrZNI106A.jpeg"></figure><figure name="d198" id="d198" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*5Z_rceffAwy6KmrA8AxAAg.jpeg" data-width="1046" data-height="1088" src="https://cdn-images-1.medium.com/max/800/1*5Z_rceffAwy6KmrA8AxAAg.jpeg"></figure><h3 name="7588" id="7588" class="graf graf--h3 graf-after--figure">代表次數的變數名以 count 結尾。</h3><pre name="cbb1" id="cbb1" class="graf graf--pre graf-after--h3">var launchCount = 0</pre><h3 name="2dc2" id="2dc2" class="graf graf--h3 graf-after--pre">儲存資料的 function 以 save 開頭</h3><pre name="562a" id="562a" class="graf graf--pre graf-after--h3">func saveMeals()</pre><pre name="ecbd" id="ecbd" class="graf graf--pre graf-after--pre">static func saveToFile(emojis: [Emoji])</pre><h3 name="3f6d" id="3f6d" class="graf graf--h3 graf-after--pre">讀取資料的 function 以 load 開頭</h3><pre name="78b4" id="78b4" class="graf graf--pre graf-after--h3">func loadMeals()</pre><pre name="8cff" id="8cff" class="graf graf--pre graf-after--pre">static func loadFromFile() -&gt; [Emoji]?</pre><h3 name="1255" id="1255" class="graf graf--h3 graf-after--pre">列表頁面 &amp; detail 頁面</h3><p name="c020" id="c020" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">列表頁面:</strong></p><p name="0d4c" id="0d4c" class="graf graf--p graf-after--p">通常使用 table view controller，利用 property array 儲存列表顯示的東西。</p><pre name="ebc3" id="ebc3" class="graf graf--pre graf-after--p">class MealListTableViewController: UITableViewController {</pre><pre name="5375" id="5375" class="graf graf--pre graf-after--pre">   var meals: [Meal] = []</pre><p name="1d92" id="1d92" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">detail 頁面:</strong></p><p name="ff3e" id="ff3e" class="graf graf--p graf-after--p">通常使用 view controller，利用 optional 的 property 儲存顯示的東西，property 的內容則由前一頁的列表 controller 傳過來，比方在列表 controller 的 function prepare 設定。</p><pre name="0395" id="0395" class="graf graf--pre graf-after--p">class MealDetailViewController: UIViewController {</pre><pre name="7467" id="7467" class="graf graf--pre graf-after--pre">   var meal: Meal?</pre><h3 name="c3f9" id="c3f9" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">資料或結果頁面常見的程式寫法</strong></h3><p name="4089" id="4089" class="graf graf--p graf-after--h3">接收前一頁傳來的資料，顯示某個資料的 detail，或是接收前一頁傳來的結果，比方顯示心理測驗或遊戲的結果。</p><p name="3139" id="3139" class="graf graf--p graf-after--p">定義 optional 的 property 儲存前一頁傳來的資料，定義 function updateView，在 updateView 裡將 property 的內容顯示到畫面上。</p><p name="27da" id="27da" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">4.3 Model View Controller 的 Lab Favorite Athletes</strong></p><p name="822b" id="822b" class="graf graf--p graf-after--p">利用 guard 檢查 optional 的 property 是否有值。比方以下的 AthleteFormViewController 也可當成新增資料的頁面，因此在新增資料時 athlete 會是 nil。</p><pre name="594b" id="594b" class="graf graf--pre graf-after--p">class AthleteFormViewController: UIViewController {</pre><pre name="fab1" id="fab1" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   var athlete: Athlete?</strong></pre><pre name="2ee6" id="2ee6" class="graf graf--pre graf-after--pre">   @IBOutlet weak var nameTextField: UITextField!</pre><pre name="bc7f" id="bc7f" class="graf graf--pre graf-after--pre">   @IBOutlet weak var ageTextField: UITextField!</pre><pre name="204f" id="204f" class="graf graf--pre graf-after--pre">   @IBOutlet weak var leagueTextField: UITextField!</pre><pre name="ee30" id="ee30" class="graf graf--pre graf-after--pre">   @IBOutlet weak var teamTextField: UITextField!</pre><pre name="57f2" id="57f2" class="graf graf--pre graf-after--pre">   override func viewDidLoad() {</pre><pre name="17b4" id="17b4" class="graf graf--pre graf-after--pre">      super.viewDidLoad()</pre><pre name="b5d3" id="b5d3" class="graf graf--pre graf-after--pre">      updateView()</pre><pre name="889e" id="889e" class="graf graf--pre graf-after--pre">   }</pre><pre name="4703" id="4703" class="graf graf--pre graf-after--pre">   func updateView() {</pre><pre name="49f3" id="49f3" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      guard let athlete = athlete else {return}</strong></pre><pre name="a54c" id="a54c" class="graf graf--pre graf-after--pre">      nameTextField.text = athlete.name</pre><pre name="35c7" id="35c7" class="graf graf--pre graf-after--pre">      ageTextField.text = athlete.age</pre><pre name="b0c7" id="b0c7" class="graf graf--pre graf-after--pre">      leagueTextField.text = athlete.league</pre><pre name="c4a8" id="c4a8" class="graf graf--pre graf-after--pre">      teamTextField.text = athlete.team</pre><pre name="9fb1" id="9fb1" class="graf graf--pre graf-after--pre">   }</pre><pre name="3e3e" id="3e3e" class="graf graf--pre graf-after--pre">}</pre><p name="c3f1" id="c3f1" class="graf graf--p graf-after--pre">如果 detail 的 controller 頁面沒有要做新增修改，只是要顯示前一頁傳過來的東西，也可以將 property 以 Implicitly Unwrapped Optional ! 宣告。</p><p name="50cb" id="50cb" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Unit 3 guided project personality quiz</strong></p><p name="eec9" id="eec9" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">class ResultsViewController</strong></p><pre name="5edf" id="5edf" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">var responses: [Answer]!</strong></pre><pre name="ca4e" id="ca4e" class="graf graf--pre graf-after--pre">override func viewDidLoad() {</pre><pre name="a4e7" id="a4e7" class="graf graf--pre graf-after--pre">   super.viewDidLoad()</pre><pre name="81fc" id="81fc" class="graf graf--pre graf-after--pre">   navigationItem.hidesBackButton = true</pre><pre name="9298" id="9298" class="graf graf--pre graf-after--pre">   calculatePersonalityResult()</pre><pre name="655d" id="655d" class="graf graf--pre graf-after--pre">}</pre><h3 name="d526" id="d526" class="graf graf--h3 graf-after--pre">利用 unwind segue 返回之前頁面和回傳資料</h3><p name="692d" id="692d" class="graf graf--p graf-after--h3">比方可在 unwind segue 的 function 新增或修改列表上的資料。</p><p name="5514" id="5514" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">4.3 Model View Controller 的 Lab Favorite Athletes</strong></p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="dec1" id="dec1" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*HQdKNbgrz8asHDQNT-VEjw.jpeg" data-width="876" data-height="1492" src="https://cdn-images-1.medium.com/max/600/1*HQdKNbgrz8asHDQNT-VEjw.jpeg"></figure><figure name="c365" id="c365" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*4p8tnkzrQ-YIPh1Pt2Ttcg.jpeg" data-width="876" data-height="1492" src="https://cdn-images-1.medium.com/max/600/1*4p8tnkzrQ-YIPh1Pt2Ttcg.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="cd20" id="cd20" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">class AthleteFormViewController</strong></p><p name="93f2" id="93f2" class="graf graf--p graf-after--p">檢查表單資料是否 ok，ok 的話再建立資料，返回前一頁。</p><pre name="a227" id="a227" class="graf graf--pre graf-after--p">@IBAction func saveButtonTapped(_ sender: Any) {</pre><pre name="cf6c" id="cf6c" class="graf graf--pre graf-after--pre">   guard let name = nameTextField.text,</pre><pre name="4178" id="4178" class="graf graf--pre graf-after--pre">      let age = ageTextField.text,</pre><pre name="23f9" id="23f9" class="graf graf--pre graf-after--pre">      let league = leagueTextField.text,</pre><pre name="4620" id="4620" class="graf graf--pre graf-after--pre">      let team = teamTextField.text else {return}</pre><pre name="f660" id="f660" class="graf graf--pre graf-after--pre">   athlete = Athlete(name: name, age: age, league: league, team: team)</pre><pre name="5ff9" id="5ff9" class="graf graf--pre graf-after--pre">   performSegue(withIdentifier: PropertyKeys.unwind, sender: self)</pre><pre name="cf6e" id="cf6e" class="graf graf--pre graf-after--pre">}</pre><p name="ec80" id="ec80" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">class AthleteTableViewController</strong></p><p name="b990" id="b990" class="graf graf--p graf-after--p">在 unwind segue 的 function 新增或修改資料。</p><pre name="da23" id="da23" class="graf graf--pre graf-after--p">@IBAction func prepareForUnwind(segue: UIStoryboardSegue) {</pre><pre name="c7d5" id="c7d5" class="graf graf--pre graf-after--pre">   guard let source = segue.source as? AthleteFormViewController,</pre><pre name="cac6" id="cac6" class="graf graf--pre graf-after--pre">      let athlete = source.athlete else {return}</pre><pre name="7892" id="7892" class="graf graf--pre graf-after--pre">   if let indexPath = tableView.indexPathForSelectedRow {</pre><pre name="8638" id="8638" class="graf graf--pre graf-after--pre">      athletes.remove(at: indexPath.row)</pre><pre name="a6f3" id="a6f3" class="graf graf--pre graf-after--pre">      athletes.insert(athlete, at: indexPath.row)</pre><pre name="2acc" id="2acc" class="graf graf--pre graf-after--pre">      tableView.deselectRow(at: indexPath, animated: true)</pre><pre name="a39a" id="a39a" class="graf graf--pre graf-after--pre">   } else {</pre><pre name="e831" id="e831" class="graf graf--pre graf-after--pre">      athletes.append(athlete)</pre><pre name="8d3b" id="8d3b" class="graf graf--pre graf-after--pre">   }</pre><pre name="4e49" id="4e49" class="graf graf--pre graf-after--pre">}</pre><p name="0510" id="0510" class="graf graf--p graf-after--pre">眼尖的朋友應該會注意到剛剛的程式只有修改 array，畫面不會更新。沒錯，因為此範例是在 viewWillAppear 裡呼叫 reloadData 更新表格。</p><pre name="18cc" id="18cc" class="graf graf--pre graf-after--p">override func viewWillAppear(_ animated: Bool) {</pre><pre name="800d" id="800d" class="graf graf--pre graf-after--pre">   super.viewWillAppear(animated)</pre><pre name="5ec6" id="5ec6" class="graf graf--pre graf-after--pre">   tableView.reloadData()</pre><pre name="a7b6" id="a7b6" class="graf graf--pre graf-after--pre">}</pre><p name="1430" id="1430" class="graf graf--p graf-after--pre">unwind segue 參考連結</p><div name="a540" id="a540" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/%E5%88%A9%E7%94%A8-unwind-segue-%E5%B0%87%E8%A1%A8%E6%A0%BC%E9%81%B8%E6%93%87%E7%9A%84%E7%B5%90%E6%9E%9C%E5%9B%9E%E5%82%B3-app-%E5%8A%9F%E8%83%BD%E5%AF%A6%E4%BD%9C%E8%A7%A3%E5%AF%86-1-c66a731f9380" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/%E5%88%A9%E7%94%A8-unwind-segue-%E5%B0%87%E8%A1%A8%E6%A0%BC%E9%81%B8%E6%93%87%E7%9A%84%E7%B5%90%E6%9E%9C%E5%9B%9E%E5%82%B3-app-%E5%8A%9F%E8%83%BD%E5%AF%A6%E4%BD%9C%E8%A7%A3%E5%AF%86-1-c66a731f9380" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/%E5%88%A9%E7%94%A8-unwind-segue-%E5%B0%87%E8%A1%A8%E6%A0%BC%E9%81%B8%E6%93%87%E7%9A%84%E7%B5%90%E6%9E%9C%E5%9B%9E%E5%82%B3-app-%E5%8A%9F%E8%83%BD%E5%AF%A6%E4%BD%9C%E8%A7%A3%E5%AF%86-1-c66a731f9380"><strong class="markup--strong markup--mixtapeEmbed-strong">#68 利用 unwind segue 將表格選擇的結果回傳 — App 功能實作解密 1</strong><br><em class="markup--em markup--mixtapeEmbed-em">使用 iOS App 時，我們時常看到進入下一頁的表格，點選某個 cell 後返回前一頁並將結果回傳的設計，比方以下 Calendar &amp; Clock App 的例子。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/%E5%88%A9%E7%94%A8-unwind-segue-%E5%B0%87%E8%A1%A8%E6%A0%BC%E9%81%B8%E6%93%87%E7%9A%84%E7%B5%90%E6%9E%9C%E5%9B%9E%E5%82%B3-app-%E5%8A%9F%E8%83%BD%E5%AF%A6%E4%BD%9C%E8%A7%A3%E5%AF%86-1-c66a731f9380" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="f03388c55d397eb0269159a623d4fda5" data-thumbnail-img-id="1*Cvp0tf--BBGhB5HRLn0LHA.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*Cvp0tf--BBGhB5HRLn0LHA.png);"></a></div><h3 name="ba6f" id="ba6f" class="graf graf--h3 graf-after--mixtapeEmbed"><strong class="markup--strong markup--h3-strong">一個 file 定義一個型別。</strong></h3><p name="219e" id="219e" class="graf graf--p graf-after--h3">比方 Car.swift，Driver.swift。</p><h3 name="d321" id="d321" class="graf graf--h3 graf-after--p">MVC, model controller 和 helper controller</h3><p name="8eac" id="8eac" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">4.3 Model View Controller</strong></p><p name="8479" id="8479" class="graf graf--p graf-after--p">iOS App 開發最常見的架構為 MVC，不過在書本裡，Apple 提到 C 其實可細分為以下三種，，讓程式的分工更清楚。</p><ul class="postList"><li name="7935" id="7935" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">view controller</strong></li><li name="666e" id="666e" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">model controller</strong></li></ul><p name="560a" id="560a" class="graf graf--p graf-after--li">負責實現 model 的相關功能。使用 model controller 的原因可能有三種:</p><p name="74a2" id="74a2" class="graf graf--p graf-after--p">(1) Multiple objects or scenes need access to the model data.</p><p name="5a83" id="5a83" class="graf graf--p graf-after--p">(2) The logic for adding, modifying, or deleting model data is complex.</p><p name="d3dc" id="d3dc" class="graf graf--p graf-after--p">(3) You want to keep the code in your view controllers focused on managing the views</p><p name="21e3" id="21e3" class="graf graf--p graf-after--p">比方你在做一個筆記 App，要處理 Note 的新增，刪除，修改等，你可以另外定義 NoteController 實現相關功能，而不用把大量的程式寫在 view controller 或 note 裡。</p><ul class="postList"><li name="d457" id="d457" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">helper controller</strong></li><li name="d043" id="d043" class="graf graf--li graf-after--li">負責特定的功能，比方使用 NetworkController 處理 App 跟後台溝通的部分。</li></ul><p name="3159" id="3159" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">App 實例:</strong></p><pre name="411a" id="411a" class="graf graf--pre graf-after--p">Controller objects are free to communicate or work directly with other controller objects. Consider the examples above. The initial view controller (NoteListViewController) of a Notes app might be responsible for displaying a list of notes, so it accesses the notes property on a note model controller (NoteController). The note controller needs to check if there are any new notes, so it tells the network controller (NetworkController) to check the web service for new data. If the NetworkController finds new notes, it downloads the data and sends it back to the NoteController, which would then update its notes property and send a callback to the NoteListViewController that it has new data, enabling the NoteListViewController to update its view of notes.</pre><p name="8724" id="8724" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">範例:</strong></p><p name="ca06" id="ca06" class="graf graf--p graf-after--p">MealListTableViewController，MealDetailViewController，Meal</p><h3 name="d6b8" id="d6b8" class="graf graf--h3 graf-after--p">iOS App 的 Xcode 專案如何分類檔案(project organization)</h3><div name="5b28" id="5b28" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E7%9A%84-xcode-%E5%B0%88%E6%A1%88%E5%A6%82%E4%BD%95%E5%88%86%E9%A1%9E%E6%AA%94%E6%A1%88-project-organization-e18d6fb5060a" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E7%9A%84-xcode-%E5%B0%88%E6%A1%88%E5%A6%82%E4%BD%95%E5%88%86%E9%A1%9E%E6%AA%94%E6%A1%88-project-organization-e18d6fb5060a" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E7%9A%84-xcode-%E5%B0%88%E6%A1%88%E5%A6%82%E4%BD%95%E5%88%86%E9%A1%9E%E6%AA%94%E6%A1%88-project-organization-e18d6fb5060a"><strong class="markup--strong markup--mixtapeEmbed-strong">iOS App 的 Xcode 專案如何分類檔案(project organization)</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，隨著我們的技術愈來愈厲害，能夠開發愈多的功能和畫面，專案裡的檔案往往也愈來愈多。此時最好能將檔案做個分類，在 project navigator 建立 group(黃色資料夾)，方便我們一目瞭然了解 App…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E7%9A%84-xcode-%E5%B0%88%E6%A1%88%E5%A6%82%E4%BD%95%E5%88%86%E9%A1%9E%E6%AA%94%E6%A1%88-project-organization-e18d6fb5060a" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="136ac42fa05a5562710bec037f230ba4" data-thumbnail-img-id="1*5STzEu_pL0q03PKoqdAYTg.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*5STzEu_pL0q03PKoqdAYTg.jpeg);"></a></div><h3 name="d779" id="d779" class="graf graf--h3 graf-after--mixtapeEmbed">將字串定義成型別常數</h3><p name="9a6d" id="9a6d" class="graf graf--p graf-after--h3">開發 iOS App 時，總有某些東西是我們無法避免，必須以字串輸入的，比方 segue ID，cell ID，storyboard ID 等。然而只要你一不小心打錯，將產生非常可怕的後果，輕則功能失效，重則讓 App 閃退，地球毀滅 ！</p><p name="5acc" id="5acc" class="graf graf--p graf-after--p">因此，不妨參考 Apple 的做法，將字串定義成型別常數，到時輸入時 Xcode 將幫我們自動完成，一輩子都不會打錯。</p><p name="3f97" id="3f97" class="graf graf--p graf-after--p">讓我們看看以下幾個例子:</p><blockquote name="b689" id="b689" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">在 controller 裡以 struct 定義型別 </strong><code class="markup--code markup--blockquote-code"><strong class="markup--strong markup--blockquote-strong">PropertyKeys</strong></code><strong class="markup--strong markup--blockquote-strong">，宣告 static 屬性儲存 segue ID 和 cell ID。</strong></blockquote><p name="5eeb" id="5eeb" class="graf graf--p graf-after--blockquote"><strong class="markup--strong markup--p-strong">4.3 Model View Controller 的 Lab Favorite Athletes</strong></p><pre name="2141" id="2141" class="graf graf--pre graf-after--p">class AthleteTableViewController: UITableViewController {</pre><pre name="19d8" id="19d8" class="graf graf--pre graf-after--pre">  <strong class="markup--strong markup--pre-strong"> struct PropertyKeys {</strong></pre><pre name="5202" id="5202" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      static let athleteCell = &quot;AthleteCell&quot;</strong></pre><pre name="9521" id="9521" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      static let addAthleteSegue = &quot;AddAthlete&quot;</strong></pre><pre name="79dc" id="79dc" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      static let editAthleteSegue = &quot;EditAthlete&quot;</strong></pre><pre name="3d8d" id="3d8d" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   }</strong></pre><pre name="1379" id="1379" class="graf graf--pre graf-after--pre">}</pre><pre name="a093" id="a093" class="graf graf--pre graf-after--pre">class AthleteFormViewController: UIViewController {</pre><pre name="9763" id="9763" class="graf graf--pre graf-after--pre">  <strong class="markup--strong markup--pre-strong"> struct PropertyKeys {</strong></pre><pre name="c3cd" id="c3cd" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">       static let unwind = &quot;UnwindToAthleteTable&quot;</strong></pre><pre name="4cf5" id="4cf5" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   }</strong></pre><pre name="fe35" id="fe35" class="graf graf--pre graf-after--pre">}</pre><p name="4ca4" id="4ca4" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">4.6 Intermediate Table Views 的 Lab Favorite books</strong></p><p name="c13c" id="c13c" class="graf graf--p graf-after--p">將 unwind segue id 存在常數 unwind，之便之後呼叫 performSegue 時使用。</p><pre name="8034" id="8034" class="graf graf--pre graf-after--p">class BookFormTableViewController: UITableViewController {</pre><pre name="1f61" id="1f61" class="graf graf--pre graf-after--pre">   <strong class="markup--strong markup--pre-strong">struct PropertyKeys {</strong></pre><pre name="4eac" id="4eac" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      static let unwind = &quot;UnwindToBookTable&quot;</strong></pre><pre name="f0dc" id="f0dc" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   }</strong></pre><pre name="7bce" id="7bce" class="graf graf--pre graf-after--pre">}</pre><p name="6754" id="6754" class="graf graf--p graf-after--pre">用常數儲存 add &amp; edit segue 的 id &amp; cell 的 id，之後在 prepare 裡可以比對 segue id，在 tableView(_:cellForRowAt:) 可以使用 cell id。</p><pre name="c6b8" id="c6b8" class="graf graf--pre graf-after--p">class BookTableViewController: UITableViewController {</pre><pre name="5513" id="5513" class="graf graf--pre graf-after--pre">  <strong class="markup--strong markup--pre-strong"> struct PropertyKeys {</strong></pre><pre name="75ab" id="75ab" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      static let bookCell = &quot;BookCell&quot;</strong></pre><pre name="7b45" id="7b45" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      static let addBookSegue = &quot;AddBook&quot;</strong></pre><pre name="4788" id="4788" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      static let editBookSegue = &quot;EditBook&quot;</strong></pre><pre name="2768" id="2768" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   }</strong></pre><pre name="f6db" id="f6db" class="graf graf--pre graf-after--pre">}</pre><blockquote name="353f" id="353f" class="graf graf--blockquote graf-after--pre"><strong class="markup--strong markup--blockquote-strong">Storyboard ID</strong></blockquote><p name="2aaf" id="2aaf" class="graf graf--p graf-after--blockquote">以 struct 定義型別 StoryboardID，宣告屬性儲存 storyboard ID。</p><pre name="ed0d" id="ed0d" class="graf graf--pre graf-after--p">struct StoryboardID {</pre><pre name="344e" id="344e" class="graf graf--pre graf-after--pre">   static let main = &quot;Main&quot;</pre><pre name="22b5" id="22b5" class="graf graf--pre graf-after--pre">   static let mainNC = &quot;MainNC&quot;</pre><pre name="abf8" id="abf8" class="graf graf--pre graf-after--pre">   static let zoneNC = &quot;ZoneNC&quot;</pre><pre name="c3e8" id="c3e8" class="graf graf--pre graf-after--pre">   static let note = &quot;Note&quot;</pre><pre name="3a25" id="3a25" class="graf graf--pre graf-after--pre">   static let noteNC = &quot;NoteNC&quot;</pre><pre name="c23f" id="c23f" class="graf graf--pre graf-after--pre">}</pre><p name="b26a" id="b26a" class="graf graf--p graf-after--pre">在 controller 裡宣告屬性 storyboardIdentifier 儲存它的 storyboard ID。</p><pre name="d97d" id="d97d" class="graf graf--pre graf-after--p">class BuildIceCreamViewController: UIViewController {</pre><pre name="2af2" id="2af2" class="graf graf--pre graf-after--pre">   static let storyboardIdentifier = &quot;BuildIceCreamViewController&quot;</pre><pre name="3975" id="3975" class="graf graf--pre graf-after--pre">}</pre><blockquote name="9497" id="9497" class="graf graf--blockquote graf-after--pre"><strong class="markup--strong markup--blockquote-strong">Notification name</strong></blockquote><p name="21c1" id="21c1" class="graf graf--p graf-after--blockquote">定義 static 常數儲存通知名稱。</p><p name="5325" id="5325" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Unit 5 Guided project Restaurant</strong></p><pre name="47d4" id="47d4" class="graf graf--pre graf-after--p">class MenuController {</pre><pre name="b519" id="b519" class="graf graf--pre graf-after--pre">   static let orderUpdatedNotification = Notification.Name(&quot;MenuController.orderUpdated&quot;)</pre><blockquote name="87b8" id="87b8" class="graf graf--blockquote graf-after--pre"><strong class="markup--strong markup--blockquote-strong">4. Dictionary 的 key</strong></blockquote><p name="3348" id="3348" class="graf graf--p graf-after--blockquote">以 struct 定義型別 NotificationObjectKey，宣告屬性儲存 Notification 的 userInfo 裡自訂的 key。</p><pre name="0aab" id="0aab" class="graf graf--pre graf-after--p">struct NotificationObjectKey {</pre><pre name="ce14" id="ce14" class="graf graf--pre graf-after--pre">   static let reason = &quot;reason&quot;</pre><pre name="f35b" id="f35b" class="graf graf--pre graf-after--pre">   static let recordIDsDeleted = &quot;recordIDsDeleted&quot;</pre><pre name="4203" id="4203" class="graf graf--pre graf-after--pre">   static let recordsChanged = &quot;recordsChanged&quot;</pre><pre name="12e5" id="12e5" class="graf graf--pre graf-after--pre">   static let newNote = &quot;newNote&quot;</pre><pre name="3b45" id="3b45" class="graf graf--pre graf-after--pre">}</pre><h3 name="da08" id="da08" class="graf graf--h3 graf-after--pre">搭配 guard let 建立自訂型別的 cell</h3><p name="b61a" id="b61a" class="graf graf--p graf-after--h3">建立自訂類別的 cell 時，如果你很有信心，覺得不可能失敗，可使用 as! 強制轉型。</p><pre name="2b5b" id="2b5b" class="graf graf--pre graf-after--p">override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {</pre><pre name="b527" id="b527" class="graf graf--pre graf-after--pre">   <strong class="markup--strong markup--pre-strong">let cell = tableView.dequeueReusableCell(withIdentifier: PropertyKeys.loverCell, for: indexPath) as! BookTableViewCell</strong></pre><pre name="c664" id="c664" class="graf graf--pre graf-after--pre">   let book = books[indexPath.row]</pre><pre name="d45c" id="d45c" class="graf graf--pre graf-after--pre">   cell.update(with: book)</pre><pre name="a091" id="a091" class="graf graf--pre graf-after--pre">   return cell</pre><pre name="369e" id="369e" class="graf graf--pre graf-after--pre">}</pre><p name="deef" id="deef" class="graf graf--p graf-after--pre">不過也可以考慮較安全的做法，使用 <code class="markup--code markup--p-code">guard let</code> 讀取搭配 <code class="markup--code markup--p-code">as?</code> 轉型的 cell。</p><pre name="be69" id="be69" class="graf graf--pre graf-after--p">override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {</pre><pre name="d15c" id="d15c" class="graf graf--pre graf-after--pre">   <strong class="markup--strong markup--pre-strong">guard let cell = tableView.dequeueReusableCell(withIdentifier: PropertyKeys.loverCell, for: indexPath) as? BookTableViewCell else</strong> {</pre><pre name="10f8" id="10f8" class="graf graf--pre graf-after--pre">      fatalError(“Could not dequeue a cell”)</pre><pre name="93e5" id="93e5" class="graf graf--pre graf-after--pre">   }</pre><pre name="cc1f" id="cc1f" class="graf graf--pre graf-after--pre">   let book = books[indexPath.row]</pre><pre name="712b" id="712b" class="graf graf--pre graf-after--pre">   cell.update(with: book)</pre><pre name="3857" id="3857" class="graf graf--pre graf-after--pre">   return cell</pre><pre name="a8db" id="a8db" class="graf graf--pre graf-after--pre">}</pre><h3 name="040f" id="040f" class="graf graf--h3 graf-after--pre">利用 guard let 或 if let 比對多個 optional，檢查使用者輸入的內容。</h3><p name="b49a" id="b49a" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">4.3 Model View Controller 的 Lab Favorite Athletes</strong></p><p name="6004" id="6004" class="graf graf--p graf-after--p">表單內容 ok 時，才會建立資料，利用 performSegue 回到前一頁。</p><pre name="5c61" id="5c61" class="graf graf--pre graf-after--p">@IBAction func saveButtonTapped(_ sender: Any) {</pre><pre name="b30c" id="b30c" class="graf graf--pre graf-after--pre">   guard let name = nameTextField.text,  </pre><pre name="32d3" id="32d3" class="graf graf--pre graf-after--pre">      let age = ageTextField.text,</pre><pre name="86af" id="86af" class="graf graf--pre graf-after--pre">      let league = leagueTextField.text,</pre><pre name="b3ac" id="b3ac" class="graf graf--pre graf-after--pre">      let team = teamTextField.text else {return}</pre><pre name="4850" id="4850" class="graf graf--pre graf-after--pre">   athlete = Athlete(name: name, age: age, league: league, team: team)</pre><pre name="47e9" id="47e9" class="graf graf--pre graf-after--pre">   performSegue(withIdentifier: PropertyKeys.unwind, sender: self)</pre><pre name="890b" id="890b" class="graf graf--pre graf-after--pre">}</pre><h3 name="0ba6" id="0ba6" class="graf graf--h3 graf-after--pre">資料輸入頁面(form) &amp; 設定頁面(setting)適合以 static cells 實作</h3><figure name="9a34" id="9a34" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*7IhnpDulK7uvaBV8ATcTkw.jpeg" data-width="828" data-height="654" src="https://cdn-images-1.medium.com/max/800/1*7IhnpDulK7uvaBV8ATcTkw.jpeg"></figure><p name="fb8b" id="fb8b" class="graf graf--p graf-after--figure">資料的輸入頁面 &amp; 設定頁面往往有很多欄位，適合以上下捲動的表格呈現。又因欄位個數是固定的，所以可以直接用 UITableViewController 搭配 static cell 實作，享有以下幾點好處:</p><p name="8499" id="8499" class="graf graf--p graf-after--p">(1) cell 裡的輸入欄位，諸如 text field, slider，皆可設為 controller 的 outlet 變數。(若為 Dynamic Prototypes 的表格，cell 上的元件只能設為 cell 類別的 outlet。)</p><p name="4613" id="4613" class="graf graf--p graf-after--p">(2) 鍵盤出現時，表格會自動往上捲，text field 不會被檔到。</p><p name="662d" id="662d" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">如何設定 static cells</strong></p><p name="6c83" id="6c83" class="graf graf--p graf-after--p">從 table view controller 的 table view 的 content 欄位。</p><figure name="d519" id="d519" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*BSM2tonWzx_AK0Y9vy4FIw.jpeg" data-width="522" data-height="220" src="https://cdn-images-1.medium.com/max/800/1*BSM2tonWzx_AK0Y9vy4FIw.jpeg"></figure><p name="6154" id="6154" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">4.6 intermediate table views</strong></p><figure name="7fb8" id="7fb8" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*nECvn-7HIPrm0Q1jlWce3g.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/800/1*nECvn-7HIPrm0Q1jlWce3g.jpeg"></figure><p name="0ad8" id="0ad8" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">class AddEditEmojiTableViewController</strong></p><pre name="674d" id="674d" class="graf graf--pre graf-after--p">class AddEditEmojiTableViewController: UITableViewController {</pre><pre name="38af" id="38af" class="graf graf--pre graf-after--pre">   @IBOutlet weak var symbolTextField: UITextField!</pre><pre name="5e01" id="5e01" class="graf graf--pre graf-after--pre">   @IBOutlet weak var nameTextField: UITextField!</pre><pre name="02bd" id="02bd" class="graf graf--pre graf-after--pre">   @IBOutlet weak var descriptionTextField: UITextField!</pre><pre name="5dcf" id="5dcf" class="graf graf--pre graf-after--pre">   @IBOutlet weak var usageTextField: UITextField!</pre><pre name="4c24" id="4c24" class="graf graf--pre graf-after--pre">}</pre><h3 name="8e01" id="8e01" class="graf graf--h3 graf-after--pre">新增或修改東西，建議用 modally present，看 detail 建議用 push。</h3><p name="767f" id="767f" class="graf graf--p graf-after--h3">iOS App 在新增資料時，常使用 present 另一個 navigation controller 的設計，例如內建的通訊錄 App 和行事曆 App。</p><p name="bea3" id="bea3" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">4.6 intermediate table views</strong></p><pre name="e91e" id="e91e" class="graf graf--pre graf-after--p">According to the Human Interface Guidelines, you should modally present this static table controller when it&#39;s being used to create a new Emoji or to edit an existing Emoji. If, however, you&#39;re simply displaying data without the ability to edit, it should be pushed.</pre><figure name="7676" id="7676" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*OEAmslFTrIQCqywcl-6zDw.jpeg" data-width="1654" data-height="676" src="https://cdn-images-1.medium.com/max/800/1*OEAmslFTrIQCqywcl-6zDw.jpeg"></figure><h3 name="7c6f" id="7c6f" class="graf graf--h3 graf-after--figure">新增和修改資料採用同一個 controller 頁面，利用 segue id 判斷要去的頁面是哪一個</h3><p name="b75e" id="b75e" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">4.6 intermediate table views</strong></p><figure name="a395" id="a395" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*OEAmslFTrIQCqywcl-6zDw.jpeg" data-width="1654" data-height="676" src="https://cdn-images-1.medium.com/max/800/1*OEAmslFTrIQCqywcl-6zDw.jpeg"></figure><p name="165d" id="165d" class="graf graf--p graf-after--figure">將點選 cell 修改資料的 segue id 設為 EditEmoji。</p><figure name="d9ea" id="d9ea" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*6maoH0FemywQfYBqKLb9rQ.jpeg" data-width="1626" data-height="904" src="https://cdn-images-1.medium.com/max/800/1*6maoH0FemywQfYBqKLb9rQ.jpeg"></figure><p name="1384" id="1384" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">class EmojiTableViewController</strong></p><p name="a625" id="a625" class="graf graf--p graf-after--p">segue id 為 EditEmoji 時表示觸發的是修改資料的 segue。</p><pre name="a361" id="a361" class="graf graf--pre graf-after--p">override func prepare(for segue: UIStoryboardSegue, sender: Any?) {</pre><pre name="95ec" id="95ec" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   if segue.identifier == &quot;EditEmoji&quot; {</strong></pre><pre name="1734" id="1734" class="graf graf--pre graf-after--pre">      let indexPath = tableView.indexPathForSelectedRow!</pre><pre name="8893" id="8893" class="graf graf--pre graf-after--pre">      let emoji = emojis[indexPath.row]</pre><pre name="6184" id="6184" class="graf graf--pre graf-after--pre">      let navController = segue.destination as! UINavigationController</pre><pre name="2d72" id="2d72" class="graf graf--pre graf-after--pre">      let addEditEmojiTableViewController = navController.topViewController as! AddEditEmojiTableViewController</pre><pre name="1f0f" id="1f0f" class="graf graf--pre graf-after--pre">      addEditEmojiTableViewController.emoji = emoji</pre><pre name="bc69" id="bc69" class="graf graf--pre graf-after--pre">   }</pre><pre name="1e97" id="1e97" class="graf graf--pre graf-after--pre">}</pre><p name="671c" id="671c" class="graf graf--p graf-after--pre">除了利用 segue id 判斷，也可以用 indexPathForSelectedRow 是否有值判斷是點選 cell 修改資料還是點選 + 新增資料，indexPathForSelectedRow 有值表示點選 cell。</p><pre name="8410" id="8410" class="graf graf--pre graf-after--p">override func prepare(for segue: UIStoryboardSegue, sender: Any?) {</pre><pre name="ba6a" id="ba6a" class="graf graf--pre graf-after--pre">   if let row = tableView.indexPathForSelectedRow?.row {</pre><pre name="ee90" id="ee90" class="graf graf--pre graf-after--pre">   }</pre><pre name="acd1" id="acd1" class="graf graf--pre graf-after--pre">}</pre><p name="a011" id="a011" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">class AddEditEmojiTableViewController</strong></p><pre name="15f9" id="15f9" class="graf graf--pre graf-after--p">class AddEditEmojiTableViewController: UITableViewController {</pre><pre name="c639" id="c639" class="graf graf--pre graf-after--pre">   @IBOutlet weak var saveButton: UIBarButtonItem!</pre><pre name="e659" id="e659" class="graf graf--pre graf-after--pre">   var emoji: Emoji?</pre><pre name="1297" id="1297" class="graf graf--pre graf-after--pre">   override func viewDidLoad() {</pre><pre name="db01" id="db01" class="graf graf--pre graf-after--pre">      super.viewDidLoad()</pre><pre name="acee" id="acee" class="graf graf--pre graf-after--pre">      if let emoji = emoji {</pre><pre name="e6e6" id="e6e6" class="graf graf--pre graf-after--pre">         symbolTextField.text = emoji.symbol</pre><pre name="a8cd" id="a8cd" class="graf graf--pre graf-after--pre">         nameTextField.text = emoji.name</pre><pre name="baeb" id="baeb" class="graf graf--pre graf-after--pre">         descriptionTextField.text = emoji.detailDescription</pre><pre name="047b" id="047b" class="graf graf--pre graf-after--pre">         usageTextField.text = emoji.usage</pre><pre name="4be8" id="4be8" class="graf graf--pre graf-after--pre">      }</pre><pre name="a7b7" id="a7b7" class="graf graf--pre graf-after--pre">   }</pre><pre name="d7da" id="d7da" class="graf graf--pre graf-after--pre">}</pre><h3 name="ff0f" id="ff0f" class="graf graf--h3 graf-after--pre">利用 unwind segue 取消 / 完成資料的新增或修改，回傳前一頁</h3><p name="ac46" id="ac46" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">4.6 intermediate table views</strong></p><figure name="f45b" id="f45b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*-QCcOeMHO9VtdLkrlcO4Zg.jpeg" data-width="2078" data-height="840" src="https://cdn-images-1.medium.com/max/800/1*-QCcOeMHO9VtdLkrlcO4Zg.jpeg"></figure><p name="8c99" id="8c99" class="graf graf--p graf-after--figure">設定 segue id ，區分點選取消還是完成 button。</p><p name="8510" id="8510" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(1) 將點選 save button 的 unwind segue id 取名為 saveUnwind。</strong></p><figure name="1aa1" id="1aa1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ig2AVkf_J1D_wiWuNBaQzA.jpeg" data-width="526" data-height="374" src="https://cdn-images-1.medium.com/max/800/1*ig2AVkf_J1D_wiWuNBaQzA.jpeg"></figure><p name="c0ab" id="c0ab" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">(2) 當 prepare 由 save button 的 segue 觸發時建立資料。</strong></p><p name="1962" id="1962" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">class AddEditEmojiTableViewController</strong></p><pre name="8652" id="8652" class="graf graf--pre graf-after--p">override func prepare(for segue: UIStoryboardSegue, sender: Any?) {</pre><pre name="ac3c" id="ac3c" class="graf graf--pre graf-after--pre">   super.prepare(for: segue, sender: sender)</pre><pre name="dbab" id="dbab" class="graf graf--pre graf-after--pre">   guard segue.identifier == &quot;saveUnwind&quot; else { return }</pre><pre name="0ce4" id="0ce4" class="graf graf--pre graf-after--pre">   let symbol = symbolTextField.text ?? &quot;&quot;<br>   <br>   let name = nameTextField.text ?? &quot;&quot;</pre><pre name="5670" id="5670" class="graf graf--pre graf-after--pre">   let detailDescription = descriptionTextField.text ?? &quot;&quot;</pre><pre name="565f" id="565f" class="graf graf--pre graf-after--pre">   let usage = usageTextField.text ?? &quot;&quot;</pre><pre name="2155" id="2155" class="graf graf--pre graf-after--pre">   emoji = Emoji(symbol: symbol, name: name, detailDescription: detailDescription, usage: usage)</pre><pre name="3ef7" id="3ef7" class="graf graf--pre graf-after--pre">}</pre><p name="7586" id="7586" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">(3) 判斷是新增還是修改資料。</strong></p><p name="81df" id="81df" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">EmojiTableViewController</strong></p><pre name="48a1" id="48a1" class="graf graf--pre graf-after--p">@IBAction func unwindToEmojiTableView(segue: UIStoryboardSegue) {</pre><pre name="35e6" id="35e6" class="graf graf--pre graf-after--pre">   guard segue.identifier == &quot;saveUnwind&quot; else { return }</pre><pre name="9b4b" id="9b4b" class="graf graf--pre graf-after--pre">   let sourceViewController = segue.source as! AddEditEmojiTableViewController</pre><pre name="2c6c" id="2c6c" class="graf graf--pre graf-after--pre">   if let emoji = sourceViewController.emoji {</pre><pre name="c08d" id="c08d" class="graf graf--pre graf-after--pre">      if let selectedIndexPath = tableView.indexPathForSelectedRow {</pre><pre name="8c8f" id="8c8f" class="graf graf--pre graf-after--pre">         emojis[selectedIndexPath.row] = emoji</pre><pre name="8e59" id="8e59" class="graf graf--pre graf-after--pre">         tableView.reloadRows(at: [selectedIndexPath], with: .none)</pre><pre name="94b3" id="94b3" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="c549" id="c549" class="graf graf--pre graf-after--pre">         let newIndexPath = IndexPath(row: emojis.count, section: 0)</pre><pre name="c76e" id="c76e" class="graf graf--pre graf-after--pre">         emojis.append(emoji)</pre><pre name="718e" id="718e" class="graf graf--pre graf-after--pre">         tableView.insertRows(at: [newIndexPath], with: .automatic)</pre><pre name="a22b" id="a22b" class="graf graf--pre graf-after--pre">      }</pre><pre name="dcab" id="dcab" class="graf graf--pre graf-after--pre">   }</pre><pre name="0747" id="0747" class="graf graf--pre graf-after--pre">}</pre><h3 name="accd" id="accd" class="graf graf--h3 graf-after--pre">定義 extension 的檔名可用原本的型別開頭，然後接 + 某個名字</h3><p name="26a2" id="26a2" class="graf graf--p graf-after--h3">例子: URL+Helpers.swift</p><pre name="7d11" id="7d11" class="graf graf--pre graf-after--p">extension URL {</pre><pre name="9cf1" id="9cf1" class="graf graf--pre graf-after--pre">   func withQueries(_ queries: [String: String]) -&gt; URL? {</pre><pre name="a09d" id="a09d" class="graf graf--pre graf-after--pre">      var components = URLComponents(url: self, resolvingAgainstBaseURL: true)</pre><pre name="3c1a" id="3c1a" class="graf graf--pre graf-after--pre">      components?.queryItems = queries.compactMap { URLQueryItem(name: $0.0, value: $0.1) }</pre><pre name="21f8" id="21f8" class="graf graf--pre graf-after--pre">      return components?.url</pre><pre name="1bbe" id="1bbe" class="graf graf--pre graf-after--pre">   }</pre><pre name="e690" id="e690" class="graf graf--pre graf-after--pre">}</pre><h3 name="2cd9" id="2cd9" class="graf graf--h3 graf-after--pre">共用資料宣告成型別常數，取名為 shared 或 default。</h3><p name="0fba" id="0fba" class="graf graf--p graf-after--h3">App 裡有些負責特定功能的物件會在多個頁面使用，比方抓取網路資料的物件。你可將它宣告成只會建立一次的型別常數，省去每次使用時重新生成的麻煩，並享有任何地方皆可方便存取的好處，就像以下例子的 MenuController.shared。</p><pre name="0b10" id="0b10" class="graf graf--pre graf-after--p">class MenuController {</pre><pre name="51fe" id="51fe" class="graf graf--pre graf-after--pre">   static let shared = MenuController()</pre><pre name="e3bf" id="e3bf" class="graf graf--pre graf-after--pre">}</pre><p name="20dc" id="20dc" class="graf graf--p graf-after--pre">iOS SDK 本身就有很多類似例子，比方 <code class="markup--code markup--p-code">URLSession.shared</code>，<code class="markup--code markup--p-code">UIApplication.shared</code>, <code class="markup--code markup--p-code">FileManager.default</code>。</p><h3 name="beb7" id="beb7" class="graf graf--h3 graf-after--p">利用 ?? (nil-coalescing operator) 設定資料的預設值</h3><p name="60c3" id="60c3" class="graf graf--p graf-after--h3">用 <code class="markup--code markup--p-code">??</code> 語法方便地讀取 optional 內容，並在它為 nil 時另外指定預設值，很適合運用在讀取 text field 內容建立資料的情境。</p><pre name="9206" id="9206" class="graf graf--pre graf-after--p">var registration: Registration {</pre><pre name="0f96" id="0f96" class="graf graf--pre graf-after--pre">   let firstName = firstNameTextField.text ?? “”</pre><pre name="56e6" id="56e6" class="graf graf--pre graf-after--pre">   let lastName = lastNameTextField.text ?? “”</pre><pre name="1601" id="1601" class="graf graf--pre graf-after--pre">   return Registration(firstName: firstName,</pre><pre name="c3d6" id="c3d6" class="graf graf--pre graf-after--pre">lastName: lastName)</pre><pre name="2cfa" id="2cfa" class="graf graf--pre graf-after--pre">}</pre><h3 name="1b07" id="1b07" class="graf graf--h3 graf-after--pre">和後台 API 溝通的的程式寫在哪</h3><p name="4408" id="4408" class="graf graf--p graf-after--h3">和後台 API 溝通的程式不難寫，但是如果沒有好好規劃，常常一個不小心，就讓我們的程式變得十分複雜。Apple 提到了常見的三種做法，你可依 App 需求選擇合適的做法。</p><h4 name="a034" id="a034" class="graf graf--h4 graf-after--p">1. 寫在 View Controller 裡</h4><p name="f503" id="f503" class="graf graf--p graf-after--h4">初學者最常採用的做法，因為它最簡單直接，在 controller 裡抓資料，然後再把它顯示到畫面上。如以下例子，在 controller 裡定義 function <code class="markup--code markup--p-code">fetchPhotoInfo</code> 抓資料。</p><pre name="9a50" id="9a50" class="graf graf--pre graf-after--p">class PhotoViewController: UIViewController {</pre><pre name="6ba9" id="6ba9" class="graf graf--pre graf-after--pre">   func updateUI(with photoInfo: PhotoInfo) {…}</pre><pre name="9b64" id="9b64" class="graf graf--pre graf-after--pre">   func fetchPhotoInfo(completion: @escaping (PhotoInfo?) -&gt;</pre><pre name="8754" id="8754" class="graf graf--pre graf-after--pre">Void) {…}</pre><pre name="3594" id="3594" class="graf graf--pre graf-after--pre">   override func viewDidLoad() {</pre><pre name="5399" id="5399" class="graf graf--pre graf-after--pre">      fetchPhotoInfo { (photoInfo) in</pre><pre name="0a76" id="0a76" class="graf graf--pre graf-after--pre">      self.updateUI(with: photoInfo)</pre><pre name="1a5c" id="1a5c" class="graf graf--pre graf-after--pre">   }</pre><pre name="03c7" id="03c7" class="graf graf--pre graf-after--pre">}</pre><p name="de2f" id="de2f" class="graf graf--p graf-after--pre">建議只在 API 沒有太多太複雜時採用，因為它將讓你的 view controller 複雜許多，而且每個頁面的 controller 需要抓資料時，都要重寫一次相關的程式碼。(就算是用複製貼上，還是有點累呀。)</p><h4 name="736f" id="736f" class="graf graf--h4 graf-after--p">2. 寫在 model 裡，定義抓資料的 static function</h4><p name="3a68" id="3a68" class="graf graf--p graf-after--h4">既然要抓某種 model 的資料，不如就將抓取的程式碼定義成 model 的型別 function，如此之後不管在哪個 controller，都可以方便地抓取資料取得 model。</p><pre name="e7da" id="e7da" class="graf graf--pre graf-after--p">extension PhotoInfo {</pre><pre name="c211" id="c211" class="graf graf--pre graf-after--pre">   static func fetchPhotoInfo(completion: @escaping</pre><pre name="8a4c" id="8a4c" class="graf graf--pre graf-after--pre">(PhotoInfo?) -&gt; Void) {…}</pre><pre name="e973" id="e973" class="graf graf--pre graf-after--pre">}</pre><pre name="e6a4" id="e6a4" class="graf graf--pre graf-after--pre">class PhotoViewController: UIViewController {</pre><pre name="8a81" id="8a81" class="graf graf--pre graf-after--pre">   override func viewDidLoad() {</pre><pre name="3501" id="3501" class="graf graf--pre graf-after--pre">      PhotoInfo.fetchPhotoInfo { (photoInfo) in</pre><pre name="c808" id="c808" class="graf graf--pre graf-after--pre">         self.updateUI(with: photoInfo)</pre><pre name="b9b2" id="b9b2" class="graf graf--pre graf-after--pre">      }</pre><pre name="695b" id="695b" class="graf graf--pre graf-after--pre">   }</pre><pre name="e5ec" id="e5ec" class="graf graf--pre graf-after--pre">   func updateUI(with photoInfo: PhotoInfo) {…}</pre><pre name="5af5" id="5af5" class="graf graf--pre graf-after--pre">}</pre><h4 name="d644" id="d644" class="graf graf--h4 graf-after--pre">3. 寫在 model controller 或 helper controller 裡</h4><p name="d10d" id="d10d" class="graf graf--p graf-after--h4">為了避免 view controller 或 model 的程式太複雜，也可考慮另外定義 model controller 或 helper controller 專門處理後台 API。</p><p name="7739" id="7739" class="graf graf--p graf-after--p">定義 model controller <code class="markup--code markup--p-code">PhotoInfoController</code>。</p><pre name="6c6f" id="6c6f" class="graf graf--pre graf-after--p">struct PhotoInfoController {</pre><pre name="b768" id="b768" class="graf graf--pre graf-after--pre">   func fetchPhotoInfo(completion: @escaping (PhotoInfo?) -&gt;</pre><pre name="d853" id="d853" class="graf graf--pre graf-after--pre">Void) {…}</pre><pre name="9c0d" id="9c0d" class="graf graf--pre graf-after--pre">}</pre><pre name="8ddd" id="8ddd" class="graf graf--pre graf-after--pre">class PhotoViewController: UIViewController {</pre><pre name="0ba2" id="0ba2" class="graf graf--pre graf-after--pre">   let photoInfoController = PhotoInfoController()</pre><pre name="89b5" id="89b5" class="graf graf--pre graf-after--pre">   override func viewDidLoad() {</pre><pre name="b462" id="b462" class="graf graf--pre graf-after--pre">      photoInfoController.fetchPhotoInfo { (photoInfo) in</pre><pre name="9b88" id="9b88" class="graf graf--pre graf-after--pre">         self.updateUI(with: photoInfo)</pre><pre name="d166" id="d166" class="graf graf--pre graf-after--pre">      }</pre><pre name="68c2" id="68c2" class="graf graf--pre graf-after--pre">   }</pre><pre name="3c53" id="3c53" class="graf graf--pre graf-after--pre">   func updateUI(with photoInfo: PhotoInfo) {…}</pre><pre name="9f38" id="9f38" class="graf graf--pre graf-after--pre">}</pre><p name="03cc" id="03cc" class="graf graf--p graf-after--pre">定義 helper controller <code class="markup--code markup--p-code">NetworkController</code>。</p><pre name="dce8" id="dce8" class="graf graf--pre graf-after--p">struct NetworkController {</pre><pre name="9b43" id="9b43" class="graf graf--pre graf-after--pre">   static let shared = NetworkController()</pre><pre name="c8b1" id="c8b1" class="graf graf--pre graf-after--pre">   func fetchPhotoInfo(completion: @escaping (PhotoInfo?) -&gt;</pre><pre name="adad" id="adad" class="graf graf--pre graf-after--pre">Void) {…}</pre><pre name="a93b" id="a93b" class="graf graf--pre graf-after--pre">}</pre><pre name="5151" id="5151" class="graf graf--pre graf-after--pre">class PhotoViewController: UIViewController {</pre><pre name="feb5" id="feb5" class="graf graf--pre graf-after--pre">   override func viewDidLoad() {</pre><pre name="c62c" id="c62c" class="graf graf--pre graf-after--pre">      NetworkController.shared.fetchPhotoInfo { (photoInfo) in</pre><pre name="e7b8" id="e7b8" class="graf graf--pre graf-after--pre">         self.updateUI(with: photoInfo)</pre><pre name="b4ee" id="b4ee" class="graf graf--pre graf-after--pre">      }</pre><pre name="19df" id="19df" class="graf graf--pre graf-after--pre">   }</pre><pre name="641f" id="641f" class="graf graf--pre graf-after--pre">   func updateUI(with photoInfo: PhotoInfo) {…}</pre><pre name="6c5f" id="6c5f" class="graf graf--pre graf-after--pre">}</pre><h3 name="0f4f" id="0f4f" class="graf graf--h3 graf-after--pre">enum 的使用時機</h3><p name="682b" id="682b" class="graf graf--p graf-after--h3">和 <code class="markup--code markup--p-code">class</code>, <code class="markup--code markup--p-code">struct</code> 相比，<code class="markup--code markup--p-code">enum</code> 常被我們忽略。其實它也有出頭天的時候，當你想表達的資料內容只有固定幾種時，enum 十分好用，不只能搭配 switch 比對，還可讓程式更安全，更不易出錯，例如以下例子:</p><p name="5a81" id="5a81" class="graf graf--p graf-after--p">電影的種類 <code class="markup--code markup--p-code">genre</code> 定義成字串，容易打錯字，甚至產生世界上不存在的電影種類。</p><pre name="5785" id="5785" class="graf graf--pre graf-after--p">struct Movie {</pre><pre name="6fcb" id="6fcb" class="graf graf--pre graf-after--pre">   var name: String</pre><pre name="1067" id="1067" class="graf graf--pre graf-after--pre">   var releaseYear: Int</pre><pre name="c23a" id="c23a" class="graf graf--pre graf-after--pre">   var genre: String</pre><pre name="69fa" id="69fa" class="graf graf--pre graf-after--pre">}</pre><pre name="9a1d" id="9a1d" class="graf graf--pre graf-after--pre">let loveMovie = Movie(name: &quot;你的名字&quot;, releaseYear: 2016, genre: &quot;帥到分手&quot;)</pre><p name="ca6d" id="ca6d" class="graf graf--p graf-after--pre">將電影的種類 <code class="markup--code markup--p-code">genre</code> 改以 <code class="markup--code markup--p-code">enum Genre</code> 定義，讓我們不易打錯字，而且建立電影時也更安全，你只能傳入 Genre 型別的電影種類，不可能發明種類帥到分手的電影。</p><pre name="8c21" id="8c21" class="graf graf--pre graf-after--p">enum Genre {</pre><pre name="f6ac" id="f6ac" class="graf graf--pre graf-after--pre">   case animated, action, romance, documentary, biography,</pre><pre name="bf57" id="bf57" class="graf graf--pre graf-after--pre">thriller</pre><pre name="7cf2" id="7cf2" class="graf graf--pre graf-after--pre">}</pre><pre name="b356" id="b356" class="graf graf--pre graf-after--pre">struct Movie {</pre><pre name="221e" id="221e" class="graf graf--pre graf-after--pre">   var name: String</pre><pre name="c796" id="c796" class="graf graf--pre graf-after--pre">   var releaseYear: Int</pre><pre name="5054" id="5054" class="graf graf--pre graf-after--pre">   var genre: Genre</pre><pre name="628f" id="628f" class="graf graf--pre graf-after--pre">}</pre><pre name="7de1" id="7de1" class="graf graf--pre graf-after--pre">let loveMovie = Movie(name: “Finding Dory”, releaseYear: 2016, genre: .animated)</pre><h3 name="02e2" id="02e2" class="graf graf--h3 graf-after--pre">Unit 1 Getting Started with App Development</h3><h3 name="09c5" id="09c5" class="graf graf--h3 graf-after--h3"><strong class="markup--strong markup--h3-strong">Guided Project — Light</strong></h3><p name="9406" id="9406" class="graf graf--p graf-after--h3">點選畫面切換顏色。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="d742" id="d742" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*KN_pkzVy0Gbg3CcBDe2t8A.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/600/1*KN_pkzVy0Gbg3CcBDe2t8A.jpeg"></figure><figure name="a6f1" id="a6f1" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*bXymPWFs6-_eIElmz8K8cQ.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/600/1*bXymPWFs6-_eIElmz8K8cQ.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="fb77" id="fb77" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="4f41" id="4f41" class="graf graf--p graf-after--p">IBOutlet，IBAction，ternary conditional operator，viewDidLoad，UIColor。</p><p name="c55c" id="c55c" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">特別說明:</strong></p><ul class="postList"><li name="8204" id="8204" class="graf graf--li graf-after--p">breakpoint 的使用。</li></ul><figure name="095b" id="095b" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*5aJVQHtICyATjJUXuC5m6g.jpeg" data-width="1518" data-height="348" src="https://cdn-images-1.medium.com/max/800/1*5aJVQHtICyATjJUXuC5m6g.jpeg"></figure><ul class="postList"><li name="caac" id="caac" class="graf graf--li graf-after--figure">查詢 Developer Documentation。</li></ul><figure name="d87f" id="d87f" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*wbxT0L-tWg5W543x78XoQg.jpeg" data-width="808" data-height="166" src="https://cdn-images-1.medium.com/max/800/1*wbxT0L-tWg5W543x78XoQg.jpeg"></figure><ul class="postList"><li name="f9d3" id="f9d3" class="graf graf--li graf-after--figure">定義 function updateUI() 更新畫面。</li></ul><p name="0aee" id="0aee" class="graf graf--p graf-after--li">在 viewDidLoad &amp; IBAction 的 buttonPressed 呼叫 updateUI。</p><pre name="f645" id="f645" class="graf graf--pre graf-after--p">func updateUI() {</pre><pre name="f7fc" id="f7fc" class="graf graf--pre graf-after--pre">   view.backgroundColor = lightOn ? .white : .black</pre><pre name="5080" id="5080" class="graf graf--pre graf-after--pre">}</pre><h3 name="7670" id="7670" class="graf graf--h3 graf-after--pre">Unit 2 Introduction to UIKit</h3><ul class="postList"><li name="5472" id="5472" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">2.3 Structures</strong></li></ul><p name="9496" id="9496" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="452b" id="452b" class="graf graf--p graf-after--p">struct，property，method，initializer，default initializer， memberwise initializer，computed property，self，mutating method，property observer，willSet，didSet，type property and method，static，copy。</p><p name="0fa1" id="0fa1" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例:</strong></p><p name="2279" id="2279" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">initializer</strong></p><pre name="7fb7" id="7fb7" class="graf graf--pre graf-after--p">struct Temperature {</pre><pre name="7c4e" id="7c4e" class="graf graf--pre graf-after--pre">   var celsius: Double</pre><pre name="f604" id="f604" class="graf graf--pre graf-after--pre">   init(celsius: Double) {</pre><pre name="1739" id="1739" class="graf graf--pre graf-after--pre">      self.celsius = celsius</pre><pre name="172f" id="172f" class="graf graf--pre graf-after--pre">   }</pre><pre name="bab5" id="bab5" class="graf graf--pre graf-after--pre">   init(fahrenheit: Double) {</pre><pre name="490a" id="490a" class="graf graf--pre graf-after--pre">      celsius = (fahrenheit - 32) / 1.8</pre><pre name="049b" id="049b" class="graf graf--pre graf-after--pre">   }</pre><pre name="5127" id="5127" class="graf graf--pre graf-after--pre">}</pre><pre name="1d21" id="1d21" class="graf graf--pre graf-after--pre">let currentTemperature = Temperature(celsius: 18.5)</pre><pre name="899f" id="899f" class="graf graf--pre graf-after--pre">let boiling = Temperature(fahrenheit: 212.0)</pre><p name="3032" id="3032" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">mutating method</strong></p><pre name="b31d" id="b31d" class="graf graf--pre graf-after--p">struct Odometer {</pre><pre name="1c63" id="1c63" class="graf graf--pre graf-after--pre">   var count: Int = 0</pre><pre name="88e7" id="88e7" class="graf graf--pre graf-after--pre">   mutating func increment() {</pre><pre name="d79f" id="d79f" class="graf graf--pre graf-after--pre">      count += 1</pre><pre name="97a1" id="97a1" class="graf graf--pre graf-after--pre">   }</pre><pre name="2356" id="2356" class="graf graf--pre graf-after--pre">   mutating func increment(by amount: Int) {</pre><pre name="e6b3" id="e6b3" class="graf graf--pre graf-after--pre">      count += amount</pre><pre name="eb07" id="eb07" class="graf graf--pre graf-after--pre">   }</pre><pre name="92ca" id="92ca" class="graf graf--pre graf-after--pre">   mutating func reset() {</pre><pre name="9197" id="9197" class="graf graf--pre graf-after--pre">      count = 0</pre><pre name="f316" id="f316" class="graf graf--pre graf-after--pre">   }</pre><pre name="d849" id="d849" class="graf graf--pre graf-after--pre">}</pre><p name="bfe4" id="bfe4" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">computed property</strong></p><pre name="a23f" id="a23f" class="graf graf--pre graf-after--p">struct Temperature {</pre><pre name="e4e1" id="e4e1" class="graf graf--pre graf-after--pre">   var celsius: Double</pre><pre name="2946" id="2946" class="graf graf--pre graf-after--pre">   var fahrenheit: Double {</pre><pre name="82f2" id="82f2" class="graf graf--pre graf-after--pre">      return celsius * 1.8 + 32</pre><pre name="829e" id="829e" class="graf graf--pre graf-after--pre">   }</pre><pre name="624b" id="624b" class="graf graf--pre graf-after--pre">   var kelvin: Double {</pre><pre name="23dd" id="23dd" class="graf graf--pre graf-after--pre">      return celsius + 273.15</pre><pre name="9578" id="9578" class="graf graf--pre graf-after--pre">   }</pre><pre name="e79a" id="e79a" class="graf graf--pre graf-after--pre">}</pre><pre name="e18b" id="e18b" class="graf graf--pre graf-after--pre">let currentTemperature = Temperature(celsius: 0.0)</pre><pre name="ed93" id="ed93" class="graf graf--pre graf-after--pre">print(currentTemperature.fahrenheit)</pre><pre name="5764" id="5764" class="graf graf--pre graf-after--pre">print(currentTemperature.kelvin)</pre><p name="960d" id="960d" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">property observer</strong></p><pre name="5aac" id="5aac" class="graf graf--pre graf-after--p">struct StepCounter {</pre><pre name="99b7" id="99b7" class="graf graf--pre graf-after--pre">   var totalSteps: Int = 0 {</pre><pre name="9e0c" id="9e0c" class="graf graf--pre graf-after--pre">      willSet {</pre><pre name="ef11" id="ef11" class="graf graf--pre graf-after--pre">         print(&quot;About to set totalSteps to \(newValue)&quot;)</pre><pre name="92ee" id="92ee" class="graf graf--pre graf-after--pre">      }</pre><pre name="c176" id="c176" class="graf graf--pre graf-after--pre"><br>      didSet {</pre><pre name="ed3c" id="ed3c" class="graf graf--pre graf-after--pre">         if totalSteps &gt; oldValue  {</pre><pre name="b481" id="b481" class="graf graf--pre graf-after--pre">            print(&quot;Added \(totalSteps - oldValue) steps&quot;)</pre><pre name="4d08" id="4d08" class="graf graf--pre graf-after--pre">         }</pre><pre name="68a9" id="68a9" class="graf graf--pre graf-after--pre">     }</pre><pre name="d6d0" id="d6d0" class="graf graf--pre graf-after--pre">   }</pre><pre name="183c" id="183c" class="graf graf--pre graf-after--pre">}</pre><p name="2622" id="2622" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">type property and method</strong></p><pre name="d1c8" id="d1c8" class="graf graf--pre graf-after--p">struct Temperature {</pre><pre name="fd4a" id="fd4a" class="graf graf--pre graf-after--pre">   static var boilingPoint = 100</pre><pre name="dec6" id="dec6" class="graf graf--pre graf-after--pre">}</pre><pre name="fae4" id="fae4" class="graf graf--pre graf-after--pre">let boilingPoint = Temperature.boilingPoint</pre><pre name="aad2" id="aad2" class="graf graf--pre graf-after--pre">let smallerNumber = Double.minimum(100.0, -1000.0)</pre><ul class="postList"><li name="d142" id="d142" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">2.4 Classes, Inheritance</strong></li></ul><p name="e6e8" id="e6e8" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="59e4" id="59e4" class="graf graf--p graf-after--p">class，base class，inheritance，subclass， superclass，override，reference，initializer</p><p name="e7fa" id="e7fa" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例</strong></p><p name="bd85" id="bd85" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">override method &amp; peroperty</strong></p><pre name="dfd7" id="dfd7" class="graf graf--pre graf-after--p">class Vehicle {</pre><pre name="085a" id="085a" class="graf graf--pre graf-after--pre">   var currentSpeed = 0.0</pre><pre name="de79" id="de79" class="graf graf--pre graf-after--pre">   var description: String {</pre><pre name="db69" id="db69" class="graf graf--pre graf-after--pre">      return &quot;traveling at \(currentSpeed) miles per hour&quot;</pre><pre name="18fb" id="18fb" class="graf graf--pre graf-after--pre">   }</pre><pre name="d22c" id="d22c" class="graf graf--pre graf-after--pre">   func makeNoise() {</pre><pre name="e3d2" id="e3d2" class="graf graf--pre graf-after--pre">   }</pre><pre name="9b5b" id="9b5b" class="graf graf--pre graf-after--pre">}</pre><pre name="c3dd" id="c3dd" class="graf graf--pre graf-after--pre"><br>class Train: Vehicle {</pre><pre name="8079" id="8079" class="graf graf--pre graf-after--pre">   override func makeNoise() {</pre><pre name="4520" id="4520" class="graf graf--pre graf-after--pre">      print(&quot;Choo Choo!&quot;)</pre><pre name="32a3" id="32a3" class="graf graf--pre graf-after--pre">   }</pre><pre name="2bf1" id="2bf1" class="graf graf--pre graf-after--pre">}<br><br></pre><pre name="7bd5" id="7bd5" class="graf graf--pre graf-after--pre">class Car: Vehicle {</pre><pre name="a47f" id="a47f" class="graf graf--pre graf-after--pre">   var gear = 1</pre><pre name="936a" id="936a" class="graf graf--pre graf-after--pre">   override var description: String {</pre><pre name="3972" id="3972" class="graf graf--pre graf-after--pre">      return super.description + &quot; in gear \(gear)&quot;</pre><pre name="9bd4" id="9bd4" class="graf graf--pre graf-after--pre">   }</pre><pre name="88db" id="88db" class="graf graf--pre graf-after--pre">}</pre><p name="0cc3" id="0cc3" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">override initializer</strong></p><pre name="c424" id="c424" class="graf graf--pre graf-after--p">class Person {</pre><pre name="4f45" id="4f45" class="graf graf--pre graf-after--pre">   let name: String</pre><pre name="a975" id="a975" class="graf graf--pre graf-after--pre">   init(name: String) {</pre><pre name="7021" id="7021" class="graf graf--pre graf-after--pre">      self.name = name</pre><pre name="dd20" id="dd20" class="graf graf--pre graf-after--pre">   }</pre><pre name="74dd" id="74dd" class="graf graf--pre graf-after--pre">}</pre><pre name="ae96" id="ae96" class="graf graf--pre graf-after--pre">class Student: Person {</pre><pre name="41bf" id="41bf" class="graf graf--pre graf-after--pre">   var favoriteSubject: String</pre><pre name="ec33" id="ec33" class="graf graf--pre graf-after--pre">   init(name: String, favoriteSubject: String) {</pre><pre name="b648" id="b648" class="graf graf--pre graf-after--pre">      self.favoriteSubject = favoriteSubject</pre><pre name="750b" id="750b" class="graf graf--pre graf-after--pre">      super.init(name: name)</pre><pre name="ac34" id="ac34" class="graf graf--pre graf-after--pre">   }</pre><pre name="7088" id="7088" class="graf graf--pre graf-after--pre">}</pre><ul class="postList"><li name="3014" id="3014" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">2.10 Auto Layout and Stack Views</strong></li></ul><p name="5687" id="5687" class="graf graf--p graf-after--li">Apple 建議可以多用 stack view</p><pre name="172d" id="172d" class="graf graf--pre graf-after--p">Whenever possible, it&#39;s a good practice to use stack views before trying to manage constraints individually. Stack views allow you to create nice-looking interfaces quickly—and also make it easy to modify or customize them in the future.</pre><p name="38ed" id="38ed" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Lab — Calculator</strong></p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="6749" id="6749" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50.382%;"><img class="graf-image" data-image-id="1*XAeYzMZYf7To80PdxzxaqA.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/800/1*XAeYzMZYf7To80PdxzxaqA.jpeg"></figure><figure name="45c1" id="45c1" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 49.618%;"><img class="graf-image" data-image-id="1*IaTXNFkqdj-AdRguvlIFPQ.jpeg" data-width="838" data-height="1432" src="https://cdn-images-1.medium.com/max/600/1*IaTXNFkqdj-AdRguvlIFPQ.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="1345" id="1345" class="graf graf--h3 graf-after--figure"><strong class="markup--strong markup--h3-strong">Guided Project — Apple Pie</strong></h3><p name="321a" id="321a" class="graf graf--p graf-after--h3">猜單字遊戲。</p><figure name="cc75" id="cc75" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*7E_rK6PQhTGKGPULiw9vsg.jpeg" data-width="1250" data-height="1628" src="https://cdn-images-1.medium.com/max/800/1*7E_rK6PQhTGKGPULiw9vsg.jpeg"></figure><p name="de63" id="de63" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="bed0" id="bed0" class="graf graf--p graf-after--p">auto layout，stack view，IBOutlet，IBAction，outlet collection，isEnabled，computed property，property observer，joined，contains，append，removeFirst，isEmpty</p><p name="cec2" id="cec2" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">特別說明:</strong></p><ul class="postList"><li name="1ab1" id="1ab1" class="graf graf--li graf-after--p">computed property</li></ul><pre name="65dc" id="65dc" class="graf graf--pre graf-after--li">var formattedWord: String {</pre><pre name="5ce7" id="5ce7" class="graf graf--pre graf-after--pre">   var guessedWord = &quot;&quot;</pre><pre name="9bc1" id="9bc1" class="graf graf--pre graf-after--pre">   for letter in word {</pre><pre name="b369" id="b369" class="graf graf--pre graf-after--pre">      if guessedLetters.contains(letter) {</pre><pre name="b92a" id="b92a" class="graf graf--pre graf-after--pre">         guessedWord += &quot;\(letter)&quot;</pre><pre name="a21e" id="a21e" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="e269" id="e269" class="graf graf--pre graf-after--pre">         guessedWord += &quot;_&quot;</pre><pre name="635b" id="635b" class="graf graf--pre graf-after--pre">      }</pre><pre name="1917" id="1917" class="graf graf--pre graf-after--pre">   }</pre><pre name="4e4e" id="4e4e" class="graf graf--pre graf-after--pre">   return guessedWord</pre><pre name="1da8" id="1da8" class="graf graf--pre graf-after--pre">}</pre><ul class="postList"><li name="5bef" id="5bef" class="graf graf--li graf-after--pre">property observer</li></ul><pre name="537d" id="537d" class="graf graf--pre graf-after--li">var totalWins = 0 {</pre><pre name="9402" id="9402" class="graf graf--pre graf-after--pre">   didSet {</pre><pre name="1e79" id="1e79" class="graf graf--pre graf-after--pre">      newRound()</pre><pre name="bf34" id="bf34" class="graf graf--pre graf-after--pre">   }</pre><pre name="f16e" id="f16e" class="graf graf--pre graf-after--pre">}</pre><pre name="d60c" id="d60c" class="graf graf--pre graf-after--pre">var totalLosses = 0 {</pre><pre name="ba8f" id="ba8f" class="graf graf--pre graf-after--pre">   didSet {</pre><pre name="cf3b" id="cf3b" class="graf graf--pre graf-after--pre">      newRound()</pre><pre name="e618" id="e618" class="graf graf--pre graf-after--pre">   }</pre><pre name="115d" id="115d" class="graf graf--pre graf-after--pre">}</pre><ul class="postList"><li name="0434" id="0434" class="graf graf--li graf-after--pre">定義型別 Game 儲存遊戲的相關資訊和定義猜單字的 function。</li></ul><p name="0b7c" id="0b7c" class="graf graf--p graf-after--li">struct Game 的 Generated Interface。</p><figure name="bb52" id="bb52" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Tzhf6M4sOaffLvutb3LlYA.jpeg" data-width="1460" data-height="680" src="https://cdn-images-1.medium.com/max/800/1*Tzhf6M4sOaffLvutb3LlYA.jpeg"></figure><h3 name="aa04" id="aa04" class="graf graf--h3 graf-after--figure">Unit 3 Navigation and Workflows</h3><ul class="postList"><li name="1608" id="1608" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">3.1 Optionals</strong></li></ul><p name="f330" id="f330" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="f5fd" id="f5fd" class="graf graf--p graf-after--p">optional，?，nil，force-unwrap，!，optional binding，if let，failable initializer，optional chaining，nested optional，?.，implicitly unwrapped optional</p><p name="a867" id="a867" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例:</strong></p><p name="c3ad" id="c3ad" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">failable initializer</strong></p><pre name="6cc4" id="6cc4" class="graf graf--pre graf-after--p">struct Toddler {</pre><pre name="4d72" id="4d72" class="graf graf--pre graf-after--pre">   var name: String</pre><pre name="3007" id="3007" class="graf graf--pre graf-after--pre">   var monthsOld: Int</pre><pre name="4b8e" id="4b8e" class="graf graf--pre graf-after--pre">   init?(name: String, monthsOld: Int) {</pre><pre name="6e59" id="6e59" class="graf graf--pre graf-after--pre">      if monthsOld &lt; 12 || monthsOld &gt; 36 {</pre><pre name="ce43" id="ce43" class="graf graf--pre graf-after--pre">         return nil</pre><pre name="7b38" id="7b38" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="30b9" id="30b9" class="graf graf--pre graf-after--pre">         self.name = name</pre><pre name="327d" id="327d" class="graf graf--pre graf-after--pre">         self.monthsOld = monthsOld</pre><pre name="8ed3" id="8ed3" class="graf graf--pre graf-after--pre">      }</pre><pre name="1193" id="1193" class="graf graf--pre graf-after--pre">   }</pre><pre name="c54b" id="c54b" class="graf graf--pre graf-after--pre">}</pre><pre name="4f9f" id="4f9f" class="graf graf--pre graf-after--pre">let possibleToddler = Toddler(name: &quot;Joanna&quot;, monthsOld: 14)</pre><pre name="36ba" id="36ba" class="graf graf--pre graf-after--pre">if let toddler = possibleToddler {</pre><pre name="56c8" id="56c8" class="graf graf--pre graf-after--pre">   print(&quot;\(toddler.name) is \(toddler.monthsOld) months old&quot;)</pre><pre name="e5d7" id="e5d7" class="graf graf--pre graf-after--pre">} else {</pre><pre name="1838" id="1838" class="graf graf--pre graf-after--pre">   print(&quot;The age you specified for the toddler is not between 1&quot;)</pre><pre name="eeb0" id="eeb0" class="graf graf--pre graf-after--pre">}</pre><p name="dd50" id="dd50" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">optional chaining</strong></p><pre name="ce8b" id="ce8b" class="graf graf--pre graf-after--p">struct Person {</pre><pre name="9602" id="9602" class="graf graf--pre graf-after--pre">   var age: Int</pre><pre name="fa1b" id="fa1b" class="graf graf--pre graf-after--pre">   var residence: Residence?</pre><pre name="8bf3" id="8bf3" class="graf graf--pre graf-after--pre">}</pre><pre name="72a4" id="72a4" class="graf graf--pre graf-after--pre">struct Residence {</pre><pre name="618e" id="618e" class="graf graf--pre graf-after--pre">   var address: Address?</pre><pre name="a53c" id="a53c" class="graf graf--pre graf-after--pre">}</pre><pre name="0642" id="0642" class="graf graf--pre graf-after--pre">struct Address {</pre><pre name="cfed" id="cfed" class="graf graf--pre graf-after--pre">   var buildingNumber: String</pre><pre name="cb8f" id="cb8f" class="graf graf--pre graf-after--pre">   var streetName: String</pre><pre name="1f30" id="1f30" class="graf graf--pre graf-after--pre">   var apartmentNumber: String?</pre><pre name="602c" id="602c" class="graf graf--pre graf-after--pre">}</pre><pre name="bb4e" id="bb4e" class="graf graf--pre graf-after--pre">let address = Address(buildingNumber: &quot;18&quot;, streetName: &quot;NeverLand&quot;, apartmentNumber: &quot;7&quot;)</pre><pre name="624f" id="624f" class="graf graf--pre graf-after--pre">let residence = Residence(address: address)</pre><pre name="575a" id="575a" class="graf graf--pre graf-after--pre">let person = Person(age: 18, residence: residence)</pre><pre name="fe6a" id="fe6a" class="graf graf--pre graf-after--pre">if let theApartmentNumber =</pre><pre name="f041" id="f041" class="graf graf--pre graf-after--pre">person.residence?.address?.apartmentNumber {</pre><pre name="c5ad" id="c5ad" class="graf graf--pre graf-after--pre">      print(&quot;He/she lives in apartment number \(theApartmentNumber).&quot;)</pre><pre name="5487" id="5487" class="graf graf--pre graf-after--pre">}</pre><ul class="postList"><li name="2e21" id="2e21" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">3.2 Type casting &amp; inspetion</strong></li></ul><p name="8a4f" id="8a4f" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="5188" id="5188" class="graf graf--p graf-after--p">type casting，as?，conditional cast，as!，Any，AnyObject</p><p name="6f64" id="6f64" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例:</strong></p><p name="d3ae" id="d3ae" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">type casting</strong></p><pre name="0714" id="0714" class="graf graf--pre graf-after--p">func walk(dog: Dog) {</pre><pre name="c1a4" id="c1a4" class="graf graf--pre graf-after--pre">   print(&quot;Walking \(dog.name)&quot;)</pre><pre name="d21b" id="d21b" class="graf graf--pre graf-after--pre">}</pre><pre name="37df" id="37df" class="graf graf--pre graf-after--pre">func cleanLitterBox(cat: Cat) {</pre><pre name="474f" id="474f" class="graf graf--pre graf-after--pre">   print(&quot;Cleaning the \(cat.boxSize) litter box&#39;&quot;)</pre><pre name="2e22" id="2e22" class="graf graf--pre graf-after--pre">}</pre><pre name="a09a" id="a09a" class="graf graf--pre graf-after--pre">func cleanCage(bird: Bird) {</pre><pre name="0960" id="0960" class="graf graf--pre graf-after--pre">   print(&quot;Removing the \(bird.featherColor) feathers at the bottom of the cage&#39;&quot;)</pre><pre name="0d41" id="0d41" class="graf graf--pre graf-after--pre">}</pre><pre name="4526" id="4526" class="graf graf--pre graf-after--pre">let pets = allClientAnimals()</pre><pre name="91f5" id="91f5" class="graf graf--pre graf-after--pre">for pet in pets {</pre><pre name="18cb" id="18cb" class="graf graf--pre graf-after--pre">   if let dog = pet as? Dog {</pre><pre name="2bd7" id="2bd7" class="graf graf--pre graf-after--pre">      walk(dog: dog)</pre><pre name="3af2" id="3af2" class="graf graf--pre graf-after--pre">   } else if let cat = pet as? Cat {</pre><pre name="2b75" id="2b75" class="graf graf--pre graf-after--pre">      cleanLitterBox(cat: cat)</pre><pre name="51f7" id="51f7" class="graf graf--pre graf-after--pre">   } else if let bird = pet as? Bird {</pre><pre name="2708" id="2708" class="graf graf--pre graf-after--pre">      cleanCage(bird: bird)</pre><pre name="c9ce" id="c9ce" class="graf graf--pre graf-after--pre">   }</pre><pre name="c8c0" id="c8c0" class="graf graf--pre graf-after--pre">}</pre><ul class="postList"><li name="9b5e" id="9b5e" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">3.3 Guard</strong></li></ul><p name="4d81" id="4d81" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="9974" id="9974" class="graf graf--p graf-after--p">guard else，guard let</p><p name="81ce" id="81ce" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例:</strong></p><p name="78fa" id="78fa" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">guard else</strong></p><p name="2c46" id="2c46" class="graf graf--p graf-after--p">使用 if</p><pre name="08c5" id="08c5" class="graf graf--pre graf-after--p">func divide(_ number: Double, by divisor: Double) {</pre><pre name="d65c" id="d65c" class="graf graf--pre graf-after--pre">   if divisor != 0.0 {</pre><pre name="0cf2" id="0cf2" class="graf graf--pre graf-after--pre">      let result = number / divisor</pre><pre name="c699" id="c699" class="graf graf--pre graf-after--pre">      print(result)</pre><pre name="2baf" id="2baf" class="graf graf--pre graf-after--pre">   }</pre><pre name="6249" id="6249" class="graf graf--pre graf-after--pre">}</pre><p name="7a63" id="7a63" class="graf graf--p graf-after--pre">使用 guard</p><pre name="0eb1" id="0eb1" class="graf graf--pre graf-after--p">func divide(_ number: Double, by divisor: Double) {</pre><pre name="271c" id="271c" class="graf graf--pre graf-after--pre">   guard divisor != 0.0 else { return }</pre><pre name="fcd4" id="fcd4" class="graf graf--pre graf-after--pre">   let result = number / divisor</pre><pre name="c25b" id="c25b" class="graf graf--pre graf-after--pre">   print(result)</pre><pre name="00cc" id="00cc" class="graf graf--pre graf-after--pre">}</pre><p name="1896" id="1896" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">guard let</strong></p><p name="a0d9" id="a0d9" class="graf graf--p graf-after--p">使用 if let</p><pre name="c569" id="c569" class="graf graf--pre graf-after--p">func processBook(title: String?, price: Double?, pages: Int?) {</pre><pre name="60a0" id="60a0" class="graf graf--pre graf-after--pre">   if let theTitle = title, let thePrice = price, let thePages = pages {</pre><pre name="c85d" id="c85d" class="graf graf--pre graf-after--pre">      print(&quot;\(theTitle) costs $\(thePrice) and has \(thePages) pages.&quot;)</pre><pre name="53db" id="53db" class="graf graf--pre graf-after--pre">   }</pre><pre name="948a" id="948a" class="graf graf--pre graf-after--pre">}</pre><p name="1c16" id="1c16" class="graf graf--p graf-after--pre">使用 guard let</p><pre name="c5be" id="c5be" class="graf graf--pre graf-after--p">func processBook(title: String?, price: Double?, pages: Int?) {</pre><pre name="5b21" id="5b21" class="graf graf--pre graf-after--pre">   guard let theTitle = title, let thePrice = price, let</pre><pre name="43b8" id="43b8" class="graf graf--pre graf-after--pre">thePages = pages else { return }</pre><pre name="9a31" id="9a31" class="graf graf--pre graf-after--pre">   print(&quot;\(theTitle) costs $\(thePrice) and has \(thePages) pages.&quot;)</pre><pre name="6af2" id="6af2" class="graf graf--pre graf-after--pre">}</pre><ul class="postList"><li name="675d" id="675d" class="graf graf--li graf-after--pre">3.4 Constant and Variable Scope</li></ul><p name="39da" id="39da" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="2023" id="2023" class="graf graf--p graf-after--p">variable shadowing</p><ul class="postList"><li name="1365" id="1365" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">3.5 Enumerations</strong></li></ul><p name="ba2a" id="ba2a" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="7fcf" id="7fcf" class="graf graf--p graf-after--p">enum，case，default</p><ul class="postList"><li name="f03c" id="f03c" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">3.6 Segues and Navigation Controllers</strong></li></ul><p name="5889" id="5889" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="3696" id="3696" class="graf graf--p graf-after--p">segue，model presentation，show，unwind segue，Exit object，navigation controller，navigation bar，navigation item，bar button item，large title，prepare，segue id，performSegue</p><p name="354c" id="354c" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Lab — Login</strong></p><p name="4b54" id="4b54" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="2aec" id="2aec" class="graf graf--p graf-after--p">performSegue，segue id，prepare</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="7362" id="7362" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*azd-4uHoI8Cs8Yj6YLoGeQ.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/600/1*azd-4uHoI8Cs8Yj6YLoGeQ.jpeg"></figure><figure name="6c78" id="6c78" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*ijvHYqYqSFzfby1_NIK_DQ.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/600/1*ijvHYqYqSFzfby1_NIK_DQ.jpeg"></figure></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="6176" id="6176" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*SbKiMs9QWXH98dt3TVg1yA.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/600/1*SbKiMs9QWXH98dt3TVg1yA.jpeg"></figure><figure name="938d" id="938d" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*g-KL9yluxJvKRouZxge7qw.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/600/1*g-KL9yluxJvKRouZxge7qw.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><ul class="postList"><li name="1037" id="1037" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">3.7 Tab Bar Controllers</strong></li></ul><p name="12a2" id="12a2" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="733a" id="733a" class="graf graf--p graf-after--p">tab bar controller，tab bar item，badge</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="6f0d" id="6f0d" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><img class="graf-image" data-image-id="1*RW5otePwlu1op3kaEwOL4A.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*RW5otePwlu1op3kaEwOL4A.jpeg"></figure><figure name="138f" id="138f" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*qkrl4zZEMMADD3CV8Hbvcw.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*qkrl4zZEMMADD3CV8Hbvcw.jpeg"></figure><figure name="9e74" id="9e74" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*fTV3JipD3igMFga1dQzOHA.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*fTV3JipD3igMFga1dQzOHA.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="ddaa" id="ddaa" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Lab — About Me</strong></p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="a0bc" id="a0bc" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><img class="graf-image" data-image-id="1*evL8w_GBC4MK8GRIUpuv2w.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*evL8w_GBC4MK8GRIUpuv2w.jpeg"></figure><figure name="b626" id="b626" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*zwzhujAMJeVm1ITK15b-gw.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*zwzhujAMJeVm1ITK15b-gw.jpeg"></figure><figure name="7152" id="7152" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*inugoR-Fg-MYsy70E42abg.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*inugoR-Fg-MYsy70E42abg.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><ul class="postList"><li name="63b7" id="63b7" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">3.8 View Controller Life Cycle</strong></li></ul><p name="4e2d" id="4e2d" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="9119" id="9119" class="graf graf--p graf-after--p">viewDidLoad，viewWillAppear，viewDidAppear，viewWillDisappear，viewDidDisappear，override，super</p><p name="c4c5" id="c4c5" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Lab — Order of events</strong></p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="107e" id="107e" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><img class="graf-image" data-image-id="1*D--fAvGM1fD3ic2ae1Gk-w.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*D--fAvGM1fD3ic2ae1Gk-w.jpeg"></figure><figure name="8266" id="8266" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*u1R44DWIGAOWojUXGUaXTg.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*u1R44DWIGAOWojUXGUaXTg.jpeg"></figure><figure name="935b" id="935b" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*HA_IJizBy0NWBJMmfW7phQ.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*HA_IJizBy0NWBJMmfW7phQ.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="4c6e" id="4c6e" class="graf graf--h3 graf-after--figure"><strong class="markup--strong markup--h3-strong">Guided Project — Personality Quiz</strong></h3><p name="07df" id="07df" class="graf graf--p graf-after--h3">心理測驗</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="a381" id="a381" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*R9DBw7dQ4ICFhoVPchmfTw.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/600/1*R9DBw7dQ4ICFhoVPchmfTw.jpeg"></figure><figure name="f1c5" id="f1c5" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*KJNCJQWDNk1uRIJM9NKOHg.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/600/1*KJNCJQWDNk1uRIJM9NKOHg.jpeg"></figure></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="7bb6" id="7bb6" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*RCLy75l02jutBq48_fIlRQ.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*RCLy75l02jutBq48_fIlRQ.jpeg"></figure><figure name="4d24" id="4d24" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*TYTffkEm6RKx0x5g1YCXSA.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*TYTffkEm6RKx0x5g1YCXSA.jpeg"></figure><figure name="efeb" id="efeb" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*8mRz2fQKpD3q3276AxD4dA.jpeg" data-width="824" data-height="1388" src="https://cdn-images-1.medium.com/max/400/1*8mRz2fQKpD3q3276AxD4dA.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="77f5" id="77f5" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="a78d" id="a78d" class="graf graf--p graf-after--p">MVC，stack view，unwind segue，prepare，performSegue，hidesBackButton，map，sorted，enum 的 swift self，$0。</p><p name="6f22" id="6f22" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">特別說明:</strong></p><ul class="postList"><li name="5ed6" id="5ed6" class="graf graf--li graf-after--p">在一個 controller 畫面設計多種問題樣式。</li></ul><figure name="9d88" id="9d88" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*Fi3XCY289sM7aXoMom1Zkg.jpeg" data-width="1034" data-height="962" src="https://cdn-images-1.medium.com/max/800/1*Fi3XCY289sM7aXoMom1Zkg.jpeg"></figure><p name="a427" id="a427" class="graf graf--p graf-after--figure">如下圖所示，我們可將 Single Stack View 的 Installed 取消勾選，讓它暫時不顯示。等我們設計完其它問題的樣子後，再將它的 Installed 勾選。</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="266f" id="266f" class="graf graf--figure graf--layoutOutsetCenter graf-after--p"><img class="graf-image" data-image-id="1*FkSEMEm9KOKuOoZSDmuUMQ.jpeg" data-width="1746" data-height="1180" src="https://cdn-images-1.medium.com/max/1200/1*FkSEMEm9KOKuOoZSDmuUMQ.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><ul class="postList"><li name="d1df" id="d1df" class="graf graf--li graf-after--figure">使用 struct &amp; enum 定義 model。</li></ul><p name="2586" id="2586" class="graf graf--p graf-after--li">struct Question &amp; Answer，enum ResponseType &amp; AnimalType。</p><ul class="postList"><li name="d09e" id="d09e" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">使用 map，sorted，Shorthand Argument Names $0 &amp; $1，tuple，Implicit Returns from Single-Expression Closures</strong></li></ul><pre name="7472" id="7472" class="graf graf--pre graf-after--li">var frequencyOfAnswers: [AnimalType:Int] = [:]</pre><pre name="b520" id="b520" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">let responseTypes = responses.map { $0.type }</strong></pre><pre name="b611" id="b611" class="graf graf--pre graf-after--pre">for response in responseTypes {</pre><pre name="5962" id="5962" class="graf graf--pre graf-after--pre">   frequencyOfAnswers[response] = (frequencyOfAnswers[response] ?? 0) + 1</pre><pre name="f72b" id="f72b" class="graf graf--pre graf-after--pre">}</pre><pre name="35dd" id="35dd" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">let mostCommonAnswer = frequencyOfAnswers.sorted { $0.1 &gt; $1.1 }.first!.key</strong></pre><pre name="614e" id="614e" class="graf graf--pre graf-after--pre">resultAnswerLabel.text = &quot;You are a \(mostCommonAnswer.rawValue)!&quot;</pre><ul class="postList"><li name="0109" id="0109" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">enum 的 computed property &amp; switch self</strong></li></ul><pre name="7026" id="7026" class="graf graf--pre graf-after--li">enum AnimalType: Character {</pre><pre name="b015" id="b015" class="graf graf--pre graf-after--pre">   case dog = &quot;🐶&quot;, cat = &quot;🐱&quot;, rabbit = &quot;🐰&quot;, turtle = &quot;🐢&quot;</pre><pre name="b367" id="b367" class="graf graf--pre graf-after--pre">   var definition: String {</pre><pre name="50e2" id="50e2" class="graf graf--pre graf-after--pre">      switch self {</pre><pre name="c57e" id="c57e" class="graf graf--pre graf-after--pre">      case .dog:</pre><pre name="46e8" id="46e8" class="graf graf--pre graf-after--pre">         return &quot;You are incredibly outgoing. You surround yourself with the people you love, and enjoy activities with your friends.&quot;</pre><pre name="3f07" id="3f07" class="graf graf--pre graf-after--pre">      case .cat:</pre><pre name="44bf" id="44bf" class="graf graf--pre graf-after--pre">         return &quot;Mischievous, yet mild-tempered, you enjoy doing things on your own terms.&quot;</pre><pre name="7615" id="7615" class="graf graf--pre graf-after--pre">      case .rabbit:</pre><pre name="56db" id="56db" class="graf graf--pre graf-after--pre">         return &quot;You love everything that&#39;s soft. You are healthy and full of energy.&quot;</pre><pre name="62af" id="62af" class="graf graf--pre graf-after--pre">      case .turtle:</pre><pre name="0212" id="0212" class="graf graf--pre graf-after--pre">         return &quot;You are wise beyond your years, and you focus on the details. Slow and steady wins the race.&quot;</pre><pre name="606c" id="606c" class="graf graf--pre graf-after--pre">      }</pre><pre name="5a99" id="5a99" class="graf graf--pre graf-after--pre">   }</pre><pre name="f634" id="f634" class="graf graf--pre graf-after--pre">}</pre><h3 name="d8f4" id="d8f4" class="graf graf--h3 graf-after--pre">Unit 3A Building AR Apps with Xcode</h3><h3 name="ef13" id="ef13" class="graf graf--h3 graf-after--h3">Unit 4 Tables and Persistence</h3><ul class="postList"><li name="df83" id="df83" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">4.1 protocols</strong></li></ul><p name="6e7b" id="6e7b" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="224f" id="224f" class="graf graf--p graf-after--p">protocol，adopt，implementation，CustomStringConvertible，Equatable，Comparable，Codable，JSONEncoder，try?，delegation</p><p name="a733" id="a733" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例:</strong></p><p name="3d02" id="3d02" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">控制 print 顯示的字串的 CustomStringConvertible</strong></p><pre name="b618" id="b618" class="graf graf--pre graf-after--p">class Shoe: CustomStringConvertible {</pre><pre name="5e11" id="5e11" class="graf graf--pre graf-after--pre">   var description: String {</pre><pre name="8ea7" id="8ea7" class="graf graf--pre graf-after--pre">      let doesOrDoesNot = hasLaces ? &quot;does&quot; : &quot;does not&quot;</pre><pre name="a75f" id="a75f" class="graf graf--pre graf-after--pre">      return &quot;This shoe is \(color), size \(size), and \(doesOrDoesNot) have laces.&quot;</pre><pre name="07ea" id="07ea" class="graf graf--pre graf-after--pre">   }</pre><pre name="edda" id="edda" class="graf graf--pre graf-after--pre">   let color: String</pre><pre name="84b6" id="84b6" class="graf graf--pre graf-after--pre">   let size: Int</pre><pre name="4142" id="4142" class="graf graf--pre graf-after--pre">   let hasLaces: Bool</pre><pre name="a7d9" id="a7d9" class="graf graf--pre graf-after--pre">   init(color: String, size: Int, hasLaces: Bool) {</pre><pre name="38de" id="38de" class="graf graf--pre graf-after--pre">      self.color = color</pre><pre name="f097" id="f097" class="graf graf--pre graf-after--pre">      self.size = size</pre><pre name="fd43" id="fd43" class="graf graf--pre graf-after--pre">      self.hasLaces = hasLaces</pre><pre name="223e" id="223e" class="graf graf--pre graf-after--pre">   }</pre><pre name="aa27" id="aa27" class="graf graf--pre graf-after--pre">}</pre><p name="c6e1" id="c6e1" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">比較是否相等的 Equatable</strong></p><pre name="d211" id="d211" class="graf graf--pre graf-after--p">struct Employee: Equatable {</pre><pre name="4576" id="4576" class="graf graf--pre graf-after--pre">   var firstName: String</pre><pre name="a814" id="a814" class="graf graf--pre graf-after--pre">   var lastName: String  </pre><pre name="8411" id="8411" class="graf graf--pre graf-after--pre">   var jobTitle: String</pre><pre name="7e7f" id="7e7f" class="graf graf--pre graf-after--pre">   var phoneNumber: String</pre><pre name="401e" id="401e" class="graf graf--pre graf-after--pre">   static func ==(lhs: Employee, rhs: Employee) -&gt; Bool {</pre><pre name="6d17" id="6d17" class="graf graf--pre graf-after--pre">return lhs.firstName == rhs.firstName &amp;&amp; lhs.lastName ==</pre><pre name="4653" id="4653" class="graf graf--pre graf-after--pre">rhs.lastName</pre><pre name="f047" id="f047" class="graf graf--pre graf-after--pre">   }</pre><pre name="7cff" id="7cff" class="graf graf--pre graf-after--pre">}</pre><p name="34ac" id="34ac" class="graf graf--p graf-after--pre">若要比較每個 struct 欄位，其實不需要自己辛苦地定義 function ==，詳情可參考以下連結。</p><pre name="59cb" id="59cb" class="graf graf--pre graf-after--p">struct Employee: Equatable {</pre><pre name="0bd9" id="0bd9" class="graf graf--pre graf-after--pre">   var firstName: String</pre><pre name="e88f" id="e88f" class="graf graf--pre graf-after--pre">   var lastName: String</pre><pre name="845e" id="845e" class="graf graf--pre graf-after--pre">   var jobTitle: String</pre><pre name="c953" id="c953" class="graf graf--pre graf-after--pre">   var phoneNumber: String</pre><pre name="23e5" id="23e5" class="graf graf--pre graf-after--pre">}</pre><div name="f37f" id="f37f" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%87%AA%E5%8B%95%E5%B9%AB%E9%81%B5%E5%BE%9E-equatable-%E7%9A%84-struct-enum-%E5%AE%9A%E7%BE%A9-function-swift-4-1-64d9cca7f3c1" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%87%AA%E5%8B%95%E5%B9%AB%E9%81%B5%E5%BE%9E-equatable-%E7%9A%84-struct-enum-%E5%AE%9A%E7%BE%A9-function-swift-4-1-64d9cca7f3c1" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%87%AA%E5%8B%95%E5%B9%AB%E9%81%B5%E5%BE%9E-equatable-%E7%9A%84-struct-enum-%E5%AE%9A%E7%BE%A9-function-swift-4-1-64d9cca7f3c1"><strong class="markup--strong markup--mixtapeEmbed-strong">自動幫遵從 Equatable 的 struct &amp; enum 定義 == function — Swift 4.1</strong><br><em class="markup--em markup--mixtapeEmbed-em">在 Swift 的世界，並不是任何東西都可以用 == 判斷相等，比方以下我們自訂的 Man 就不行。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%87%AA%E5%8B%95%E5%B9%AB%E9%81%B5%E5%BE%9E-equatable-%E7%9A%84-struct-enum-%E5%AE%9A%E7%BE%A9-function-swift-4-1-64d9cca7f3c1" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="0ac62a4c0c368db38a1edfa5c3c3fd5c" data-thumbnail-img-id="1*_n2I2wioA3H0aiKakVhJ-w.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*_n2I2wioA3H0aiKakVhJ-w.jpeg);"></a></div><p name="96c2" id="96c2" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">比大小的 Comparable</strong></p><pre name="e979" id="e979" class="graf graf--pre graf-after--p">struct Employee: Equatable, Comparable {</pre><pre name="965d" id="965d" class="graf graf--pre graf-after--pre">   var firstName: String</pre><pre name="644f" id="644f" class="graf graf--pre graf-after--pre">   var lastName: String</pre><pre name="5671" id="5671" class="graf graf--pre graf-after--pre">   var jobTitle: String</pre><pre name="7082" id="7082" class="graf graf--pre graf-after--pre">   var phoneNumber: String</pre><pre name="dc37" id="dc37" class="graf graf--pre graf-after--pre">   static func &lt; (lhs: Employee, rhs: Employee) -&gt; Bool {</pre><pre name="eff5" id="eff5" class="graf graf--pre graf-after--pre">      return lhs.lastName &lt; rhs.lastName</pre><pre name="ca61" id="ca61" class="graf graf--pre graf-after--pre">   }</pre><pre name="f191" id="f191" class="graf graf--pre graf-after--pre">}</pre><pre name="d6a3" id="d6a3" class="graf graf--pre graf-after--pre">let sortedEmployees = employees.sorted(by:&gt;)</pre><p name="cfce" id="cfce" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">編碼和解碼的 Codable</strong></p><pre name="ef40" id="ef40" class="graf graf--pre graf-after--p">struct Employee: Codable {<br>    var firstName: String<br>    var lastName: String<br>    var jobTitle: String<br>    var phoneNumber: String<br>}</pre><p name="837d" id="837d" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">creating a protcol</strong></p><pre name="21f0" id="21f0" class="graf graf--pre graf-after--p">protocol FullyNamed {<br>  var fullName: String { get }<br> <br>  func sayFullName()<br>}</pre><pre name="3997" id="3997" class="graf graf--pre graf-after--pre">struct Person: FullyNamed {<br>  var firstName: String<br>  var lastName: String<br> <br>  var fullName: String {<br>    return &quot;\(firstName) \(lastName)&quot;<br>  }<br> <br>  func sayFullName() {<br>    print(fullName)<br>  }<br>}</pre><ul class="postList"><li name="e407" id="e407" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">4.2 App Anatomy and Life Cycle</strong></li></ul><p name="b0d2" id="b0d2" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="2f9a" id="2f9a" class="graf graf--p graf-after--p">AppDelegate，UIAppliccationDelegate</p><figure name="e4d3" id="e4d3" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*yIgl_0b98OVN3B80DphseA.jpeg" data-width="796" data-height="890" src="https://cdn-images-1.medium.com/max/800/1*yIgl_0b98OVN3B80DphseA.jpeg"></figure><p name="1058" id="1058" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">範例:</strong></p><pre name="f651" id="f651" class="graf graf--pre graf-after--p">func application(_ application: UIApplication,<br>didFinishLaunchingWithOptions launchOptions:<br>[UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {<br>   <br>    return true<br>}</pre><pre name="b7f1" id="b7f1" class="graf graf--pre graf-after--pre">func applicationWillResignActive(_ application: UIApplication) {</pre><pre name="2bb5" id="2bb5" class="graf graf--pre graf-after--pre">}</pre><pre name="1b1f" id="1b1f" class="graf graf--pre graf-after--pre">func applicationDidEnterBackground(_ application: UIApplication) {</pre><pre name="9a99" id="9a99" class="graf graf--pre graf-after--pre">}</pre><pre name="7e24" id="7e24" class="graf graf--pre graf-after--pre">func applicationWillEnterForeground(_ application: UIApplication) {</pre><pre name="82e6" id="82e6" class="graf graf--pre graf-after--pre">}</pre><pre name="a4b8" id="a4b8" class="graf graf--pre graf-after--pre">func applicationDidBecomeActive(_ application: UIApplication) {</pre><pre name="b49f" id="b49f" class="graf graf--pre graf-after--pre">}</pre><pre name="50eb" id="50eb" class="graf graf--pre graf-after--pre">func applicationWillTerminate(_ application: UIApplication) {<br>}</pre><p name="465c" id="465c" class="graf graf--p graf-after--pre">當使用者自己主動結束 App 時，將分成兩種 cases:</p><ol class="postList"><li name="c83b" id="c83b" class="graf graf--li graf-after--p">App 可以在背景執行程式，比方在背景播放音樂的 App，它被使用者殺掉時將觸發 applicationDidEnterBackground。</li><li name="47bc" id="47bc" class="graf graf--li graf-after--li">不能在背景執行程式的 App 被使用者殺掉時，將觸發 applicationDidEnterBackground，接著再觸發 applicationWillTerminate。</li></ol><p name="5e4b" id="5e4b" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Lab — App event count</strong></p><figure name="734b" id="734b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*znb1cP7KXqEWQOy0k6Zo7w.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/800/1*znb1cP7KXqEWQOy0k6Zo7w.jpeg"></figure><p name="1c85" id="1c85" class="graf graf--p graf-after--figure">利用 UIWindow 的 rootViewController 存取 App 的第一個 view controller。</p><pre name="9273" id="9273" class="graf graf--pre graf-after--p">var viewController: ViewController?</pre><pre name="003f" id="003f" class="graf graf--pre graf-after--pre">func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {</pre><pre name="07ab" id="07ab" class="graf graf--pre graf-after--pre">   viewController = window?.rootViewController as? ViewController</pre><pre name="a42d" id="a42d" class="graf graf--pre graf-after--pre">   viewController?.launchCount += 1</pre><pre name="e326" id="e326" class="graf graf--pre graf-after--pre">   return true</pre><pre name="170e" id="170e" class="graf graf--pre graf-after--pre">}</pre><ul class="postList"><li name="6d1a" id="6d1a" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">4.3 Model View Controller</strong></li></ul><p name="bf3a" id="bf3a" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="b827" id="b827" class="graf graf--p graf-after--p">model，view，controller，MVC，project organization</p><figure name="8b99" id="8b99" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*dVt98AkCxS4n1EsEgALhRg.jpeg" data-width="980" data-height="406" src="https://cdn-images-1.medium.com/max/800/1*dVt98AkCxS4n1EsEgALhRg.jpeg"></figure><p name="0d91" id="0d91" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Lab — Favorite Athletes</strong></p><p name="c2e1" id="c2e1" class="graf graf--p graf-after--p">設計 MVC 架構。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="c348" id="c348" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*If_Pe7ydqZUjaWIm_l_mMg.jpeg" data-width="876" data-height="1492" src="https://cdn-images-1.medium.com/max/600/1*If_Pe7ydqZUjaWIm_l_mMg.jpeg"></figure><figure name="4c9e" id="4c9e" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*-Q3T-VnHRzXyWoUhGP266A.jpeg" data-width="876" data-height="1492" src="https://cdn-images-1.medium.com/max/600/1*-Q3T-VnHRzXyWoUhGP266A.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><ul class="postList"><li name="4355" id="4355" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">4.4 Scroll Views</strong></li></ul><p name="e5e6" id="e5e6" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="0898" id="0898" class="graf graf--p graf-after--p">scroll view，contentSize，frame，content inset，scroll indicator inset</p><p name="9a2b" id="9a2b" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例</strong></p><p name="4af1" id="4af1" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">讓圖片在放大縮小時維持置中</strong></p><pre name="3f6c" id="3f6c" class="graf graf--pre graf-after--p">imageView.centerXAnchor.constraints(equalTo: <br>   scrollView.contentLayoutGuide.centerXAnchor)<br>imageView.centerYAnchor.constraints(equalTo: <br>   scrollView.contentLayoutGuide.centerYAnchor)</pre><p name="ef8a" id="ef8a" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">利用 stack view 裝 scroll view 要顯示的內容</strong></p><p name="d6e0" id="d6e0" class="graf graf--p graf-after--p">ScrollingForm project</p><figure name="09f7" id="09f7" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*XcQ5x-GeXZog9FsjJ73vsA.jpeg" data-width="1426" data-height="1450" src="https://cdn-images-1.medium.com/max/800/1*XcQ5x-GeXZog9FsjJ73vsA.jpeg"></figure><p name="1c69" id="1c69" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">keyboard 出現/收起時移動 scroll view</strong></p><p name="7e96" id="7e96" class="graf graf--p graf-after--p">調整 scroll view 的 contentInsets，鍵盤出現時將它的 bottom 設為鍵盤的高度，如此可保證若 scroll view 捲動到底部，scroll view 最下面的 text filed 將不會被鍵盤檔到。調整 contentInsets 後，當使用者點選某個 text field 時，scroll view 將聰明地判斷是否需捲動，以及需捲動多少。</p><pre name="3b1b" id="3b1b" class="graf graf--pre graf-after--p">func registerForKeyboardNotifications() {</pre><pre name="631a" id="631a" class="graf graf--pre graf-after--pre">   NotificationCenter.default.addObserver(self, selector: #selector(keyboardWasShown(_:)), name: UIResponder.keyboardDidShowNotification, object: nil)</pre><pre name="c779" id="c779" class="graf graf--pre graf-after--pre">   NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillBeHidden(_:)), name: UIResponder.keyboardWillHideNotification, object: nil)</pre><pre name="97e3" id="97e3" class="graf graf--pre graf-after--pre">}</pre><pre name="f5c3" id="f5c3" class="graf graf--pre graf-after--pre">@objc func keyboardWasShown(_ notificiation: NSNotification) {</pre><pre name="fc8b" id="fc8b" class="graf graf--pre graf-after--pre">   guard let info = notificiation.userInfo,</pre><pre name="b7b8" id="b7b8" class="graf graf--pre graf-after--pre">let keyboardFrameValue = info[UIResponder.keyboardFrameEndUserInfoKey] as? NSValue else { return }</pre><pre name="de62" id="de62" class="graf graf--pre graf-after--pre">   let keyboardFrame = keyboardFrameValue.cgRectValue</pre><pre name="5b7e" id="5b7e" class="graf graf--pre graf-after--pre">   let keyboardSize = keyboardFrame.size</pre><pre name="f6aa" id="f6aa" class="graf graf--pre graf-after--pre">   let contentInsets = UIEdgeInsets(top: 0.0, left: 0.0, bottom: keyboardSize.height, right: 0.0)</pre><pre name="37d3" id="37d3" class="graf graf--pre graf-after--pre">   scrollView.contentInset = contentInsets</pre><pre name="e333" id="e333" class="graf graf--pre graf-after--pre">   scrollView.scrollIndicatorInsets = contentInsets</pre><pre name="86c6" id="86c6" class="graf graf--pre graf-after--pre">}</pre><pre name="1533" id="1533" class="graf graf--pre graf-after--pre">@objc func keyboardWillBeHidden(_ notification: NSNotification) {</pre><pre name="0628" id="0628" class="graf graf--pre graf-after--pre">   let contentInsets = UIEdgeInsets.zero</pre><pre name="67ab" id="67ab" class="graf graf--pre graf-after--pre">   scrollView.contentInset = contentInsets</pre><pre name="a8a3" id="a8a3" class="graf graf--pre graf-after--pre">   scrollView.scrollIndicatorInsets = contentInsets</pre><pre name="1061" id="1061" class="graf graf--pre graf-after--pre">}</pre><figure name="707d" id="707d" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*Lk9HbEwS_EuWuYremv4qjw.jpeg" data-width="842" data-height="914" src="https://cdn-images-1.medium.com/max/800/1*Lk9HbEwS_EuWuYremv4qjw.jpeg"></figure><p name="1ec1" id="1ec1" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Lab — I spy</strong></p><p name="8c93" id="8c93" class="graf graf--p graf-after--p">利用 scroll view 縮放圖片。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="1b60" id="1b60" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><img class="graf-image" data-image-id="1*5DUfxsAEasRPY6DW8gH37w.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/400/1*5DUfxsAEasRPY6DW8gH37w.jpeg"></figure><figure name="a05c" id="a05c" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*PgAgWdXhM8ivNsyTBbPmFg.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/400/1*PgAgWdXhM8ivNsyTBbPmFg.jpeg"></figure><figure name="a23a" id="a23a" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*v5DgPDBqXm0p3byusz1jxQ.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/400/1*v5DgPDBqXm0p3byusz1jxQ.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="cdf0" id="cdf0" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="0fb6" id="0fb6" class="graf graf--p graf-after--p">UIScrollViewDelegate，zoom，viewForZooming</p><p name="5601" id="5601" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">特別說明:</strong></p><p name="cf7d" id="cf7d" class="graf graf--p graf-after--p">計算圖片縮放的 minimumZoomScale，讓圖片縮到最小時可以在螢幕裡。</p><pre name="e30d" id="e30d" class="graf graf--pre graf-after--p">override func viewDidLoad() {</pre><pre name="6fbd" id="6fbd" class="graf graf--pre graf-after--pre">   scrollView.delegate = self</pre><pre name="104c" id="104c" class="graf graf--pre graf-after--pre">   updateZoomFor(size: view.bounds.size)</pre><pre name="5ff4" id="5ff4" class="graf graf--pre graf-after--pre">}</pre><pre name="359e" id="359e" class="graf graf--pre graf-after--pre">func updateZoomFor(size: CGSize) {</pre><pre name="729a" id="729a" class="graf graf--pre graf-after--pre">   let widthScale = size.width / imageView.bounds.width</pre><pre name="5429" id="5429" class="graf graf--pre graf-after--pre">   let heightScale = size.height / imageView.bounds.height</pre><pre name="136c" id="136c" class="graf graf--pre graf-after--pre">   let scale = min(widthScale, heightScale) </pre><pre name="cbcb" id="cbcb" class="graf graf--pre graf-after--pre">   scrollView.minimumZoomScale = scale</pre><pre name="c609" id="c609" class="graf graf--pre graf-after--pre">}</pre><ul class="postList"><li name="7074" id="7074" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">4.5 Table Views</strong></li></ul><p name="3cad" id="3cad" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="fe6c" id="fe6c" class="graf graf--p graf-after--p">table view，dynamic，accessory view，dequeue，reuse identifier，index path，cell，readability margin，reorder，UITableViewDataSource，UITableViewDelegate</p><p name="bf3f" id="bf3f" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例</strong></p><p name="3557" id="3557" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Emoji dictionary app</strong></p><figure name="cb82" id="cb82" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*cpzCmUxnwg3dfXvSgv5Ouw.jpeg" data-width="866" data-height="1480" src="https://cdn-images-1.medium.com/max/800/1*cpzCmUxnwg3dfXvSgv5Ouw.jpeg"></figure><p name="f320" id="f320" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">使用 table view controller 的好處</strong></p><p name="798d" id="798d" class="graf graf--p graf-after--p">keyboard 出現時，table 會自動 scroll，讓 text field 不被檔到</p><p name="4a83" id="4a83" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Initial view controller</strong></p><figure name="6b17" id="6b17" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*z_hkxFaN_-Gg2ERxG6AM5A.jpeg" data-width="514" data-height="174" src="https://cdn-images-1.medium.com/max/800/1*z_hkxFaN_-Gg2ERxG6AM5A.jpeg"></figure><p name="2d94" id="2d94" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">table view style</strong></p><p name="b8c5" id="b8c5" class="graf graf--p graf-after--p">plain &amp; grouped</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="6a6a" id="6a6a" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50.218%;"><img class="graf-image" data-image-id="1*FNgpMh6sv2HryRE4lAsTQw.jpeg" data-width="840" data-height="1458" src="https://cdn-images-1.medium.com/max/600/1*FNgpMh6sv2HryRE4lAsTQw.jpeg"></figure><figure name="14f2" id="14f2" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 49.782%;"><img class="graf-image" data-image-id="1*ALyRgfoXTlF_bP4MF40zyw.jpeg" data-width="836" data-height="1464" src="https://cdn-images-1.medium.com/max/600/1*ALyRgfoXTlF_bP4MF40zyw.jpeg"><figcaption class="imageCaption" style="width: 200.876%; left: -100.876%;">左邊 plain，右邊 grouped</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="efe2" id="efe2" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">table view cell</strong></p><p name="6594" id="6594" class="graf graf--p graf-after--p">(1) default mode</p><figure name="b312" id="b312" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*KU7FkHspdUjQOcOP7A30Wg.jpeg" data-width="784" data-height="206" src="https://cdn-images-1.medium.com/max/800/1*KU7FkHspdUjQOcOP7A30Wg.jpeg"></figure><p name="7ac4" id="7ac4" class="graf graf--p graf-after--figure">(2) editing mode</p><figure name="f9ad" id="f9ad" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*tgoIuqewUiSoeLBChpvUWw.jpeg" data-width="800" data-height="206" src="https://cdn-images-1.medium.com/max/800/1*tgoIuqewUiSoeLBChpvUWw.jpeg"></figure><p name="99c9" id="99c9" class="graf graf--p graf-after--figure">table view 的 property isEditing 控制 table 目前是否為 editing mode。比方以下例子，我們點選 Edit button，呼叫 table view 的 function setEditing(_:animated:)，讓 table 進入 editing mode。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="4da5" id="4da5" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*v6MiLKJlnHw_tk0Yc0DvEg.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/600/1*v6MiLKJlnHw_tk0Yc0DvEg.jpeg"></figure><figure name="f1b4" id="f1b4" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*nSVwIHitxlIoCfZI8SNl3Q.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/600/1*nSVwIHitxlIoCfZI8SNl3Q.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><pre name="c7e7" id="c7e7" class="graf graf--pre graf-after--figure">@IBAction func editButtonTapped(_ sender: UIBarButtonItem) {</pre><pre name="5a0e" id="5a0e" class="graf graf--pre graf-after--pre">   let tableViewEditingMode = tableView.isEditing</pre><pre name="6a72" id="6a72" class="graf graf--pre graf-after--pre">   tableView.setEditing(!tableViewEditingMode, animated: true)</pre><pre name="9c29" id="9c29" class="graf graf--pre graf-after--pre">}</pre><div name="ce70" id="ce70" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://developer.apple.com/documentation/uikit/uitableview/1614876-setediting" data-href="https://developer.apple.com/documentation/uikit/uitableview/1614876-setediting" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/uikit/uitableview/1614876-setediting"><strong class="markup--strong markup--mixtapeEmbed-strong">setEditing(_:animated:) — UITableView | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/uikit/uitableview/1614876-setediting" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="f9ac71a2de320ad88367323ad8666c0b"></a></div><p name="1bd5" id="1bd5" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">cell style</strong></p><p name="1abe" id="1abe" class="graf graf--p graf-after--p">Basic，Subtitle，Right Detail，Left Detail</p><p name="5e51" id="5e51" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">UITableViewCellAccessoryType</strong></p><p name="0ad2" id="0ad2" class="graf graf--p graf-after--p">Disclosure Indicator，Detail Disclosure，Checkmark，Detail</p><p name="498e" id="498e" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">table view readability margin</strong></p><p name="21a4" id="21a4" class="graf graf--p graf-after--p">將 cellLayoutMarginsFollowReadableWidth 設為 true，將讓 cell 的的寬度包含在 readable margin 裡，讓 cell 將大螢幕時不會太寬。</p><figure name="d423" id="d423" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*fWt6C9UV8fy_hftXOhZdQQ.jpeg" data-width="1080" data-height="426" src="https://cdn-images-1.medium.com/max/800/1*fWt6C9UV8fy_hftXOhZdQQ.jpeg"></figure><p name="b9e4" id="b9e4" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Index Path</strong></p><p name="cbd8" id="cbd8" class="graf graf--p graf-after--p">利用 IndexPath 的 section &amp; row 存取某個 cell</p><p name="70f7" id="70f7" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">table view delegate 例子</strong></p><p name="357a" id="357a" class="graf graf--p graf-after--p">點選 cell</p><pre name="1ef6" id="1ef6" class="graf graf--pre graf-after--p">override func tableView(_ tableView: UITableView, didSelectRowAt<br>indexPath: IndexPath) {<br>    <br>}</pre><p name="15eb" id="15eb" class="graf graf--p graf-after--pre">移動(reorder) cell</p><figure name="5a4b" id="5a4b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*nIQTJyCyLI9GAumm3HKbIA.jpeg" data-width="1058" data-height="152" src="https://cdn-images-1.medium.com/max/800/1*nIQTJyCyLI9GAumm3HKbIA.jpeg"></figure><p name="8d11" id="8d11" class="graf graf--p graf-after--figure">1. cell.showsReorderControl = true</p><p name="5a9d" id="5a9d" class="graf graf--p graf-after--p">2.tableView.isEditing = true</p><p name="d14d" id="d14d" class="graf graf--p graf-after--p">3. 定義 function tableView(_:, moveRowAt fromIndexPath:, to:)</p><pre name="bf5d" id="bf5d" class="graf graf--pre graf-after--p">override func tableView(_ tableView: UITableView, moveRowAt <br>fromIndexPath: IndexPath, to: IndexPath) {<br>    let movedEmoji = emojis.remove(at: fromIndexPath.row)<br>    emojis.insert(movedEmoji, at: to.row)<br>    tableView.reloadData()<br>}</pre><p name="f03b" id="f03b" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Lab — meal tracker</strong></p><p name="6a47" id="6a47" class="graf graf--p graf-after--p">多個 section，利用 tableView(_:titleForHeaderInSection:) 顯示 section 的標題。</p><figure name="f046" id="f046" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*axD1VVvEfvfz30OnskNuvQ.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/800/1*axD1VVvEfvfz30OnskNuvQ.jpeg"></figure><h3 name="2b4c" id="2b4c" class="graf graf--h3 graf-after--figure"><strong class="markup--strong markup--h3-strong">4.6 Intermediate Table Views</strong></h3><p name="ed59" id="ed59" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="0b5e" id="0b5e" class="graf graf--p graf-after--p">custom cell，static cell，add &amp; delete cell，row action，content hugging priority，cell subclass，UITableViewCell.EditingStyle，content compression resistance</p><p name="743e" id="743e" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例</strong></p><p name="4e17" id="4e17" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">調整 content hugging priority</strong></p><p name="0d48" id="0d48" class="graf graf--p graf-after--p">問題: emoji 圖案 label 太長</p><figure name="8418" id="8418" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*BIeeJrS_V1goTfO93tLikw.jpeg" data-width="1334" data-height="504" src="https://cdn-images-1.medium.com/max/800/1*BIeeJrS_V1goTfO93tLikw.jpeg"></figure><p name="f80e" id="f80e" class="graf graf--p graf-after--figure">解法: 將 emoji 圖案 label 的 horizontal content hugging priority 調高。</p><p name="81d7" id="81d7" class="graf graf--p graf-after--p">讓 emoji 圖案 label 的 horizontal content hugging priority(252) 比右邊的 name label &amp; description label(251) 大。horizontal content hugging priority 較大的元件可維持原本內容的大小，不會被拉長。相反的，horizontal content hugging priority 較小的元件將被拉長。</p><figure name="52df" id="52df" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*fKslkOtG-jH56giDoU-nFA.jpeg" data-width="520" data-height="1146" src="https://cdn-images-1.medium.com/max/800/1*fKslkOtG-jH56giDoU-nFA.jpeg"></figure><p name="fc2d" id="fc2d" class="graf graf--p graf-after--figure">結果</p><figure name="ee80" id="ee80" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*zfS6YUT5cLts9LCHa2Uvqg.jpeg" data-width="830" data-height="180" src="https://cdn-images-1.medium.com/max/800/1*zfS6YUT5cLts9LCHa2Uvqg.jpeg"></figure><p name="81b1" id="81b1" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">調整 table view 的 editing style</strong></p><figure name="4aed" id="4aed" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*z4wjntkOxliDLjMuJoR2SQ.jpeg" data-width="864" data-height="634" src="https://cdn-images-1.medium.com/max/800/1*z4wjntkOxliDLjMuJoR2SQ.jpeg"></figure><p name="e953" id="e953" class="graf graf--p graf-after--figure">(1) 沒有定義 function tableView(_:editingStyleForRowAt:) 時，預設為 delete。</p><figure name="c451" id="c451" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*nSVwIHitxlIoCfZI8SNl3Q.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/800/1*nSVwIHitxlIoCfZI8SNl3Q.jpeg"></figure><p name="2109" id="2109" class="graf graf--p graf-after--figure">(2) 定義 function tableView(_:editingStyleForRowAt:)，回傳 insert style。</p><pre name="a2d0" id="a2d0" class="graf graf--pre graf-after--p">override func tableView(_ tableView: UITableView, editingStyleForRowAt indexPath: IndexPath) -&gt; UITableViewCell.EditingStyle {</pre><pre name="d2c2" id="d2c2" class="graf graf--pre graf-after--pre">   return .insert</pre><pre name="bde9" id="bde9" class="graf graf--pre graf-after--pre">}</pre><figure name="84c4" id="84c4" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*neCXhmizxuGyTQBtu2z6fg.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/800/1*neCXhmizxuGyTQBtu2z6fg.jpeg"></figure><p name="c316" id="c316" class="graf graf--p graf-after--figure">(3) 定義 function tableView(_:editingStyleForRowAt:)，回傳 none style。</p><pre name="2f9b" id="2f9b" class="graf graf--pre graf-after--p">override func tableView(_ tableView: UITableView, editingStyleForRowAt indexPath: IndexPath) -&gt; UITableViewCell.EditingStyle {</pre><pre name="c322" id="c322" class="graf graf--pre graf-after--pre">   return .none</pre><pre name="839f" id="839f" class="graf graf--pre graf-after--pre">}</pre><figure name="aca1" id="aca1" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*2iepV_DY74oPNhxTGhhbQw.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/800/1*2iepV_DY74oPNhxTGhhbQw.jpeg"></figure><p name="b18e" id="b18e" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">依據表單內容設定 save button 的狀態，讓表單資料 ok 時才能點選 save button。</strong></p><pre name="f300" id="f300" class="graf graf--pre graf-after--p">func updateSaveButtonState() {</pre><pre name="62f0" id="62f0" class="graf graf--pre graf-after--pre">   let symbolText = symbolTextField.text ?? &quot;&quot;</pre><pre name="14fd" id="14fd" class="graf graf--pre graf-after--pre">   let nameText = nameTextField.text ?? &quot;&quot;</pre><pre name="f298" id="f298" class="graf graf--pre graf-after--pre">   let descriptionText = descriptionTextField.text ?? &quot;&quot;</pre><pre name="cc2c" id="cc2c" class="graf graf--pre graf-after--pre">   let usageText = usageTextField.text ?? &quot;&quot;</pre><pre name="8c54" id="8c54" class="graf graf--pre graf-after--pre">   saveButton.isEnabled = !symbolText.isEmpty &amp;&amp; !nameText.isEmpty &amp;&amp; !descriptionText.isEmpty &amp;&amp; !usageText.isEmpty</pre><pre name="feba" id="feba" class="graf graf--pre graf-after--pre">}</pre><p name="1a1d" id="1a1d" class="graf graf--p graf-after--pre">在 viewDidLoad 時設定 save button 的狀態。</p><pre name="1c1f" id="1c1f" class="graf graf--pre graf-after--p">override func viewDidLoad() {</pre><pre name="8748" id="8748" class="graf graf--pre graf-after--pre">   super.viewDidLoad()</pre><pre name="65b1" id="65b1" class="graf graf--pre graf-after--pre">   if let emoji = emoji {</pre><pre name="ab39" id="ab39" class="graf graf--pre graf-after--pre">      symbolTextField.text = emoji.symbol</pre><pre name="4b1f" id="4b1f" class="graf graf--pre graf-after--pre">      nameTextField.text = emoji.name</pre><pre name="94b5" id="94b5" class="graf graf--pre graf-after--pre">      descriptionTextField.text = emoji.detailDescription</pre><pre name="54df" id="54df" class="graf graf--pre graf-after--pre">      usageTextField.text = emoji.usage</pre><pre name="0a4f" id="0a4f" class="graf graf--pre graf-after--pre">   }</pre><pre name="fd37" id="fd37" class="graf graf--pre graf-after--pre">   updateSaveButtonState()</pre><pre name="aa03" id="aa03" class="graf graf--pre graf-after--pre">}</pre><p name="a792" id="a792" class="graf graf--p graf-after--pre">在文字輸入時設定 save button 的狀態。(連結 text field 的 editing changed event)</p><pre name="029a" id="029a" class="graf graf--pre graf-after--p">@IBAction func textEditingChanged(_ sender: UITextField) {</pre><pre name="b90e" id="b90e" class="graf graf--pre graf-after--pre">   updateSaveButtonState()</pre><pre name="fc12" id="fc12" class="graf graf--pre graf-after--pre">}</pre><p name="42db" id="42db" class="graf graf--p graf-after--pre">除了調整 button 狀態，另一種做法是讓 button 維持可點選，點選時再判斷是否可儲存資料，然後再從程式觸發回到之前頁面。(比方呼叫 performSegue)</p><p name="48c8" id="48c8" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">比較</strong></p><p name="3666" id="3666" class="graf graf--p graf-after--p">(1) 表單資料有問題時，save button 不能點選</p><p name="04ce" id="04ce" class="graf graf--p graf-after--p">在 function prepare 建立資料</p><p name="a7be" id="a7be" class="graf graf--p graf-after--p">(2) save button 維持可以點選</p><p name="2377" id="2377" class="graf graf--p graf-after--p">設定 save button 的 IBAction function，若表單資料 ok，在 function 裡建立資料 &amp; 回到之前頁面。</p><p name="ca64" id="ca64" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">table view cell 的 automatic row height</strong></p><p name="934a" id="934a" class="graf graf--p graf-after--p">利用 auto layout 自動計算高度。</p><p name="36b3" id="36b3" class="graf graf--p graf-after--p">從 Xcode 9 開始，table view 預設即以 auto layout 計算 cell 高度，Row Height &amp; Estimate 勾選為 Automatic。</p><figure name="5284" id="5284" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*OM2jYuVbIvoUsWUNlkaViA.jpeg" data-width="518" data-height="212" src="https://cdn-images-1.medium.com/max/800/1*OM2jYuVbIvoUsWUNlkaViA.jpeg"></figure><p name="21c2" id="21c2" class="graf graf--p graf-after--figure">若想從程式設定，方法如下</p><p name="c09a" id="c09a" class="graf graf--p graf-after--p">estimatedRowHeight 可設為某個預測的數字或是用 UITableView.automaticDimension。</p><pre name="eaf9" id="eaf9" class="graf graf--pre graf-after--p">tableView.rowHeight = UITableView.automaticDimension</pre><pre name="28ed" id="28ed" class="graf graf--pre graf-after--pre">tableView.estimatedRowHeight = 44.0</pre><p name="b4d7" id="b4d7" class="graf graf--p graf-after--pre">如果想要 cell 固定高度，則可參考以下連結。</p><div name="e53d" id="e53d" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%A6%82%E4%BD%95%E8%AE%93-table-view-cell-%E5%9B%BA%E5%AE%9A%E9%AB%98%E5%BA%A6-77e7ab6f6a4" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%A6%82%E4%BD%95%E8%AE%93-table-view-cell-%E5%9B%BA%E5%AE%9A%E9%AB%98%E5%BA%A6-77e7ab6f6a4" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%A6%82%E4%BD%95%E8%AE%93-table-view-cell-%E5%9B%BA%E5%AE%9A%E9%AB%98%E5%BA%A6-77e7ab6f6a4"><strong class="markup--strong markup--mixtapeEmbed-strong">如何讓 table view cell 固定高度</strong><br><em class="markup--em markup--mixtapeEmbed-em">從 Xcode 9 開始，table view cell 預設搭配 Auto Layout 條件計算高度。若是沒有在 cell 設定任何 auto layout 條件，cell 將無從計算它的高度，只能採用預設的 cell 高度 44。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%A6%82%E4%BD%95%E8%AE%93-table-view-cell-%E5%9B%BA%E5%AE%9A%E9%AB%98%E5%BA%A6-77e7ab6f6a4" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="8bb6e9a79a86d5c7d287316bc708afa5" data-thumbnail-img-id="1*mbuS0D8DThIWq2S7XYXIfA.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*mbuS0D8DThIWq2S7XYXIfA.jpeg);"></a></div><p name="f88d" id="f88d" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">content compression resistance</strong></p><p name="fa11" id="fa11" class="graf graf--p graf-after--p">因為 interface builder 以為 cell 是固定高度，所以 name label &amp; description label 並排時它覺得可能會有問題，認為其中一個可能要縮小高度，不能顯示完整內容。</p><figure name="c62e" id="c62e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Pva113t4wrrI-gIiuIv64A.jpeg" data-width="1246" data-height="404" src="https://cdn-images-1.medium.com/max/800/1*Pva113t4wrrI-gIiuIv64A.jpeg"></figure><figure name="65a2" id="65a2" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*ILJDgZTIKhA58oZWplV06w.jpeg" data-width="760" data-height="272" src="https://cdn-images-1.medium.com/max/800/1*ILJDgZTIKhA58oZWplV06w.jpeg"></figure><p name="0bc3" id="0bc3" class="graf graf--p graf-after--figure">如果已經將 table view 設為自動計算 cell 高度，其實可忽略此錯誤。如果不想看到錯誤，則可調整 content compression resistance，比方讓 description label 的 content compression resistance 比 name label 小。重點在讓 interface builder 覺得兩個 label 的 content compression resistance 可以分出勝負，所以誰大誰小不重要。</p><figure name="999d" id="999d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*kSEcd7LC9--eo511JikFgQ.jpeg" data-width="532" data-height="1304" src="https://cdn-images-1.medium.com/max/800/1*kSEcd7LC9--eo511JikFgQ.jpeg"></figure><h3 name="656d" id="656d" class="graf graf--h3 graf-after--figure">Lab — Favorite books</h3></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="3b8e" id="3b8e" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--h3" style="width: 33.333%;"><img class="graf-image" data-image-id="1*K66hZUs_I8vXODUCEZcMXw.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/400/1*K66hZUs_I8vXODUCEZcMXw.jpeg"></figure><figure name="7efd" id="7efd" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*AlfHbS9yHIdUGrxhanFnqw.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/400/1*AlfHbS9yHIdUGrxhanFnqw.jpeg"></figure><figure name="2f42" id="2f42" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*RhJlqbTw0dqtrpMpl6velw.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/400/1*RhJlqbTw0dqtrpMpl6velw.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="9b72" id="9b72" class="graf graf--h3 graf-after--figure">4.7 Saving Data</h3><p name="f790" id="f790" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="6d04" id="6d04" class="graf graf--p graf-after--p">Codable，data，sandboxing，documents directory，persistence，archiving，encode，decode，serialization，plist，PropertyListEncoder，PropertyListDecoder，write</p><h3 name="1966" id="1966" class="graf graf--h3 graf-after--p">Lab — Remember your emojis</h3></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="97cc" id="97cc" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--h3" style="width: 50%;"><img class="graf-image" data-image-id="1*oDmV8DxEnWAjFe_CJCaNdQ.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/600/1*oDmV8DxEnWAjFe_CJCaNdQ.jpeg"></figure><figure name="50bf" id="50bf" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*7SFKC67KYk5rxXJazgECLg.jpeg" data-width="1046" data-height="1824" src="https://cdn-images-1.medium.com/max/600/1*7SFKC67KYk5rxXJazgECLg.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="bd42" id="bd42" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">一開始沒資料時，顯示預設的資料。</strong></p><p name="ba7c" id="ba7c" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">class EmojiTableViewController</strong></p><pre name="1a17" id="1a17" class="graf graf--pre graf-after--p">override func viewDidLoad() {</pre><pre name="5c83" id="5c83" class="graf graf--pre graf-after--pre">   super.viewDidLoad()</pre><pre name="37a9" id="37a9" class="graf graf--pre graf-after--pre">   if let savedEmojis = Emoji.loadFromFile() {</pre><pre name="0625" id="0625" class="graf graf--pre graf-after--pre">      emojis = savedEmojis</pre><pre name="03a4" id="03a4" class="graf graf--pre graf-after--pre">   } else {</pre><pre name="8af6" id="8af6" class="graf graf--pre graf-after--pre">      emojis = Emoji.loadSampleEmojis()</pre><pre name="fc4c" id="fc4c" class="graf graf--pre graf-after--pre">   }</pre><p name="c805" id="c805" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">model Emoji</strong></p><p name="4dbc" id="4dbc" class="graf graf--p graf-after--p">遵從 protocol Codable ，將存檔位置存在 static property</p><pre name="6dd2" id="6dd2" class="graf graf--pre graf-after--p">static let documentsDirectory = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first!</pre><pre name="1162" id="1162" class="graf graf--pre graf-after--pre">static let archiveURL = documentsDirectory.appendingPathComponent(&quot;emojis&quot;).appendingPathExtension(&quot;plist&quot;)</pre><p name="a85b" id="a85b" class="graf graf--p graf-after--pre">定義讀取資料和儲存資料的 static function。</p><pre name="ff89" id="ff89" class="graf graf--pre graf-after--p">static func loadFromFile() -&gt; [Emoji]?</pre><pre name="60b4" id="60b4" class="graf graf--pre graf-after--pre">static func loadSampleEmojis() -&gt; [Emoji]</pre><pre name="6767" id="6767" class="graf graf--pre graf-after--pre">static func saveToFile(emojis: [Emoji])</pre><p name="9699" id="9699" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">何時讀檔 ?</strong></p><p name="a352" id="a352" class="graf graf--p graf-after--p">controller 的畫面載入完成時(viewDidLoad)。</p><p name="7ec2" id="7ec2" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">何時存檔 ?</strong></p><p name="abe2" id="abe2" class="graf graf--p graf-after--p">新增資料，修改資料，調整資料順序，刪除資料。</p><h3 name="9c33" id="9c33" class="graf graf--h3 graf-after--p">4.8 System View Controllers</h3><p name="c76f" id="c76f" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="d5c4" id="d5c4" class="graf graf--p graf-after--p">UIActivityController，UIAlertController，SFSafariViewController，UIImagePickerViewController，MFMailComposeViewController，handler，MFMessageComposeViewController</p><p name="a735" id="a735" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例:</strong></p><p name="346f" id="346f" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">設定 UIActivityController 在 iPad 上分享內容時顯示的位置</strong></p><p name="0148" id="0148" class="graf graf--p graf-after--p">UIActivityViewController 的 modalPresentationStyle 預設是 popover(彈出視窗)，所以在 iPad 上顯示時我們需設定 popover 彈出的位置，否則在 iPad 上會閃退，出現以下錯誤訊息</p><pre name="232f" id="232f" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">&#39;Your application has presented a UIActivityViewController (&lt;UIActivityViewController: 0x7fdac9815c00&gt;). In its current trait environment, the modalPresentationStyle of a UIActivityViewController with this style is UIModalPresentationPopover. You must provide location information for this popover through the view controller&#39;s popoverPresentationController. You must provide either a sourceView and sourceRect or a barButtonItem.  If this information is not known when you present the view controller, you may provide it in the UIPopoverPresentationControllerDelegate method -prepareForPopoverPresentation.&#39;</strong></pre><p name="5930" id="5930" class="graf graf--p graf-after--pre">設定 sourceView:</p><p name="d076" id="d076" class="graf graf--p graf-after--p">將 sourceView 設為使用者點選的 button sender，讓 popover 從 button 附近彈出。</p><pre name="7211" id="7211" class="graf graf--pre graf-after--p">@IBAction func buttonTapped(_ sender: UIButton) {</pre><pre name="cf40" id="cf40" class="graf graf--pre graf-after--pre">   let activityController =</pre><pre name="a9d8" id="a9d8" class="graf graf--pre graf-after--pre">   UIActivityViewController(activityItems: [&quot;peter&quot;],</pre><pre name="8eef" id="8eef" class="graf graf--pre graf-after--pre">applicationActivities: nil)</pre><pre name="2210" id="2210" class="graf graf--pre graf-after--pre">       <br><strong class="markup--strong markup--pre-strong">activityController.popoverPresentationController?.sourceView</strong></pre><pre name="82ea" id="82ea" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">= sender</strong></pre><pre name="184a" id="184a" class="graf graf--pre graf-after--pre">   present(activityController, animated: true, completion: nil)</pre><pre name="54fb" id="54fb" class="graf graf--pre graf-after--pre">}</pre><figure name="7f92" id="7f92" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*cEHoXSCPqQDhkDOOZpbuxw.jpeg" data-width="554" data-height="738" src="https://cdn-images-1.medium.com/max/800/1*cEHoXSCPqQDhkDOOZpbuxw.jpeg"></figure><p name="5cb8" id="5cb8" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">顯示網頁的 SFSafariViewController</strong></p><p name="03e5" id="03e5" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">顯示警告訊息和選單的 UIAlertController</strong></p><p name="bfa3" id="bfa3" class="graf graf--p graf-after--p">注意: 在 iPad 顯示 actionSheet style 的 UIAlertController 時，記得也要設定 popover 彈出的位置。</p><div name="0f24" id="0f24" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%A1%AF%E7%A4%BA%E8%AD%A6%E5%91%8A%E8%A8%8A%E6%81%AF%E5%92%8C%E9%81%B8%E5%96%AE%E7%9A%84-uialertcontroller-a7548b606eea" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%A1%AF%E7%A4%BA%E8%AD%A6%E5%91%8A%E8%A8%8A%E6%81%AF%E5%92%8C%E9%81%B8%E5%96%AE%E7%9A%84-uialertcontroller-a7548b606eea" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%A1%AF%E7%A4%BA%E8%AD%A6%E5%91%8A%E8%A8%8A%E6%81%AF%E5%92%8C%E9%81%B8%E5%96%AE%E7%9A%84-uialertcontroller-a7548b606eea"><strong class="markup--strong markup--mixtapeEmbed-strong">顯示警告訊息和選單的 UIAlertController</strong><br><em class="markup--em markup--mixtapeEmbed-em">使用 iOS App 時，我們時常看到兩種視窗。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E9%A1%AF%E7%A4%BA%E8%AD%A6%E5%91%8A%E8%A8%8A%E6%81%AF%E5%92%8C%E9%81%B8%E5%96%AE%E7%9A%84-uialertcontroller-a7548b606eea" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a9d072fa8cae7cca5e2fcbc60b90a729" data-thumbnail-img-id="1*oL_2fZ8ce8KxYAP1UAEiKg.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*oL_2fZ8ce8KxYAP1UAEiKg.jpeg);"></a></div><p name="a474" id="a474" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">拍照和存取相簿照片的 UIImagePickerViewController</strong></p><p name="f4bd" id="f4bd" class="graf graf--p graf-after--p">利用 isSourceTypeAvailable(_:) 檢查是否能拍照。</p><div name="7b9f" id="7b9f" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/uikit/uiimagepickercontroller/1619144-issourcetypeavailable" data-href="https://developer.apple.com/documentation/uikit/uiimagepickercontroller/1619144-issourcetypeavailable" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/uikit/uiimagepickercontroller/1619144-issourcetypeavailable"><strong class="markup--strong markup--mixtapeEmbed-strong">isSourceTypeAvailable(_:) - UIImagePickerController | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Returns a Boolean value indicating whether the device supports picking media using the specified source type.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/uikit/uiimagepickercontroller/1619144-issourcetypeavailable" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="82a4b96e33ade93d4dace66d2d61b875"></a></div><p name="97b7" id="97b7" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">寄信的 MFMailComposeViewController</strong></p><ol class="postList"><li name="5d84" id="5d84" class="graf graf--li graf-after--p">利用 canSendMail 檢查是否可寄信。</li><li name="3cf9" id="3cf9" class="graf graf--li graf-after--li">為了設定 MFMailComposeViewController 的代理人，請設定 mailComposeDelegate (不要設成 delegate)。</li></ol><div name="08e3" id="08e3" class="graf graf--mixtapeEmbed graf-after--li"><a href="https://developer.apple.com/documentation/messageui/mfmailcomposeviewcontroller/1616879-cansendmail" data-href="https://developer.apple.com/documentation/messageui/mfmailcomposeviewcontroller/1616879-cansendmail" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/messageui/mfmailcomposeviewcontroller/1616879-cansendmail"><strong class="markup--strong markup--mixtapeEmbed-strong">canSendMail() - MFMailComposeViewController | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/messageui/mfmailcomposeviewcontroller/1616879-cansendmail" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="3d78b93f09fe584849be5cf35d31c3fa"></a></div><h3 name="254f" id="254f" class="graf graf--h3 graf-after--mixtapeEmbed"><strong class="markup--strong markup--h3-strong">Lab — Home furniture sharing</strong></h3><p name="5403" id="5403" class="graf graf--p graf-after--h3">選照片 &amp; 分享。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="19da" id="19da" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><img class="graf-image" data-image-id="1*rJK2TMWRlV3wif8nrjmfpw.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*rJK2TMWRlV3wif8nrjmfpw.jpeg"></figure><figure name="9d25" id="9d25" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*jlckxxgCXnTEFl_s1vk9fQ.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*jlckxxgCXnTEFl_s1vk9fQ.jpeg"></figure><figure name="ecb3" id="ecb3" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*a9AfTxzrN47dYUEA9uM0jg.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*a9AfTxzrN47dYUEA9uM0jg.jpeg"><figcaption class="imageCaption" style="width: 300.003%; left: -200.003%;">l</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="294c" id="294c" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="338a" id="338a" class="graf graf--p graf-after--p">UIActivityController，UIAlertController，UIImagePickerViewController，UIImagePickerController.InfoKey.originalImage，pngData</p><p name="d726" id="d726" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">選取照片後更新畫面</strong></p><pre name="fb80" id="fb80" class="graf graf--pre graf-after--p">func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey : Any]) {</pre><pre name="1be7" id="1be7" class="graf graf--pre graf-after--pre">   guard let image = info[UIImagePickerController.InfoKey.originalImage] as? UIImage else {return}</pre><pre name="cad4" id="cad4" class="graf graf--pre graf-after--pre">   furniture?.imageData = image.pngData()</pre><pre name="4172" id="4172" class="graf graf--pre graf-after--pre">   dismiss(animated: true) {</pre><pre name="5c1b" id="5c1b" class="graf graf--pre graf-after--pre">      self.updateView()</pre><pre name="f354" id="f354" class="graf graf--pre graf-after--pre">   }</pre><pre name="9849" id="9849" class="graf graf--pre graf-after--pre">}</pre><h3 name="4e44" id="4e44" class="graf graf--h3 graf-after--pre">4.9 Building Complex Input Screens</h3><p name="6691" id="6691" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="4989" id="4989" class="graf graf--p graf-after--p">checkmark，accessoryType，beginUpdates，endUpdates，DateFormatter，delegate，protocol</p><p name="2aed" id="2aed" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">範例</strong></p><p name="7d86" id="7d86" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">HotelForm</strong></p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="d556" id="d556" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><img class="graf-image" data-image-id="1*pplwgCQxu1S8ySQ1__RE3g.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*pplwgCQxu1S8ySQ1__RE3g.jpeg"></figure><figure name="b670" id="b670" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*H1oWfoPaS1JyLhUJn6phpQ.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*H1oWfoPaS1JyLhUJn6phpQ.jpeg"></figure><figure name="c017" id="c017" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*RrlBn9OEjo7G2kLLlwVPog.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*RrlBn9OEjo7G2kLLlwVPog.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="10db" id="10db" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">利用 static cells 製作複雜的表單</strong></p><figure name="ba5d" id="ba5d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Yhz8DnUb3bTjirOVchrgig.jpeg" data-width="1064" data-height="970" src="https://cdn-images-1.medium.com/max/800/1*Yhz8DnUb3bTjirOVchrgig.jpeg"></figure><p name="3527" id="3527" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">設定 text field 的高度條件，改變 text field 的高度。</strong></p><figure name="530d" id="530d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*V1zDX3JeIAnE2t-3va5_tA.jpeg" data-width="1064" data-height="598" src="https://cdn-images-1.medium.com/max/800/1*V1zDX3JeIAnE2t-3va5_tA.jpeg"></figure><p name="5853" id="5853" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">cell 裡用 stack view 放元件。</strong></p><figure name="dde1" id="dde1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*s3AIvp7b_5HIZ80hbldv6w.jpeg" data-width="992" data-height="310" src="https://cdn-images-1.medium.com/max/800/1*s3AIvp7b_5HIZ80hbldv6w.jpeg"></figure><p name="6578" id="6578" class="graf graf--p graf-after--figure">將 Number Of Adults Label 的 horizontal content hugging priority 調高，讓 Adults label 被拉長。</p><figure name="c0e6" id="c0e6" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*7Km1fBWxDJIWvLSabShsow.jpeg" data-width="504" data-height="178" src="https://cdn-images-1.medium.com/max/800/1*7Km1fBWxDJIWvLSabShsow.jpeg"></figure><p name="4773" id="4773" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">cell 樣式用 Right Detail 顯某個欄位的內容。</strong></p><figure name="825a" id="825a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*VziydBajxF0qQwZ9LVRB7A.jpeg" data-width="520" data-height="220" src="https://cdn-images-1.medium.com/max/800/1*VziydBajxF0qQwZ9LVRB7A.jpeg"></figure></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="d289" id="d289" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--figure" style="width: 55.752%;"><img class="graf-image" data-image-id="1*FO13nVgM1qW1Q1Anit665A.jpeg" data-width="496" data-height="122" src="https://cdn-images-1.medium.com/max/800/1*FO13nVgM1qW1Q1Anit665A.jpeg"></figure><figure name="edb2" id="edb2" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 44.248%;"><img class="graf-image" data-image-id="1*Dg5rdL6HTG7L0XCo-6l1Ow.jpeg" data-width="484" data-height="150" src="https://cdn-images-1.medium.com/max/600/1*Dg5rdL6HTG7L0XCo-6l1Ow.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="465f" id="465f" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">利用 DateFormatter 將 Date 轉換成特定格式的字串。</strong></p><pre name="981a" id="981a" class="graf graf--pre graf-after--p">let dateFormatter = DateFormatter()</pre><pre name="a3a5" id="a3a5" class="graf graf--pre graf-after--pre">dateFormatter.dateStyle = .medium</pre><pre name="afd1" id="afd1" class="graf graf--pre graf-after--pre">checkInDateLabel.text = dateFormatter.string(from: checkInDatePicker.date)</pre><pre name="d7b2" id="d7b2" class="graf graf--pre graf-after--pre">checkOutDateLabel.text = dateFormatter.string(from: checkOutDatePicker.date)</pre><p name="cc36" id="cc36" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">調整 date picker 可選擇的時間範圍</strong></p><p name="cbb8" id="cbb8" class="graf graf--p graf-after--p">check in 的時間最小是今天的 0:0:0，check out 的時間最小是 check in 的時間加 24 小時。</p><pre name="fae9" id="fae9" class="graf graf--pre graf-after--p">super.viewDidLoad()</pre><pre name="29ca" id="29ca" class="graf graf--pre graf-after--pre">   let date = Date()</pre><pre name="3397" id="3397" class="graf graf--pre graf-after--pre">   let midnightToday = Calendar.current.startOfDay(for: date)</pre><pre name="b69a" id="b69a" class="graf graf--pre graf-after--pre">   checkInDatePicker.minimumDate = midnightToday</pre><pre name="271f" id="271f" class="graf graf--pre graf-after--pre">   checkInDatePicker.date = midnightToday</pre><pre name="deea" id="deea" class="graf graf--pre graf-after--pre">   updateDateViews()</pre><pre name="eeee" id="eeee" class="graf graf--pre graf-after--pre">}</pre><pre name="dfb8" id="dfb8" class="graf graf--pre graf-after--pre">func updateDateViews() {</pre><pre name="dc12" id="dc12" class="graf graf--pre graf-after--pre">   checkOutDatePicker.minimumDate = checkInDatePicker.date.addingTimeInterval(86400)</pre><pre name="d9d7" id="d9d7" class="graf graf--pre graf-after--pre">}</pre><pre name="ff79" id="ff79" class="graf graf--pre graf-after--pre">@IBAction func datePickerValueChanged(_ sender: UIDatePicker) {</pre><pre name="9b69" id="9b69" class="graf graf--pre graf-after--pre">   updateDateViews()</pre><pre name="5acb" id="5acb" class="graf graf--pre graf-after--pre">}</pre><p name="7a89" id="7a89" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">點選 cell 顯示 / 隱藏 date picker</strong></p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="35b2" id="35b2" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*cyTqUuyU5NeWxjfSTJMH8w.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*cyTqUuyU5NeWxjfSTJMH8w.jpeg"></figure><figure name="b549" id="b549" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*ctMWNz83ixTqtqUjxcWh4A.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*ctMWNz83ixTqtqUjxcWh4A.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="dd1c" id="dd1c" class="graf graf--p graf-after--figure">方法:</p><p name="100c" id="100c" class="graf graf--p graf-after--p">調整 cell 高度，不顯示時將高度設為 0。為了讓 date picker 顯示 / 隱藏時有不錯的動畫效果，呼叫 table view 的 beginUpdates() &amp; endUpdates()。</p><p name="bad3" id="bad3" class="graf graf--p graf-after--p">值得注意的，Storyboard 裡的 date picker 的條件只設定 bottom 間距，沒有設定 top 間距。若是設定 top 間距，動畫的效果會沒那麼好。</p><figure name="7cdc" id="7cdc" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*hg9H-fPSTDO8K5LRPZS-Bw.jpeg" data-width="1236" data-height="426" src="https://cdn-images-1.medium.com/max/800/1*hg9H-fPSTDO8K5LRPZS-Bw.jpeg"></figure><pre name="2490" id="2490" class="graf graf--pre graf-after--figure">var isCheckInDatePickerShown = false </pre><pre name="fa42" id="fa42" class="graf graf--pre graf-after--pre">var isCheckOutDatePickerShown = false </pre><pre name="cef0" id="cef0" class="graf graf--pre graf-after--pre">let checkInDatePickerCellIndexPath = IndexPath(row: 1, section: 1)</pre><pre name="ac44" id="ac44" class="graf graf--pre graf-after--pre">let checkOutDatePickerCellIndexPath = IndexPath(row: 3, section: 1)</pre><pre name="9495" id="9495" class="graf graf--pre graf-after--pre">override func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat {</pre><pre name="b914" id="b914" class="graf graf--pre graf-after--pre">   switch (indexPath.section, indexPath.row) {</pre><pre name="fa6b" id="fa6b" class="graf graf--pre graf-after--pre">   case (checkInDatePickerCellIndexPath.section, checkInDatePickerCellIndexPath.row):</pre><pre name="cc85" id="cc85" class="graf graf--pre graf-after--pre">      if isCheckInDatePickerShown {</pre><pre name="2986" id="2986" class="graf graf--pre graf-after--pre">         return 216.0</pre><pre name="8d34" id="8d34" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="1e16" id="1e16" class="graf graf--pre graf-after--pre">         return 0.0</pre><pre name="354a" id="354a" class="graf graf--pre graf-after--pre">      }</pre><pre name="4465" id="4465" class="graf graf--pre graf-after--pre">   case (checkOutDatePickerCellIndexPath.section, checkOutDatePickerCellIndexPath.row):</pre><pre name="3105" id="3105" class="graf graf--pre graf-after--pre">      if isCheckOutDatePickerShown {</pre><pre name="2815" id="2815" class="graf graf--pre graf-after--pre">         return 216.0</pre><pre name="59d2" id="59d2" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="b03d" id="b03d" class="graf graf--pre graf-after--pre">         return 0.0</pre><pre name="f98a" id="f98a" class="graf graf--pre graf-after--pre">      }</pre><pre name="b49c" id="b49c" class="graf graf--pre graf-after--pre">   default:</pre><pre name="c2eb" id="c2eb" class="graf graf--pre graf-after--pre">      return 44.0</pre><pre name="0d6a" id="0d6a" class="graf graf--pre graf-after--pre">   }</pre><pre name="69c5" id="69c5" class="graf graf--pre graf-after--pre">}</pre><pre name="21bf" id="21bf" class="graf graf--pre graf-after--pre">override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {</pre><pre name="006b" id="006b" class="graf graf--pre graf-after--pre">   tableView.deselectRow(at: indexPath, animated: true)</pre><pre name="3935" id="3935" class="graf graf--pre graf-after--pre">   switch (indexPath.section, indexPath.row) {</pre><pre name="e1fc" id="e1fc" class="graf graf--pre graf-after--pre">   case (checkInDatePickerCellIndexPath.section, checkInDatePickerCellIndexPath.row - 1):</pre><pre name="5484" id="5484" class="graf graf--pre graf-after--pre">      if isCheckInDatePickerShown {</pre><pre name="8fe8" id="8fe8" class="graf graf--pre graf-after--pre">         isCheckInDatePickerShown = false   </pre><pre name="a882" id="a882" class="graf graf--pre graf-after--pre">      } else if isCheckOutDatePickerShown {</pre><pre name="274e" id="274e" class="graf graf--pre graf-after--pre">         isCheckOutDatePickerShown = false</pre><pre name="846a" id="846a" class="graf graf--pre graf-after--pre">         isCheckInDatePickerShown = true</pre><pre name="edd2" id="edd2" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="15ee" id="15ee" class="graf graf--pre graf-after--pre">         isCheckInDatePickerShown = true</pre><pre name="0958" id="0958" class="graf graf--pre graf-after--pre">      }</pre><pre name="babb" id="babb" class="graf graf--pre graf-after--pre">     tableView.beginUpdates()</pre><pre name="c33c" id="c33c" class="graf graf--pre graf-after--pre">     tableView.endUpdates()</pre><pre name="c9cf" id="c9cf" class="graf graf--pre graf-after--pre">   case (checkOutDatePickerCellIndexPath.section, checkOutDatePickerCellIndexPath.row - 1):</pre><pre name="7e3e" id="7e3e" class="graf graf--pre graf-after--pre">      if isCheckOutDatePickerShown {</pre><pre name="ffac" id="ffac" class="graf graf--pre graf-after--pre">         isCheckOutDatePickerShown = false</pre><pre name="e156" id="e156" class="graf graf--pre graf-after--pre">      } else if isCheckInDatePickerShown {</pre><pre name="047e" id="047e" class="graf graf--pre graf-after--pre">         isCheckInDatePickerShown = false</pre><pre name="adc9" id="adc9" class="graf graf--pre graf-after--pre">         isCheckOutDatePickerShown = true</pre><pre name="87ca" id="87ca" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="2d6f" id="2d6f" class="graf graf--pre graf-after--pre">         isCheckOutDatePickerShown = true</pre><pre name="c41f" id="c41f" class="graf graf--pre graf-after--pre">      }</pre><pre name="7b81" id="7b81" class="graf graf--pre graf-after--pre">      tableView.beginUpdates()</pre><pre name="0054" id="0054" class="graf graf--pre graf-after--pre">      tableView.endUpdates()</pre><pre name="d394" id="d394" class="graf graf--pre graf-after--pre">   default:</pre><pre name="12ae" id="12ae" class="graf graf--pre graf-after--pre">      break</pre><pre name="9938" id="9938" class="graf graf--pre graf-after--pre">   }</pre><pre name="ff47" id="ff47" class="graf graf--pre graf-after--pre">}</pre><p name="f3e0" id="f3e0" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">利用 static computed property 儲存選項的 array</strong></p><pre name="93be" id="93be" class="graf graf--pre graf-after--p">struct RoomType: Equatable {</pre><pre name="7754" id="7754" class="graf graf--pre graf-after--pre">   var id: Int</pre><pre name="cd0d" id="cd0d" class="graf graf--pre graf-after--pre">   var name: String</pre><pre name="221a" id="221a" class="graf graf--pre graf-after--pre">   var shortName: String</pre><pre name="1a62" id="1a62" class="graf graf--pre graf-after--pre">   var price: Int</pre><pre name="60bc" id="60bc" class="graf graf--pre graf-after--pre">   static var all: [RoomType] {</pre><pre name="1916" id="1916" class="graf graf--pre graf-after--pre">      return [RoomType(id: 0, name: &quot;Two Queens&quot;, shortName: &quot;2Q&quot;, price: 179),</pre><pre name="6d70" id="6d70" class="graf graf--pre graf-after--pre">      RoomType(id: 1, name: &quot;One King&quot;, shortName: &quot;K&quot;, price: 209),</pre><pre name="2018" id="2018" class="graf graf--pre graf-after--pre">      RoomType(id: 2, name: &quot;Penthouse Suite&quot;, shortName: &quot;PHS&quot;, price: 309)]</pre><pre name="027b" id="027b" class="graf graf--pre graf-after--pre">   }</pre><pre name="7cda" id="7cda" class="graf graf--pre graf-after--pre">}</pre><p name="0d0e" id="0d0e" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">如何設計選項的 UI</strong></p><p name="8b20" id="8b20" class="graf graf--p graf-after--p">當選項不多，且每個選項的文字不長時，可用 segmented control，否則建議用 table view。(ps: 也可考慮用 action sheet 的 alert controller)</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="527f" id="527f" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><img class="graf-image" data-image-id="1*gv_WWJ7xkFJhOBwoJZT4nA.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*gv_WWJ7xkFJhOBwoJZT4nA.jpeg"></figure><figure name="18a2" id="18a2" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*Oe3njF7V2w71AfdQAidJ4Q.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*Oe3njF7V2w71AfdQAidJ4Q.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="1c75" id="1c75" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">利用 delegate 將選擇的項目傳到前一頁</strong></p><p name="3ac6" id="3ac6" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">SelectRoomTypeTableViewController.swift</strong></p><pre name="eabe" id="eabe" class="graf graf--pre graf-after--p">protocol SelectRoomTypeTableViewControllerDelegate {</pre><pre name="f538" id="f538" class="graf graf--pre graf-after--pre">   func didSelect(roomType: RoomType)</pre><pre name="e2b1" id="e2b1" class="graf graf--pre graf-after--pre">}</pre><pre name="9c9f" id="9c9f" class="graf graf--pre graf-after--pre">class SelectRoomTypeTableViewController: UITableViewController {</pre><pre name="631d" id="631d" class="graf graf--pre graf-after--pre">   override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {</pre><pre name="8e5f" id="8e5f" class="graf graf--pre graf-after--pre">      tableView.deselectRow(at: indexPath, animated: true)</pre><pre name="fbb6" id="fbb6" class="graf graf--pre graf-after--pre">      roomType = RoomType.all[indexPath.row]</pre><pre name="da53" id="da53" class="graf graf--pre graf-after--pre">      delegate?.didSelect(roomType: roomType!)</pre><pre name="7e33" id="7e33" class="graf graf--pre graf-after--pre">      tableView.reloadData()</pre><pre name="e019" id="e019" class="graf graf--pre graf-after--pre">   }</pre><pre name="8a8c" id="8a8c" class="graf graf--pre graf-after--pre">}</pre><p name="4ac4" id="4ac4" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">class AddRegistrationTableViewController</strong></p><p name="712e" id="712e" class="graf graf--p graf-after--p">定義 protocol SelectRoomTypeTableViewControllerDelegate 的 function didSelect(roomType:) 更新房間類型。</p><pre name="456c" id="456c" class="graf graf--pre graf-after--p">class AddRegistrationTableViewController: UITableViewController, SelectRoomTypeTableViewControllerDelegate {</pre><pre name="8aa7" id="8aa7" class="graf graf--pre graf-after--pre">   var roomType: RoomType?</pre><pre name="7ecb" id="7ecb" class="graf graf--pre graf-after--pre">   func didSelect(roomType: RoomType) {</pre><pre name="ec91" id="ec91" class="graf graf--pre graf-after--pre">      self.roomType = roomType</pre><pre name="0fbe" id="0fbe" class="graf graf--pre graf-after--pre">      updateRoomType()</pre><pre name="8ee5" id="8ee5" class="graf graf--pre graf-after--pre">   }</pre><pre name="e819" id="e819" class="graf graf--pre graf-after--pre">   func updateRoomType() {</pre><pre name="c417" id="c417" class="graf graf--pre graf-after--pre">      if let roomType = roomType {</pre><pre name="c85c" id="c85c" class="graf graf--pre graf-after--pre">         roomTypeLabel.text = roomType.name</pre><pre name="25c4" id="25c4" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="914b" id="914b" class="graf graf--pre graf-after--pre">         roomTypeLabel.text = &quot;Not Set&quot;</pre><pre name="747a" id="747a" class="graf graf--pre graf-after--pre">      }</pre><pre name="0190" id="0190" class="graf graf--pre graf-after--pre">   }</pre><pre name="48fb" id="48fb" class="graf graf--pre graf-after--pre">}</pre><p name="b991" id="b991" class="graf graf--p graf-after--pre">切換到房間類型選擇頁面前設定 delegate。</p><pre name="48e1" id="48e1" class="graf graf--pre graf-after--p">override func prepare(for segue: UIStoryboardSegue, sender: Any?) {</pre><pre name="ef22" id="ef22" class="graf graf--pre graf-after--pre">   if segue.identifier == &quot;SelectRoomType&quot; {</pre><pre name="ff60" id="ff60" class="graf graf--pre graf-after--pre">      let destinationViewController = segue.destination as? SelectRoomTypeTableViewController</pre><pre name="68ed" id="68ed" class="graf graf--pre graf-after--pre">      destinationViewController?.delegate = self</pre><pre name="5bcf" id="5bcf" class="graf graf--pre graf-after--pre">      destinationViewController?.roomType = roomType</pre><pre name="e92c" id="e92c" class="graf graf--pre graf-after--pre">   }</pre><pre name="b7ec" id="b7ec" class="graf graf--pre graf-after--pre">}</pre><p name="9f0d" id="9f0d" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">用 computed property 產生表單內容 ok 時生成的東西。</strong></p><p name="4fa9" id="4fa9" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">class AddRegistrationTableViewController</strong></p><pre name="a8c1" id="a8c1" class="graf graf--pre graf-after--p">var registration: Registration? {</pre><pre name="6497" id="6497" class="graf graf--pre graf-after--pre">   guard let roomType = roomType else { return nil }</pre><pre name="7f00" id="7f00" class="graf graf--pre graf-after--pre">   let firstName = firstNameTextField.text ?? &quot;&quot;</pre><pre name="7bd9" id="7bd9" class="graf graf--pre graf-after--pre">   let lastName = lastNameTextField.text ?? &quot;&quot;</pre><pre name="a397" id="a397" class="graf graf--pre graf-after--pre">   let email = emailTextField.text ?? &quot;&quot;</pre><pre name="f0be" id="f0be" class="graf graf--pre graf-after--pre">   let checkInDate = checkInDatePicker.date</pre><pre name="49a4" id="49a4" class="graf graf--pre graf-after--pre">   let checkOutDate = checkOutDatePicker.date</pre><pre name="e1c2" id="e1c2" class="graf graf--pre graf-after--pre">   let numberOfAdults = Int(numberOfAdultsStepper.value)</pre><pre name="05a1" id="05a1" class="graf graf--pre graf-after--pre">   let numberOfChildren = Int(numberOfChildrenStepper.value)</pre><pre name="850e" id="850e" class="graf graf--pre graf-after--pre">   let hasWifi = wifiSwitch.isOn</pre><pre name="d6cc" id="d6cc" class="graf graf--pre graf-after--pre">   return Registration(firstName: firstName,</pre><pre name="bce3" id="bce3" class="graf graf--pre graf-after--pre">       lastName: lastName,</pre><pre name="1f25" id="1f25" class="graf graf--pre graf-after--pre">       emailAddress: email,</pre><pre name="6ea5" id="6ea5" class="graf graf--pre graf-after--pre">       checkInDate: checkInDate,</pre><pre name="106c" id="106c" class="graf graf--pre graf-after--pre">       checkOutDate: checkOutDate,</pre><pre name="9332" id="9332" class="graf graf--pre graf-after--pre">       numberOfAdults: numberOfAdults,</pre><pre name="19bf" id="19bf" class="graf graf--pre graf-after--pre">       numberOfChildren: numberOfChildren,</pre><pre name="3ccf" id="3ccf" class="graf graf--pre graf-after--pre">       roomType: roomType,</pre><pre name="24af" id="24af" class="graf graf--pre graf-after--pre">       wifi: hasWifi)</pre><pre name="0416" id="0416" class="graf graf--pre graf-after--pre">}</pre><p name="ed75" id="ed75" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">在 unwind segue 觸發的 function 讀取生成的東西</strong></p><p name="eedb" id="eedb" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">class RegistrationTableViewController</strong></p><pre name="f6f6" id="f6f6" class="graf graf--pre graf-after--p">@IBAction func unwindFromAddRegistration(unwindSegue: UIStoryboardSegue) {</pre><pre name="98c6" id="98c6" class="graf graf--pre graf-after--pre">   guard let addRegistrationTableViewController = unwindSegue.source as? AddRegistrationTableViewController,</pre><pre name="1cbb" id="1cbb" class="graf graf--pre graf-after--pre">      let registration = addRegistrationTableViewController.registration else { return }</pre><pre name="cb87" id="cb87" class="graf graf--pre graf-after--pre">   registrations.append(registration)</pre><pre name="b030" id="b030" class="graf graf--pre graf-after--pre">   tableView.reloadData()</pre><pre name="93d2" id="93d2" class="graf graf--pre graf-after--pre">}</pre><h3 name="dde5" id="dde5" class="graf graf--h3 graf-after--pre">Lab — Employee roster</h3></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="a7ae" id="a7ae" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--h3" style="width: 50%;"><img class="graf-image" data-image-id="1*DsmGnsB1uTut7QR3zzxyTg.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*DsmGnsB1uTut7QR3zzxyTg.jpeg"></figure><figure name="df89" id="df89" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*McVjAET7t6xRhs8WFHjmnA.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*McVjAET7t6xRhs8WFHjmnA.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="c65a" id="c65a" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">利用 enum 定義 EmployeeType</strong></p><pre name="e702" id="e702" class="graf graf--pre graf-after--p">enum EmployeeType {</pre><pre name="a851" id="a851" class="graf graf--pre graf-after--pre">  case exempt</pre><pre name="de10" id="de10" class="graf graf--pre graf-after--pre">  case nonExempt</pre><pre name="b456" id="b456" class="graf graf--pre graf-after--pre">  case partTime</pre><pre name="dca3" id="dca3" class="graf graf--pre graf-after--pre">}</pre><p name="b98a" id="b98a" class="graf graf--p graf-after--pre">可參考以下連結產生 enum 所有 case 的 array。</p><div name="9d66" id="9d66" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-enum-%E8%AE%8A%E6%88%90-array-%E7%9A%84-caseiterable-allcases-swift-4-2-%E6%96%B0%E5%8A%9F%E8%83%BD-bc52f475e6c7" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-enum-%E8%AE%8A%E6%88%90-array-%E7%9A%84-caseiterable-allcases-swift-4-2-%E6%96%B0%E5%8A%9F%E8%83%BD-bc52f475e6c7" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-enum-%E8%AE%8A%E6%88%90-array-%E7%9A%84-caseiterable-allcases-swift-4-2-%E6%96%B0%E5%8A%9F%E8%83%BD-bc52f475e6c7"><strong class="markup--strong markup--mixtapeEmbed-strong">讓 enum 變成 array 的 CaseIterable &amp; allCases — Swift 4.2 新功能</strong><br><em class="markup--em markup--mixtapeEmbed-em">在 Swift 4.2，SE-0194 的 Derived Collection of Enum Cases 讓 enum 變得更方便了，現在我們可以把 enum 變成 array 來使用呢。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E8%AE%93-enum-%E8%AE%8A%E6%88%90-array-%E7%9A%84-caseiterable-allcases-swift-4-2-%E6%96%B0%E5%8A%9F%E8%83%BD-bc52f475e6c7" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="968d429c1717201021871ebe6d805a10" data-thumbnail-img-id="1*FzoBRrTW0Ka0gVfUdWkGZA.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*FzoBRrTW0Ka0gVfUdWkGZA.jpeg);"></a></div><p name="b742" id="b742" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">顯示 / 隱藏 date picker</strong></p><pre name="a6df" id="a6df" class="graf graf--pre graf-after--p">var isEditingDob: Bool = false {</pre><pre name="49d5" id="49d5" class="graf graf--pre graf-after--pre">   didSet {</pre><pre name="fc25" id="fc25" class="graf graf--pre graf-after--pre">      tableView.beginUpdates()</pre><pre name="4732" id="4732" class="graf graf--pre graf-after--pre">      tableView.endUpdates()</pre><pre name="49f6" id="49f6" class="graf graf--pre graf-after--pre">   }</pre><pre name="43f1" id="43f1" class="graf graf--pre graf-after--pre">}</pre><pre name="f58c" id="f58c" class="graf graf--pre graf-after--pre">override func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat {</pre><pre name="abb9" id="abb9" class="graf graf--pre graf-after--pre">   guard indexPath.row == dobPickerRow else {return defaultRowHeight}</pre><pre name="d20f" id="d20f" class="graf graf--pre graf-after--pre">   if isEditingDob {</pre><pre name="df13" id="df13" class="graf graf--pre graf-after--pre">      return dobDatePicker.frame.height</pre><pre name="832e" id="832e" class="graf graf--pre graf-after--pre">   }</pre><pre name="b6e9" id="b6e9" class="graf graf--pre graf-after--pre">   return 0</pre><pre name="d0b5" id="d0b5" class="graf graf--pre graf-after--pre">}</pre><pre name="f85c" id="f85c" class="graf graf--pre graf-after--pre">override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {</pre><pre name="44b4" id="44b4" class="graf graf--pre graf-after--pre">   tableView.deselectRow(at: indexPath, animated: true)</pre><pre name="762a" id="762a" class="graf graf--pre graf-after--pre">   guard indexPath.row == dobRow else {return}</pre><pre name="5e55" id="5e55" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   isEditingDob = !isEditingDob</strong></pre><pre name="79ba" id="79ba" class="graf graf--pre graf-after--pre">   dobLabel.textColor = .black</pre><pre name="3402" id="3402" class="graf graf--pre graf-after--pre">   dobLabel.text = formatDate(date: dobDatePicker.date)</pre><pre name="b1ad" id="b1ad" class="graf graf--pre graf-after--pre">}</pre><h3 name="09a8" id="09a8" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">Guided Project — List</strong></h3><p name="9846" id="9846" class="graf graf--p graf-after--h3">完整的 CRUD App。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="316c" id="316c" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><img class="graf-image" data-image-id="1*pqG8Z5DylXowceKiSsUztg.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*pqG8Z5DylXowceKiSsUztg.jpeg"></figure><figure name="2b08" id="2b08" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*EuYu2ewZR6JYAu3X6lZ_mQ.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*EuYu2ewZR6JYAu3X6lZ_mQ.jpeg"></figure><figure name="ce72" id="ce72" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*Qiqu5FLnRFZspma1_OfUSA.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*Qiqu5FLnRFZspma1_OfUSA.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="cfc7" id="cfc7" class="graf graf--p graf-after--figure">設定 button 在 default &amp; selected 時顯示不同的照片。</p><figure name="e4ad" id="e4ad" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*zflWxdwcw7AmK9dGn0aCNQ.jpeg" data-width="906" data-height="726" src="https://cdn-images-1.medium.com/max/800/1*zflWxdwcw7AmK9dGn0aCNQ.jpeg"></figure></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="d82c" id="d82c" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--figure" style="width: 51.032%;"><img class="graf-image" data-image-id="1*CEKxrpHmVr5lW6WtKs9hzQ.jpeg" data-width="518" data-height="524" src="https://cdn-images-1.medium.com/max/800/1*CEKxrpHmVr5lW6WtKs9hzQ.jpeg"></figure><figure name="8f1a" id="8f1a" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 48.968%;"><img class="graf-image" data-image-id="1*c_crDTERZwH1U2QazverXA.jpeg" data-width="516" data-height="544" src="https://cdn-images-1.medium.com/max/600/1*c_crDTERZwH1U2QazverXA.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="feb4" id="feb4" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">新增用 present modally，修改用 show。</strong></p><figure name="0993" id="0993" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*iC7j3QxaVG-m4gqcIz0nmA.jpeg" data-width="832" data-height="902" src="https://cdn-images-1.medium.com/max/800/1*iC7j3QxaVG-m4gqcIz0nmA.jpeg"></figure><p name="4b8c" id="4b8c" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">class ToDoCell</strong></p><p name="3f76" id="3f76" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">自訂 protocol，將 controller 設為 cell 的 delegate，通知 controller 使用者點選 cell 上的東西。</strong></p><pre name="f75a" id="f75a" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">@objc protocol ToDoCellDelegate: class {</strong></pre><pre name="a3e6" id="a3e6" class="graf graf--pre graf-after--pre">   func checkmarkTapped(sender: ToDoCell)</pre><pre name="8eba" id="8eba" class="graf graf--pre graf-after--pre">}</pre><pre name="ebc9" id="ebc9" class="graf graf--pre graf-after--pre">class ToDoCell: UITableViewCell {</pre><pre name="b798" id="b798" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   weak var delegate: ToDoCellDelegate?</strong></pre><pre name="3003" id="3003" class="graf graf--pre graf-after--pre">   @IBOutlet weak var isCompleteButton: UIButton!</pre><pre name="9c38" id="9c38" class="graf graf--pre graf-after--pre">   @IBOutlet weak var titleLabel: UILabel!</pre><pre name="e8a7" id="e8a7" class="graf graf--pre graf-after--pre">   @IBAction func completeButtonTapped() {</pre><pre name="ef3f" id="ef3f" class="graf graf--pre graf-after--pre">      delegate?.checkmarkTapped(sender: self)</pre><pre name="af97" id="af97" class="graf graf--pre graf-after--pre">   }</pre><pre name="6686" id="6686" class="graf graf--pre graf-after--pre">}</pre><p name="1e76" id="1e76" class="graf graf--p graf-after--pre">宣告 cell 的 delegate 時記得加 weak，否則將出現 retain cycle，造成 memory leak，controller 永遠不會死掉，比方以下畫面的例子。</p><figure name="3bb4" id="3bb4" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*D5ZHcM6-28YAUA8u-TvZtQ.jpeg" data-width="1242" data-height="756" src="https://cdn-images-1.medium.com/max/800/1*D5ZHcM6-28YAUA8u-TvZtQ.jpeg"></figure><p name="565e" id="565e" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">class ToDoTableViewController</strong></p><p name="3ca2" id="3ca2" class="graf graf--p graf-after--p">設定 cell 的 delegate 是 controller</p><pre name="9071" id="9071" class="graf graf--pre graf-after--p">override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {</pre><pre name="86b7" id="86b7" class="graf graf--pre graf-after--pre">   guard let cell =    tableView.dequeueReusableCell(withIdentifier: &quot;ToDoCellIdentifier&quot;) as? ToDoCell else {</pre><pre name="32bf" id="32bf" class="graf graf--pre graf-after--pre">fatalError(&quot;Could not dequeue a cell&quot;)</pre><pre name="e0aa" id="e0aa" class="graf graf--pre graf-after--pre">   }</pre><pre name="f61e" id="f61e" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   cell.delegate = self</strong></pre><pre name="fa52" id="fa52" class="graf graf--pre graf-after--pre">   let todo = todos[indexPath.row]</pre><pre name="0f3b" id="0f3b" class="graf graf--pre graf-after--pre">   cell.titleLabel?.text = todo.title</pre><pre name="bc4f" id="bc4f" class="graf graf--pre graf-after--pre">   cell.isCompleteButton.isSelected = todo.isComplete</pre><pre name="88b8" id="88b8" class="graf graf--pre graf-after--pre">   return cell</pre><pre name="93bf" id="93bf" class="graf graf--pre graf-after--pre">}</pre><p name="095f" id="095f" class="graf graf--p graf-after--pre">定義 ToDoCellDelegate 的 function checkmarkTapped，利用 indexPath(for:) 判斷點選的 cell。</p><pre name="9b8f" id="9b8f" class="graf graf--pre graf-after--p">func checkmarkTapped(sender: ToDoCell) {</pre><pre name="0c96" id="0c96" class="graf graf--pre graf-after--pre">   if let indexPath = tableView.indexPath(for: sender) {</pre><pre name="f9b2" id="f9b2" class="graf graf--pre graf-after--pre">      var todo = todos[indexPath.row]</pre><pre name="0aa5" id="0aa5" class="graf graf--pre graf-after--pre">      todo.isComplete = !todo.isComplete</pre><pre name="aba1" id="aba1" class="graf graf--pre graf-after--pre">      todos[indexPath.row] = todo</pre><pre name="5016" id="5016" class="graf graf--pre graf-after--pre">      tableView.reloadRows(at: [indexPath], with: .automatic)</pre><pre name="f760" id="f760" class="graf graf--pre graf-after--pre">      ToDo.saveToDos(todos)</pre><pre name="0d20" id="0d20" class="graf graf--pre graf-after--pre">   }</pre><pre name="f582" id="f582" class="graf graf--pre graf-after--pre">}</pre><h3 name="77db" id="77db" class="graf graf--h3 graf-after--pre">Unit 5 Working with the Web</h3><h3 name="22e9" id="22e9" class="graf graf--h3 graf-after--h3">5.1 Closures</h3><p name="e6b9" id="e6b9" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="956c" id="956c" class="graf graf--p graf-after--p">closure，filter，map，reduce，sorted，syntactic sugar，trailing closure，$0，$1，Shorthand Argument Names，capture( 例子: closure 裡加 self)</p><h3 name="433f" id="433f" class="graf graf--h3 graf-after--p">5.2 Extensions</h3><p name="9b93" id="9b93" class="graf graf--p graf-after--h3">利用 extension 遵從 protocol。</p><pre name="990b" id="990b" class="graf graf--pre graf-after--p">struct Employee {<br>  var firstName: String<br>  var lastName: String<br>  var jobTitle: String<br>  var phoneNumber: String<br>}<br> <br>extension Employee: Equatable {<br>  static func ==(lhs: Employee, rhs: Employee) -&gt; Bool {<br>      return lhs.firstName == rhs.firstName &amp;&amp; lhs.lastName == rhs.lastName<br>  }<br>}</pre><h3 name="b79e" id="b79e" class="graf graf--h3 graf-after--pre">5.3 Practical Animation</h3><p name="f0b2" id="f0b2" class="graf graf--p graf-after--h3">Apple 範例採用 UIView 的 function animate，建議改用新的做法，UIViewPropertyAnimator。</p><div name="b2a8" id="b2a8" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E5%8B%95%E7%95%AB%E5%BB%BA%E8%AD%B0%E4%BD%BF%E7%94%A8-uiviewpropertyanimator-%E5%88%A5%E5%86%8D%E7%94%A8-uiview-animate-a868c579abb5" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E5%8B%95%E7%95%AB%E5%BB%BA%E8%AD%B0%E4%BD%BF%E7%94%A8-uiviewpropertyanimator-%E5%88%A5%E5%86%8D%E7%94%A8-uiview-animate-a868c579abb5" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E5%8B%95%E7%95%AB%E5%BB%BA%E8%AD%B0%E4%BD%BF%E7%94%A8-uiviewpropertyanimator-%E5%88%A5%E5%86%8D%E7%94%A8-uiview-animate-a868c579abb5"><strong class="markup--strong markup--mixtapeEmbed-strong">iOS App 動畫建議使用 UIViewPropertyAnimator，別再用 UIView.animate</strong><br><em class="markup--em markup--mixtapeEmbed-em">iOS App 有很多實現動畫的方法，從前我們習慣使用 UIView.animate，比方以下程式一口氣實現位置，大小，透明度和旋轉的動畫效果:</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E5%8B%95%E7%95%AB%E5%BB%BA%E8%AD%B0%E4%BD%BF%E7%94%A8-uiviewpropertyanimator-%E5%88%A5%E5%86%8D%E7%94%A8-uiview-animate-a868c579abb5" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="65b779bd4831c9b938b46f5a2967df48" data-thumbnail-img-id="1*DThbBDubOThVevxICEr1FQ.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*DThbBDubOThVevxICEr1FQ.jpeg);"></a></div><p name="b3d4" id="b3d4" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">如何在 playground 測試動畫</strong></p><p name="1f72" id="1f72" class="graf graf--p graf-after--p">建立一個 view 當 PlaygroundPage 的 liveView。</p><pre name="3112" id="3112" class="graf graf--pre graf-after--p">let liveViewFrame = CGRect(x: 0, y: 0, width: 500, height: 500)</pre><pre name="58d2" id="58d2" class="graf graf--pre graf-after--pre">let liveView = UIView(frame: liveViewFrame)</pre><pre name="d6aa" id="d6aa" class="graf graf--pre graf-after--pre">liveView.backgroundColor = .white</pre><pre name="b8a8" id="b8a8" class="graf graf--pre graf-after--pre">PlaygroundPage.current.liveView = liveView</pre><div name="cbfc" id="cbfc" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-xcode-playground-%E6%B8%AC%E8%A9%A6%E5%8B%95%E7%95%AB%E6%95%88%E6%9E%9C-92bdf99d94c7" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-xcode-playground-%E6%B8%AC%E8%A9%A6%E5%8B%95%E7%95%AB%E6%95%88%E6%9E%9C-92bdf99d94c7" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-xcode-playground-%E6%B8%AC%E8%A9%A6%E5%8B%95%E7%95%AB%E6%95%88%E6%9E%9C-92bdf99d94c7"><strong class="markup--strong markup--mixtapeEmbed-strong">在 Xcode Playground 測試動畫效果</strong><br><em class="markup--em markup--mixtapeEmbed-em">為了製作完美的 App 動畫效果，我們往往需要微調許多動畫的細節，因此 Xcode Playground 是個不錯的動畫開發工具。我們可以在上面快速地修改程式，從 Assistant editor…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-xcode-playground-%E6%B8%AC%E8%A9%A6%E5%8B%95%E7%95%AB%E6%95%88%E6%9E%9C-92bdf99d94c7" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="b410831aa97f40b178507361e3be39fa" data-thumbnail-img-id="1*fe2GfiFRVxks3cfXuJbi9Q.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*fe2GfiFRVxks3cfXuJbi9Q.jpeg);"></a></div><p name="3927" id="3927" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">動畫的 options。</strong></p><p name="88cc" id="88cc" class="graf graf--p graf-after--p">比方讓動畫 repeat。</p><pre name="5ce5" id="5ce5" class="graf graf--pre graf-after--p">UIView.animate(withDuration: 3.0, delay: 2.0, options:<br>[.repeat], animations: {<br>    square.backgroundColor = .orange<br>    square.frame = CGRect(x: 400, y: 400, width: 100, height: <br>    100)<br>}, completion: nil)</pre><p name="0dbb" id="0dbb" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">組合 CGAffineTransform</strong></p><pre name="0d94" id="0d94" class="graf graf--pre graf-after--p">let scaleTransform = CGAffineTransform(scaleX: 2.0, y: 2.0)</pre><pre name="7cca" id="7cca" class="graf graf--pre graf-after--pre">let rotateTransform = CGAffineTransform(rotationAngle: .pi)</pre><pre name="f185" id="f185" class="graf graf--pre graf-after--pre">let translateTransform = CGAffineTransform(translationX: 200, y: 200)</pre><pre name="58e0" id="58e0" class="graf graf--pre graf-after--pre">let comboTransform = scaleTransform.concatenating(rotateTransform).concatenating(translateTransform)</pre><p name="45f0" id="45f0" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">利用 identity 讓 CGAffineTransform 回到原本的狀態</strong></p><pre name="8962" id="8962" class="graf graf--pre graf-after--p">UIView.animate(withDuration: 2.0, animations: {</pre><pre name="8d63" id="8d63" class="graf graf--pre graf-after--pre">   square.backgroundColor = .orange</pre><pre name="6881" id="6881" class="graf graf--pre graf-after--pre">   let scaleTransform = CGAffineTransform(scaleX: 2.0, y: 2.0)</pre><pre name="71d7" id="71d7" class="graf graf--pre graf-after--pre">   let rotateTransform = CGAffineTransform(rotationAngle: .pi)</pre><pre name="7791" id="7791" class="graf graf--pre graf-after--pre">   let translateTransform = CGAffineTransform(translationX: 200, y: 200)</pre><pre name="cf70" id="cf70" class="graf graf--pre graf-after--pre">   let comboTransform = scaleTransform.concatenating(rotateTransform).concatenating(translateTransform)</pre><pre name="47e1" id="47e1" class="graf graf--pre graf-after--pre">   square.transform = comboTransform</pre><pre name="a557" id="a557" class="graf graf--pre graf-after--pre">}) { (_) in</pre><pre name="3b1f" id="3b1f" class="graf graf--pre graf-after--pre">   UIView.animate(withDuration: 2.0, animations: {</pre><pre name="5c0e" id="5c0e" class="graf graf--pre graf-after--pre">      square.transform = CGAffineTransform.identity</pre><pre name="52d8" id="52d8" class="graf graf--pre graf-after--pre">   })</pre><pre name="99ae" id="99ae" class="graf graf--pre graf-after--pre">}</pre><p name="7416" id="7416" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">範例 MusicWireframe</strong></p><figure name="b2ec" id="b2ec" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Psv260k4VZIhj_FK30p5uQ.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/800/1*Psv260k4VZIhj_FK30p5uQ.jpeg"></figure><figure name="ad70" id="ad70" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*4PXuVjLw3lCYe5c7RZL9Kg.jpeg" data-width="1214" data-height="970" src="https://cdn-images-1.medium.com/max/800/1*4PXuVjLw3lCYe5c7RZL9Kg.jpeg"></figure><p name="9323" id="9323" class="graf graf--p graf-after--figure">分別設定 button touch down &amp; touch up inside 的動畫。</p><figure name="0f4c" id="0f4c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*jCfqip9KCVaxRWVufwQ0lA.jpeg" data-width="520" data-height="708" src="https://cdn-images-1.medium.com/max/800/1*jCfqip9KCVaxRWVufwQ0lA.jpeg"></figure><h3 name="47d8" id="47d8" class="graf graf--h3 graf-after--figure">Lab — Enter to win a contest</h3><p name="164e" id="164e" class="graf graf--p graf-after--h3">沒有輸入文字時，顯示 text field 移動動畫。</p><figure name="a94b" id="a94b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*x9jbu3_FN1cIq6oYF_nyXQ.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/800/1*x9jbu3_FN1cIq6oYF_nyXQ.jpeg"></figure><pre name="e915" id="e915" class="graf graf--pre graf-after--figure">UIView.animate(withDuration: 0.2, animations: {</pre><pre name="455c" id="455c" class="graf graf--pre graf-after--pre">   let rightTransform  = CGAffineTransform(translationX: 20, y: 0)</pre><pre name="a0e4" id="a0e4" class="graf graf--pre graf-after--pre">   self.emailAddressTextField.transform = rightTransform</pre><pre name="573b" id="573b" class="graf graf--pre graf-after--pre">}) { (_) in</pre><pre name="4e04" id="4e04" class="graf graf--pre graf-after--pre">   UIView.animate(withDuration: 0.2, animations: {</pre><pre name="b8ef" id="b8ef" class="graf graf--pre graf-after--pre">      self.emailAddressTextField.transform = CGAffineTransform.identity</pre><pre name="4437" id="4437" class="graf graf--pre graf-after--pre">   })</pre><pre name="5510" id="5510" class="graf graf--pre graf-after--pre">}</pre><h3 name="ecc3" id="ecc3" class="graf graf--h3 graf-after--pre">5.4 Working with the Web: HTTP &amp; URL Session</h3><p name="f0bb" id="f0bb" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="e65d" id="e65d" class="graf graf--p graf-after--p">API，asynchronous，JSON，get，post，http header，query，URL，body，request，URLSession，URLSessionDataTask，response，URLComponents</p><p name="5c4f" id="5c4f" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">URL 格式</strong></p><figure name="d3b9" id="d3b9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*gN9_wsK24asNihJdcfMvfg.jpeg" data-width="974" data-height="134" src="https://cdn-images-1.medium.com/max/800/1*gN9_wsK24asNihJdcfMvfg.jpeg"></figure><p name="5f65" id="5f65" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">將網路抓下來的 Data 變成 String</strong></p><pre name="6092" id="6092" class="graf graf--pre graf-after--p">let task = URLSession.shared.dataTask(with: url) { (data,<br>response, error) in<br>    if let data = data,<br>        let string = String(data: data, encoding: .utf8) {<br>        print(string)<br>    }<br>}</pre><p name="9a60" id="9a60" class="graf graf--p graf-after--pre">另一種寫法</p><pre name="b3c3" id="b3c3" class="graf graf--pre graf-after--p">let task = URLSession.shared.dataTask(with: url) { (data,<br>response, error) in<br>    if let data = data {</pre><pre name="24bc" id="24bc" class="graf graf--pre graf-after--pre">        let string = String(decoding: data, as: UTF8.self)</pre><pre name="6fae" id="6fae" class="graf graf--pre graf-after--pre">        print(string)<br>    }<br>}</pre><p name="2235" id="2235" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">利用 URLComponents 建立 URL</strong></p><pre name="c67d" id="c67d" class="graf graf--pre graf-after--p">extension URL {</pre><pre name="d880" id="d880" class="graf graf--pre graf-after--pre">   func withQueries(_ queries: [String: String]) -&gt; URL? {</pre><pre name="9e4a" id="9e4a" class="graf graf--pre graf-after--pre">      var components = URLComponents(url: self, resolvingAgainstBaseURL: true)</pre><pre name="d178" id="d178" class="graf graf--pre graf-after--pre">      components?.queryItems = queries.compactMap { URLQueryItem(name: $0.0, value: $0.1) }</pre><pre name="dcd7" id="dcd7" class="graf graf--pre graf-after--pre">      return components?.url</pre><pre name="4f7c" id="4f7c" class="graf graf--pre graf-after--pre">   }</pre><pre name="cd67" id="cd67" class="graf graf--pre graf-after--pre">}</pre><pre name="9b95" id="9b95" class="graf graf--pre graf-after--pre">let baseURL = URL(string: &quot;<a href="https://api.nasa.gov/planetary/" data-href="https://api.nasa.gov/planetary/" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://api.nasa.gov/planetary/</a><br>apod&quot;)!<br> <br>let query: [String: String] = [<br>    &quot;api_key&quot;: &quot;DEMO_KEY&quot;,<br>    &quot;date&quot;: &quot;2011-07-13&quot;<br>]<br> <br>let url = baseURL.withQueries(query)!</pre><h3 name="9469" id="9469" class="graf graf--h3 graf-after--pre">Lab — iTunes search(part 1)</h3><pre name="3532" id="3532" class="graf graf--pre graf-after--h3">let baseURL = URL(string: &quot;https://itunes.apple.com/search?&quot;)!</pre><pre name="b9a6" id="b9a6" class="graf graf--pre graf-after--pre">let query: [String: String] = [</pre><pre name="0df5" id="0df5" class="graf graf--pre graf-after--pre">&quot;term&quot;: &quot;Inside Out 2015&quot;,</pre><pre name="bddb" id="bddb" class="graf graf--pre graf-after--pre">&quot;media&quot;: &quot;movie&quot;,</pre><pre name="6534" id="6534" class="graf graf--pre graf-after--pre">&quot;lang&quot;: &quot;en_us&quot;,</pre><pre name="2ec9" id="2ec9" class="graf graf--pre graf-after--pre">&quot;limit&quot;: &quot;10&quot;</pre><pre name="92a9" id="92a9" class="graf graf--pre graf-after--pre">]</pre><h3 name="8b0a" id="8b0a" class="graf graf--h3 graf-after--pre">5.5 Working with the Web: Decoding JSON</h3><p name="02a3" id="02a3" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="e460" id="e460" class="graf graf--p graf-after--p">JSON，JSONDecoder，CodingKey，escaping，completion handler，where to write network code</p><div name="bb03" id="bb03" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-swift-4-%E7%9A%84-jsondecoder-%E5%92%8C-codable-%E8%A7%A3%E6%9E%90-json-%E5%92%8C%E7%94%9F%E6%88%90%E8%87%AA%E8%A8%82%E5%9E%8B%E5%88%A5%E8%B3%87%E6%96%99-ee793622629e" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-swift-4-%E7%9A%84-jsondecoder-%E5%92%8C-codable-%E8%A7%A3%E6%9E%90-json-%E5%92%8C%E7%94%9F%E6%88%90%E8%87%AA%E8%A8%82%E5%9E%8B%E5%88%A5%E8%B3%87%E6%96%99-ee793622629e" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-swift-4-%E7%9A%84-jsondecoder-%E5%92%8C-codable-%E8%A7%A3%E6%9E%90-json-%E5%92%8C%E7%94%9F%E6%88%90%E8%87%AA%E8%A8%82%E5%9E%8B%E5%88%A5%E8%B3%87%E6%96%99-ee793622629e"><strong class="markup--strong markup--mixtapeEmbed-strong">利用 Swift 4 的 JSONDecoder 和 Codable 解析 JSON 和生成自訂型別資料</strong><br><em class="markup--em markup--mixtapeEmbed-em">抓取網路上的 JSON 資料並不是太困難的事，但是如果想要解析它，甚至是把它變成方便 App 使用的自訂型別，卻需要寫許多程式碼才能實現。因此從前一些解析 JSON 和將 JSON 變成自訂型別的第三方套件大受歡迎，不過在 Swift…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%88%A9%E7%94%A8-swift-4-%E7%9A%84-jsondecoder-%E5%92%8C-codable-%E8%A7%A3%E6%9E%90-json-%E5%92%8C%E7%94%9F%E6%88%90%E8%87%AA%E8%A8%82%E5%9E%8B%E5%88%A5%E8%B3%87%E6%96%99-ee793622629e" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a1068ad2918bf3673e0459e185327c1a" data-thumbnail-img-id="1*WQjh09l7PwGCtaeQ2Ht-rw.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*WQjh09l7PwGCtaeQ2Ht-rw.jpeg);"></a></div><div name="d86c" id="d86c" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed"><a href="https://developer.apple.com/documentation/foundation/archives_and_serialization/encoding_and_decoding_custom_types" data-href="https://developer.apple.com/documentation/foundation/archives_and_serialization/encoding_and_decoding_custom_types" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/foundation/archives_and_serialization/encoding_and_decoding_custom_types"><strong class="markup--strong markup--mixtapeEmbed-strong">Encoding and Decoding Custom Types</strong><br><em class="markup--em markup--mixtapeEmbed-em">Many programming tasks involve sending data over a network connection, saving data to disk, or submitting data to APIs…</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/foundation/archives_and_serialization/encoding_and_decoding_custom_types" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="0206825b459c1e53c8afc9bea183ff09"></a></div><p name="0a66" id="0a66" class="graf graf--p graf-after--mixtapeEmbed"><strong class="markup--strong markup--p-strong">completion handler:</strong></p><p name="9882" id="9882" class="graf graf--p graf-after--p">將 completion handler 參數宣告成 function 型別，抓到資料後呼叫 completion handler，傳入抓到的資料。(ps: withQueries 是之前在 URL extension 定義的 function)</p><pre name="37cd" id="37cd" class="graf graf--pre graf-after--p">func fetchPhotoInfo(completion: @escaping (PhotoInfo) -&gt; Void) {</pre><pre name="b48a" id="b48a" class="graf graf--pre graf-after--pre">   let baseURL = URL(string: &quot;https://api.nasa.gov/planetary/apod&quot;)!</pre><pre name="b967" id="b967" class="graf graf--pre graf-after--pre">   let query: [String: String] = [</pre><pre name="2421" id="2421" class="graf graf--pre graf-after--pre">      &quot;api_key&quot;: &quot;DEMO_KEY&quot;,</pre><pre name="0c25" id="0c25" class="graf graf--pre graf-after--pre">   ]</pre><pre name="eb9b" id="eb9b" class="graf graf--pre graf-after--pre">   let url = baseURL.withQueries(query)!</pre><pre name="ba1e" id="ba1e" class="graf graf--pre graf-after--pre">   let task = URLSession.shared.dataTask(with: url) { (data,</pre><pre name="83cb" id="83cb" class="graf graf--pre graf-after--pre">response, error) in</pre><pre name="f4fc" id="f4fc" class="graf graf--pre graf-after--pre">      let jsonDecoder = JSONDecoder()</pre><pre name="367d" id="367d" class="graf graf--pre graf-after--pre">      if let data = data,</pre><pre name="8568" id="8568" class="graf graf--pre graf-after--pre">          let photoInfo = try?</pre><pre name="779d" id="779d" class="graf graf--pre graf-after--pre">         jsonDecoder.decode(PhotoInfo.self, from: data) {</pre><pre name="a414" id="a414" class="graf graf--pre graf-after--pre">         completion(photoInfo)</pre><pre name="7089" id="7089" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="dbbb" id="dbbb" class="graf graf--pre graf-after--pre">         print(&quot;Either no data was returned, or data was not properly decoded.&quot;)</pre><pre name="8587" id="8587" class="graf graf--pre graf-after--pre">         completion(nil)</pre><pre name="5e3c" id="5e3c" class="graf graf--pre graf-after--pre">      }</pre><pre name="51a8" id="51a8" class="graf graf--pre graf-after--pre">   }</pre><pre name="7a92" id="7a92" class="graf graf--pre graf-after--pre">   task.resume()</pre><pre name="c16a" id="c16a" class="graf graf--pre graf-after--pre">}</pre><h3 name="b7db" id="b7db" class="graf graf--h3 graf-after--pre"><strong class="markup--strong markup--h3-strong">Lab — iTunes Search(part 2)</strong></h3><p name="7f26" id="7f26" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">讓 property 的名字跟 JSON key 的名字不一樣。</strong></p><p name="c538" id="c538" class="graf graf--p graf-after--p">定義 enum CodingKeys: String, CodingKey，每個 property 對應的 case 都要寫出來，名字不一樣的則利用 = 設定對應的 JSON key。</p><pre name="c4b2" id="c4b2" class="graf graf--pre graf-after--p">struct StoreItem: Codable {</pre><pre name="18e5" id="18e5" class="graf graf--pre graf-after--pre">   var trackName: String</pre><pre name="75cd" id="75cd" class="graf graf--pre graf-after--pre">   var artist: String</pre><pre name="fa25" id="fa25" class="graf graf--pre graf-after--pre">   var kind: String</pre><pre name="4ec4" id="4ec4" class="graf graf--pre graf-after--pre">   var artworkURL: URL</pre><pre name="3a0f" id="3a0f" class="graf graf--pre graf-after--pre">    <br>   enum CodingKeys: String, CodingKey {</pre><pre name="9fe1" id="9fe1" class="graf graf--pre graf-after--pre">      case trackName</pre><pre name="a348" id="a348" class="graf graf--pre graf-after--pre">      case artist = &quot;artistName&quot;</pre><pre name="e587" id="e587" class="graf graf--pre graf-after--pre">      case kind = &quot;kind&quot;</pre><pre name="1351" id="1351" class="graf graf--pre graf-after--pre">      case artworkURL = &quot;artworkUrl100&quot;</pre><pre name="8140" id="8140" class="graf graf--pre graf-after--pre">   }</pre><pre name="8130" id="8130" class="graf graf--pre graf-after--pre">}</pre><p name="cb92" id="cb92" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">利用 init(from:) 客製解碼。</strong></p><p name="79ae" id="79ae" class="graf graf--p graf-after--p">例子:</p><ol class="postList"><li name="a898" id="a898" class="graf graf--li graf-after--p">當 JSON 的 key 有 description 時，它對應的 value 存到 property description。</li><li name="2c9b" id="2c9b" class="graf graf--li graf-after--li">若 JSON 的 key 沒有 descriptio，但是有 nlongDescription ，則將它對應的 value 存到 property description。</li><li name="5d1e" id="5d1e" class="graf graf--li graf-after--li">若 JSON 的 key 沒有 description &amp; longDescription ，則將 property description 設成空字串。</li></ol><pre name="d88e" id="d88e" class="graf graf--pre graf-after--li">struct StoreItem: Codable {</pre><pre name="a599" id="a599" class="graf graf--pre graf-after--pre">   var name: String</pre><pre name="b68b" id="b68b" class="graf graf--pre graf-after--pre">   var artist: String   </pre><pre name="ef46" id="ef46" class="graf graf--pre graf-after--pre">   var description: String</pre><pre name="8219" id="8219" class="graf graf--pre graf-after--pre">   var kind: String</pre><pre name="2f4d" id="2f4d" class="graf graf--pre graf-after--pre">   var artworkURL: URL<br><br></pre><pre name="5959" id="5959" class="graf graf--pre graf-after--pre">   enum CodingKeys: String, CodingKey {</pre><pre name="caa5" id="caa5" class="graf graf--pre graf-after--pre">      case name = &quot;trackName&quot;</pre><pre name="6ebd" id="6ebd" class="graf graf--pre graf-after--pre">      case artist = &quot;artistName&quot;</pre><pre name="3a9f" id="3a9f" class="graf graf--pre graf-after--pre">      case kind = &quot;kind&quot;</pre><pre name="6309" id="6309" class="graf graf--pre graf-after--pre">      case description = &quot;description&quot; </pre><pre name="7521" id="7521" class="graf graf--pre graf-after--pre">      case artworkURL = &quot;artworkUrl100&quot;</pre><pre name="5fde" id="5fde" class="graf graf--pre graf-after--pre">   }</pre><pre name="1939" id="1939" class="graf graf--pre graf-after--pre">   enum AdditionalKeys: String, CodingKey {</pre><pre name="c58e" id="c58e" class="graf graf--pre graf-after--pre">      case longDescription</pre><pre name="d0fa" id="d0fa" class="graf graf--pre graf-after--pre">   }</pre><pre name="c95c" id="c95c" class="graf graf--pre graf-after--pre">   init(from decoder: Decoder) throws {</pre><pre name="37e4" id="37e4" class="graf graf--pre graf-after--pre">      let values = try decoder.container(keyedBy: CodingKeys.self)</pre><pre name="3217" id="3217" class="graf graf--pre graf-after--pre">      name = try values.decode(String.self, forKey: CodingKeys.name)</pre><pre name="7318" id="7318" class="graf graf--pre graf-after--pre">      artist = try values.decode(String.self, forKey: CodingKeys.artist)</pre><pre name="fdbc" id="fdbc" class="graf graf--pre graf-after--pre">      kind = try values.decode(String.self, forKey: CodingKeys.kind)</pre><pre name="7711" id="7711" class="graf graf--pre graf-after--pre">      artworkURL = try values.decode(URL.self, forKey: CodingKeys.artworkURL)</pre><pre name="df05" id="df05" class="graf graf--pre graf-after--pre">      if let description = try? values.decode(String.self, forKey: CodingKeys.description) {</pre><pre name="6f54" id="6f54" class="graf graf--pre graf-after--pre">self.description = description</pre><pre name="ce91" id="ce91" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="a55b" id="a55b" class="graf graf--pre graf-after--pre">         let additionalValues = try decoder.container(keyedBy: AdditionalKeys.self)</pre><pre name="e048" id="e048" class="graf graf--pre graf-after--pre">         description = (try? additionalValues.decode(String.self, forKey: AdditionalKeys.longDescription)) ?? &quot;&quot;</pre><pre name="eefa" id="eefa" class="graf graf--pre graf-after--pre">      }</pre><pre name="2c85" id="2c85" class="graf graf--pre graf-after--pre">   }</pre><pre name="de1f" id="de1f" class="graf graf--pre graf-after--pre">}</pre><h3 name="73b7" id="73b7" class="graf graf--h3 graf-after--pre">5.6 Working with the Web: Concurrency</h3><p name="ca7e" id="ca7e" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">技術關鍵字:</strong></p><p name="1699" id="1699" class="graf graf--p graf-after--p">grand central dispatch(GCD)，App Transport Security(ATS)，dispatch queue，main queue，background queue，async，network activity indicator</p><p name="a183" id="a183" class="graf graf--p graf-after--p">範例</p><figure name="02db" id="02db" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*El2mnMa_JGKCUV2iBm84CA.jpeg" data-width="710" data-height="1254" src="https://cdn-images-1.medium.com/max/800/1*El2mnMa_JGKCUV2iBm84CA.jpeg"></figure><p name="f10f" id="f10f" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">UI 相關動作必須在 main queue 執行</strong></p><pre name="a634" id="a634" class="graf graf--pre graf-after--p">Because updating the user interface and responding quickly to user input are two of the most critical tasks in any app, these tasks are run on the main queue.</pre><p name="2b2b" id="2b2b" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">將程式加到 main queue</strong></p><pre name="3e58" id="3e58" class="graf graf--pre graf-after--p">DispatchQueue.main.async {</pre><pre name="acc3" id="acc3" class="graf graf--pre graf-after--pre">}</pre><p name="e440" id="e440" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">App Transport Security(ATS)</strong></p><p name="088e" id="088e" class="graf graf--p graf-after--p">因為 ATS 的限制，預設只能抓取 https 連線的資料，不能抓取 http 的資料，除非做以下修改。</p><div name="d7b5" id="d7b5" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%B2%92%E6%9C%89-s-%E7%9A%84-http-%E9%82%84%E5%8F%AF%E4%BB%A5%E9%80%A3%E7%B7%9A%E5%97%8E-29235037e161" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%B2%92%E6%9C%89-s-%E7%9A%84-http-%E9%82%84%E5%8F%AF%E4%BB%A5%E9%80%A3%E7%B7%9A%E5%97%8E-29235037e161" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%B2%92%E6%9C%89-s-%E7%9A%84-http-%E9%82%84%E5%8F%AF%E4%BB%A5%E9%80%A3%E7%B7%9A%E5%97%8E-29235037e161"><strong class="markup--strong markup--mixtapeEmbed-strong">沒有 s 的 http 還可以連線嗎 ?</strong><br><em class="markup--em markup--mixtapeEmbed-em">為了讓使用者享用更安全的 App，apple 現在強制上架的 App 連結後台或網頁時，都要採用 https 連線。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E6%B2%92%E6%9C%89-s-%E7%9A%84-http-%E9%82%84%E5%8F%AF%E4%BB%A5%E9%80%A3%E7%B7%9A%E5%97%8E-29235037e161" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="e45c09d185df73871e497c9cfe6750f0" data-thumbnail-img-id="1*g6pHs7pIjT3UaRCHuW0Yug.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*g6pHs7pIjT3UaRCHuW0Yug.jpeg);"></a></div><p name="a6ad" id="a6ad" class="graf graf--p graf-after--mixtapeEmbed">其它做法: 從程式將 http 連線換成 https</p><pre name="56c5" id="56c5" class="graf graf--pre graf-after--p">func withHTTPS() -&gt; URL? {<br>    var components = URLComponents(url: self,<br>    resolvingAgainstBaseURL: true)<br>    components?.scheme = &quot;https&quot;<br>    return components?.url<br>}</pre><p name="9d62" id="9d62" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">利用 UIApplication 的 open function 顯示影片</strong></p><pre name="09aa" id="09aa" class="graf graf--pre graf-after--p">let url = URL(string: &quot;https://video-ssl.itunes.apple.com/itunes-assets/Video117/v4/2c/f6/e6/2cf6e630-8f12-e721-c80d-b689aa8f9804/mzvf_1371130011356140075.640x354.h264lc.U.p.m4v&quot;)!</pre><pre name="93aa" id="93aa" class="graf graf--pre graf-after--pre">UIApplication.shared.open(url, options: [:], completionHandler: nil)</pre><p name="4025" id="4025" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">network activity indicator</strong></p><figure name="3944" id="3944" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*FEyTupVhcfwMyaqaBn1-NA.jpeg" data-width="636" data-height="142" src="https://cdn-images-1.medium.com/max/800/1*FEyTupVhcfwMyaqaBn1-NA.jpeg"></figure><pre name="e875" id="e875" class="graf graf--pre graf-after--figure">UIApplication.shared.isNetworkActivityIndicatorVisible = true</pre><h3 name="f6ce" id="f6ce" class="graf graf--h3 graf-after--pre">Lab — iTunes search(part 3)</h3></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="8649" id="8649" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--h3" style="width: 50%;"><img class="graf-image" data-image-id="1*3dD5vNzJu66bI28Q0IgwRA.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*3dD5vNzJu66bI28Q0IgwRA.jpeg"></figure><figure name="6c0d" id="6c0d" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><img class="graf-image" data-image-id="1*4x0SjxRlmswp83d9_urIhw.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/600/1*4x0SjxRlmswp83d9_urIhw.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="db9a" id="db9a" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">設定 cache</strong></p><pre name="9d60" id="9d60" class="graf graf--pre graf-after--p">func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {</pre><pre name="11c4" id="11c4" class="graf graf--pre graf-after--pre">   let temporaryDirectory = NSTemporaryDirectory()</pre><pre name="e14b" id="e14b" class="graf graf--pre graf-after--pre">   let urlCache = URLCache(memoryCapacity: 25000000, diskCapacity: 50000000, diskPath: temporaryDirectory)</pre><pre name="c941" id="c941" class="graf graf--pre graf-after--pre">   URLCache.shared = urlCache</pre><pre name="d2c4" id="d2c4" class="graf graf--pre graf-after--pre">   return true</pre><pre name="f683" id="f683" class="graf graf--pre graf-after--pre">}</pre><div name="8acb" id="8acb" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E4%B8%8B%E8%BC%89%E5%9C%96%E7%89%87%E7%9A%84%E5%B9%BE%E7%A8%AE%E6%96%B9%E6%B3%95-c8f3592db66f" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E4%B8%8B%E8%BC%89%E5%9C%96%E7%89%87%E7%9A%84%E5%B9%BE%E7%A8%AE%E6%96%B9%E6%B3%95-c8f3592db66f" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E4%B8%8B%E8%BC%89%E5%9C%96%E7%89%87%E7%9A%84%E5%B9%BE%E7%A8%AE%E6%96%B9%E6%B3%95-c8f3592db66f"><strong class="markup--strong markup--mixtapeEmbed-strong">Swift iOS App 下載圖片的幾種方法</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，我們時常需要撰寫下載圖片的程式，常見的抓圖程式是利用我們熟悉的 URLSessionDataTask，例如以下點選 button 下載圖片的例子:</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E4%B8%8B%E8%BC%89%E5%9C%96%E7%89%87%E7%9A%84%E5%B9%BE%E7%A8%AE%E6%96%B9%E6%B3%95-c8f3592db66f" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="fb46fde630cd5b3d453224f0571875ea" data-thumbnail-img-id="1*lfK9G4QGMRIc8V2gXKmpHw.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*lfK9G4QGMRIc8V2gXKmpHw.jpeg);"></a></div><h3 name="1d6a" id="1d6a" class="graf graf--h3 graf-after--mixtapeEmbed"><strong class="markup--strong markup--h3-strong">Guided Project — Restaurant</strong></h3><p name="eff6" id="eff6" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">啟動 Apple 寫好的 server app</strong></p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="566a" id="566a" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 49.78%;"><img class="graf-image" data-image-id="1*Xzo8T6h7Weguc2CQhYFwHA.jpeg" data-width="982" data-height="482" src="https://cdn-images-1.medium.com/max/600/1*Xzo8T6h7Weguc2CQhYFwHA.jpeg"></figure><figure name="4ebb" id="4ebb" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50.22%;"><img class="graf-image" data-image-id="1*JedI7J3RyKTEPhacQVKGQQ.jpeg" data-width="970" data-height="472" src="https://cdn-images-1.medium.com/max/600/1*JedI7J3RyKTEPhacQVKGQQ.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="dc9c" id="dc9c" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">點選 Open Images Folder 修改圖片</strong></p><p name="6774" id="6774" class="graf graf--p graf-after--p">檔名為 1.png，2.png，其它以此類推。</p><figure name="42b7" id="42b7" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*21LHF46I6WsZSHfE64V7pA.jpeg" data-width="1104" data-height="544" src="https://cdn-images-1.medium.com/max/800/1*21LHF46I6WsZSHfE64V7pA.jpeg"></figure><p name="8839" id="8839" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">OrderApp</strong></p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="e847" id="e847" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><img class="graf-image" data-image-id="1*ipkmc1EC4ApJb3R4MysH5g.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*ipkmc1EC4ApJb3R4MysH5g.jpeg"></figure><figure name="104a" id="104a" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*zBsyG19zRQndPqMiLGvf9g.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*zBsyG19zRQndPqMiLGvf9g.jpeg"></figure><figure name="f70a" id="f70a" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*EOVpy5MBv6MMB1gPwJcbZw.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*EOVpy5MBv6MMB1gPwJcbZw.jpeg"></figure></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="abaf" id="abaf" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*RC4or9x4ell_YaU12wvrOw.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*RC4or9x4ell_YaU12wvrOw.jpeg"></figure><figure name="1346" id="1346" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*VUPEego1gRT1pra7l1PvIw.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*VUPEego1gRT1pra7l1PvIw.jpeg"></figure><figure name="70b2" id="70b2" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><img class="graf-image" data-image-id="1*s62xMtBJCM08JnXRei_ZQA.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/400/1*s62xMtBJCM08JnXRei_ZQA.jpeg"></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="a83d" id="a83d" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">利用 Notification 傳送訂單資訊</strong></p><p name="4655" id="4655" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">class MenuController</strong></p><p name="6005" id="6005" class="graf graf--p graf-after--p">定義通知名稱 orderUpdatedNotification</p><pre name="549d" id="549d" class="graf graf--pre graf-after--p">static let shared = MenuController()</pre><pre name="b570" id="b570" class="graf graf--pre graf-after--pre">static let orderUpdatedNotification = Notification.Name(&quot;MenuController.orderUpdated&quot;)</pre><p name="9752" id="9752" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">class OrderTableViewController</strong></p><p name="c48b" id="c48b" class="graf graf--p graf-after--p">設定接收通知，收到通知時更新 table。</p><figure name="0a8d" id="0a8d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*n6GdGikY-Vfwtr5BGAwNVA.jpeg" data-width="818" data-height="1378" src="https://cdn-images-1.medium.com/max/800/1*n6GdGikY-Vfwtr5BGAwNVA.jpeg"></figure><pre name="72cb" id="72cb" class="graf graf--pre graf-after--figure">override func viewDidLoad() {</pre><pre name="c2e0" id="c2e0" class="graf graf--pre graf-after--pre">   super.viewDidLoad()</pre><pre name="297f" id="297f" class="graf graf--pre graf-after--pre">   navigationItem.leftBarButtonItem = editButtonItem</pre><pre name="4e60" id="4e60" class="graf graf--pre graf-after--pre">   NotificationCenter.default.addObserver(tableView!, selector: #selector(UITableView.reloadData), name: MenuController.orderUpdatedNotification, object: nil)</pre><pre name="c771" id="c771" class="graf graf--pre graf-after--pre">}</pre><p name="3fb1" id="3fb1" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">class AppDelegate</strong></p><p name="d79a" id="d79a" class="graf graf--p graf-after--p">設定接收通知，收到通知時更新 badege number。</p><figure name="ee09" id="ee09" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*eUddf4gDH8YHiQYhQ0q2iA.jpeg" data-width="496" data-height="158" src="https://cdn-images-1.medium.com/max/800/1*eUddf4gDH8YHiQYhQ0q2iA.jpeg"></figure><pre name="ffb7" id="ffb7" class="graf graf--pre graf-after--figure">@objc func updateOrderBadge() {</pre><pre name="bac7" id="bac7" class="graf graf--pre graf-after--pre">   switch MenuController.shared.order.menuItems.count {</pre><pre name="8e08" id="8e08" class="graf graf--pre graf-after--pre">   case 0:</pre><pre name="02cc" id="02cc" class="graf graf--pre graf-after--pre">       orderTabBarItem.badgeValue = nil</pre><pre name="5ca1" id="5ca1" class="graf graf--pre graf-after--pre">   case let count:</pre><pre name="543c" id="543c" class="graf graf--pre graf-after--pre">      orderTabBarItem.badgeValue = String(count)</pre><pre name="961c" id="961c" class="graf graf--pre graf-after--pre">   }</pre><pre name="ddce" id="ddce" class="graf graf--pre graf-after--pre">}<br><br></pre><pre name="20a5" id="20a5" class="graf graf--pre graf-after--pre">func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {</pre><pre name="51cb" id="51cb" class="graf graf--pre graf-after--pre">   let temporaryDirectory = NSTemporaryDirectory()</pre><pre name="6140" id="6140" class="graf graf--pre graf-after--pre">   let urlCache = URLCache(memoryCapacity: 25_000_000, diskCapacity: 50_000_000, diskPath: temporaryDirectory)</pre><pre name="6cb4" id="6cb4" class="graf graf--pre graf-after--pre">   URLCache.shared = urlCache</pre><pre name="8929" id="8929" class="graf graf--pre graf-after--pre">   <strong class="markup--strong markup--pre-strong">NotificationCenter.default.addObserver(self, selector: #selector(updateOrderBadge), name: MenuController.orderUpdatedNotification, object: nil)</strong></pre><pre name="c5fd" id="c5fd" class="graf graf--pre graf-after--pre">   orderTabBarItem = (self.window!.rootViewController! as! UITabBarController).viewControllers![1].tabBarItem!</pre><pre name="0160" id="0160" class="graf graf--pre graf-after--pre">   return true</pre><pre name="ff8d" id="ff8d" class="graf graf--pre graf-after--pre">}</pre><p name="399a" id="399a" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">class MenuItemDetailViewController</strong></p><p name="03ea" id="03ea" class="graf graf--p graf-after--p">加入訂單</p><pre name="2d99" id="2d99" class="graf graf--pre graf-after--p">@IBAction func orderButtonTapped(_ sender: UIButton) {</pre><pre name="9fe6" id="9fe6" class="graf graf--pre graf-after--pre">   UIView.animate(withDuration: 0.3) {</pre><pre name="6baa" id="6baa" class="graf graf--pre graf-after--pre">      self.addToOrderButton.transform = CGAffineTransform(scaleX: 3.0, y: 3.0)</pre><pre name="70d2" id="70d2" class="graf graf--pre graf-after--pre">      self.addToOrderButton.transform = CGAffineTransform(scaleX: 1.0, y: 1.0)</pre><pre name="aa22" id="aa22" class="graf graf--pre graf-after--pre">   }</pre><pre name="b5b2" id="b5b2" class="graf graf--pre graf-after--pre">   MenuController.shared.order.menuItems.append(menuItem)</pre><pre name="29fb" id="29fb" class="graf graf--pre graf-after--pre">}</pre><p name="17fb" id="17fb" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">class MenuController</strong></p><p name="994d" id="994d" class="graf graf--p graf-after--p">加入訂單時發出通知。</p><p name="f204" id="f204" class="graf graf--p graf-after--p">當我們加入訂單時會修改 order 的 menuItems，由於 Order 是 struct，所以修改它的 property 也會觸發 Order 的 didSet。(如果 Order 是 class 的話，就不會觸發)</p><pre name="3937" id="3937" class="graf graf--pre graf-after--p">var order = Order() {</pre><pre name="c84b" id="c84b" class="graf graf--pre graf-after--pre">   didSet {</pre><pre name="0885" id="0885" class="graf graf--pre graf-after--pre">      NotificationCenter.default.post(name: MenuController.orderUpdatedNotification, object: nil)</pre><pre name="d392" id="d392" class="graf graf--pre graf-after--pre">   }</pre><pre name="8cd2" id="8cd2" class="graf graf--pre graf-after--pre">}</pre><p name="2709" id="2709" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">加入訂單的動畫</strong></p><p name="8608" id="8608" class="graf graf--p graf-after--p">button 先放大再縮小變回原本的大小。</p><pre name="99f6" id="99f6" class="graf graf--pre graf-after--p">@IBAction func orderButtonTapped(_ sender: UIButton) {</pre><pre name="fdfd" id="fdfd" class="graf graf--pre graf-after--pre">   UIView.animate(withDuration: 0.3) {</pre><pre name="8d53" id="8d53" class="graf graf--pre graf-after--pre">     <strong class="markup--strong markup--pre-strong"> self.addToOrderButton.transform = CGAffineTransform(scaleX: 3.0, y: 3.0)</strong></pre><pre name="254e" id="254e" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">      self.addToOrderButton.transform = CGAffineTransform(scaleX: 1.0, y: 1.0)  </strong></pre><pre name="c4cc" id="c4cc" class="graf graf--pre graf-after--pre">   }</pre><pre name="85b4" id="85b4" class="graf graf--pre graf-after--pre">   MenuController.shared.order.menuItems.append(menuItem)</pre><pre name="c257" id="c257" class="graf graf--pre graf-after--pre">}</pre><p name="7643" id="7643" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">網路相關程式定義在 model controller</strong></p><p name="afd7" id="afd7" class="graf graf--p graf-after--p">class MenuController 的 generated interface。</p><pre name="83de" id="83de" class="graf graf--pre graf-after--p">internal class MenuController {</pre><pre name="0e3f" id="0e3f" class="graf graf--pre graf-after--pre">   internal static let shared: OrderApp.MenuController</pre><pre name="49c8" id="49c8" class="graf graf--pre graf-after--pre">   internal static let orderUpdatedNotification: Notification.Name</pre><pre name="e517" id="e517" class="graf graf--pre graf-after--pre">   internal let baseURL: URL</pre><pre name="b29f" id="b29f" class="graf graf--pre graf-after--pre">   internal var order: OrderApp.Order { get set }</pre><pre name="0e59" id="0e59" class="graf graf--pre graf-after--pre">   internal func fetchCategories(completion: @escaping ([String]?) -&gt; Void)</pre><pre name="eed2" id="eed2" class="graf graf--pre graf-after--pre">   internal func fetchMenuItems(forCategory categoryName: String, completion: @escaping ([MenuItem]?) -&gt; Void)</pre><pre name="3741" id="3741" class="graf graf--pre graf-after--pre">   internal func fetchImage(url: URL, completion: @escaping (UIImage?) -&gt; Void)</pre><pre name="fe02" id="fe02" class="graf graf--pre graf-after--pre">   internal func submitOrder(forMenuIDs menuIDs: [Int], completion: @escaping (Int?) -&gt; Void)</pre><pre name="f7e6" id="f7e6" class="graf graf--pre graf-after--pre">}</pre><p name="b775" id="b775" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">上傳 JSON 格式的資料</strong></p><p name="2512" id="2512" class="graf graf--p graf-after--p">上傳訂單</p><p name="ab35" id="ab35" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">class MenuController</strong></p><pre name="f223" id="f223" class="graf graf--pre graf-after--p">func submitOrder(forMenuIDs menuIDs: [Int], completion: @escaping (Int?) -&gt; Void) {</pre><pre name="7918" id="7918" class="graf graf--pre graf-after--pre">   let orderURL = baseURL.appendingPathComponent(&quot;order&quot;)</pre><pre name="7aec" id="7aec" class="graf graf--pre graf-after--pre">   var request = URLRequest(url: orderURL)</pre><pre name="127b" id="127b" class="graf graf--pre graf-after--pre">  <strong class="markup--strong markup--pre-strong"> request.httpMethod = &quot;POST&quot;</strong></pre><pre name="e32a" id="e32a" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   request.setValue(&quot;application/json&quot;, forHTTPHeaderField: &quot;Content-Type&quot;)</strong></pre><pre name="e3ec" id="e3ec" class="graf graf--pre graf-after--pre">   let data: [String: [Int]] = [&quot;menuIds&quot;: menuIDs]</pre><pre name="9aab" id="9aab" class="graf graf--pre graf-after--pre">   let jsonEncoder = JSONEncoder()</pre><pre name="fd3d" id="fd3d" class="graf graf--pre graf-after--pre">   let jsonData = try? jsonEncoder.encode(data)</pre><pre name="86e5" id="86e5" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">   request.httpBody = jsonData</strong></pre><pre name="06d0" id="06d0" class="graf graf--pre graf-after--pre">   let task = URLSession.shared.dataTask(with: request) { (data, response, error) in</pre><pre name="286b" id="286b" class="graf graf--pre graf-after--pre">      let jsonDecoder = JSONDecoder()</pre><pre name="2058" id="2058" class="graf graf--pre graf-after--pre">      if let data = data,</pre><pre name="b726" id="b726" class="graf graf--pre graf-after--pre">         let preparationTime = try? jsonDecoder.decode(PreparationTime.self, from: data) {</pre><pre name="4039" id="4039" class="graf graf--pre graf-after--pre">         completion(preparationTime.prepTime)</pre><pre name="d6e4" id="d6e4" class="graf graf--pre graf-after--pre">      } else {</pre><pre name="f3dc" id="f3dc" class="graf graf--pre graf-after--pre">         completion(nil)</pre><pre name="c3f2" id="c3f2" class="graf graf--pre graf-after--pre">      }</pre><pre name="66bf" id="66bf" class="graf graf--pre graf-after--pre">   }</pre><pre name="65e5" id="65e5" class="graf graf--pre graf-after--pre">   task.resume()</pre><pre name="d0d8" id="d0d8" class="graf graf--pre graf-after--pre">}</pre><p name="6f19" id="6f19" class="graf graf--p graf-after--pre">判斷圖片抓到時，是否還是原本的 cell</p><p name="c0a8" id="c0a8" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">class MenuTableViewController</strong></p><p name="eeba" id="eeba" class="graf graf--p graf-after--p">設定圖片時記得呼叫 setNeedsLayout()，因為 cell 的 imageView property 原本可能是別的 size，呼叫 setNeedsLayout() 後才會更新 size。</p><pre name="160f" id="160f" class="graf graf--pre graf-after--p">func configure(_ cell: UITableViewCell, forItemAt indexPath: IndexPath) {</pre><pre name="59cc" id="59cc" class="graf graf--pre graf-after--pre">   let menuItem = menuItems[indexPath.row]</pre><pre name="f50c" id="f50c" class="graf graf--pre graf-after--pre">   cell.textLabel?.text = menuItem.name</pre><pre name="e612" id="e612" class="graf graf--pre graf-after--pre">   cell.detailTextLabel?.text = String(format: &quot;$%.2f&quot;, menuItem.price)</pre><pre name="d3e0" id="d3e0" class="graf graf--pre graf-after--pre">   MenuController.shared.fetchImage(url: menuItem.imageURL) { (image) in</pre><pre name="55ec" id="55ec" class="graf graf--pre graf-after--pre">      guard let image = image else { return }</pre><pre name="6420" id="6420" class="graf graf--pre graf-after--pre">      DispatchQueue.main.async {</pre><pre name="c658" id="c658" class="graf graf--pre graf-after--pre">       <strong class="markup--strong markup--pre-strong">  if let currentIndexPath = self.tableView.indexPath(for: cell),</strong></pre><pre name="5a4d" id="5a4d" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">           currentIndexPath != indexPath {</strong></pre><pre name="21c6" id="21c6" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">           return</strong></pre><pre name="4761" id="4761" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">         }</strong></pre><pre name="d7e2" id="d7e2" class="graf graf--pre graf-after--pre">         cell.imageView?.image = image</pre><pre name="27a2" id="27a2" class="graf graf--pre graf-after--pre">         cell.setNeedsLayout()</pre><pre name="107a" id="107a" class="graf graf--pre graf-after--pre">      }</pre><pre name="82ad" id="82ad" class="graf graf--pre graf-after--pre">   }</pre><pre name="1fcc" id="1fcc" class="graf graf--pre graf-after--pre">}</pre><p name="f56e" id="f56e" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">project extension: state restoration</strong></p><p name="ddcf" id="ddcf" class="graf graf--p graf-after--p">當 App 重新啟動時，並不會返回之前操作的畫面，而且原本 App 在記憶體中的資料也會被清除。因此剛剛的訂單 App，使用者可能下了兩筆訂單，但當 App 重新啟動時，訂單都不見了，只能重新加訂單。</p><p name="7e32" id="7e32" class="graf graf--p graf-after--p">利用 state restoration，我們可以儲存 App 的狀態，當 App 重新啟動時，返回之前操作的畫面，並且看到之前的訂單。</p><p name="5303" id="5303" class="graf graf--p graf-after--p">state restoration 的詳細程式碼和說明可參考 project extension: state restoration 的章節。(ps: 不過如果使用者強制將 App 結束，之前 App 的操作狀態並不會保留，因此 state restoration 主要用在 App 在背景被系統殺掉的 case。)</p><h3 name="d5e7" id="d5e7" class="graf graf--h3 graf-after--p graf--trailing">Unit 6 Prototyping and Project Planning</h3></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/492121cb2f7e"><time class="dt-published" datetime="2019-05-13T10:01:57.304Z">May 13, 2019</time></a>.</p><p><a href="https://medium.com/@apppeterpan/app-development-with-swift-%E7%A8%8B%E5%BC%8F%E7%AF%84%E4%BE%8B%E9%87%8D%E9%BB%9E%E6%95%B4%E7%90%86-492121cb2f7e" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>