<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>利用 RequestBin 檢查 request 的內容 — 查看 App 上傳的 device token</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">利用 RequestBin 檢查 request 的內容 — 查看 App 上傳的 device token</h1>
</header>
<section data-field="subtitle" class="p-summary">
最近同學在開發 iOS App 的推播功能，問彼得潘有沒有方法方便查看 iPhone 的 device token。
</section>
<section data-field="body" class="e-content">
<section name="3dce" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="c070" id="c070" class="graf graf--h3 graf--leading graf--title">利用 RequestBin 檢查 request 的內容 — 查看 App 上傳的 device token</h3><p name="17e7" id="17e7" class="graf graf--p graf-after--h3">最近同學在開發 iOS App 的推播功能，問彼得潘有沒有方法方便查看 iPhone 的 device token。</p><p name="b9df" id="b9df" class="graf graf--p graf-after--p">從 Xcode 安裝的 App 將得到 development device token，我們可以直接用 print 查看。不過從 TestFlight 或 App Store 安裝的 App 得到的是 production device token，此時 print 就派不上用場了。</p><p name="e237" id="e237" class="graf graf--p graf-after--p">為了取得 production device token，測試正式環境的 App 是否能收到推播，通常有兩種方法。</p><ul class="postList"><li name="10fd" id="10fd" class="graf graf--li graf-after--p">將 token 顯示在 App 畫面上。</li><li name="f612" id="f612" class="graf graf--li graf-after--li">將 token 上傳到 server，從 server 查看 token。</li></ul><p name="4f2f" id="4f2f" class="graf graf--p graf-after--li">為了不影響 App 畫面，以下我們介紹第二種方法，將 token 上傳到 server。</p><p name="0905" id="0905" class="graf graf--p graf-after--p">但是架設 server 是件麻煩的事，因此彼得潘想查查是否有現成的工具，於是發現了 Pipedream 的 RequestBin。</p><div name="20e1" id="20e1" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://pipedream.com/" data-href="https://pipedream.com/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://pipedream.com/"><strong class="markup--strong markup--mixtapeEmbed-strong">Connect APIs, AI, databases and more - Pipedream</strong><br><em class="markup--em markup--mixtapeEmbed-em">Pipedream is the fastest way to build powerful applications that connect all the services in your stack, with…</em>pipedream.com</a><a href="https://pipedream.com/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="21da794008667509e5518b2ce7dd07ce" data-thumbnail-img-id="0*dTQ0wzbs9mGufbZH" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*dTQ0wzbs9mGufbZH);"></a></div><p name="8f25" id="8f25" class="graf graf--p graf-after--mixtapeEmbed">透過 RequestBin 我們可以快速建立 post API，利用它上傳 JSON 資料，再從網頁查看 JSON。這其中最棒的是 JSON 內容可自訂，因此我們可依 App 的需求，利用它上傳任何想檢查的資料。</p><p name="0226" id="0226" class="graf graf--p graf-after--p">以下我們示範利用 RequestBin 建立 API，再從網頁查看 Swift 程式上傳的 token。</p><h3 name="06bf" id="06bf" class="graf graf--h3 graf-after--p">連到 RequestBin 網站，點選 Create Request Bin 建立 API</h3><figure name="d725" id="d725" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*AVdYLSPwTUnNpbfzk6y7Kg.png" data-width="1778" data-height="716" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*AVdYLSPwTUnNpbfzk6y7Kg.png"></figure><div name="1ce7" id="1ce7" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://pipedream.com/requestbin" data-href="https://pipedream.com/requestbin" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://pipedream.com/requestbin"><strong class="markup--strong markup--mixtapeEmbed-strong">RequestBin - A modern request bin to collect, inspect and debug HTTP requests and webhooks …</strong><br><em class="markup--em markup--mixtapeEmbed-em">Pipedream is the fastest way to build powerful applications that connect all the services in your stack, with…</em>pipedream.com</a><a href="https://pipedream.com/requestbin" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="fff180bda71b5564039706b8b7b5f74f" data-thumbnail-img-id="0*5iNRG0bViL6Rgaax" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*5iNRG0bViL6Rgaax);"></a></div><h3 name="a1a7" id="a1a7" class="graf graf--h3 graf-after--mixtapeEmbed">登入帳號</h3><figure name="ad5b" id="ad5b" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*l0OYFsYDZPyMZpnRh_kxtQ.png" data-width="816" data-height="1002" src="https://cdn-images-1.medium.com/max/800/1*l0OYFsYDZPyMZpnRh_kxtQ.png"></figure><h3 name="6493" id="6493" class="graf graf--h3 graf-after--figure">建立 workspace</h3><figure name="f764" id="f764" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*xiFiltDKQNjAjhALWwQTpQ.png" data-width="1148" data-height="762" src="https://cdn-images-1.medium.com/max/800/1*xiFiltDKQNjAjhALWwQTpQ.png"></figure><p name="1905" id="1905" class="graf graf--p graf-after--figure">點選 Skip。</p><figure name="c477" id="c477" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Dd1LkVI92-9BctkzYXdzTw.png" data-width="1154" data-height="1274" src="https://cdn-images-1.medium.com/max/800/1*Dd1LkVI92-9BctkzYXdzTw.png"></figure><p name="fd77" id="fd77" class="graf graf--p graf-after--figure">填寫相關資訊後點選 Continue。</p><figure name="5b42" id="5b42" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ehPh9DHFs8LDdkn0eF-_nA.png" data-width="838" data-height="1346" src="https://cdn-images-1.medium.com/max/800/1*ehPh9DHFs8LDdkn0eF-_nA.png"></figure><h3 name="7390" id="7390" class="graf graf--h3 graf-after--figure">查看 API 資訊</h3><p name="84be" id="84be" class="graf graf--p graf-after--h3">如下圖所示，我們已經生成了 post API，網址是 <a href="https://eo7ht9zf66k76lu.m.pipedream.net" data-href="https://eo7ht9zf66k76lu.m.pipedream.net" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://eo7ht9zf66k76lu.m.pipedream.net</a>，詳細資訊可查看 curl 指令。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="bash" name="988e" id="988e" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">curl -d <span class="hljs-string">&#x27;{<br />  &quot;test&quot;: &quot;event&quot;<br />}&#x27;</span>   -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span>   https://eo7ht9zf66k76lu.m.pipedream.net</span></pre><figure name="9747" id="9747" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*9z-1L91t-cXhNhqJ3cTJPQ.png" data-width="2692" data-height="1386" src="https://cdn-images-1.medium.com/max/800/1*9z-1L91t-cXhNhqJ3cTJPQ.png"></figure><h3 name="9cc4" id="9cc4" class="graf graf--h3 graf-after--figure">串接 API</h3><p name="4082" id="4082" class="graf graf--p graf-after--h3">以下是我們串接 API 的 swift 程式，上傳的 JSON 是 <code class="markup--code markup--p-code">{ &quot;token&quot;: &quot;b612&quot; }</code>。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="a5cd" id="a5cd" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TokenBody</span>: <span class="hljs-title class_">Encodable</span> {<br />    <span class="hljs-keyword">let</span> token: <span class="hljs-type">String</span><br />}<br /><br /><span class="hljs-keyword">func</span> <span class="hljs-title function_">postToken</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> {<br />    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://eo7ht9zf66k76lu.m.pipedream.net&quot;</span>) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }<br />    <span class="hljs-keyword">var</span> request <span class="hljs-operator">=</span> <span class="hljs-type">URLRequest</span>(url: url)<br />    request.httpMethod <span class="hljs-operator">=</span> <span class="hljs-string">&quot;post&quot;</span><br />    request.setValue(<span class="hljs-string">&quot;application/json&quot;</span>, forHTTPHeaderField: <span class="hljs-string">&quot;Content-Type&quot;</span>)<br />    <span class="hljs-keyword">let</span> tokenBody <span class="hljs-operator">=</span> <span class="hljs-type">TokenBody</span>(token: <span class="hljs-string">&quot;b612&quot;</span>)<br />    request.httpBody <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONEncoder</span>().encode(tokenBody)<br />    <span class="hljs-keyword">let</span> (data, <span class="hljs-keyword">_</span>) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(for: request)<br />    <span class="hljs-built_in">print</span>(<span class="hljs-type">String</span>(data: data, encoding: .utf8)<span class="hljs-operator">!</span>)<br />}<br /><br /><span class="hljs-type">Task</span> {<br />    <span class="hljs-keyword">do</span> {<br />        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> postToken()<br />    } <span class="hljs-keyword">catch</span> {<br />        <span class="hljs-built_in">print</span>(error)<br />    }<br />}</span></pre><p name="d47b" id="d47b" class="graf graf--p graf-after--pre">執行程式後回到網頁，馬上看到剛剛發送的 event。</p><figure name="397e" id="397e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*b57wg-l85W-1MvJVBZoSlg.png" data-width="792" data-height="256" src="https://cdn-images-1.medium.com/max/800/1*b57wg-l85W-1MvJVBZoSlg.png"></figure><p name="46bc" id="46bc" class="graf graf--p graf-after--figure">點選 event 顯示的細節如下，從 body 欄位可看到 JSON 內容。</p><figure name="6d1c" id="6d1c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*bAcsRP9siZ7EUt05EzCAVg.png" data-width="1704" data-height="1298" src="https://cdn-images-1.medium.com/max/800/1*bAcsRP9siZ7EUt05EzCAVg.png"></figure><p name="1b21" id="1b21" class="graf graf--p graf-after--figure graf--trailing">利用此方法，以後只要在 <code class="markup--code markup--p-code">application(_:didRegisterForRemoteNotificationsWithDeviceToken:)</code> 上傳 device token 到 RequestBin 生成的 API，即可方便地測試推播。</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/f104c58c0612"><time class="dt-published" datetime="2024-05-29T08:09:11.658Z">May 29, 2024</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%88%A9%E7%94%A8-requestbin-%E6%AA%A2%E6%9F%A5-request-%E7%9A%84%E5%85%A7%E5%AE%B9-%E6%9F%A5%E7%9C%8B-app-%E4%B8%8A%E5%82%B3%E7%9A%84-device-token-f104c58c0612" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>