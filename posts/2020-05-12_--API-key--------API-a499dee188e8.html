<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>以 API key 串接心有設防的API</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">以 API key 串接心有設防的API</h1>
</header>
<section data-field="subtitle" class="p-summary">
透過網路上公開的第三方 API，我們可以實現許多有趣的 App 應用，比方串接電影 API 開發電影 App，串接天氣 API 開發天氣 App。
</section>
<section data-field="body" class="e-content">
<section name="5ad9" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="7d08" id="7d08" class="graf graf--h3 graf--leading graf--title">以 API key 串接心有設防的API</h3><p name="5839" id="5839" class="graf graf--p graf-after--h3">透過網路上公開的第三方 API，我們可以實現許多有趣的 App 應用，比方串接電影 API 開發電影 App，串接天氣 API 開發天氣 App。</p><p name="1aa8" id="1aa8" class="graf graf--p graf-after--p">不過並非每個 API 都能直接連線抓取資料，有些 API 需要經過一些特別手段才能抓到資料，比方我們待會要介紹的 API key。</p><p name="c5c2" id="c5c2" class="graf graf--p graf-after--p">從以下大大精心整理的 public api 列表，我們發現它有個特別的 Auth(驗證) 欄位。</p><div name="69b9" id="69b9" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://github.com/public-apis/public-apis" data-href="https://github.com/public-apis/public-apis" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/public-apis/public-apis"><strong class="markup--strong markup--mixtapeEmbed-strong">public-apis/public-apis</strong><br><em class="markup--em markup--mixtapeEmbed-em">A collective list of free APIs for use in software and web development. A public API for this project can be found…</em>github.com</a><a href="https://github.com/public-apis/public-apis" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a55c819fccc2bf0d8efdee2ac48f8d08" data-thumbnail-img-id="0*le5VgZAUbKjQNYGZ" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*le5VgZAUbKjQNYGZ);"></a></div><figure name="ccd6" id="ccd6" class="graf graf--figure graf-after--mixtapeEmbed"><img class="graf-image" data-image-id="1*JH5rUOt2khPuj7q1ragrHA.jpeg" data-width="1318" data-height="920" src="https://cdn-images-1.medium.com/max/800/1*JH5rUOt2khPuj7q1ragrHA.jpeg"></figure><h3 name="ceec" id="ceec" class="graf graf--h3 graf-after--figure">心不設防的 API</h3><p name="db85" id="db85" class="graf graf--p graf-after--h3">當 Auth 為 No 時代表 API 毫無防備，心不設防，任何人都能連線抓取資料。</p><p name="19f9" id="19f9" class="graf graf--p graf-after--p">以 Dogs API 為例，它的 Auth 為 No。</p><figure name="b8f0" id="b8f0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*MjfFOCN5lFWLSPNxpK5v8A.jpeg" data-width="1386" data-height="314" src="https://cdn-images-1.medium.com/max/800/1*MjfFOCN5lFWLSPNxpK5v8A.jpeg"></figure><div name="9ac0" id="9ac0" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://dog.ceo/dog-api/" data-href="https://dog.ceo/dog-api/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://dog.ceo/dog-api/"><strong class="markup--strong markup--mixtapeEmbed-strong">Dog API</strong><br><em class="markup--em markup--mixtapeEmbed-em">Read our documentation to find out more or try it out for yourself below. Want to add your dog to the collection…</em>dog.ceo</a><a href="https://dog.ceo/dog-api/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="5f10517053f5592ebb4d5679822559d4" data-thumbnail-img-id="0*DaUGnawCL06xc6Mg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*DaUGnawCL06xc6Mg);"></a></div><p name="017f" id="017f" class="graf graf--p graf-after--mixtapeEmbed">因此任何人只要透過以下網址即可得到可愛的小狗圖片。</p><pre name="387a" id="387a" class="graf graf--pre graf-after--p"><a href="https://dog.ceo/api/breeds/image/random" data-href="https://dog.ceo/api/breeds/image/random" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://dog.ceo/api/breeds/image/random</a></pre><p name="fa63" id="fa63" class="graf graf--p graf-after--pre">結果</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="json" name="4cfa" id="4cfa" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-punctuation">{</span><br /><span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;https://images.dog.ceo/breeds/doberman/n02107142_1886.jpg&quot;</span><span class="hljs-punctuation">,</span><br /><span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span><br /><span class="hljs-punctuation">}</span></span></pre><ul class="postList"><li name="7eb0" id="7eb0" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">其它心不設防的 API 範例</strong></li></ul><p name="dec0" id="dec0" class="graf graf--p graf-after--li">動物森友會 API</p><pre name="b039" id="b039" class="graf graf--pre graf-after--p"><a href="http://acnhapi.com/fish" data-href="http://acnhapi.com/fish" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">http://acnhapi.com/fish</a></pre><div name="3050" id="3050" class="graf graf--mixtapeEmbed graf-after--pre"><a href="http://acnhapi.com" data-href="http://acnhapi.com" class="markup--anchor markup--mixtapeEmbed-anchor" title="http://acnhapi.com"><strong class="markup--strong markup--mixtapeEmbed-strong">ACNH API</strong><br><em class="markup--em markup--mixtapeEmbed-em">An Animal Crossing: New Horizons API for critters and much more!</em>acnhapi.com</a><a href="http://acnhapi.com" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="7ce9b6c25f722092a1160f8280f84601"></a></div><h3 name="a934" id="a934" class="graf graf--h3 graf-after--mixtapeEmbed">心有設防的 API</h3><p name="9c37" id="9c37" class="graf graf--p graf-after--h3">既然有心不設防的 API，當然也有心有設防的 API。心有設防 API 知道世界上壞人很多，所以它會做一些保護措施，只有它相信的人可以連線抓資料，防止那些半夜睡不著覺，然後打開 Mac 連線 API 瘋狂抓資料的怪人。</p><p name="470d" id="470d" class="graf graf--p graf-after--p">下表 Auth 欄位內容為 apiKey &amp; OAuth 的都是有防備的 API，以下我們主要介紹今天的主角，API key。</p><figure name="b9b8" id="b9b8" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*z-MkF1zrY92AT1n8MDk1lw.jpeg" data-width="1334" data-height="582" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*z-MkF1zrY92AT1n8MDk1lw.jpeg"></figure><h3 name="6ed3" id="6ed3" class="graf graf--h3 graf-after--figure">保護 API 的 API key</h3><p name="1b92" id="1b92" class="graf graf--p graf-after--h3">Auth 採用 API key 的意思是我們使用 API 抓資料時必須將 API key 帶在 request 裡。API key 就像通關密語，就像阿里巴巴喊芝麻開門打開石門得到寶藏，只有知道 API key 的人才能連線後台抓取寶貴的資料。</p><div name="767a" id="767a" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://en.wikipedia.org/wiki/Application_programming_interface_key" data-href="https://en.wikipedia.org/wiki/Application_programming_interface_key" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://en.wikipedia.org/wiki/Application_programming_interface_key"><strong class="markup--strong markup--mixtapeEmbed-strong">Application programming interface key</strong><br><em class="markup--em markup--mixtapeEmbed-em">An application programming interface key ( API key) is a unique identifier used to authenticate a user, developer, or…</em>en.wikipedia.org</a><a href="https://en.wikipedia.org/wiki/Application_programming_interface_key" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="5a417f92c5c058c92d0a81d6929ac4d1" data-thumbnail-img-id="0*ZMK4ouroEoiCFHLk" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*ZMK4ouroEoiCFHLk);"></a></div><p name="4c45" id="4c45" class="graf graf--p graf-after--mixtapeEmbed">當我們開發 iOS App 時，一個 API key 通常對應一個 App。因此後台會從 API key 判斷我們是否是它允許能合法抓資料的 App，不知道 API key 的 App 將無法抓資料。</p><p name="a3f1" id="a3f1" class="graf graf--p graf-after--p">API key 通常透過以下 3 種方法帶在 request 裡:</p><ul class="postList"><li name="2127" id="2127" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">帶在網址的 query 字串。</strong></li><li name="b96c" id="b96c" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">帶在 HTTP header。</strong></li><li name="5542" id="5542" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">搭配雜湊演算法讓 API key 更安全。</strong></li></ul><p name="5c87" id="5c87" class="graf graf--p graf-after--li">接下來就讓我們以實際的例子分別說明吧。</p><h3 name="c4c0" id="c4c0" class="graf graf--h3 graf-after--p">在網址的 query 字串加上 API key</h3><p name="de0e" id="de0e" class="graf graf--p graf-after--h3">從 weatherstack API 我們可取得世界各地的天氣資訊 。</p><div name="fd52" id="fd52" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://weatherstack.com" data-href="https://weatherstack.com" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://weatherstack.com"><strong class="markup--strong markup--mixtapeEmbed-strong">weatherstack — Real-Time World Weather REST API</strong><br><em class="markup--em markup--mixtapeEmbed-em">Get current weather information, historical data and forecasts using weatherstack — a free world weather REST API…</em>weatherstack.com</a><a href="https://weatherstack.com" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="676a2c29b9a8173e964a346df6d57c93"></a></div><p name="6f47" id="6f47" class="graf graf--p graf-after--mixtapeEmbed">我們想透過以下 API 抓取台北是否下雨，會不會雨大到彼得潘看不見 wendy。文件裡明白告訴我們，我們要在網址的 access_key 加入 API key。</p><figure name="f50d" id="f50d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*x2wwTURCWwN5UZDvh7f2Kw.jpeg" data-width="1808" data-height="882" src="https://cdn-images-1.medium.com/max/800/1*x2wwTURCWwN5UZDvh7f2Kw.jpeg"></figure><figure name="5a9f" id="5a9f" class="graf graf--figure graf--iframe graf-after--figure"><iframe src="https://www.youtube.com/embed/DYptgVvkVLQ?feature=oembed" width="640" height="480" frameborder="0" scrolling="no"></iframe></figure><p name="5de4" id="5de4" class="graf graf--p graf-after--figure">為了取得 API key，我們的第一步通常是跟提供 API 的網站註冊帳號。</p><figure name="dd51" id="dd51" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*EwLkWlMwBoiSC5i2MIpzHA.jpeg" data-width="2314" data-height="1188" src="https://cdn-images-1.medium.com/max/800/1*EwLkWlMwBoiSC5i2MIpzHA.jpeg"></figure><p name="2c73" id="2c73" class="graf graf--p graf-after--figure">像彼得潘一樣節儉的朋友可申請免費帳號就好，一樣可以取得 API key。</p><figure name="8a58" id="8a58" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*CDh4yRC7Ajq645-cEo3a6A.jpeg" data-width="2246" data-height="1064" src="https://cdn-images-1.medium.com/max/800/1*CDh4yRC7Ajq645-cEo3a6A.jpeg"></figure><p name="a91d" id="a91d" class="graf graf--p graf-after--figure">有了 API key，我們將可利用以下網址抓取台北的天氣。值得注意的，weatherstack 只允許免費帳號以 http 連線 API，付費帳號才能以 https 連線。(ps: 為了安全，以下 API key 是假的)</p><pre name="93f5" id="93f5" class="graf graf--pre graf-after--p"><a href="http://api.weatherstack.com/current?access_key=459de809582093378e3bff5ebe0e8b9c&amp;query=Taipei" data-href="http://api.weatherstack.com/current?access_key=459de809582093378e3bff5ebe0e8b9c&amp;query=Taipei" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">http://api.weatherstack.com/current?access_key=45911111b9c&amp;query=Taipei</a></pre><p name="7dc3" id="7dc3" class="graf graf--p graf-after--pre">結果</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="json" name="43c1" id="43c1" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-punctuation">{</span><br />  <span class="hljs-attr">&quot;request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br />    <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;City&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Taipei, Taiwan&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;language&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;en&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;unit&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;m&quot;</span><br />  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;location&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br />    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Taipei&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;country&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Taiwan&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;region&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;T&#x27;ai-pei&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;lat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;25.039&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;lon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;121.525&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;timezone_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Asia/Taipei&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;localtime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2020-05-12 16:32&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;localtime_epoch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1589301120</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;utc_offset&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;8.0&quot;</span><br />  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br />  <span class="hljs-attr">&quot;current&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br />    <span class="hljs-attr">&quot;observation_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;08:32 AM&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;temperature&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">23</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;weather_code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">116</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;weather_icons&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br />      <span class="hljs-string">&quot;https://assets.weatherstack.com/images/wsymbols01_png_64/wsymbol_0002_sunny_intervals.png&quot;</span><br />    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;weather_descriptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br />      <span class="hljs-string">&quot;Partly cloudy&quot;</span><br />    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;wind_speed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">19</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;wind_degree&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;wind_dir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;E&quot;</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;pressure&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1011</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;precip&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.4</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;humidity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">83</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;cloudcover&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">75</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;feelslike&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">25</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;uv_index&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;visibility&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span><br />    <span class="hljs-attr">&quot;is_day&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;yes&quot;</span><br />  <span class="hljs-punctuation">}</span><br /><span class="hljs-punctuation">}</span></span></pre><ul class="postList"><li name="4ab3" id="4ab3" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">其它在網址的 query 字串加上 API key 的範例</strong></li></ul><p name="1c7f" id="1c7f" class="graf graf--p graf-after--li">YouTube Data API</p><pre name="eb17" id="eb17" class="graf graf--pre graf-after--p">https://www.googleapis.com/youtube/v3/channels?part=contentDetails&amp;id=channel的id&amp;<strong class="markup--strong markup--pre-strong">key=API key</strong></pre><div name="a620" id="a620" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/101-%E4%BD%BF%E7%94%A8-youtube-data-api-%E6%8A%93%E5%8F%96%E6%9C%89%E8%B6%A3%E7%9A%84-youtuber-%E5%BD%B1%E7%89%87-mv-d05c3a0c70aa" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/101-%E4%BD%BF%E7%94%A8-youtube-data-api-%E6%8A%93%E5%8F%96%E6%9C%89%E8%B6%A3%E7%9A%84-youtuber-%E5%BD%B1%E7%89%87-mv-d05c3a0c70aa" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/101-%E4%BD%BF%E7%94%A8-youtube-data-api-%E6%8A%93%E5%8F%96%E6%9C%89%E8%B6%A3%E7%9A%84-youtuber-%E5%BD%B1%E7%89%87-mv-d05c3a0c70aa"><strong class="markup--strong markup--mixtapeEmbed-strong">#101 使用 YouTube Data API 抓取有趣的 Youtuber 影片 &amp; MV</strong><br><em class="markup--em markup--mixtapeEmbed-em">最近大家愈來愈少看電視 &amp; 買 CD，因為很多人都從電腦觀看有趣的 Youtuber 影片和聽音樂。 YouTube 上有那麼多精彩的影片，有沒有可能我們自己寫個 App，串接它豐富的資料呢 ?</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/101-%E4%BD%BF%E7%94%A8-youtube-data-api-%E6%8A%93%E5%8F%96%E6%9C%89%E8%B6%A3%E7%9A%84-youtuber-%E5%BD%B1%E7%89%87-mv-d05c3a0c70aa" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="fbd5ca704c7d80a9c80750b31c8553ae" data-thumbnail-img-id="1*JQYY5qZmZAnq3JQxlZNWzw.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*JQYY5qZmZAnq3JQxlZNWzw.jpeg);"></a></div><h3 name="f6a4" id="f6a4" class="graf graf--h3 graf-after--mixtapeEmbed">在 HTTP header 加上 API key</h3><p name="0c59" id="0c59" class="graf graf--p graf-after--h3">比起將 API key 直接帶在網址，有些 API 採用較安全的方式，它將 API key 帶在 HTTP header，例如以下 Cat，remove.bg &amp; Imgur API 的例子。</p><ul class="postList"><li name="5518" id="5518" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">可愛貓咪 Cat API</strong></li></ul><div name="3328" id="3328" class="graf graf--mixtapeEmbed graf-after--li"><a href="https://thecatapi.com/" data-href="https://thecatapi.com/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://thecatapi.com/"><strong class="markup--strong markup--mixtapeEmbed-strong">The Cat API - Cats as a Service.</strong><br><em class="markup--em markup--mixtapeEmbed-em">A public service API all about Cats, free to use when making your fancy new App, Website or Service.</em>thecatapi.com</a><a href="https://thecatapi.com/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="ca99636c0d41a3be4438d14d2ee11492" data-thumbnail-img-id="0*AiP2QNNAuces4GqE" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*AiP2QNNAuces4GqE);"></a></div><p name="27d7" id="27d7" class="graf graf--p graf-after--mixtapeEmbed">API 的文件時常以 curl 指令輔助說明， <code class="markup--code markup--p-code">--header</code>代表 HTTP header 欄位，因此以下 curl 指令代表 API key 要帶在 HTTP header，欄位名稱是 <code class="markup--code markup--p-code">x-api-key</code>。以下 API 可抓取可愛的貓咪圖片，參數 limit=25 設定抓取 25 張。如果沒有帶 API key，只會得到 10 張圖片。</p><figure name="b111" id="b111" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*_GqzY2GqumUuA4ugpEhk4A.png" data-width="1194" data-height="258" src="https://cdn-images-1.medium.com/max/800/1*_GqzY2GqumUuA4ugpEhk4A.png"></figure><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="bash" name="5352" id="5352" class="graf graf--pre graf-after--figure graf--preV2"><span class="pre--content">curl --request GET \<br />  --url https://api.thecatapi.com/v1/images/search?<span class="hljs-built_in">limit</span>=25&amp;page=0&amp;order=desc \<br />  --header <span class="hljs-string">&#x27;x-api-key: DEMO-API-KEY&#x27;</span></span></pre><p name="77b3" id="77b3" class="graf graf--p graf-after--pre">我們可透過 URLRequest 的 function <code class="markup--code markup--p-code">setValue(_:forHTTPHeaderField:)</code> 設定 HTTP header，因此以下程式將設定 HTTP header 欄位 <code class="markup--code markup--p-code">x-api-key</code> 的內容為 <code class="markup--code markup--p-code">DEMO-API-KEY</code>。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="82b2" id="82b2" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://api.thecatapi.com/v1/images/search?limit=25&amp;page=0&amp;order=desc&quot;</span>)<span class="hljs-operator">!</span><br /><span class="hljs-keyword">var</span> request <span class="hljs-operator">=</span> <span class="hljs-type">URLRequest</span>(url: url)<br />request.setValue(<span class="hljs-string">&quot;DEMO-API-KEY&quot;</span>, forHTTPHeaderField: <span class="hljs-string">&quot;x-api-key&quot;</span>)</span></pre><div name="7933" id="7933" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://developer.apple.com/documentation/foundation/urlrequest/2011447-setvalue" data-href="https://developer.apple.com/documentation/foundation/urlrequest/2011447-setvalue" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/foundation/urlrequest/2011447-setvalue"><strong class="markup--strong markup--mixtapeEmbed-strong">setValue(_:forHTTPHeaderField:) | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Sets a value for the header field.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/foundation/urlrequest/2011447-setvalue" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="7cd921a92e4b853a41363e72d5477fb8" data-thumbnail-img-id="0*dDjcqPEFQ1WiM7F_" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*dDjcqPEFQ1WiM7F_);"></a></div><ul class="postList"><li name="5a00" id="5a00" class="graf graf--li graf-after--mixtapeEmbed"><strong class="markup--strong markup--li-strong">將照片去背的 remove.bg API</strong></li></ul><p name="c4f1" id="c4f1" class="graf graf--p graf-after--li">curl 指令如下。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="bash" name="c568" id="c568" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">curl -H <span class="hljs-string">&#x27;X-API-Key: YOUR_API_KEY&#x27;</span> \<br />       -F <span class="hljs-string">&#x27;image_file=@/path/to/file.jpg&#x27;</span> \<br />       -f https://api.remove.bg/v1.0/removebg -o no-bg.png</span></pre><p name="8eb5" id="8eb5" class="graf graf--p graf-after--pre">對應的 Swift 程式。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="f11e" id="f11e" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://api.remove.bg/v1.0/removebg&quot;</span>)<span class="hljs-operator">!</span><br /><span class="hljs-keyword">var</span> request <span class="hljs-operator">=</span> <span class="hljs-type">URLRequest</span>(url: url)<br />request.setValue(<span class="hljs-string">&quot;YSMEnS11111UVd&quot;</span>, forHTTPHeaderField: <span class="hljs-string">&quot;X-Api-Key&quot;</span>)</span></pre><ul class="postList"><li name="eb4b" id="eb4b" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">提供免費圖片空間的 Imgur API</strong></li></ul><p name="a176" id="a176" class="graf graf--p graf-after--li">Imgur API 也要求 API key 要帶在 HTTP header，欄位名稱是 Authorization，內容則是 Client-ID + 空格 + App 的 client ID。</p><figure name="3528" id="3528" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*uPZmzU9DYTHYW2x46Ui9dQ.jpeg" data-width="1328" data-height="496" src="https://cdn-images-1.medium.com/max/800/1*uPZmzU9DYTHYW2x46Ui9dQ.jpeg"></figure><p name="89d6" id="89d6" class="graf graf--p graf-after--figure">在此 client ID 即是 API key，可在 Imgur 網站建立 App 後取得。</p><figure name="573a" id="573a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*CAu6Uztg_M4M88r-VP6F-A.jpeg" data-width="1400" data-height="729" src="https://cdn-images-1.medium.com/max/800/1*CAu6Uztg_M4M88r-VP6F-A.jpeg"></figure><p name="0807" id="0807" class="graf graf--p graf-after--figure">因此從 Imgur API 搜尋 apple 照片的程式如下， HTTP header 欄位 Authorization 的內容為 Client-ID aaa1111aaaa。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="75e0" id="75e0" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> clientId <span class="hljs-operator">=</span> <span class="hljs-string">&quot;aaa1111aaaa&quot;</span><br /><span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://api.imgur.com/3/gallery/search?q=apple&quot;</span>)<span class="hljs-operator">!</span><br /><span class="hljs-keyword">var</span> request <span class="hljs-operator">=</span> <span class="hljs-type">URLRequest</span>(url: url)<br />request.setValue(<span class="hljs-string">&quot;Client-ID <span class="hljs-subst">\(clientId)</span>&quot;</span>, forHTTPHeaderField: <span class="hljs-string">&quot;Authorization&quot;</span>)</span></pre><h3 name="d84b" id="d84b" class="graf graf--h3 graf-after--pre">搭配雜湊演算法讓 API key 更安全</h3><p name="e3a8" id="e3a8" class="graf graf--p graf-after--h3">前面提到的兩個方法，不管是將 API key 帶在網址還是 HTTP header，其實都不是很安全，比方你不小心將 API key 告訴暗戀的女生，如果她剛好是程式高手，就可以透過你的 API key 偷偷抓資料了。</p><p name="e13a" id="e13a" class="graf graf--p graf-after--p">因此有些 API 會使用雜湊演算法對 API key 做一些運算，讓只知道 API key 的人無法直接存取 API。</p><p name="2180" id="2180" class="graf graf--p graf-after--p">比方若要透過 Marvel API 抓取漫威角色的相關資料，我們必須利用 privateKey，publicKey ，現在時間 &amp; MD5 雜湊得到網址的 <a href="https://gateway.marvel.com/v1/public/characters?ts=%5C%28ts%29&amp;apikey=%5C%28publicKey%29&amp;hash=%5C%28hashString%29" data-href="https://gateway.marvel.com/v1/public/characters?ts=\(ts)&amp;apikey=\(publicKey)&amp;hash=\(hashString)" class="markup--anchor markup--p-anchor" rel="nofollow noopener noopener" target="_blank">hash</a> 字串。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="ea50" id="ea50" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> CryptoKit<br /><span class="hljs-keyword">import</span> Foundation<br /><br /><span class="hljs-keyword">let</span> ts <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>().timeIntervalSinceReferenceDate<br /><span class="hljs-keyword">let</span> privateKey <span class="hljs-operator">=</span> <span class="hljs-string">&quot;0ab7a1111117ae3&quot;</span><br /><span class="hljs-keyword">let</span> publicKey <span class="hljs-operator">=</span> <span class="hljs-string">&quot;958211111d6e230c&quot;</span><br /><span class="hljs-keyword">let</span> md5InputData <span class="hljs-operator">=</span> <span class="hljs-string">&quot;<span class="hljs-subst">\(ts)</span><span class="hljs-subst">\(privateKey)</span><span class="hljs-subst">\(publicKey)</span>&quot;</span>.data(using: .utf8)<span class="hljs-operator">!</span><br /><span class="hljs-keyword">let</span> digest <span class="hljs-operator">=</span> <span class="hljs-type">Insecure</span>.<span class="hljs-type">MD5</span>.hash(data: md5InputData)<br /><span class="hljs-keyword">let</span> hashString <span class="hljs-operator">=</span> digest.map {<br />    <span class="hljs-type">String</span>(format: <span class="hljs-string">&quot;%02x&quot;</span>, <span class="hljs-variable">$0</span>)<br />}.joined()<br /><span class="hljs-keyword">let</span> urlString <span class="hljs-operator">=</span> <span class="hljs-string">&quot;https://gateway.marvel.com/v1/public/characters?ts=<span class="hljs-subst">\(ts)</span>&amp;apikey=<span class="hljs-subst">\(publicKey)</span>&amp;hash=<span class="hljs-subst">\(hashString)</span>&quot;</span></span></pre><div name="53ef" id="53ef" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/104-%E5%88%A9%E7%94%A8-marvel-api-%E9%96%8B%E7%99%BC%E6%BC%AB%E5%A8%81%E7%9A%84-ios-app-952c67213458" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/104-%E5%88%A9%E7%94%A8-marvel-api-%E9%96%8B%E7%99%BC%E6%BC%AB%E5%A8%81%E7%9A%84-ios-app-952c67213458" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/104-%E5%88%A9%E7%94%A8-marvel-api-%E9%96%8B%E7%99%BC%E6%BC%AB%E5%A8%81%E7%9A%84-ios-app-952c67213458"><strong class="markup--strong markup--mixtapeEmbed-strong">#104 利用 Marvel API 開發漫威的 iOS App</strong><br><em class="markup--em markup--mixtapeEmbed-em">常常看到同學們寫 iOS App 作業時以漫威為主題，比方製作蜘蛛人，鋼鐵人的相關 App。不過漫威的角色和圖片那麼多，一個個輸入到程式裡實在有點辛苦，最近研究了一下，Marvel 大大早為我們準備 API，方便我們存取 Marvel…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/104-%E5%88%A9%E7%94%A8-marvel-api-%E9%96%8B%E7%99%BC%E6%BC%AB%E5%A8%81%E7%9A%84-ios-app-952c67213458" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="ee9d263cd39314259228dd475e52fe64" data-thumbnail-img-id="1*kOXwECAUXSzmuFqaz2Oplg.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*kOXwECAUXSzmuFqaz2Oplg.jpeg);"></a></div><p name="b5a1" id="b5a1" class="graf graf--p graf-after--mixtapeEmbed">為了更安全，Marvel API 有兩個 key，privateKey &amp; publicKey，相信我們應該不會那麼不小心，將兩個 key 都告訴暗戀的女生。</p><figure name="43e5" id="43e5" class="graf graf--figure graf-after--p graf--trailing"><img class="graf-image" data-image-id="1*V3qI7084Ex4defYHqVGvdQ.jpeg" data-width="938" data-height="652" src="https://cdn-images-1.medium.com/max/800/1*V3qI7084Ex4defYHqVGvdQ.jpeg"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/a499dee188e8"><time class="dt-published" datetime="2020-05-12T10:41:09.549Z">May 12, 2020</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E4%BB%A5-api-key-%E4%B8%B2%E6%8E%A5%E5%BF%83%E6%9C%89%E8%A8%AD%E9%98%B2%E7%9A%84api-a499dee188e8" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>