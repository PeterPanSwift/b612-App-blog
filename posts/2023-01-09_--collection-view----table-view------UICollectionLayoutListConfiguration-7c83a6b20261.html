<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>把 collection view 變成 table view 的形狀- UICollectionLayoutListConfiguration</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">把 collection view 變成 table view 的形狀- UICollectionLayoutListConfiguration</h1>
</header>
<section data-field="subtitle" class="p-summary">
使用 collection view 設計畫面時，我們可以讓它像 table view 一樣呈現一列一列的內容。不過為了有類似 table view 的畫面跟功能，我們必須自己辛苦地寫一些程式實現。
</section>
<section data-field="body" class="e-content">
<section name="3151" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="d49a" id="d49a" class="graf graf--h3 graf--leading graf--title">把 collection view 變成 table view 的形狀- UICollectionLayoutListConfiguration</h3><figure name="5368" id="5368" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*-Zqzn35YfRwnflkyHOdOCw.png" data-width="1054" data-height="564" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*-Zqzn35YfRwnflkyHOdOCw.png"></figure><p name="d754" id="d754" class="graf graf--p graf-after--figure">使用 collection view 設計畫面時，我們可以讓它像 table view 一樣呈現一列一列的內容。不過為了有類似 table view 的畫面跟功能，我們必須自己辛苦地寫一些程式實現。</p><p name="623d" id="623d" class="graf graf--p graf-after--p">從 iOS 14 開始，Apple 推出了 UICollectionLayoutListConfiguration，結合 UICollectionLayoutListConfiguration 跟 compositional layout，collection view 輕鬆就能擁有類似 table view 的畫面跟功能。</p><div name="a98e" id="a98e" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/uikit/uicollectionlayoutlistconfiguration" data-href="https://developer.apple.com/documentation/uikit/uicollectionlayoutlistconfiguration" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/uikit/uicollectionlayoutlistconfiguration"><strong class="markup--strong markup--mixtapeEmbed-strong">Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/uikit/uicollectionlayoutlistconfiguration" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="5eedbeca90dd26d200e80f5fbeb1fc22"></a></div><p name="b51b" id="b51b" class="graf graf--p graf-after--mixtapeEmbed">接下來我們以伊坂幸太郎有趣的小說舉例說明。</p><h3 name="e097" id="e097" class="graf graf--h3 graf-after--p">定義資料型別 Book</h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="67e6" id="67e6" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Book</span> {<br />    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> summary: <span class="hljs-type">String</span><br />}</span></pre><h3 name="ba67" id="ba67" class="graf graf--h3 graf-after--pre">在 asset 加入三本小說的封面圖片</h3><figure name="8efe" id="8efe" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*Vqa0VAInzipr32rucTWSTg.png" data-width="1436" data-height="1172" src="https://cdn-images-1.medium.com/max/800/1*Vqa0VAInzipr32rucTWSTg.png"></figure><h3 name="7105" id="7105" class="graf graf--h3 graf-after--figure">storyboard 的畫面設計</h3><p name="b423" id="b423" class="graf graf--p graf-after--h3">collection view controller 的類別為 BookListCollectionViewController，cell 的類別和 id 為 BookCollectionViewCell。</p><figure name="ef2d" id="ef2d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*niTooF36jniBik2DHU9Bow.png" data-width="1632" data-height="1092" src="https://cdn-images-1.medium.com/max/800/1*niTooF36jniBik2DHU9Bow.png"></figure><p name="3606" id="3606" class="graf graf--p graf-after--figure">水平 stack view 的設定。</p><figure name="75b0" id="75b0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*CZmkicHRa4lPOHFrMAJ1-g.png" data-width="524" data-height="358" src="https://cdn-images-1.medium.com/max/800/1*CZmkicHRa4lPOHFrMAJ1-g.png"></figure><p name="398a" id="398a" class="graf graf--p graf-after--figure">垂直 stack view 的設定。</p><figure name="8eba" id="8eba" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*eDQgLePCLBIvK5Rtcczscg.png" data-width="516" data-height="324" src="https://cdn-images-1.medium.com/max/800/1*eDQgLePCLBIvK5Rtcczscg.png"></figure><h3 name="4db0" id="4db0" class="graf graf--h3 graf-after--figure">連結 BookCollectionViewCell 的 outlet</h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="acbe" id="acbe" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> UIKit<br /><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">BookCollectionViewCell</span>: <span class="hljs-title class_">UICollectionViewCell</span> {<br />    <br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> summaryLabel: <span class="hljs-type">UILabel</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> nameLabel: <span class="hljs-type">UILabel</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> coverImageView: <span class="hljs-type">UIImageView</span>!<br />    <br />}</span></pre><h3 name="9b9e" id="9b9e" class="graf graf--h3 graf-after--pre">定義 BookListCollectionViewController，cell 高度由 auto layout 計算</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="1354" id="1354" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> UIKit<br /><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">BookListCollectionViewController</span>: <span class="hljs-title class_">UICollectionViewController</span> {<br />    <br />    <span class="hljs-keyword">let</span> books <span class="hljs-operator">=</span> [<br />        <span class="hljs-type">Book</span>(name: <span class="hljs-string">&quot;佩珀爾的幻象&quot;</span>, summary: <span class="hljs-string">&quot;當你擁有一個微弱的，發動方式還有點丟臉的超能力時，你會怎麼使用它？貓貓X超能力X尼采＝難以預測發展、令人心跳加速的伊坂小說！我將自己有興趣的、喜歡的東西，擔心的、想做的事情，全都放進這本書，成了一部包含至今為止我的所有小說特點的故事。<span class="hljs-subst">\n</span>「看見未來，奪回原本的人生！」檀千鄉，一個普通至極的中學國文老師。只是他有著在特定條件下，能夠稍微看到他人的明日的特殊能力。然而一直以來，檀都覺得這個超能力根本不可能幫助任何人，到最後甚至令他產生了心理創傷。&quot;</span>),<br />        <span class="hljs-type">Book</span>(name: <span class="hljs-string">&quot;Fish Story－龐克救地球&quot;</span>, summary: <span class="hljs-string">&quot;動物園和引擎，小偷和活人獻祭；魚和空白間奏，洋芋片和全壘打——四篇由毫不相關的關鍵字組合起來的絕妙故&quot;</span>),<br />        <span class="hljs-type">Book</span>(name: <span class="hljs-string">&quot;家鴨與野鴨的投幣式置物櫃&quot;</span>, summary: <span class="hljs-string">&quot;喜劇發生在現在。大學新鮮人「我」，哼著Bob Dylan的歌搬到新公寓，鄰居的神祕美男子河崎竟主動搭訕：「要不要一起去搶書店？」目的是送給不丹籍友人一本字典《廣辭苑》，好讓他查清楚「家鴨」與「野鴨」的差別。「我」莫名成為共犯，豈料襲擊書店成功，卻錯偷了《廣辭林》！？&quot;</span>)<br />    ]<br /><br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {<br />        <span class="hljs-keyword">super</span>.viewDidLoad()<br />        collectionView.collectionViewLayout <span class="hljs-operator">=</span> generateLayout()<br />    }<br />    <br />    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">generateLayout</span>() -&gt; <span class="hljs-type">UICollectionViewLayout</span> {<br />        <span class="hljs-keyword">var</span> listConfiguration <span class="hljs-operator">=</span> <span class="hljs-type">UICollectionLayoutListConfiguration</span>(appearance: .plain)<br />        <span class="hljs-keyword">return</span> <span class="hljs-type">UICollectionViewCompositionalLayout</span>.list(using: listConfiguration)<br />    }<br /><br />    <span class="hljs-comment">// MARK: UICollectionViewDataSource</span><br /><br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">collectionView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">collectionView</span>: <span class="hljs-type">UICollectionView</span>, <span class="hljs-params">numberOfItemsInSection</span> <span class="hljs-params">section</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> {<br />        <span class="hljs-keyword">return</span> books.count<br />    }<br /><br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">collectionView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">collectionView</span>: <span class="hljs-type">UICollectionView</span>, <span class="hljs-params">cellForItemAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>) -&gt; <span class="hljs-type">UICollectionViewCell</span> {<br />        <span class="hljs-keyword">let</span> cell <span class="hljs-operator">=</span> collectionView.dequeueReusableCell(withReuseIdentifier: <span class="hljs-string">&quot;<span class="hljs-subst">\(BookCollectionViewCell.<span class="hljs-keyword">self</span>)</span>&quot;</span>, for: indexPath) <span class="hljs-keyword">as!</span> <span class="hljs-type">BookCollectionViewCell</span><br />    <br />        <span class="hljs-keyword">let</span> book <span class="hljs-operator">=</span> books[indexPath.item]<br />        cell.nameLabel.text <span class="hljs-operator">=</span> book.name<br />        cell.coverImageView.image <span class="hljs-operator">=</span> <span class="hljs-type">UIImage</span>(named: book.name)<br />        cell.summaryLabel.text <span class="hljs-operator">=</span> book.summary<br />        <span class="hljs-keyword">return</span> cell<br />    }<br /><br />}</span></pre><p name="0cbf" id="0cbf" class="graf graf--p graf-after--pre">說明</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="837f" id="837f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">generateLayout</span>() -&gt; <span class="hljs-type">UICollectionViewLayout</span> {<br />    <span class="hljs-keyword">let</span> listConfiguration <span class="hljs-operator">=</span> <span class="hljs-type">UICollectionLayoutListConfiguration</span>(appearance: .plain)<br />    <span class="hljs-keyword">return</span> <span class="hljs-type">UICollectionViewCompositionalLayout</span>.list(using: listConfiguration)<br />}</span></pre><p name="96e5" id="96e5" class="graf graf--p graf-after--pre">生成 UICollectionViewCompositionalLayout 時傳入 UICollectionLayoutListConfiguration，之後 layout 排版畫面時會將 collection view 變成 table view 的形狀，cell 的寬度等於 collection view 的寬度，cell 的高度則由 auto layout 計算。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="c6f1" id="c6f1" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {<br />     <span class="hljs-keyword">super</span>.viewDidLoad()<br />     collectionView.collectionViewLayout <span class="hljs-operator">=</span> generateLayout()<br />}</span></pre><p name="09de" id="09de" class="graf graf--p graf-after--pre">將 collection view 的 layout 設為 generateLayout 產生的 UICollectionViewCompositionalLayout。</p><ul class="postList"><li name="e40e" id="e40e" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">App 畫面</strong></li></ul><p name="91d6" id="91d6" class="graf graf--p graf-after--li">cell 高度依據 auto layout 調整，因此小說簡介內容愈多時，cell 也會愈高。</p><figure name="5f35" id="5f35" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*xVOcmQYkuBY_7rEmuLK8IA.png" data-width="1339" data-height="2716" src="https://cdn-images-1.medium.com/max/800/1*xVOcmQYkuBY_7rEmuLK8IA.png"></figure><h3 name="21be" id="21be" class="graf graf--h3 graf-after--figure">固定 cell 高度</h3><p name="294b" id="294b" class="graf graf--p graf-after--h3">我們也可以利用 auto layout 實現固定的 cell 高度。比方以下例子 cell 的高度為 168。(stack view 高度 148 加上下各 10 的間距)</p><figure name="391c" id="391c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*FWVdBF--ozEWuA6ZkxzS6w.png" data-width="1146" data-height="848" src="https://cdn-images-1.medium.com/max/800/1*FWVdBF--ozEWuA6ZkxzS6w.png"></figure><ul class="postList"><li name="9c45" id="9c45" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">App 畫面</strong></li></ul><figure name="db46" id="db46" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*9b1R7oGWnziWWCD4R5837g.png" data-width="1339" data-height="2716" src="https://cdn-images-1.medium.com/max/800/1*9b1R7oGWnziWWCD4R5837g.png"></figure><h3 name="d870" id="d870" class="graf graf--h3 graf-after--figure">GitHub 專案</h3><div name="ad52" id="ad52" class="graf graf--mixtapeEmbed graf-after--h3 graf--trailing"><a href="https://github.com/AppPeterPan/DemoCollectionLayoutListConfiguration" data-href="https://github.com/AppPeterPan/DemoCollectionLayoutListConfiguration" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/AppPeterPan/DemoCollectionLayoutListConfiguration"><strong class="markup--strong markup--mixtapeEmbed-strong">GitHub - AppPeterPan/DemoCollectionLayoutListConfiguration</strong><br><em class="markup--em markup--mixtapeEmbed-em">You can&#39;t perform that action at this time. You signed in with another tab or window. You signed out in another tab or…</em>github.com</a><a href="https://github.com/AppPeterPan/DemoCollectionLayoutListConfiguration" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="25a87feaa1599cbafc9787c6e3311642" data-thumbnail-img-id="0*oxHC0n-EzaaQ_JEC" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*oxHC0n-EzaaQ_JEC);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/7c83a6b20261"><time class="dt-published" datetime="2023-01-09T06:00:54.505Z">January 9, 2023</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E6%8A%8A-collection-view-%E8%AE%8A%E6%88%90-table-view-%E7%9A%84%E5%BD%A2%E7%8B%80-uicollectionlayoutlistconfiguration-7c83a6b20261" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>