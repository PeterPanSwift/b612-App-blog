<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>#216 使用 Gravatar API 抓取使用者頭像</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">#216 使用 Gravatar API 抓取使用者頭像</h1>
</header>
<section data-field="subtitle" class="p-summary">
最近發現 Gravatar 提供不錯的頭像圖片服務，只要從 Gravatar 設定 email 綁定的頭像，之後即可從 email 查詢對應的頭像。
</section>
<section data-field="body" class="e-content">
<section name="3391" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="81e1" id="81e1" class="graf graf--h3 graf--leading graf--title">#216 使用 Gravatar API 抓取使用者頭像</h3><p name="9ec9" id="9ec9" class="graf graf--p graf-after--h3">最近發現 Gravatar 提供不錯的頭像圖片服務，只要從 Gravatar 設定 email 綁定的頭像，之後即可從 email 查詢對應的頭像。</p><div name="ec65" id="ec65" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://gravatar.com/" data-href="https://gravatar.com/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://gravatar.com/"><strong class="markup--strong markup--mixtapeEmbed-strong">Gravatar - Globally Recognized Avatars</strong><br><em class="markup--em markup--mixtapeEmbed-em">Your email address becomes your passport to the digital world, empowering you with complete control over your personal…</em>gravatar.com</a><a href="https://gravatar.com/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="d6d0da2b620cea55f903c4b49beac27d" data-thumbnail-img-id="0*q6caYOfoHbtSKRd-" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*q6caYOfoHbtSKRd-);"></a></div><p name="f775" id="f775" class="graf graf--p graf-after--mixtapeEmbed">比方輸入 apppeterpan@gmail.com 找到彼得潘的頭像。</p><figure name="40ed" id="40ed" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*UFxoFOuHM3exUOSXLmEnnQ.png" data-width="656" data-height="409" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*UFxoFOuHM3exUOSXLmEnnQ.png"></figure><figure name="bfa5" id="bfa5" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*PmUMyYZtZvMbiZHXWruPYA.png" data-width="666" data-height="358" src="https://cdn-images-1.medium.com/max/800/1*PmUMyYZtZvMbiZHXWruPYA.png"></figure><p name="d0a1" id="d0a1" class="graf graf--p graf-after--figure">若是沒有綁定照片的 email，則會顯示 There is no profile associated with this email address。</p><figure name="6785" id="6785" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*mzXda1r_rqSH75Zyca13Vg.png" data-width="668" data-height="409" src="https://cdn-images-1.medium.com/max/800/1*mzXda1r_rqSH75Zyca13Vg.png"></figure><p name="1125" id="1125" class="graf graf--p graf-after--figure">更棒的是身為開發者的我們也可以串接 Gravatar API 抓取 email 對應的頭像。</p><div name="eb31" id="eb31" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://docs.gravatar.com/general/images/" data-href="https://docs.gravatar.com/general/images/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://docs.gravatar.com/general/images/"><strong class="markup--strong markup--mixtapeEmbed-strong">Image Requests</strong><br><em class="markup--em markup--mixtapeEmbed-em">Gravatar images may be requested just like a normal image, using an IMG tag. To get an image specific to a user, you…</em>docs.gravatar.com</a><a href="https://docs.gravatar.com/general/images/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="6a1229e4be1fa2fda254bd7c84223958" data-thumbnail-img-id="0*DkWEJNSW2FtpkWNu" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*DkWEJNSW2FtpkWNu);"></a></div><p name="29b8" id="29b8" class="graf graf--p graf-after--mixtapeEmbed">API 的網址如下。</p><pre data-code-block-mode="0" spellcheck="false" name="b49a" id="b49a" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">https://gravatar.com/avatar/HASH </span></pre><p name="06a3" id="06a3" class="graf graf--p graf-after--pre">HASH 要換成從 email 計算得到的一串亂碼。</p><div name="c757" id="c757" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://docs.gravatar.com/general/hash/" data-href="https://docs.gravatar.com/general/hash/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://docs.gravatar.com/general/hash/"><strong class="markup--strong markup--mixtapeEmbed-strong">Creating the Hash</strong><br><em class="markup--em markup--mixtapeEmbed-em">All URLs on Gravatar are based on the use of the hashed value of an email address. Images and profiles are both…</em>docs.gravatar.com</a><a href="https://docs.gravatar.com/general/hash/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="17620611cce64701b4239a15ffabc365" data-thumbnail-img-id="0*TE4qwdHRSZsJnq5f" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*TE4qwdHRSZsJnq5f);"></a></div><p name="0d01" id="0d01" class="graf graf--p graf-after--mixtapeEmbed">計算的規則如下。</p><ol class="postList"><li name="0fa5" id="0fa5" class="graf graf--li graf-after--p">移除 email 前後多餘的空白。</li><li name="1df4" id="1df4" class="graf graf--li graf-after--li">將 email 變成全部小寫。</li><li name="1bef" id="1bef" class="graf graf--li graf-after--li">用 SHA256 產生亂碼字串。</li></ol><p name="6914" id="6914" class="graf graf--p graf-after--li">轉換成 Swift 程式的寫法如下，使用 CryptoKit 的 SHA256.hash 產生亂碼字串。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="6fdf" id="6fdf" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><span class="hljs-keyword">import</span> CryptoKit<br /><br /><span class="hljs-keyword">func</span> <span class="hljs-title function_">hashEmail</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">email</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">String</span> {<br />    <span class="hljs-keyword">let</span> trimmedLowercasedEmail <span class="hljs-operator">=</span> email.trimmingCharacters(in: .whitespacesAndNewlines).lowercased()<br />    <span class="hljs-keyword">let</span> digest <span class="hljs-operator">=</span> <span class="hljs-type">SHA256</span>.hash(data: <span class="hljs-type">Data</span>(trimmedLowercasedEmail.utf8))<br />    <span class="hljs-keyword">return</span> digest.map { <span class="hljs-type">String</span>(format: <span class="hljs-string">&quot;%02x&quot;</span>, <span class="hljs-variable">$0</span>) }.joined()<br />}</span></pre><p name="e902" id="e902" class="graf graf--p graf-after--pre">比方 apppeterpan@gmail.com 算出的 hash 是 <code class="markup--code markup--p-code">dcfa7438ac364aedcae77282a20c0186f41704aa325a997af328a3fd5a97e3a4</code>，因此從以下網址可抓到彼得潘的頭像。</p><pre data-code-block-mode="0" spellcheck="false" name="19a5" id="19a5" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">https://gravatar.com/avatar/dcfa7438ac364aedcae77282a20c0186f41704aa325a997af328a3fd5a97e3a4</span></pre><p name="04cb" id="04cb" class="graf graf--p graf-after--pre">參數 s 可額外指定大小，以下 s=200 將抓出 200 * 200 pixel 的頭像。</p><pre data-code-block-mode="0" spellcheck="false" name="7917" id="7917" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">https://gravatar.com/avatar/dcfa7438ac364aedcae77282a20c0186f41704aa325a997af328a3fd5a97e3a4?s=200</span></pre><h3 name="b9ad" id="b9ad" class="graf graf--h3 graf-after--pre">練習</h3><p name="a002" id="a002" class="graf graf--p graf-after--h3 graf--trailing">開發 iOS App，使用者從畫面上輸入 email，串接 Gravatar API 抓取顯示 email 對應的頭像。</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/785ae50f2b40"><time class="dt-published" datetime="2024-02-16T03:37:45.974Z">February 16, 2024</time></a>.</p><p><a href="https://medium.com/@apppeterpan/216-%E4%BD%BF%E7%94%A8-gravatar-api-%E6%8A%93%E5%8F%96%E4%BD%BF%E7%94%A8%E8%80%85%E9%A0%AD%E5%83%8F-785ae50f2b40" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>