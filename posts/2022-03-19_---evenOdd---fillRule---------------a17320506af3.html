<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>運用 evenOdd 的 fillRule 實現空心的裁切(遮罩)效果</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">運用 evenOdd 的 fillRule 實現空心的裁切(遮罩)效果</h1>
</header>
<section data-field="subtitle" class="p-summary">
利用 CAShapeLayer 我們可以繪製各種想要的形狀，圓形，三角形，星星都不是問題，不過如果想做出挖空某個形狀的效果要怎麼做呢 ?
</section>
<section data-field="body" class="e-content">
<section name="c5d8" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="da03" id="da03" class="graf graf--h3 graf--leading graf--title">運用 evenOdd 的 fillRule 實現空心的裁切(遮罩)效果</h3><p name="e672" id="e672" class="graf graf--p graf-after--h3">利用 CAShapeLayer 我們可以繪製各種想要的形狀，圓形，三角形，星星都不是問題，不過如果想做出挖空某個形狀的效果要怎麼做呢 ?</p><p name="d3ca" id="d3ca" class="graf graf--p graf-after--p">關鍵在於將 fillRule 設為 evenOdd，接下來讓我們看看幾個不同的例子。</p><h3 name="1f42" id="1f42" class="graf graf--h3 graf-after--p">在正方形裡挖個剛好切齊的圓形</h3><pre name="a58e" id="a58e" class="graf graf--pre graf-after--h3">import UIKit<br>let view = UIView(frame: CGRect(x: 0, y: 0, width: 300, height: 300))<br>let path = UIBezierPath(rect: view.bounds)<br>path.append(UIBezierPath(ovalIn: view.bounds))<br>let shapeLayer = CAShapeLayer()<br>shapeLayer.path = path.cgPath<br>shapeLayer.fillRule = .evenOdd<br>shapeLayer.fillColor = UIColor.red.cgColor<br>view.layer.addSublayer(shapeLayer)<br>view</pre><p name="2fc6" id="2fc6" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">說明</strong></p><pre name="1a59" id="1a59" class="graf graf--pre graf-after--p">let path = UIBezierPath(rect: view.bounds)<br>path.append(UIBezierPath(ovalIn: view.bounds))</pre><p name="30d6" id="30d6" class="graf graf--p graf-after--pre">先產生正方形的 UIBezierPath，然後加上圓形的 UIBezierPath，</p><figure name="e947" id="e947" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*-Jj00p3ljRyf6QqFoqHzsw.png" data-width="1372" data-height="770" src="https://cdn-images-1.medium.com/max/800/1*-Jj00p3ljRyf6QqFoqHzsw.png"></figure><pre name="e060" id="e060" class="graf graf--pre graf-after--figure">let shapeLayer = CAShapeLayer()</pre><pre name="b112" id="b112" class="graf graf--pre graf-after--pre">shapeLayer.path = path.cgPath</pre><pre name="eaa8" id="eaa8" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">shapeLayer.fillRule = .evenOdd</strong></pre><p name="7f14" id="7f14" class="graf graf--p graf-after--pre">將 fillRule 設為 evenOdd，到時候填滿顏色時將變成填滿外面的正方形，裡面的圓形不填色。</p><p name="5a30" id="5a30" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">結果</strong></p><figure name="91fb" id="91fb" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*cFvXGM2WVaLpLF6mFasXWA.png" data-width="428" data-height="446" src="https://cdn-images-1.medium.com/max/800/1*cFvXGM2WVaLpLF6mFasXWA.png"></figure><h3 name="9241" id="9241" class="graf graf--h3 graf-after--figure">在正方形裡挖個小一點的圓形</h3><pre name="b677" id="b677" class="graf graf--pre graf-after--h3">import UIKit<br>let view = UIView(frame: CGRect(x: 0, y: 0, width: 300, height: 300))<br>let path = UIBezierPath(rect: view.bounds)<br>path.append(UIBezierPath(ovalIn: view.bounds.inset(by: UIEdgeInsets(top: 30, left: 30, bottom: 30, right: 30))))<br>let shapeLayer = CAShapeLayer()<br>shapeLayer.path = path.cgPath<br>shapeLayer.fillRule = .evenOdd<br>shapeLayer.fillColor = UIColor.red.cgColor<br>view.layer.addSublayer(shapeLayer)<br>view</pre><figure name="d41d" id="d41d" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*vOFdRquTq6Xsrl_egBxrCg.png" data-width="392" data-height="414" src="https://cdn-images-1.medium.com/max/800/1*vOFdRquTq6Xsrl_egBxrCg.png"></figure><h3 name="282c" id="282c" class="graf graf--h3 graf-after--figure">在背景圖片裡挖個圓，在中間顯示可愛的 Peter</h3><pre name="0881" id="0881" class="graf graf--pre graf-after--h3">import UIKit</pre><pre name="60a3" id="60a3" class="graf graf--pre graf-after--pre">let view = UIView(frame: CGRect(x: 0, y: 0, width: 300, height: 300))</pre><pre name="460a" id="460a" class="graf graf--pre graf-after--pre">let backgroundImageView = UIImageView(frame: view.bounds)<br>backgroundImageView.image = UIImage(named: &quot;background.jpg&quot;)<br>let path = UIBezierPath(rect: backgroundImageView.bounds)<br>path.append(UIBezierPath(ovalIn: backgroundImageView.bounds.inset(by: UIEdgeInsets(top: 30, left: 30, bottom: 30, right: 30))))<br>let shapeLayer = CAShapeLayer()<br>shapeLayer.path = path.cgPath<br>shapeLayer.fillRule = .evenOdd<br><strong class="markup--strong markup--pre-strong">backgroundImageView.layer.mask = shapeLayer<br></strong>view.addSubview(backgroundImageView)</pre><pre name="47be" id="47be" class="graf graf--pre graf-after--pre">let peterImageView = UIImageView(image: UIImage(named: &quot;peter.png&quot;))<br>peterImageView.frame = CGRect(x: 0, y: 0, width: 200, height: 200)<br>peterImageView.contentMode = .scaleAspectFit<br>peterImageView.center = view.center<br>view.addSubview(peterImageView)<br>view</pre><p name="3661" id="3661" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">說明</strong></p><pre name="eab0" id="eab0" class="graf graf--pre graf-after--p">backgroundImageView.layer.mask = shapeLayer</pre><p name="976b" id="976b" class="graf graf--p graf-after--pre">將 backgroundImageView.layer 的 mask 設為 shapeLayer，讓圖片的中間被挖空。</p><p name="3951" id="3951" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">結果</strong></p><p name="79b2" id="79b2" class="graf graf--p graf-after--p">backgroundImageView 的模樣</p><figure name="ca5f" id="ca5f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*_zYZzLoIrN9ST3jxPG1F3g.png" data-width="696" data-height="662" src="https://cdn-images-1.medium.com/max/800/1*_zYZzLoIrN9ST3jxPG1F3g.png"></figure><p name="1cb2" id="1cb2" class="graf graf--p graf-after--figure">view 的模樣</p><figure name="1f16" id="1f16" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*VlcYiq4FfvyTKxQ7ghHF4A.png" data-width="670" data-height="674" src="https://cdn-images-1.medium.com/max/800/1*VlcYiq4FfvyTKxQ7ghHF4A.png"></figure><h3 name="6ac2" id="6ac2" class="graf graf--h3 graf-after--figure">在 view controller 加入挖空的圖片跟帥氣的 Peter</h3><pre name="4fad" id="4fad" class="graf graf--pre graf-after--h3">class ViewController: UIViewController {</pre><pre name="b715" id="b715" class="graf graf--pre graf-after--pre">    override func viewDidLoad() {<br>        super.viewDidLoad()<br>        // Do any additional setup after loading the view.<br>        <br>        let backgroundImageView = UIImageView(frame: CGRect(x: 0, y: 0, width: 300, height: 300))<br>        backgroundImageView.image = UIImage(named: &quot;background&quot;)<br>        let path = UIBezierPath(rect: backgroundImageView.bounds)<br>        path.append(UIBezierPath(ovalIn: backgroundImageView.bounds.inset(by: UIEdgeInsets(top: 30, left: 30, bottom: 30, right: 30))))<br>        let shapeLayer = CAShapeLayer()<br>        shapeLayer.path = path.cgPath<br>        shapeLayer.fillRule = .evenOdd<br>        backgroundImageView.layer.mask = shapeLayer<br>        backgroundImageView.center = view.center<br>        view.addSubview(backgroundImageView)</pre><pre name="136b" id="136b" class="graf graf--pre graf-after--pre">        let peterImageView = UIImageView(image: UIImage(named: &quot;peter&quot;))<br>        peterImageView.frame = CGRect(x: 0, y: 0, width: 200, height: 200)<br>        peterImageView.contentMode = .scaleAspectFit<br>        peterImageView.center = view.center<br>        view.addSubview(peterImageView)<br>        <br>        view.backgroundColor = .purple</pre><pre name="738b" id="738b" class="graf graf--pre graf-after--pre">   }</pre><pre name="3b66" id="3b66" class="graf graf--pre graf-after--pre">}</pre><figure name="269d" id="269d" class="graf graf--figure graf-after--pre graf--trailing"><img class="graf-image" data-image-id="1*3jgGJ2J8BiyMVfIAFCg5fQ.png" data-width="1170" data-height="2532" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*3jgGJ2J8BiyMVfIAFCg5fQ.png"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/a17320506af3"><time class="dt-published" datetime="2022-03-19T13:22:44.271Z">March 19, 2022</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E9%81%8B%E7%94%A8-evenodd-%E7%9A%84-fillrule-%E5%AF%A6%E7%8F%BE%E7%A9%BA%E5%BF%83%E7%9A%84%E8%A3%81%E5%88%87-%E9%81%AE%E7%BD%A9-%E6%95%88%E6%9E%9C-a17320506af3" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>