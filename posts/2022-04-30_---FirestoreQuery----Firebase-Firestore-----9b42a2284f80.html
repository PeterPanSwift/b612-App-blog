<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>åˆ©ç”¨ FirestoreQuery è®€å– Firebase Firestore è³‡æ–™åº«</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">åˆ©ç”¨ FirestoreQuery è®€å– Firebase Firestore è³‡æ–™åº«</h1>
</header>
<section data-field="subtitle" class="p-summary">
Firebase åœ¨æ–°ç‰ˆæ¨å‡ºäº† property wrapper FirestoreQueryï¼Œåˆ©ç”¨å®ƒæˆ‘å€‘å¯ä»¥æ–¹ä¾¿åœ°è®€å– Firebase Firestore è³‡æ–™åº«ã€‚
</section>
<section data-field="body" class="e-content">
<section name="c556" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="db18" id="db18" class="graf graf--h3 graf--leading graf--title">åˆ©ç”¨ FirestoreQuery è®€å– Firebase Firestore è³‡æ–™åº«</h3><p name="23b8" id="23b8" class="graf graf--p graf-after--h3">Firebase åœ¨æ–°ç‰ˆæ¨å‡ºäº† property wrapper FirestoreQueryï¼Œåˆ©ç”¨å®ƒæˆ‘å€‘å¯ä»¥æ–¹ä¾¿åœ°è®€å– Firebase Firestore è³‡æ–™åº«ã€‚</p><p name="54dd" id="54dd" class="graf graf--p graf-after--p">æ¥ä¸‹ä¾†è®“æˆ‘å€‘ä»¥å¥½è½çš„æƒ…æ­Œè³‡æ–™åº«ç‚ºä¾‹èªªæ˜å§ã€‚</p><h3 name="8050" id="8050" class="graf graf--h3 graf-after--p">Firestore æƒ…æ­Œè³‡æ–™åº«</h3><p name="4421" id="4421" class="graf graf--p graf-after--h3">è³‡æ–™åº«ç•«é¢å¦‚ä¸‹ï¼Œç›®å‰æœ‰ä¸‰é¦–å¥½è½çš„æ­Œã€‚</p><figure name="04c3" id="04c3" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*dJP19JHn_wX_14DRsTBL3A.png" data-width="1858" data-height="706" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*dJP19JHn_wX_14DRsTBL3A.png"></figure><h3 name="aac3" id="aac3" class="graf graf--h3 graf-after--figure">å®šç¾©æ­Œæ›²å°æ‡‰çš„è³‡æ–™å‹åˆ¥ Song</h3><p name="99b8" id="99b8" class="graf graf--p graf-after--h3">DocumentID å°‡è®“ id è‡ªå‹•å°æ‡‰ Firestore ä¸Š document çš„ idã€‚</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="ece6" id="ece6" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> FirebaseFirestoreSwift<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Song</span>: <span class="hljs-title class_">Codable</span>, <span class="hljs-title class_">Identifiable</span> {<br />    <span class="hljs-meta">@DocumentID</span> <span class="hljs-keyword">var</span> id: <span class="hljs-type">String</span>?<br />    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> singer: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> rate: <span class="hljs-type">Int</span><br />}</span></pre><h3 name="d6a2" id="d6a2" class="graf graf--h3 graf-after--pre">è®€å–æŸå€‹è·¯å¾‘ä¸‹çš„å…¨éƒ¨æ–‡ä»¶</h3><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1d0a" id="1d0a" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><span class="hljs-keyword">import</span> FirebaseFirestore<br /><span class="hljs-keyword">import</span> FirebaseFirestoreSwift<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@FirestoreQuery</span>(collectionPath: <span class="hljs-string">&quot;songs&quot;</span>) <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>]<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">List</span> {<br />            <span class="hljs-type">ForEach</span>(songs) { song <span class="hljs-keyword">in</span><br />                <span class="hljs-type">HStack</span> {<br />                    <span class="hljs-type">Text</span>(song.name)<br />                    <span class="hljs-type">Spacer</span>()<br />                    <span class="hljs-type">VStack</span>(alignment: .trailing) {<br />                        <span class="hljs-type">Text</span>(song.singer)<br />                        <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(song.rate)</span>&quot;</span>)<br />                    }<br />                }<br />            }<br />        }<br />    }<br />}</span></pre><p name="9f21" id="9f21" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">èªªæ˜</strong></p><p name="1fb4" id="1fb4" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code u-paddingRight0 u-marginRight0"><a href="http://twitter.com/FirestoreQuery" data-href="http://twitter.com/FirestoreQuery" class="markup--anchor markup--p-anchor" title="Twitter profile for @FirestoreQuery" rel="noopener" target="_blank">@FirestoreQuery</a>(collectionPath: &quot;songs&quot;) var songs: [Song] </code>å°‡è‡ªå‹•è®€å– Firestore songs ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œç„¶å¾Œå°‡å®ƒå­˜å…¥ array songsã€‚ä¹‹å¾Œç•¶ songs ä¸‹çš„æ–‡ä»¶æœ‰æ›´æ–°æ™‚ï¼Œarray songs ä¹Ÿæœƒè‡ªå‹•æ›´æ–°ä¸¦æ›´æ–° App ç•«é¢ã€‚</p><p name="9297" id="9297" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">çµæœ</strong></p><figure name="ead7" id="ead7" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Nqa6JRrMdHfq80QqpL-BXw.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*Nqa6JRrMdHfq80QqpL-BXw.png"></figure><h3 name="2c90" id="2c90" class="graf graf--h3 graf-after--figure">è¨­å®šæ’åºæ¢ä»¶</h3><p name="5595" id="5595" class="graf graf--p graf-after--h3">åœ¨åƒæ•¸ predicates å‚³å…¥ order(by:) è¨­å®šæ’åºæ¢ä»¶ï¼Œä»¥ä¸‹ä¾‹å­ä»¥ rate æ’åºï¼Œç”±å°åˆ°å¤§ã€‚</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="5e08" id="5e08" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@FirestoreQuery</span>(collectionPath: <span class="hljs-string">&quot;songs&quot;</span>, predicates: [<br />        .order(by: <span class="hljs-string">&quot;rate&quot;</span>)<br />]) <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>]</span></pre><figure name="6256" id="6256" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*Nqa6JRrMdHfq80QqpL-BXw.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*Nqa6JRrMdHfq80QqpL-BXw.png"></figure><p name="0e84" id="0e84" class="graf graf--p graf-after--figure">ä»¥ order çš„åƒæ•¸ descending ç‚º true æ§åˆ¶æ’åºç”±å¤§åˆ°å°ã€‚</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="35a7" id="35a7" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@FirestoreQuery</span>(collectionPath: <span class="hljs-string">&quot;songs&quot;</span>, predicates: [<br />        .order(by: <span class="hljs-string">&quot;rate&quot;</span>, descending: <span class="hljs-literal">true</span>)<br />]) <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>]</span></pre><figure name="05f0" id="05f0" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*6PKRLoJcAoscQyI4FuI2vg.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*6PKRLoJcAoscQyI4FuI2vg.png"></figure><h3 name="b001" id="b001" class="graf graf--h3 graf-after--figure">è¨­å®šæ•¸é‡</h3><p name="099e" id="099e" class="graf graf--p graf-after--h3">ä»¥ limit(to:) æŒ‡å®šæŠ“å–çš„æ•¸é‡ï¼Œä»¥ä¸‹ä¾‹å­è¨­å®šæœ€å¤šæŠ“å– 2 é¦–æ­Œã€‚</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="223d" id="223d" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@FirestoreQuery</span>(collectionPath: <span class="hljs-string">&quot;songs&quot;</span>, predicates: [<br />        .order(by: <span class="hljs-string">&quot;rate&quot;</span>, descending: <span class="hljs-literal">true</span>),<br />        .limitTo(<span class="hljs-number">2</span>)<br />]) <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>]</span></pre><figure name="de0c" id="de0c" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*eKL_pCkpev2QoX7r6JD1LQ.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*eKL_pCkpev2QoX7r6JD1LQ.png"></figure><h3 name="d9ed" id="d9ed" class="graf graf--h3 graf-after--figure">æœå°‹ç‰¹å®šçš„è³‡æ–™</h3><ul class="postList"><li name="02a8" id="02a8" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">æœå°‹ç­‰æ–¼æŸå€‹å€¼çš„è³‡æ–™ã€‚</strong></li></ul><p name="cff6" id="cff6" class="graf graf--p graf-after--li">ä»¥ä¸‹ä¾‹å­æœå°‹æ­Œæ‰‹å°çƒçš„æ­Œæ›²ã€‚</p><p name="7c29" id="7c29" class="graf graf--p graf-after--p">æ–¹æ³• 1: ä½¿ç”¨ isEqualTo(_:_:)</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="3dc9" id="3dc9" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@FirestoreQuery</span>(collectionPath: <span class="hljs-string">&quot;songs&quot;</span>, predicates: [<br />        .isEqualTo(<span class="hljs-string">&quot;singer&quot;</span>, <span class="hljs-string">&quot;å°çƒ&quot;</span>)<br />]) <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>]</span></pre><p name="16a3" id="16a3" class="graf graf--p graf-after--pre">æ–¹æ³• 2: ä½¿ç”¨ where(_:isEqualTo:)</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="db0f" id="db0f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@FirestoreQuery</span>(collectionPath: <span class="hljs-string">&quot;songs&quot;</span>, predicates: [<br />        .where(<span class="hljs-string">&quot;singer&quot;</span>, isEqualTo: <span class="hljs-string">&quot;å°çƒ&quot;</span>)<br />]) <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>]</span></pre><figure name="2e1c" id="2e1c" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*QS1qjJILJNuyraMhmd8KWQ.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*QS1qjJILJNuyraMhmd8KWQ.png"></figure><ul class="postList"><li name="2f3f" id="2f3f" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">æœå°‹å¤§æ–¼æŸå€‹å€¼çš„è³‡æ–™ã€‚</strong></li></ul><p name="5bb4" id="5bb4" class="graf graf--p graf-after--li">ä»¥ä¸‹ä¾‹å­æœå°‹è©•åˆ†å¤§æ–¼ 3 çš„æ­Œæ›²ã€‚</p><p name="1740" id="1740" class="graf graf--p graf-after--p">æ–¹æ³• 1: ä½¿ç”¨ isGreaterThan(_:_:)</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="9d5c" id="9d5c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@FirestoreQuery</span>(collectionPath: <span class="hljs-string">&quot;songs&quot;</span>, predicates: [<br />        .isGreaterThan(<span class="hljs-string">&quot;rate&quot;</span>, <span class="hljs-number">3</span>)<br />]) <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>]</span></pre><p name="2310" id="2310" class="graf graf--p graf-after--pre">æ–¹æ³• 2: ä½¿ç”¨ where(_:isGreaterThan:)</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="ba8d" id="ba8d" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@FirestoreQuery</span>(collectionPath: <span class="hljs-string">&quot;songs&quot;</span>, predicates: [<br />        .where(<span class="hljs-string">&quot;rate&quot;</span>, isGreaterThan: <span class="hljs-number">3</span>)<br />]) <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>]</span></pre><figure name="2a3c" id="2a3c" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*80jXwz1Y3TtK0NCSGp4vcw.png" data-width="1400" data-height="2700" src="https://cdn-images-1.medium.com/max/800/1*80jXwz1Y3TtK0NCSGp4vcw.png"></figure><p name="e62a" id="e62a" class="graf graf--p graf-after--figure">é™¤äº†æ¯”è¼ƒç­‰æ–¼å’Œå¤§æ–¼ï¼Œé‚„æœ‰å¾ˆå¤šæ¯”è¼ƒçš„æ–¹æ³•ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¯é€²ä¸€æ­¥æŸ¥è©¢ç›¸é—œè³‡è¨Šã€‚</p><figure name="c47e" id="c47e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*w8UTwNFyN5g-h7j-p_YJJQ.png" data-width="1568" data-height="806" src="https://cdn-images-1.medium.com/max/800/1*w8UTwNFyN5g-h7j-p_YJJQ.png"></figure><h3 name="a216" id="a216" class="graf graf--h3 graf-after--figure">Firebase Firestore å¤šå€‹æ¬„ä½ query çš„ indexÂ å•é¡Œ</h3><p name="56d9" id="56d9" class="graf graf--p graf-after--h3">åœ¨ FirestoreQuery çš„åƒæ•¸ predicates array è£¡è‹¥æœ‰ç”¨åˆ°å¤šå€‹æ¬„ä½ï¼Œå¯èƒ½æœƒé‡åˆ°è³‡æ–™ç„¡æ³•æŠ“å–çš„å•é¡Œã€‚æ¯”æ–¹ä»¥ä¸‹ç¨‹å¼çš„ query æœƒåˆ¤æ–· mood &amp; rateï¼ŒæŠ“å–ä»¥ rate æ’åºçš„æ‚²å‚·æƒ…æ­Œã€‚</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="5866" id="5866" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">@FirestoreQuery</span>(collectionPath: <span class="hljs-string">&quot;songs&quot;</span>, predicates: [<br />        .isEqualTo(<span class="hljs-string">&quot;mood&quot;</span>, <span class="hljs-string">&quot;ğŸ˜¢&quot;</span>),<br />        .order(by: <span class="hljs-string">&quot;rate&quot;</span>)<br />]) <span class="hljs-keyword">var</span> songs: [<span class="hljs-type">Song</span>]</span></pre><p name="8fa1" id="8fa1" class="graf graf--p graf-after--pre">æ­¤å•é¡Œå¯é€éåŠ ä¸Š index è§£æ±ºï¼Œç›¸é—œèªªæ˜å¯åƒè€ƒä»¥ä¸‹é€£çµã€‚</p><div name="8918" id="8918" class="graf graf--mixtapeEmbed graf-after--p graf--trailing"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/firebase-firestore-%E5%A4%9A%E5%80%8B%E6%AC%84%E4%BD%8D-query-%E7%9A%84-index-%E5%95%8F%E9%A1%8C-3c921aeafba7" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/firebase-firestore-%E5%A4%9A%E5%80%8B%E6%AC%84%E4%BD%8D-query-%E7%9A%84-index-%E5%95%8F%E9%A1%8C-3c921aeafba7" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/firebase-firestore-%E5%A4%9A%E5%80%8B%E6%AC%84%E4%BD%8D-query-%E7%9A%84-index-%E5%95%8F%E9%A1%8C-3c921aeafba7"><strong class="markup--strong markup--mixtapeEmbed-strong">Firebase Firestore å¤šå€‹æ¬„ä½ query çš„ index å•é¡Œ</strong><br><em class="markup--em markup--mixtapeEmbed-em">é€é Firebase çš„ Firestore æˆ‘å€‘å¯ä»¥æ–¹ä¾¿åœ°æŠ“å–é›²ç«¯çš„è³‡æ–™ï¼Œæ¯”æ–¹é€éä»¥ä¸‹ç”¨ FirestoreQuery å®£å‘Šçš„ property å¯è®€å– songs ä¸‹ mood æ˜¯ ğŸ˜¢ çš„æ‚²å‚·æƒ…æ­Œã€‚</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/firebase-firestore-%E5%A4%9A%E5%80%8B%E6%AC%84%E4%BD%8D-query-%E7%9A%84-index-%E5%95%8F%E9%A1%8C-3c921aeafba7" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="8a195d463aefa74b8a6b2e23feec73b0" data-thumbnail-img-id="1*gnCAZGmqVfWPEXhjdBPLPw.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*gnCAZGmqVfWPEXhjdBPLPw.png);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">å½¼å¾—æ½˜çš„ iOS App Neverland</a> on <a href="https://medium.com/p/9b42a2284f80"><time class="dt-published" datetime="2022-04-30T10:22:30.103Z">April 30, 2022</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%88%A9%E7%94%A8-firestorequery-%E8%AE%80%E5%8F%96-firebase-firestore-%E8%B3%87%E6%96%99%E5%BA%AB-9b42a2284f80" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>