<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>利用 Run Script 和 .gitignore 管理 API key，防止它上傳到 GitHub</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">利用 Run Script 和 .gitignore 管理 API key，防止它上傳到 GitHub</h1>
</header>
<section data-field="subtitle" class="p-summary">
最近研究 Google AI SDK for Swift，發現防止將私密的 API key 上傳到 GitHub 的不錯方法。
</section>
<section data-field="body" class="e-content">
<section name="7073" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="29e6" id="29e6" class="graf graf--h3 graf--leading graf--title">利用 Run Script 和 .gitignore 管理 API key，防止它上傳到 GitHub</h3><p name="6de7" id="6de7" class="graf graf--p graf-after--h3">最近彼得潘研究 Google AI SDK for Swift，發現了防止將私密的 API key 上傳到 GitHub 的不錯方法。</p><div name="40ea" id="40ea" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://github.com/google/generative-ai-swift" data-href="https://github.com/google/generative-ai-swift" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/google/generative-ai-swift"><strong class="markup--strong markup--mixtapeEmbed-strong">GitHub — google/generative-ai-swift: Google AI SDK for Swift</strong><br><em class="markup--em markup--mixtapeEmbed-em">Google AI SDK for Swift. Contribute to google/generative-ai-swift development by creating an account on GitHub.</em>github.com</a><a href="https://github.com/google/generative-ai-swift" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a969ce3f3dce73fa3de9fe37593fa52f" data-thumbnail-img-id="0*bEB4ubN64ATP7F0D" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*bEB4ubN64ATP7F0D);"></a></div><p name="8d02" id="8d02" class="graf graf--p graf-after--mixtapeEmbed">Google 管理 API key 的基本步驟跟原理如下。</p><ul class="postList"><li name="bf6a" id="bf6a" class="graf graf--li graf-after--p">製作儲存 demo key 的 APIKey-Sample.plist。</li><li name="d470" id="d470" class="graf graf--li graf-after--li">設定 Run Script，讓 Xcode 專案 build 時自動從 APIKey-Sample.plist 複製出新檔 APIKey.plist。</li><li name="376d" id="376d" class="graf graf--li graf-after--li">APIKey-Sample.plist 只是範本，真正的 API key 存在 APIKey.plist。</li><li name="3cf9" id="3cf9" class="graf graf--li graf-after--li">在 .gitignore 加入 APIKey.plist，因此儲存真正 API key 的 APIKey.plist 不會上傳到 GitHub。</li></ul><p name="5e10" id="5e10" class="graf graf--p graf-after--li">以下彼得潘將一步步示範如何用 Run Script 和 .gitignore 管理 API key。</p><h3 name="3f40" id="3f40" class="graf graf--h3 graf-after--p">新增 Group APIKey</h3><figure name="06b3" id="06b3" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*XoyiEkQdjI5--vPEYraUiQ.png" data-width="266" data-height="209" src="https://cdn-images-1.medium.com/max/800/1*XoyiEkQdjI5--vPEYraUiQ.png"></figure><h3 name="901e" id="901e" class="graf graf--h3 graf-after--figure">製作儲存 demo key 的 APIKey-Sample.plist</h3><p name="764f" id="764f" class="graf graf--p graf-after--h3">用 TextEdit 新增文字檔，輸入以下內容，將 key 取名為 apiKey，value 設為 Demo。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="xml" name="2c7c" id="2c7c" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br /><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">plist</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="hljs-string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</span><br /><span class="hljs-tag">&lt;<span class="hljs-name">plist</span> <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;1.0&quot;</span>&gt;</span><br /><span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span><br /> <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>apiKey<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span><br /> <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Demo<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br /><span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span><br /><span class="hljs-tag">&lt;/<span class="hljs-name">plist</span>&gt;</span></span></pre><p name="70cf" id="70cf" class="graf graf--p graf-after--pre">存檔時取名為 APIKey-Sample.plist，存在 ApiKey 資料夾下，取消 If no extension is provided, use .txt 的勾選。</p><figure name="ab9a" id="ab9a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Q-g8ReDdtp_U7SwL_CuacA.png" data-width="802" data-height="449" src="https://cdn-images-1.medium.com/max/800/1*Q-g8ReDdtp_U7SwL_CuacA.png"></figure><figure name="a2e6" id="a2e6" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*PcYcEjXrfrqjcw1zhEoUrg.png" data-width="1172" data-height="456" src="https://cdn-images-1.medium.com/max/800/1*PcYcEjXrfrqjcw1zhEoUrg.png"></figure><h3 name="3c7b" id="3c7b" class="graf graf--h3 graf-after--figure">專案 build 時自動從 APIKey-Sample.plist 複製新檔 APIKey.plist</h3><p name="c656" id="c656" class="graf graf--p graf-after--h3">透過設定 Run Script，我們可以讓 Xcode 在 build 專案時執行某些任務。以下我們將設定 Run Script，讓 Xcode 專案 build 時自動從 APIKey-Sample.plist 複製出新檔 APIKey.plist。APIKey-Sample.plist 只是範本，真正的 API key 將存在 APIKey.plist。</p><p name="a8ce" id="a8ce" class="graf graf--p graf-after--p">切換到 TARGETS 下 App 的 Build Phases 頁面，點選左上的 + 後點選 New Run Script Phase。</p><figure name="7936" id="7936" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*WT6wp7W_K0EwqD46NA8_mQ.png" data-width="1397" data-height="315" src="https://cdn-images-1.medium.com/max/800/1*WT6wp7W_K0EwqD46NA8_mQ.png"></figure><p name="1c62" id="1c62" class="graf graf--p graf-after--figure">在 Run Script 的框框輸入以下 script。此段 script 的寫法參考 Google AI SDK，它會檢查 APIKey.plist 是否已存在，不存在時從 APIKey-Sample.plist 複製生成 APIKey.plist。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="bash" name="dae4" id="dae4" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">CONFIG_FILE_BASE_NAME=<span class="hljs-string">&quot;APIKey&quot;</span><br /><br />CONFIG_FILE_NAME=<span class="hljs-variable">${CONFIG_FILE_BASE_NAME}</span>.plist<br />SAMPLE_CONFIG_FILE_NAME=<span class="hljs-variable">${CONFIG_FILE_BASE_NAME}</span>-Sample.plist<br /><br />CONFIG_FILE_PATH=<span class="hljs-variable">$SRCROOT</span>/APIKey/<span class="hljs-variable">$CONFIG_FILE_NAME</span><br />SAMPLE_CONFIG_FILE_PATH=<span class="hljs-variable">$SRCROOT</span>/APIKey/<span class="hljs-variable">$SAMPLE_CONFIG_FILE_NAME</span><br /><br /><span class="hljs-keyword">if</span> [ -f <span class="hljs-string">&quot;<span class="hljs-variable">$CONFIG_FILE_PATH</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br />  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$CONFIG_FILE_PATH</span> exists.&quot;</span><br /><span class="hljs-keyword">else</span><br />  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$CONFIG_FILE_PATH</span> does not exist, copying sample&quot;</span><br />  <span class="hljs-built_in">cp</span> -v <span class="hljs-string">&quot;<span class="hljs-variable">${SAMPLE_CONFIG_FILE_PATH}</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">${CONFIG_FILE_PATH}</span>&quot;</span><br /><span class="hljs-keyword">fi</span></span></pre><figure name="84d4" id="84d4" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*AoMcKLz_FuEziQZt2PmrdA.png" data-width="1508" data-height="850" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*AoMcKLz_FuEziQZt2PmrdA.png"></figure><p name="0285" id="0285" class="graf graf--p graf-after--figure">在 Run Script 下方的 Output Files 加入 <code class="markup--code markup--p-code">$(SRCROOT)/APIKey/APIKey.plist</code>。</p><figure name="9c1b" id="9c1b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*WvskQc5asIBsM76xTiK99w.png" data-width="1134" data-height="276" src="https://cdn-images-1.medium.com/max/800/1*WvskQc5asIBsM76xTiK99w.png"></figure><p name="bda7" id="bda7" class="graf graf--p graf-after--figure">將 Run Script 移動到 Compile Sources 前，確保 APIKey.plist 在編譯程式前生成。</p><figure name="d08d" id="d08d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ZSvmad4sxSdvqAFi5txGkQ.png" data-width="287" data-height="280" src="https://cdn-images-1.medium.com/max/800/1*ZSvmad4sxSdvqAFi5txGkQ.png"></figure><h3 name="b310" id="b310" class="graf graf--h3 graf-after--figure">將 User Script Sandboxing 設為 No</h3><p name="baf9" id="baf9" class="graf graf--p graf-after--h3"><code class="markup--code markup--p-code">User Script Sandboxing</code> 原本是 Yes，它會讓從 APIKey-Sample.plist 複製新檔 APIKey.plist 的動作失敗，build 時出現以下錯誤。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="bash" name="7527" id="7527" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">error: Sandbox: <span class="hljs-built_in">cp</span>(2405) deny(1) file-read-data /Users/peter/Desktop/Demo/APIKey/APIKey-Sample.plist (<span class="hljs-keyword">in</span> target <span class="hljs-string">&#x27;Demo&#x27;</span> from project <span class="hljs-string">&#x27;Demo&#x27;</span>)<br />/Users/peter/Desktop/Demo/APIKey/APIKey.plist does not exist, copying sample<br /><span class="hljs-built_in">cp</span>: /Users/peter/Desktop/Demo/APIKey/APIKey-Sample.plist: Operation not permitted</span></pre><p name="0e4e" id="0e4e" class="graf graf--p graf-after--pre">因此我們必須切換到 Build Settings 分頁，將 User Script Sandboxing 設為 No。</p><figure name="139a" id="139a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*x6VY_JCMsjyOPPQJ5bX1TQ.png" data-width="1451" data-height="341" src="https://cdn-images-1.medium.com/max/800/1*x6VY_JCMsjyOPPQJ5bX1TQ.png"></figure><p name="b435" id="b435" class="graf graf--p graf-after--figure">Apple 官方的 User Script Sandboxing 說明如下。</p><pre data-code-block-mode="0" spellcheck="false" name="0b9b" id="0b9b" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">If enabled, the build system will sandbox user scripts to disallow undeclared input/output dependencies.</span></pre><div name="c277" id="c277" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://developer.apple.com/documentation/xcode/build-settings-reference" data-href="https://developer.apple.com/documentation/xcode/build-settings-reference" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/xcode/build-settings-reference"><strong class="markup--strong markup--mixtapeEmbed-strong">Build settings reference | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">A detailed list of individual Xcode build settings that control or change the way a target is built.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/xcode/build-settings-reference" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="07e6e42a2e11fca214cc370fadc22b31"></a></div><h3 name="c698" id="c698" class="graf graf--h3 graf-after--mixtapeEmbed">新增 .gitignore，避免 APIKey.plist 上傳到 GitHub</h3><p name="d85f" id="d85f" class="graf graf--p graf-after--h3">用 TextEdit 新增文字檔，輸入以下內容，讓 git 不要追蹤 APIKey.plist，</p><pre data-code-block-mode="0" spellcheck="false" name="38d0" id="38d0" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">APIKey/APIKey.plist </span></pre><p name="285a" id="285a" class="graf graf--p graf-after--pre">存檔時取名為 <code class="markup--code markup--p-code">.gitignore</code>，存在專案的資料夾下，取消 If no extension is provided, use txt 的勾選。</p><figure name="bc8c" id="bc8c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*wSoNyvoKpnVo437LDl_kvA.png" data-width="795" data-height="440" src="https://cdn-images-1.medium.com/max/800/1*wSoNyvoKpnVo437LDl_kvA.png"></figure><p name="fc1e" id="fc1e" class="graf graf--p graf-after--figure">點選 Use .。</p><figure name="caa8" id="caa8" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HgCwJWqMpJ9yI1nR_I97AQ.png" data-width="254" data-height="244" src="https://cdn-images-1.medium.com/max/800/1*HgCwJWqMpJ9yI1nR_I97AQ.png"></figure><h3 name="8a7d" id="8a7d" class="graf graf--h3 graf-after--figure">定義讀取 API key 的 enum APIKey</h3><p name="a2d3" id="a2d3" class="graf graf--p graf-after--h3">在 Group APIKey 下新增讀取 API key 的 <code class="markup--code markup--p-code">APIKey.swift</code>。</p><figure name="88fc" id="88fc" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*wb7Ugv_FFtA1u1LEyPOi7A.png" data-width="328" data-height="139" src="https://cdn-images-1.medium.com/max/800/1*wb7Ugv_FFtA1u1LEyPOi7A.png"></figure><p name="871b" id="871b" class="graf graf--p graf-after--figure">定義 <code class="markup--code markup--p-code">enum APIKey</code> 和 <code class="markup--code markup--p-code">static property default</code>，之後 App 透過 <code class="markup--code markup--p-code">APIKey.default</code> 即可讀取 APIKey.plist 儲存的真正 API key。</p><ul class="postList"><li name="287a" id="287a" class="graf graf--li graf-after--p">寫法 1。</li></ul><p name="4a8b" id="4a8b" class="graf graf--p graf-after--li">將 default 宣告為 computed property。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="d508" id="d508" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><span class="hljs-keyword">import</span> UniformTypeIdentifiers<br /><br /><span class="hljs-keyword">enum</span> <span class="hljs-title class_">APIKey</span> {<br />    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ApiKeyData</span>: <span class="hljs-title class_">Decodable</span> {<br />        <span class="hljs-keyword">let</span> apiKey: <span class="hljs-type">String</span><br />    }<br />    <br />    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> `default`: <span class="hljs-type">String</span> {<br />        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> fileURL <span class="hljs-operator">=</span> <span class="hljs-type">Bundle</span>.main.url(forResource: <span class="hljs-string">&quot;<span class="hljs-subst">\(<span class="hljs-keyword">Self</span>.<span class="hljs-keyword">self</span>)</span>&quot;</span>, withExtension: <span class="hljs-type">UTType</span>.propertyList.preferredFilenameExtension) <span class="hljs-keyword">else</span> {<br />            <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">&quot;Couldn&#x27;t find file APIKey.plist&quot;</span>)<br />        }<br />        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">Data</span>(contentsOf: fileURL) <span class="hljs-keyword">else</span> {<br />            <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">&quot;Couldn&#x27;t read data from APIKey.plist&quot;</span>)<br />        }<br />        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> apiKey <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">PropertyListDecoder</span>().decode(<span class="hljs-type">ApiKeyData</span>.<span class="hljs-keyword">self</span>, from: data).apiKey <span class="hljs-keyword">else</span> {<br />            <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">&quot;Couldn&#x27;t find key apiKey&quot;</span>)<br />        }<br />        <span class="hljs-keyword">return</span> apiKey<br />    }<br />}</span></pre><ul class="postList"><li name="d703" id="d703" class="graf graf--li graf-after--pre">寫法 2。</li></ul><p name="22c0" id="22c0" class="graf graf--p graf-after--li">將 default 宣告為 stored property。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="1e35" id="1e35" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><span class="hljs-keyword">import</span> UniformTypeIdentifiers<br /><br /><span class="hljs-keyword">enum</span> <span class="hljs-title class_">APIKey</span> {<br />    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ApiKeyData</span>: <span class="hljs-title class_">Decodable</span> {<br />        <span class="hljs-keyword">let</span> apiKey: <span class="hljs-type">String</span><br />    }<br />    <br />    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> `default` <span class="hljs-operator">=</span> {<br />        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> fileURL <span class="hljs-operator">=</span> <span class="hljs-type">Bundle</span>.main.url(forResource: <span class="hljs-string">&quot;<span class="hljs-subst">\(<span class="hljs-keyword">Self</span>.<span class="hljs-keyword">self</span>)</span>&quot;</span>, withExtension: <span class="hljs-type">UTType</span>.propertyList.preferredFilenameExtension) <span class="hljs-keyword">else</span> {<br />            <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">&quot;Couldn&#x27;t find file APIKey.plist&quot;</span>)<br />        }<br />        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">Data</span>(contentsOf: fileURL) <span class="hljs-keyword">else</span> {<br />            <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">&quot;Couldn&#x27;t read data from APIKey.plist&quot;</span>)<br />        }<br />        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> apiKey <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">PropertyListDecoder</span>().decode(<span class="hljs-type">ApiKeyData</span>.<span class="hljs-keyword">self</span>, from: data).apiKey <span class="hljs-keyword">else</span> {<br />            <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">&quot;Couldn&#x27;t find key apiKey&quot;</span>)<br />        }<br />        <span class="hljs-keyword">return</span> apiKey<br />    }()<br />}</span></pre><h3 name="7bab" id="7bab" class="graf graf--h3 graf-after--pre">build 專案生成 APIKey.plist</h3><figure name="aa4b" id="aa4b" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*a08hXuY1AOu9ej93w_fK-A.png" data-width="1275" data-height="478" src="https://cdn-images-1.medium.com/max/800/1*a08hXuY1AOu9ej93w_fK-A.png"></figure><h3 name="99c4" id="99c4" class="graf graf--h3 graf-after--figure">將 APIKey.plist 加到 Xcode 專案的 APIKey 下</h3><p name="51d7" id="51d7" class="graf graf--p graf-after--h3">從 APIKey 的右鍵選單點選 <code class="markup--code markup--p-code">Add Files to Demo</code>。</p><figure name="9ec3" id="9ec3" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*hcRkC_eRaukUHu5YCJaoJA.png" data-width="419" data-height="693" src="https://cdn-images-1.medium.com/max/800/1*hcRkC_eRaukUHu5YCJaoJA.png"></figure><p name="e820" id="e820" class="graf graf--p graf-after--figure">選擇 APIKey.plist，點選 Add。</p><figure name="eff8" id="eff8" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*5StdcwAz0oAgKa7uW9i1yg.png" data-width="794" data-height="506" src="https://cdn-images-1.medium.com/max/800/1*5StdcwAz0oAgKa7uW9i1yg.png"></figure><p name="ed3c" id="ed3c" class="graf graf--p graf-after--figure">APIKey 下成功出現 APIKey.plist。</p><figure name="a78c" id="a78c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*zqG3e6Uab7EutWU-VorlRA.png" data-width="972" data-height="208" src="https://cdn-images-1.medium.com/max/800/1*zqG3e6Uab7EutWU-VorlRA.png"></figure><h3 name="8cbc" id="8cbc" class="graf graf--h3 graf-after--figure">輸入真正的 API key</h3><p name="b241" id="b241" class="graf graf--p graf-after--h3">現在我們可以放心地在 APIKey.plist 設定真正的 API key，比方<code class="markup--code markup--p-code">我愛 Apple</code>。我們有設定 .gitignore，因此不用擔心 APIKey.plist 上傳到 GitHub。</p><p name="3603" id="3603" class="graf graf--p graf-after--p">如下圖所示，APIKey.plist 旁邊沒有出現 A，表示它沒有被 git 追蹤。</p><figure name="2239" id="2239" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*FWtHQa9LcrdF8CW6TONJkA.png" data-width="893" data-height="182" src="https://cdn-images-1.medium.com/max/800/1*FWtHQa9LcrdF8CW6TONJkA.png"></figure><h3 name="47d6" id="47d6" class="graf graf--h3 graf-after--figure">將專案上傳到 GitHub</h3><p name="51db" id="51db" class="graf graf--p graf-after--h3">從 Xcode commit 的畫面可看到 APIKey.plist 果然沒有被 git 追蹤。</p><figure name="5ae9" id="5ae9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Tc8ZzDBfjR2IgKnlgsPTCw.png" data-width="1400" data-height="392" src="https://cdn-images-1.medium.com/max/800/1*Tc8ZzDBfjR2IgKnlgsPTCw.png"></figure><div name="dcdf" id="dcdf" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://github.com/PeterPanSwift/Demo" data-href="https://github.com/PeterPanSwift/Demo" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/PeterPanSwift/Demo"><strong class="markup--strong markup--mixtapeEmbed-strong">GitHub - PeterPanSwift/Demo</strong><br><em class="markup--em markup--mixtapeEmbed-em">Contribute to PeterPanSwift/Demo development by creating an account on GitHub.</em>github.com</a><a href="https://github.com/PeterPanSwift/Demo" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="47764f4c84397abf3a26c119f79bd7fe" data-thumbnail-img-id="0*baf8Uoh4MVTffGvn" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*baf8Uoh4MVTffGvn);"></a></div><p name="2a7c" id="2a7c" class="graf graf--p graf-after--mixtapeEmbed">GitHub 上只有 APIKey-Sample.plist，沒有 APIKey.plist，終於不用擔心 API key 外洩了。</p><figure name="11b0" id="11b0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*uEZUCZI1GBe-ce-RAi-PrA.png" data-width="1246" data-height="460" src="https://cdn-images-1.medium.com/max/800/1*uEZUCZI1GBe-ce-RAi-PrA.png"></figure><h3 name="eea1" id="eea1" class="graf graf--h3 graf-after--figure">重新 clone 專案</h3><p name="ad2a" id="ad2a" class="graf graf--p graf-after--h3">當我們重新 clone 專案時，一開始 APIKey.plist 是紅色的，因為它尚未生成。</p><figure name="2273" id="2273" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*RFONGsIr3NoAzzXQ2WOP-A.png" data-width="266" data-height="254" src="https://cdn-images-1.medium.com/max/800/1*RFONGsIr3NoAzzXQ2WOP-A.png"></figure><p name="d9a3" id="d9a3" class="graf graf--p graf-after--figure">別擔心，第一次 Build 後即可生成 APIKey.plist，在裡面設定不可告人的 API key。</p><figure name="fac8" id="fac8" class="graf graf--figure graf-after--p graf--trailing"><img class="graf-image" data-image-id="1*k11x6lL71bAzXSOkHqjcww.png" data-width="825" data-height="260" src="https://cdn-images-1.medium.com/max/800/1*k11x6lL71bAzXSOkHqjcww.png"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/c84ce81cf010"><time class="dt-published" datetime="2023-12-28T04:39:52.521Z">December 28, 2023</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%88%A9%E7%94%A8-run-script-%E5%92%8C-gitignore-%E7%AE%A1%E7%90%86-api-key-%E9%98%B2%E6%AD%A2%E5%AE%83%E4%B8%8A%E5%82%B3%E5%88%B0-github-c84ce81cf010" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>