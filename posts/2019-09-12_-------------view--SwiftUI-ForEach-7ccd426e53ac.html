<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>將集合裡的資料變成一個個 view 的SwiftUI ForEach</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">將集合裡的資料變成一個個 view 的SwiftUI ForEach</h1>
</header>
<section data-field="subtitle" class="p-summary">
SwiftUI 提供 ForEach 型別幫助我們將集合裡的東西合併成一個 view，大大簡化我們需要自己輸入的程式，也解決了 ViewBuilder 參數裡的元件數量問題，接下來就讓我們以劉增瞳的你從不知道歌詞為例說明吧。
</section>
<section data-field="body" class="e-content">
<section name="620b" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="60c5" id="60c5" class="graf graf--h3 graf--leading graf--title">將集合裡的資料變成一個個 view 的SwiftUI ForEach</h3><p name="450b" id="450b" class="graf graf--p graf-after--h3">SwiftUI 提供 ForEach 型別幫我們將集合裡的東西生成一個個 view，然後再合併成一個 view，大大簡化我們需要自己輸入的程式，接下來我們將以國語流行歌為例說明 ForEach 主要的三種寫法。</p><ul class="postList"><li name="eada" id="eada" class="graf graf--li graf-after--p">ForEach &amp; Range。</li><li name="b60e" id="b60e" class="graf graf--li graf-after--li">ForEach &amp; id。</li><li name="cf22" id="cf22" class="graf graf--li graf-after--li">ForEach &amp; Identifiable。</li></ul><div name="e89c" id="e89c" class="graf graf--mixtapeEmbed graf-after--li"><a href="https://developer.apple.com/documentation/swiftui/foreach" data-href="https://developer.apple.com/documentation/swiftui/foreach" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/foreach"><strong class="markup--strong markup--mixtapeEmbed-strong">ForEach | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">A structure that computes views on demand from an underlying collection of identified data.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/foreach" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="b31a21da4976160f5d0657d3c3c39616" data-thumbnail-img-id="0*P7BSnCGqwQWC9qhJ" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*P7BSnCGqwQWC9qhJ);"></a></div><h3 name="8ba7" id="8ba7" class="graf graf--h3 graf-after--mixtapeEmbed">顯示多行重覆的內容</h3><p name="f3b7" id="f3b7" class="graf graf--p graf-after--h3">我們可以在 VStack 裡耐心地產生多個重覆的 <code class="markup--code markup--p-code">Text(&quot;你從不知道 我因為你而煎熬&quot;)</code>。(ps: 文字內容來自劉增瞳的歌詞)</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="e364" id="e364" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />   <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />      <span class="hljs-type">VStack</span> {<br />         <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;你從不知道 我因為你而煎熬&quot;</span>)<br />         <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;你從不知道 我因為你而煎熬&quot;</span>)<br />         <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;你從不知道 我因為你而煎熬&quot;</span>)<br />         <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;你從不知道 我因為你而煎熬&quot;</span>)<br />         <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;你從不知道 我因為你而煎熬&quot;</span>)<br />      }<br />   }<br />}</span></pre><figure name="dc5b" id="dc5b" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*rLxvvNFFWjXTIq-VfWzLJQ.png" data-width="1339" data-height="2716" src="https://cdn-images-1.medium.com/max/800/1*rLxvvNFFWjXTIq-VfWzLJQ.png"></figure><h3 name="86e0" id="86e0" class="graf graf--h3 graf-after--figure">搭配 ForEach &amp; Range</h3><p name="2deb" id="2deb" class="graf graf--p graf-after--h3">不過每寫一行都讓我們更加煎熬，就讓我們用 ForEach 試試吧。透過 ForEach 我們只要寫一行 <code class="markup--code markup--p-code">Text(&quot;你從不知道 我因為你而煎熬&quot;)</code>，比較不煎熬。</p><p name="acd8" id="acd8" class="graf graf--p graf-after--p">輸入 fore，選擇 ForEach(_ data: Range&lt;Int&gt;, content: (Int) -&gt; View)。</p><figure name="8b76" id="8b76" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*JU6NHd_dkcEYlolZTTfb4g.png" data-width="1302" data-height="742" src="https://cdn-images-1.medium.com/max/800/1*JU6NHd_dkcEYlolZTTfb4g.png"></figure><figure name="6afd" id="6afd" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*CTT6eSV_mJecVcQTifwljg.png" data-width="1148" data-height="86" src="https://cdn-images-1.medium.com/max/800/1*CTT6eSV_mJecVcQTifwljg.png"></figure><p name="9332" id="9332" class="graf graf--p graf-after--figure">以上的 ForEach 搭配的 init 如下。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="018f" id="018f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">init</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">data</span>: <span class="hljs-type">Range</span>&lt;<span class="hljs-type">Int</span>&gt;, <span class="hljs-meta">@ViewBuilder</span> <span class="hljs-params">content</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Content</span>)</span></pre><div name="8c8f" id="8c8f" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://developer.apple.com/documentation/swiftui/foreach/init%28_:content:%29-6db7u" data-href="https://developer.apple.com/documentation/swiftui/foreach/init(_:content:)-6db7u" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/foreach/init(_:content:)-6db7u"><strong class="markup--strong markup--mixtapeEmbed-strong">init(_:content:) | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Creates an instance that computes views on demand over a given constant range.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/foreach/init%28_:content:%29-6db7u" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="6323344f428c126f92c81726697db486" data-thumbnail-img-id="0*qqsazQqcFj8Q66im" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*qqsazQqcFj8Q66im);"></a></div><p name="a3ed" id="a3ed" class="graf graf--p graf-after--mixtapeEmbed">參數說明</p><ul class="postList"><li name="c1a1" id="c1a1" class="graf graf--li graf-after--p">data</li></ul><p name="199e" id="199e" class="graf graf--p graf-after--li">型別 Range 的 data 控制元件的數量， 比方 0..&lt;5 將產生 5 個參數 content 回傳的元件。</p><figure name="029f" id="029f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*VFGvPGUkXmRpip2mGpXrRg.png" data-width="1006" data-height="80" src="https://cdn-images-1.medium.com/max/800/1*VFGvPGUkXmRpip2mGpXrRg.png"></figure><ul class="postList"><li name="8204" id="8204" class="graf graf--li graf-after--figure">content</li></ul><p name="8728" id="8728" class="graf graf--p graf-after--li">回傳產生的元件。在 (Int) -&gt; Content 的框框按下 Return 鍵後將自動輸入下圖的 closure 程式。</p><figure name="7787" id="7787" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ToTC5WALm8QBWh5YMKxkqg.png" data-width="598" data-height="180" src="https://cdn-images-1.medium.com/max/800/1*ToTC5WALm8QBWh5YMKxkqg.png"></figure><p name="efb5" id="efb5" class="graf graf--p graf-after--figure">在參數 Int 的框框輸入自訂的名字，比方 index，然後在 code 的框框輸入回傳的元件 <code class="markup--code markup--p-code">Text(&quot;你從不知道 我因為你而煎熬&quot;)</code>。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="ab64" id="ab64" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">ForEach</span>(<span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">5</span>) { index <span class="hljs-keyword">in</span><br />    <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;你從不知道 我因為你而煎熬&quot;</span>)<br />}</span></pre><p name="22fe" id="22fe" class="graf graf--p graf-after--pre">它回傳了 <code class="markup--code markup--p-code">Text(&quot;你從不知道 我因為你而煎熬&quot;)</code>，因此將產生文字。closure 的參數 index 將對應 range 的數字，由於 range 是 0..&lt;5，所以第一個 Text 的 item 是 0，第二個 Text 的 item 是 1，其它以此類推。</p><p name="fc3c" id="fc3c" class="graf graf--p graf-after--p">值得注意的，data 的型別是 Range，因此只能用 ..&lt;，不能使用 ClosedRange 的 ... 語法。</p><figure name="7fb4" id="7fb4" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*85nBXS-pv2XqpI8tsn5QKw.jpeg" data-width="836" data-height="158" src="https://cdn-images-1.medium.com/max/800/1*85nBXS-pv2XqpI8tsn5QKw.jpeg"></figure><figure name="e531" id="e531" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*jd2gp8J4p7Ek0h9V10wJ3Q.png" data-width="1738" data-height="280" src="https://cdn-images-1.medium.com/max/800/1*jd2gp8J4p7Ek0h9V10wJ3Q.png"></figure><h3 name="9e30" id="9e30" class="graf graf--h3 graf-after--figure">搭配 ForEach &amp; Range 呈現 array 內容</h3><p name="2b0a" id="2b0a" class="graf graf--p graf-after--h3">很多時候我們將東西存在 array 裡，ForEach 也可以結合 array，將 array 的內容變成一個個 view，然後組合起來，例如以下呈現<code class="markup--code markup--p-code">你從不知道</code>副歌歌詞的例子。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="51fe" id="51fe" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />   <span class="hljs-keyword">let</span> lyrics <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;你從不知道&quot;</span>, <span class="hljs-string">&quot;我因為你而煎熬&quot;</span>, <span class="hljs-string">&quot;心碎過的每一分每一秒&quot;</span>]<br /><br />   <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />      <span class="hljs-type">VStack</span> {<br />         <span class="hljs-type">ForEach</span>(<span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span>lyrics.count) { index <span class="hljs-keyword">in</span><br />            <span class="hljs-type">Text</span>(lyrics[index])<br />         }<br />      }<br />   }<br />}</span></pre><p name="7540" id="7540" class="graf graf--p graf-after--pre">我們先將歌詞存在 array lyrics，然後在 ForEach 的參數傳入 <code class="markup--code markup--p-code">0..&lt;lyrics.count</code>，接著利用 lyrics[item] 讀取 array 的每個成員。</p><figure name="3e02" id="3e02" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*yRhAgwgEAcSGLM-37Q4pKw.png" data-width="1339" data-height="2716" src="https://cdn-images-1.medium.com/max/800/1*yRhAgwgEAcSGLM-37Q4pKw.png"></figure><p name="2ad0" id="2ad0" class="graf graf--p graf-after--figure">雖然結果是對的，不過 Xcode 卻會顯示以下的警告訊息。</p><pre name="ee02" id="ee02" class="graf graf--pre graf-after--p">Non-constant range: argument must be an integer literal</pre><figure name="efb1" id="efb1" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*wLifjvKxGzbfSzpF8Mh7Cw.png" data-width="1822" data-height="288" src="https://cdn-images-1.medium.com/max/800/1*wLifjvKxGzbfSzpF8Mh7Cw.png"></figure><p name="31cc" id="31cc" class="graf graf--p graf-after--figure">這是因為 ForEach 搭配參數 Range 時，它要求 Range 最好要是固定的，否則可能會產生資料錯亂的問題。等下我們將介紹搭配 id 的寫法消除此警告。</p><p name="b550" id="b550" class="graf graf--p graf-after--p">ps: 當 array 的數量會變動時，使用 ForEach 搭配參數 Range 會出問題。相關說明可參考以下連結。</p><div name="8a68" id="8a68" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/foreach-content-should-only-be-used-for-constant-data-8aa20d6943ee" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/foreach-content-should-only-be-used-for-constant-data-8aa20d6943ee" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/foreach-content-should-only-be-used-for-constant-data-8aa20d6943ee"><strong class="markup--strong markup--mixtapeEmbed-strong">ForEach(_:content:) should only be used for constant data</strong><br><em class="markup--em markup--mixtapeEmbed-em">利用 SwiftUI 的 ForEach，我們可以快速產生多個 UI 元件，不過當 ForEach 搭配 range 型別的參數時，它的數量只能是固定的，否則會產生錯誤，例如以下例子:</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/foreach-content-should-only-be-used-for-constant-data-8aa20d6943ee" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="f96a7be0f6a375d47e40859e31609015" data-thumbnail-img-id="1*2VQLxvPA_r6A2z5wt0-TWQ.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*2VQLxvPA_r6A2z5wt0-TWQ.jpeg);"></a></div><h3 name="406e" id="406e" class="graf graf--h3 graf-after--mixtapeEmbed">搭配 array 的 indices</h3><p name="5fcf" id="5fcf" class="graf graf--p graf-after--h3">剛剛的程式還可以更簡化， 我們不須自己手動輸入<code class="markup--code markup--p-code">0..&lt;lyrics.count</code>，讀取 array 的 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">indices</strong></code> 即可取得它的數字範圍。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="2ae9" id="2ae9" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">ForEach</span>(lyrics.indices) { index <span class="hljs-keyword">in</span><br />   <span class="hljs-type">Text</span>(lyrics[index])<br />}</span></pre><p name="17c2" id="17c2" class="graf graf--p graf-after--pre">ps: 此寫法一樣會有黃色警告，等下我們將介紹搭配 id 的寫法消除此警告。</p><h3 name="d6ed" id="d6ed" class="graf graf--h3 graf-after--p">搭配 ForEach，array &amp; id 呈現 array 內容</h3><p name="c809" id="c809" class="graf graf--p graf-after--h3">當我們想呈現的內容來自 array 時，也可以將 array 當參數傳入 ForEach，例如以下例子。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="061b" id="061b" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />   <span class="hljs-keyword">let</span> lyrics <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;你從不知道&quot;</span>, <span class="hljs-string">&quot;我因為你而煎熬&quot;</span>, <span class="hljs-string">&quot;心碎過的每一分每一秒&quot;</span>]<br /><br />   <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />      <span class="hljs-type">VStack</span> {<br />         <span class="hljs-type">ForEach</span>(lyrics, id: \.<span class="hljs-keyword">self</span>) { message <span class="hljs-keyword">in</span><br />            <span class="hljs-type">Text</span>(message)<br />         }<br />      }<br />   }<br />}</span></pre><p name="c958" id="c958" class="graf graf--p graf-after--pre">以上的 ForEach 搭配的 init 如下。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="8383" id="8383" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">init</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">data</span>: <span class="hljs-type">Data</span>, <span class="hljs-params">id</span>: <span class="hljs-type">KeyPath</span>&lt;<span class="hljs-type">Data</span>.<span class="hljs-type">Element</span>, <span class="hljs-type">ID</span>&gt;, <span class="hljs-params">content</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Data</span>.<span class="hljs-type">Element</span>) -&gt; <span class="hljs-type">Content</span>)</span></pre><figure name="37ce" id="37ce" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*HlLbWuAE6JElEx1Ik7VDVA.png" data-width="933" data-height="118" src="https://cdn-images-1.medium.com/max/800/1*HlLbWuAE6JElEx1Ik7VDVA.png"></figure><div name="109d" id="109d" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://developer.apple.com/documentation/swiftui/foreach/init%28_:id:content:%29-82hm4" data-href="https://developer.apple.com/documentation/swiftui/foreach/init(_:id:content:)-82hm4" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/foreach/init(_:id:content:)-82hm4"><strong class="markup--strong markup--mixtapeEmbed-strong">init(_:id:content:) | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Creates an instance that uniquely identifies and creates views across updates based on the provided key path to the…</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/foreach/init%28_:id:content:%29-82hm4" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="82b55341d1fb99495465d357a8041c61" data-thumbnail-img-id="0*uj0zJjPwtTz6JtIr" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*uj0zJjPwtTz6JtIr);"></a></div><p name="cf70" id="cf70" class="graf graf--p graf-after--mixtapeEmbed">當參數 data 傳入 array 時，我們需要額外設定型別 KeyPath 的參數 id。此 id 將設定 array 成員的 id，到時候 ForEach 將利用 id 區分 array 裡的成員。在此我們傳入 <code class="markup--code markup--p-code">\.self</code>，表示 array 成員自己就是 id，因此<code class="markup--code markup--p-code">你從不知道</code>的 id 是<code class="markup--code markup--p-code">你從不知道</code>，<code class="markup--code markup--p-code">我因為你而煎熬</code>的 id 是<code class="markup--code markup--p-code">我因為你而煎熬</code>。</p><figure name="903b" id="903b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*UqDMMi0MSw8ke_DGGjesDg.jpeg" data-width="1182" data-height="484" src="https://cdn-images-1.medium.com/max/800/1*UqDMMi0MSw8ke_DGGjesDg.jpeg"></figure><p name="07fd" id="07fd" class="graf graf--p graf-after--figure"><code class="markup--code markup--p-code">\.self</code> 的寫法跟 Swift KeyPath 有關，有興趣的朋友可進一步查詢相關說明。</p><div name="02d1" id="02d1" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E6%96%B9%E4%BE%BF%E5%AD%98%E5%8F%96-property-%E7%9A%84-keypath-keypath-as-functions-85778939c2fd" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E6%96%B9%E4%BE%BF%E5%AD%98%E5%8F%96-property-%E7%9A%84-keypath-keypath-as-functions-85778939c2fd" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E6%96%B9%E4%BE%BF%E5%AD%98%E5%8F%96-property-%E7%9A%84-keypath-keypath-as-functions-85778939c2fd"><strong class="markup--strong markup--mixtapeEmbed-strong">Swift 方便存取 property 的 KeyPath &amp; KeyPath as Functions</strong><br><em class="markup--em markup--mixtapeEmbed-em">Swift 的 KeyPath 可以指定某個 property 或 subscript，方便我們存取資料的 property 或 subscript，接下來就讓我們以 Song 為例，看看它特別的地方吧。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E6%96%B9%E4%BE%BF%E5%AD%98%E5%8F%96-property-%E7%9A%84-keypath-keypath-as-functions-85778939c2fd" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="57029ee68f8c85d9c2de3cd2425884fb" data-thumbnail-img-id="1*7KzXS-4smZpC7ixv-WnbpA.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*7KzXS-4smZpC7ixv-WnbpA.jpeg);"></a></div><p name="69a2" id="69a2" class="graf graf--p graf-after--mixtapeEmbed">不過並非任何東西都可以當 id，依據 ForEach 的定義，id 的型別必須遵從 protocol Hashable，比方我們熟悉的 Int &amp; String 資料都可以當 id，因為它們有遵從 protocol Hashable。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="6ef5" id="6ef5" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ForEach</span>&lt;<span class="hljs-title class_">Data</span>, <span class="hljs-title class_">ID</span>, <span class="hljs-title class_">Content</span>&gt; <span class="hljs-title class_">where</span> <span class="hljs-title class_">Data</span> : <span class="hljs-title class_">RandomAccessCollection</span>, <span class="hljs-title class_">ID</span> : <span class="hljs-title class_">Hashable</span></span></pre><div name="3fb6" id="3fb6" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E7%9A%84-hashable-protocol-6df8adfdcb54" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E7%9A%84-hashable-protocol-6df8adfdcb54" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E7%9A%84-hashable-protocol-6df8adfdcb54"><strong class="markup--strong markup--mixtapeEmbed-strong">Swift 的 Hashable protocol</strong><br><em class="markup--em markup--mixtapeEmbed-em">Swift 裡有一個特別的 Hashable protocol，我們在很多地方都可以看到它的蹤跡。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-%E7%9A%84-hashable-protocol-6df8adfdcb54" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="be07081914538004cc4ff12ea71af6ad" data-thumbnail-img-id="1*WNs3MCWZIKAas7mWk-hUTQ.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*WNs3MCWZIKAas7mWk-hUTQ.jpeg);"></a></div><p name="b173" id="b173" class="graf graf--p graf-after--mixtapeEmbed">也許有人有疑問，剛剛 array 裡很明顯每個歌詞的字串就能區分彼此，為何還需要特別告訴 ForEach 用 <code class="markup--code markup--p-code">\.self </code>當區分的 id 呢 ? 這其實跟 array 成員的型別有關，當型別比較複雜時，我們得特別指定 id 它才知道如何區分，例如以下的例子。</p><h3 name="e6cb" id="e6cb" class="graf graf--h3 graf-after--p">ForEach 搭配成員是自訂型別的 array</h3><p name="abb5" id="abb5" class="graf graf--p graf-after--h3">當 array 的成員是比較複雜的型別時，我們可以用 KeyPath 指定以成員的某個 property 當 id，例如以下例子的 <code class="markup--code markup--p-code">\.name</code> 表示以 Song 的 name 當 id。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="74ff" id="74ff" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Song</span> {<br />   <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />   <span class="hljs-keyword">let</span> singer: <span class="hljs-type">String</span><br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />   <span class="hljs-keyword">let</span> songs <span class="hljs-operator">=</span> [<br />      <span class="hljs-type">Song</span>(name: <span class="hljs-string">&quot;小酒窩&quot;</span>, singer: <span class="hljs-string">&quot;林俊傑&quot;</span>), <br />      <span class="hljs-type">Song</span>(name: <span class="hljs-string">&quot;你從不知道&quot;</span>, singer: <span class="hljs-string">&quot;劉增瞳&quot;</span>), <br />      <span class="hljs-type">Song</span>(name: <span class="hljs-string">&quot;對的時間點&quot;</span>, singer: <span class="hljs-string">&quot;林俊傑&quot;</span>)<br />   ]<br /><br />   <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />      <span class="hljs-type">VStack</span> {<br />         <span class="hljs-type">ForEach</span>(songs, id: \.name) { song <span class="hljs-keyword">in</span><br />            <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(song.name)</span> by <span class="hljs-subst">\(song.singer)</span>&quot;</span>)<br />         }<br />      }<br />   }<br />}</span></pre><figure name="3fa8" id="3fa8" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*yiG4uC7hhY-w7P_wHh1DGQ.jpeg" data-width="1172" data-height="628" src="https://cdn-images-1.medium.com/max/800/1*yiG4uC7hhY-w7P_wHh1DGQ.jpeg"></figure><figure name="f6d6" id="f6d6" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*MU4UwYGJeRGncNH9Lf0fQw.png" data-width="1339" data-height="2716" src="https://cdn-images-1.medium.com/max/800/1*MU4UwYGJeRGncNH9Lf0fQw.png"></figure><p name="c4ff" id="c4ff" class="graf graf--p graf-after--figure">若我們改用 <code class="markup--code markup--p-code">\.singer</code>，以歌手名當 id，將會產生特別的問題。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1197" id="1197" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">VStack</span> {<br />   <span class="hljs-type">ForEach</span>(songs, id: \.singer) { song <span class="hljs-keyword">in</span><br />      <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(song.name)</span> by <span class="hljs-subst">\(song.singer)</span>&quot;</span>)<br />   }<br />}</span></pre><p name="3372" id="3372" class="graf graf--p graf-after--pre">array songs 裡有兩首歌的歌手都是林俊傑，當 id 為林俊傑時，它將無法區分<code class="markup--code markup--p-code">小酒窩</code>和<code class="markup--code markup--p-code">對的時間點</code>，因此最後畫面上變成顯示兩首小酒窩。</p><figure name="50bb" id="50bb" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*W9iFz2QwDGLkRQ4l4vQrEQ.jpeg" data-width="1156" data-height="608" src="https://cdn-images-1.medium.com/max/800/1*W9iFz2QwDGLkRQ4l4vQrEQ.jpeg"></figure><figure name="8df8" id="8df8" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*YLMWAvfkq5NhrqwzPCsfOg.png" data-width="1339" data-height="2716" src="https://cdn-images-1.medium.com/max/800/1*YLMWAvfkq5NhrqwzPCsfOg.png"></figure><h3 name="b93a" id="b93a" class="graf graf--h3 graf-after--figure">利用 id 消除警告 Non-constant range: argument must be an integer literal</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="c55c" id="c55c" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />   <span class="hljs-keyword">let</span> lyrics <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;你從不知道&quot;</span>, <span class="hljs-string">&quot;我因為你而煎熬&quot;</span>, <span class="hljs-string">&quot;心碎過的每一分每一秒&quot;</span>]<br /><br />   <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />      <span class="hljs-type">VStack</span> {<br />         <span class="hljs-type">ForEach</span>(lyrics.indices, id: \.<span class="hljs-keyword">self</span>) { index <span class="hljs-keyword">in</span><br />            <span class="hljs-type">Text</span>(lyrics[index])<br />         }<br />      }<br />   }<br />}</span></pre><p name="269c" id="269c" class="graf graf--p graf-after--pre">ps: 若是搭配動畫，<a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-array-%E7%9A%84-index-%E7%95%B6-foreach-id-%E7%9A%84%E7%89%B9%E5%88%A5%E5%95%8F%E9%A1%8C-dddb01400d1c" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-array-%E7%9A%84-index-%E7%95%B6-foreach-id-%E7%9A%84%E7%89%B9%E5%88%A5%E5%95%8F%E9%A1%8C-dddb01400d1c" class="markup--anchor markup--p-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-array-%E7%9A%84-index-%E7%95%B6-foreach-id-%E7%9A%84%E7%89%B9%E5%88%A5%E5%95%8F%E9%A1%8C-dddb01400d1c" target="_blank">使用 array 的 index 當 ForEach 的 id 可能會有特別的問題</a>。</p><div name="5551" id="5551" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-array-%E7%9A%84-index-%E7%95%B6-foreach-id-%E7%9A%84%E7%89%B9%E5%88%A5%E5%95%8F%E9%A1%8C-dddb01400d1c" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-array-%E7%9A%84-index-%E7%95%B6-foreach-id-%E7%9A%84%E7%89%B9%E5%88%A5%E5%95%8F%E9%A1%8C-dddb01400d1c" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-array-%E7%9A%84-index-%E7%95%B6-foreach-id-%E7%9A%84%E7%89%B9%E5%88%A5%E5%95%8F%E9%A1%8C-dddb01400d1c"><strong class="markup--strong markup--mixtapeEmbed-strong">使用 array 的 index 當 ForEach id 的特別問題</strong><br><em class="markup--em markup--mixtapeEmbed-em">當我們用 SwiftUI 的 ForEach 顯示 array 的內容時，通常需要指定區分成員的 id。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-array-%E7%9A%84-index-%E7%95%B6-foreach-id-%E7%9A%84%E7%89%B9%E5%88%A5%E5%95%8F%E9%A1%8C-dddb01400d1c" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="bdeee9f9375f9b1c1ca5af3cbeeb75b1" data-thumbnail-img-id="1*iWPT5q1P_TsutdHIhnRbYQ.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*iWPT5q1P_TsutdHIhnRbYQ.png);"></a></div><h3 name="0c1e" id="0c1e" class="graf graf--h3 graf-after--mixtapeEmbed">搭配 ForEach &amp; Identifiable 呈現 array 內容</h3><p name="8d9d" id="8d9d" class="graf graf--p graf-after--h3">剛剛產生 ForEach 時，型別 KeyPath 的參數 id 是為了區分 array 成員。不過當成員的型別遵從 protocol <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">Identifiable</strong></code> 時，它本身就會宣告用來區分的 property id，因此我們生成 List 時可以省略參數 id，不用再指定 id。</p><div name="1c79" id="1c79" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/swift/identifiable" data-href="https://developer.apple.com/documentation/swift/identifiable" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swift/identifiable"><strong class="markup--strong markup--mixtapeEmbed-strong">Identifiable | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">A class of types whose instances hold the value of an entity with stable identity.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swift/identifiable" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="c1a6dee64756f231afc1d950c8866c27" data-thumbnail-img-id="0*TIWgtsjvPuP0pBBc" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*TIWgtsjvPuP0pBBc);"></a></div><p name="5d0f" id="5d0f" class="graf graf--p graf-after--mixtapeEmbed">以剛剛的型別 Song 為例，我們讓它遵從 protocol Identifiable，在其中宣告 property id。id 的型別必須遵從 Hashable protocol，因此最簡單的莫過於用整數或字串當 id，比方用 Song 的 name 當 id。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="361d" id="361d" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Song</span>: <span class="hljs-title class_">Identifiable</span> {<br />    <span class="hljs-keyword">let</span> id: <span class="hljs-type">String</span> { name }<br />    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> singer: <span class="hljs-type">String</span><br />}</span></pre><p name="812c" id="812c" class="graf graf--p graf-after--pre">不過 id 要確保不會重覆，而 Song 的 name 有可能重覆，因此更常見的方法是利用 <strong class="markup--strong markup--p-strong">UUID</strong> 當 id，因為它可以幫我們產生獨一無二，不會跟別人同名的 ID。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="0c1f" id="0c1f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Song</span>: <span class="hljs-title class_">Identifiable</span> {<br />    <span class="hljs-keyword">let</span> id <span class="hljs-operator">=</span> <span class="hljs-type">UUID</span>()<br />    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> singer: <span class="hljs-type">String</span><br />}</span></pre><div name="1352" id="1352" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E5%A6%82%E4%BD%95%E7%94%A2%E7%94%9F%E7%8D%A8%E4%B8%80%E7%84%A1%E4%BA%8C%E7%9A%84-id-a1facb7377d3" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E5%A6%82%E4%BD%95%E7%94%A2%E7%94%9F%E7%8D%A8%E4%B8%80%E7%84%A1%E4%BA%8C%E7%9A%84-id-a1facb7377d3" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E5%A6%82%E4%BD%95%E7%94%A2%E7%94%9F%E7%8D%A8%E4%B8%80%E7%84%A1%E4%BA%8C%E7%9A%84-id-a1facb7377d3"><strong class="markup--strong markup--mixtapeEmbed-strong">iOS App 如何產生獨一無二的 ID</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，有時我們需要產生獨一無二，不會跟別人同名的 ID。比方我們做了一個拍照 App，為了讓照片的檔名不會重覆，我們可用以下方法產生獨一無二的 ID。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/ios-app-%E5%A6%82%E4%BD%95%E7%94%A2%E7%94%9F%E7%8D%A8%E4%B8%80%E7%84%A1%E4%BA%8C%E7%9A%84-id-a1facb7377d3" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="c97ce03b30205f3457787b73e2f270e3"></a></div><p name="ce2c" id="ce2c" class="graf graf--p graf-after--mixtapeEmbed">此時我們傳入 songs 生成 ForEach 時將可省略參數 id，因為 Song 的 id 就可以區分了。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="68c6" id="68c6" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">VStack</span> {<br />   <span class="hljs-type">ForEach</span>(songs) { song  <span class="hljs-keyword">in</span><br />      <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(song.name)</span> by <span class="hljs-subst">\(song.singer)</span>&quot;</span>)<br />   }<br />}</span></pre><p name="b1f7" id="b1f7" class="graf graf--p graf-after--pre">此 ForEach 搭配的 init 宣告如下。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="5f9a" id="5f9a" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">ForEach</span> <span class="hljs-title class_">where</span> <span class="hljs-title class_">ID</span> == <span class="hljs-title class_">Data</span>.<span class="hljs-title class_">Element</span>.<span class="hljs-title class_">ID</span>, <span class="hljs-title class_">Content</span> : <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Data</span>.<span class="hljs-title class_">Element</span> : <span class="hljs-title class_">Identifiable</span> {<br />    <span class="hljs-keyword">public</span> <span class="hljs-keyword">init</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">data</span>: <span class="hljs-type">Data</span>, <span class="hljs-meta">@ViewBuilder</span> <span class="hljs-params">content</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Data</span>.<span class="hljs-type">Element</span>) -&gt; <span class="hljs-type">Content</span>)<br />}</span></pre><div name="4c87" id="4c87" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://developer.apple.com/documentation/swiftui/foreach/init%28_:content:%29-6oy5i" data-href="https://developer.apple.com/documentation/swiftui/foreach/init(_:content:)-6oy5i" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/swiftui/foreach/init(_:content:)-6oy5i"><strong class="markup--strong markup--mixtapeEmbed-strong">init(_:content:) | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Creates an instance that uniquely identifies and creates views across updates based on the identity of the underlying…</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/swiftui/foreach/init%28_:content:%29-6oy5i" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="79b2ccdb780d2281f6efadd38a558207" data-thumbnail-img-id="0*cM3q0MXY2oToarR5" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*cM3q0MXY2oToarR5);"></a></div><figure name="60e3" id="60e3" class="graf graf--figure graf-after--mixtapeEmbed"><img class="graf-image" data-image-id="1*MU4UwYGJeRGncNH9Lf0fQw.png" data-width="1339" data-height="2716" src="https://cdn-images-1.medium.com/max/800/1*MU4UwYGJeRGncNH9Lf0fQw.png"></figure><p name="5320" id="5320" class="graf graf--p graf-after--figure">ps: 若是搭配 SwiftData 的 @Model 定義的 class 型別，則會自動遵從 Identifiable。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="ddef" id="ddef" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftData<br /><br /><span class="hljs-meta">@Model</span><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">Song</span> {<br />    <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">var</span> singer: <span class="hljs-type">String</span><br />    <br />    <span class="hljs-keyword">init</span>(<span class="hljs-params">name</span>: <span class="hljs-type">String</span>, <span class="hljs-params">singer</span>: <span class="hljs-type">String</span>) {<br />        <span class="hljs-keyword">self</span>.name <span class="hljs-operator">=</span> name<br />        <span class="hljs-keyword">self</span>.singer <span class="hljs-operator">=</span> singer<br />    }<br />}</span></pre><h3 name="e1c1" id="e1c1" class="graf graf--h3 graf-after--pre">List &amp; ForEach 搭配 array 的自動完成</h3><div name="f033" id="f033" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/list-foreach-%E6%96%B9%E4%BE%BF%E7%9A%84%E8%87%AA%E5%8B%95%E5%AE%8C%E6%88%90-xcode-14-%E6%96%B0%E5%8A%9F%E8%83%BD-674c676fdf22" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/list-foreach-%E6%96%B9%E4%BE%BF%E7%9A%84%E8%87%AA%E5%8B%95%E5%AE%8C%E6%88%90-xcode-14-%E6%96%B0%E5%8A%9F%E8%83%BD-674c676fdf22" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/list-foreach-%E6%96%B9%E4%BE%BF%E7%9A%84%E8%87%AA%E5%8B%95%E5%AE%8C%E6%88%90-xcode-14-%E6%96%B0%E5%8A%9F%E8%83%BD-674c676fdf22"><strong class="markup--strong markup--mixtapeEmbed-strong">List &amp; ForEach 搭配 array 的自動完成 — Xcode 14 新功能</strong><br><em class="markup--em markup--mixtapeEmbed-em">產生 List &amp; ForEach 時，我們時常會傳入 array，因此輸入 List &amp; ForEach 時，自動完成會自動尋找它的好朋友 array &amp; 輸入相關程式。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/list-foreach-%E6%96%B9%E4%BE%BF%E7%9A%84%E8%87%AA%E5%8B%95%E5%AE%8C%E6%88%90-xcode-14-%E6%96%B0%E5%8A%9F%E8%83%BD-674c676fdf22" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="55b3af54f2a186a589afd29103007512" data-thumbnail-img-id="1*KcNLR7NUPJYlXHDDTwE8ww.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*KcNLR7NUPJYlXHDDTwE8ww.png);"></a></div><h3 name="3ab4" id="3ab4" class="graf graf--h3 graf-after--mixtapeEmbed">SwiftUI ForEach 搭配 array 時，如何取得成員的位置(index)</h3><p name="be17" id="be17" class="graf graf--p graf-after--h3">SwiftUI ForEach 搭配 array 時，若想同時取得 array 的成員跟位置，可參考以下連結。</p><div name="8c63" id="8c63" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-foreach-%E6%90%AD%E9%85%8D-array-%E6%99%82-%E5%A6%82%E4%BD%95%E5%8F%96%E5%BE%97%E6%88%90%E5%93%A1%E7%9A%84%E4%BD%8D%E7%BD%AE-index-b2c64c3bbca3" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-foreach-%E6%90%AD%E9%85%8D-array-%E6%99%82-%E5%A6%82%E4%BD%95%E5%8F%96%E5%BE%97%E6%88%90%E5%93%A1%E7%9A%84%E4%BD%8D%E7%BD%AE-index-b2c64c3bbca3" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-foreach-%E6%90%AD%E9%85%8D-array-%E6%99%82-%E5%A6%82%E4%BD%95%E5%8F%96%E5%BE%97%E6%88%90%E5%93%A1%E7%9A%84%E4%BD%8D%E7%BD%AE-index-b2c64c3bbca3"><strong class="markup--strong markup--mixtapeEmbed-strong">SwiftUI ForEach 搭配 array 時，如何取得成員的位置(index)</strong><br><em class="markup--em markup--mixtapeEmbed-em">使用 SwiftUI 的 ForEach 可以快速顯示 array 的內容，例如以下顯示歌單的例子。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swiftui-foreach-%E6%90%AD%E9%85%8D-array-%E6%99%82-%E5%A6%82%E4%BD%95%E5%8F%96%E5%BE%97%E6%88%90%E5%93%A1%E7%9A%84%E4%BD%8D%E7%BD%AE-index-b2c64c3bbca3" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="224023201e4764e52f86ebb8a1837366" data-thumbnail-img-id="1*13cNMdWq-i5C8_sfUoROhA.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*13cNMdWq-i5C8_sfUoROhA.png);"></a></div><h3 name="5b0a" id="5b0a" class="graf graf--h3 graf-after--mixtapeEmbed">讓 String &amp; Int 遵從 protocol Identifiable</h3><p name="5a0a" id="5a0a" class="graf graf--p graf-after--h3">當 array 的內容是簡單的字串或數字時，我們也可以搭配 Identifiable，比方以下例子:</p><p name="a9cc" id="a9cc" class="graf graf--p graf-after--p">利用 extension 擴充 String，讓它遵從 protocol Identifiable，定義它的 id 是自己本身的字串內容。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="6d31" id="6d31" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">String</span>: <span class="hljs-title class_">Identifiable</span> {<br />    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> id: <span class="hljs-type">String</span> { <span class="hljs-keyword">self</span> }<br />}</span></pre><p name="f73a" id="f73a" class="graf graf--p graf-after--pre">因為 String 遵從 protocol Identifiable，所以現在搭配 ForEach 時不用再傳入參數 id 了。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="3fa3" id="3fa3" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />   <span class="hljs-keyword">let</span> lyrics <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;你從不知道&quot;</span>, <span class="hljs-string">&quot;我因為你而煎熬&quot;</span>, <span class="hljs-string">&quot;心碎過的每一分每一秒&quot;</span>]<br /><br />   <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />      <span class="hljs-type">VStack</span> {<br />         <span class="hljs-type">ForEach</span>(lyrics) { message <span class="hljs-keyword">in</span><br />            <span class="hljs-type">Text</span>(message)<br />         }<br />      }<br />   }<br />}</span></pre><h3 name="3177" id="3177" class="graf graf--h3 graf-after--pre">補充: 如何將 array 的成員變 Binding</h3><div name="6313" id="6313" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-swiftui-%E5%A6%82%E4%BD%95%E5%B0%87-array-%E7%9A%84%E6%88%90%E5%93%A1%E8%AE%8A-binding-35e11ba69349" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-swiftui-%E5%A6%82%E4%BD%95%E5%B0%87-array-%E7%9A%84%E6%88%90%E5%93%A1%E8%AE%8A-binding-35e11ba69349" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-swiftui-%E5%A6%82%E4%BD%95%E5%B0%87-array-%E7%9A%84%E6%88%90%E5%93%A1%E8%AE%8A-binding-35e11ba69349"><strong class="markup--strong markup--mixtapeEmbed-strong">在 SwiftUI 如何將 array 的成員變 Binding</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 SwiftUI App 時，我們時常用到 Binding，而且產生的方法也很簡單 ，比方在 @State property 的變數加上 $，例如以下透過 toogle 設定書籍是否已讀的例子。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-swiftui-%E5%A6%82%E4%BD%95%E5%B0%87-array-%E7%9A%84%E6%88%90%E5%93%A1%E8%AE%8A-binding-35e11ba69349" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="773c2b957991c0b70e4b206e12438bae" data-thumbnail-img-id="1*lw3wwAYjyRUK_fRdI3ryug.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*lw3wwAYjyRUK_fRdI3ryug.png);"></a></div><h3 name="ca90" id="ca90" class="graf graf--h3 graf-after--mixtapeEmbed">補充: 為什麼 ForEach &amp; List 需要區分 array 裡的成員 ?</h3><p name="69d3" id="69d3" class="graf graf--p graf-after--h3">前面介紹了 ForEach 如何區分 array 裡的成員，但到底為什麼它需要區分呢 ? 有興趣的朋友可再參考以下連結的說明。</p><div name="1b47" id="1b47" class="graf graf--mixtapeEmbed graf-after--p graf--trailing"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%82%BA%E4%BB%80%E9%BA%BC-foreach-list-%E9%9C%80%E8%A6%81%E5%8D%80%E5%88%86-array-%E8%A3%A1%E7%9A%84%E6%88%90%E5%93%A1-31b420f300a6" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%82%BA%E4%BB%80%E9%BA%BC-foreach-list-%E9%9C%80%E8%A6%81%E5%8D%80%E5%88%86-array-%E8%A3%A1%E7%9A%84%E6%88%90%E5%93%A1-31b420f300a6" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%82%BA%E4%BB%80%E9%BA%BC-foreach-list-%E9%9C%80%E8%A6%81%E5%8D%80%E5%88%86-array-%E8%A3%A1%E7%9A%84%E6%88%90%E5%93%A1-31b420f300a6"><strong class="markup--strong markup--mixtapeEmbed-strong">為什麼 ForEach &amp; List 需要區分 array 裡的成員 ?</strong><br><em class="markup--em markup--mixtapeEmbed-em">當我們使用 SwiftUI 的 ForEach 或 List 搭配 array 設計畫面時，必須讓它能區分 array 裡的成員，比方以下例子建立 List 時傳入參數 id \.name，以專輯的名字當區分的 id。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E7%82%BA%E4%BB%80%E9%BA%BC-foreach-list-%E9%9C%80%E8%A6%81%E5%8D%80%E5%88%86-array-%E8%A3%A1%E7%9A%84%E6%88%90%E5%93%A1-31b420f300a6" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="dd8dc1532e96aa253edc607dc93014f6" data-thumbnail-img-id="1*Rmrk1v18mediO1Pd_r9B7Q.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*Rmrk1v18mediO1Pd_r9B7Q.jpeg);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/7ccd426e53ac"><time class="dt-published" datetime="2019-09-12T06:26:32.482Z">September 12, 2019</time></a>.</p><p><a href="https://medium.com/@apppeterpan/swiftui-%E7%9A%84-foreach-7ccd426e53ac" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>