<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>請 Zed AI 串接 API 顯示資料</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">請 Zed AI 串接 API 顯示資料</h1>
</header>
<section data-field="subtitle" class="p-summary">
最近發現 Zed AI 的 fetch 指令可以抓取 API 回傳的 JSON 資料，因此現在請 AI 串接 API 顯示資料變得更簡單了，只要輸入兩行句子即可搞定。
</section>
<section data-field="body" class="e-content">
<section name="8c06" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="b61a" id="b61a" class="graf graf--h3 graf--leading graf--title">請 Zed AI 串接 API 顯示資料</h3><p name="e2cd" id="e2cd" class="graf graf--p graf-after--h3">最近發現 Zed AI 的 fetch 指令可以抓取 API 回傳的 JSON 資料，因此現在請 AI 串接 API 顯示資料變得更簡單了，只要輸入兩行句子即可搞定。</p><figure name="4aa9" id="4aa9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*VEKOVHPTFd557rja493ZAA.png" data-width="1490" data-height="408" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*VEKOVHPTFd557rja493ZAA.png"></figure><div name="c14e" id="c14e" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-zed-ai-%E7%9A%84-fetch-%E6%8C%87%E4%BB%A4%E8%A7%A3%E6%9E%90%E7%B6%B2%E9%A0%81-api-github-%E7%A8%8B%E5%BC%8F-b7f4754bd272" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-zed-ai-%E7%9A%84-fetch-%E6%8C%87%E4%BB%A4%E8%A7%A3%E6%9E%90%E7%B6%B2%E9%A0%81-api-github-%E7%A8%8B%E5%BC%8F-b7f4754bd272" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-zed-ai-%E7%9A%84-fetch-%E6%8C%87%E4%BB%A4%E8%A7%A3%E6%9E%90%E7%B6%B2%E9%A0%81-api-github-%E7%A8%8B%E5%BC%8F-b7f4754bd272"><strong class="markup--strong markup--mixtapeEmbed-strong">使用 Zed AI 的 fetch 指令解析網頁、API、GitHub 程式</strong><br><em class="markup--em markup--mixtapeEmbed-em">最近玩了一下 Zed AI 的 fetch 指令，發現它滿好用的，透過 fetch 指令我們可以抓取網路上的資料問問題。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-zed-ai-%E7%9A%84-fetch-%E6%8C%87%E4%BB%A4%E8%A7%A3%E6%9E%90%E7%B6%B2%E9%A0%81-api-github-%E7%A8%8B%E5%BC%8F-b7f4754bd272" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="ea5a17f0e2f1d9f44907e4d1a9c8bf0e" data-thumbnail-img-id="1*b3qQ4Pr7lwRBxsoAMM1Www.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*b3qQ4Pr7lwRBxsoAMM1Www.png);"></a></div><p name="c620" id="c620" class="graf graf--p graf-after--mixtapeEmbed">以下我們以 Apple 抓取音樂排行榜的 API 為例，請 AI 串接 API 製作 SwiftUI App、UIKit App 和 Flutter App。</p><div name="d05f" id="d05f" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://rss.applemarketingtools.com/" data-href="https://rss.applemarketingtools.com/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://rss.applemarketingtools.com/"><strong class="markup--strong markup--mixtapeEmbed-strong">RSS Builder</strong><br><em class="markup--em markup--mixtapeEmbed-em">Use the dropdowns to pick setting to generate a new RSS feed URL.</em>rss.applemarketingtools.com</a><a href="https://rss.applemarketingtools.com/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="889975654bb2d48c255dc0b6a2cebb1f" data-thumbnail-img-id="0*k4bKLspd8zGloqeL" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*k4bKLspd8zGloqeL);"></a></div><pre data-code-block-mode="0" spellcheck="false" name="09a4" id="09a4" class="graf graf--pre graf-after--mixtapeEmbed graf--preV2"><span class="pre--content">https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/albums.json</span></pre><h3 name="29dd" id="29dd" class="graf graf--h3 graf-after--pre">SwiftUI App</h3><figure name="057f" id="057f" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*VEKOVHPTFd557rja493ZAA.png" data-width="1490" data-height="408" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*VEKOVHPTFd557rja493ZAA.png"></figure><ul class="postList"><li name="eb2f" id="eb2f" class="graf graf--li graf-after--figure">Album.swift。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="7eb5" id="7eb5" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Album</span>: <span class="hljs-title class_">Codable</span>, <span class="hljs-title class_">Identifiable</span> {<br />    <span class="hljs-keyword">let</span> id: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> artistName: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> artworkUrl100: <span class="hljs-type">String</span><br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Response</span>: <span class="hljs-title class_">Codable</span> {<br />    <span class="hljs-keyword">let</span> feed: <span class="hljs-type">Feed</span><br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Feed</span>: <span class="hljs-title class_">Codable</span> {<br />    <span class="hljs-keyword">let</span> results: [<span class="hljs-type">Album</span>]<br />}</span></pre><ul class="postList"><li name="ec23" id="ec23" class="graf graf--li graf-after--pre">AlbumViewModel.swift。</li></ul><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="37ef" id="37ef" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">AlbumViewModel</span>: <span class="hljs-title class_">ObservableObject</span> {<br />    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> albums: [<span class="hljs-type">Album</span>] <span class="hljs-operator">=</span> []<br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchAlbums</span>() {<br />        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/albums.json&quot;</span>) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }<br />        <br />        <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { data, <span class="hljs-keyword">_</span>, error <span class="hljs-keyword">in</span><br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> data {<br />                <span class="hljs-keyword">do</span> {<br />                    <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">Response</span>.<span class="hljs-keyword">self</span>, from: data)<br />                    <span class="hljs-type">DispatchQueue</span>.main.async {<br />                        <span class="hljs-keyword">self</span>.albums <span class="hljs-operator">=</span> response.feed.results<br />                    }<br />                } <span class="hljs-keyword">catch</span> {<br />                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Decoding error: <span class="hljs-subst">\(error)</span>&quot;</span>)<br />                }<br />            }<br />        }.resume()<br />    }<br />}</span></pre><ul class="postList"><li name="b984" id="b984" class="graf graf--li graf-after--pre">ContentView.swift。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="be9d" id="be9d" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@StateObject</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> viewModel <span class="hljs-operator">=</span> <span class="hljs-type">AlbumViewModel</span>()<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">NavigationView</span> {<br />            <span class="hljs-type">List</span>(viewModel.albums) { album <span class="hljs-keyword">in</span><br />                <span class="hljs-type">HStack</span> {<br />                    <span class="hljs-type">AsyncImage</span>(url: <span class="hljs-type">URL</span>(string: album.artworkUrl100)) { image <span class="hljs-keyword">in</span><br />                        image.resizable()<br />                    } placeholder: {<br />                        <span class="hljs-type">ProgressView</span>()<br />                    }<br />                    .frame(width: <span class="hljs-number">60</span>, height: <span class="hljs-number">60</span>)<br />                    .cornerRadius(<span class="hljs-number">8</span>)<br />                    <br />                    <span class="hljs-type">VStack</span>(alignment: .leading) {<br />                        <span class="hljs-type">Text</span>(album.name)<br />                            .font(.headline)<br />                        <span class="hljs-type">Text</span>(album.artistName)<br />                            .font(.subheadline)<br />                            .foregroundColor(.secondary)<br />                    }<br />                }<br />            }<br />            .navigationTitle(<span class="hljs-string">&quot;熱門專輯&quot;</span>)<br />        }<br />        .onAppear {<br />            viewModel.fetchAlbums()<br />        }<br />    }<br />}<br /><br />#<span class="hljs-type">Preview</span> {<br />    <span class="hljs-type">ContentView</span>()<br />}</span></pre><figure name="f3ee" id="f3ee" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*IC4u4XtoIAd9reNjgZvtbg.png" data-width="1179" data-height="2556" src="https://cdn-images-1.medium.com/max/800/1*IC4u4XtoIAd9reNjgZvtbg.png"></figure><figure name="cef8" id="cef8" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*4Y0Ia67JjWKJBTUzOjqlXg.png" data-width="634" data-height="190" src="https://cdn-images-1.medium.com/max/800/1*4Y0Ia67JjWKJBTUzOjqlXg.png"></figure><ul class="postList"><li name="bbf2" id="bbf2" class="graf graf--li graf-after--figure">AlbumViewModel.swift。</li></ul><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="f8ba" id="f8ba" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> Foundation<br /><br /><span class="hljs-meta">@Observable</span><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">AlbumViewModel</span> {<br />    <span class="hljs-keyword">var</span> albums: [<span class="hljs-type">Album</span>] <span class="hljs-operator">=</span> []<br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchAlbums</span>() {<br />        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/albums.json&quot;</span>) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }<br />        <br />        <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { data, <span class="hljs-keyword">_</span>, error <span class="hljs-keyword">in</span><br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> data {<br />                <span class="hljs-keyword">do</span> {<br />                    <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">Response</span>.<span class="hljs-keyword">self</span>, from: data)<br />                    <span class="hljs-type">Task</span> { <span class="hljs-meta">@MainActor</span> <span class="hljs-keyword">in</span><br />                        <span class="hljs-keyword">self</span>.albums <span class="hljs-operator">=</span> response.feed.results<br />                    }<br />                } <span class="hljs-keyword">catch</span> {<br />                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Decoding error: <span class="hljs-subst">\(error)</span>&quot;</span>)<br />                }<br />            }<br />        }.resume()<br />    }<br />}</span></pre><ul class="postList"><li name="6ebf" id="6ebf" class="graf graf--li graf-after--pre">ContentView.swift。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="b0aa" id="b0aa" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> SwiftUI<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {<br />    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> viewModel <span class="hljs-operator">=</span> <span class="hljs-type">AlbumViewModel</span>()<br />    <br />    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {<br />        <span class="hljs-type">NavigationView</span> {<br />            <span class="hljs-type">List</span>(viewModel.albums) { album <span class="hljs-keyword">in</span><br />                <span class="hljs-type">HStack</span> {<br />                    <span class="hljs-type">AsyncImage</span>(url: <span class="hljs-type">URL</span>(string: album.artworkUrl100)) { image <span class="hljs-keyword">in</span><br />                        image.resizable()<br />                    } placeholder: {<br />                        <span class="hljs-type">ProgressView</span>()<br />                    }<br />                    .frame(width: <span class="hljs-number">60</span>, height: <span class="hljs-number">60</span>)<br />                    .cornerRadius(<span class="hljs-number">8</span>)<br />                    <br />                    <span class="hljs-type">VStack</span>(alignment: .leading) {<br />                        <span class="hljs-type">Text</span>(album.name)<br />                            .font(.headline)<br />                        <span class="hljs-type">Text</span>(album.artistName)<br />                            .font(.subheadline)<br />                            .foregroundColor(.secondary)<br />                    }<br />                }<br />            }<br />            .navigationTitle(<span class="hljs-string">&quot;熱門專輯&quot;</span>)<br />        }<br />        .task {<br />            viewModel.fetchAlbums()<br />        }<br />    }<br />}<br /><br /><br />#<span class="hljs-type">Preview</span> {<br />    <span class="hljs-type">ContentView</span>()<br />}</span></pre><h3 name="2dd4" id="2dd4" class="graf graf--h3 graf-after--pre">UIKit App</h3><figure name="babb" id="babb" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*fbU2Sa-bLlhWFPhDVlrRkQ.png" data-width="788" data-height="186" src="https://cdn-images-1.medium.com/max/800/1*fbU2Sa-bLlhWFPhDVlrRkQ.png"></figure><ul class="postList"><li name="3655" id="3655" class="graf graf--li graf-after--figure">Album.swift。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="9a6d" id="9a6d" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Album</span>: <span class="hljs-title class_">Codable</span> {<br />    <span class="hljs-keyword">let</span> id: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> artistName: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />    <span class="hljs-keyword">let</span> artworkUrl100: <span class="hljs-type">String</span><br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Response</span>: <span class="hljs-title class_">Codable</span> {<br />    <span class="hljs-keyword">let</span> feed: <span class="hljs-type">Feed</span><br />}<br /><br /><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Feed</span>: <span class="hljs-title class_">Codable</span> {<br />    <span class="hljs-keyword">let</span> results: [<span class="hljs-type">Album</span>]<br />}</span></pre><ul class="postList"><li name="8708" id="8708" class="graf graf--li graf-after--pre">AlbumTableViewCell.swift。</li></ul><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="d2d7" id="d2d7" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> UIKit<br /><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">AlbumTableViewCell</span>: <span class="hljs-title class_">UITableViewCell</span> {<br />    <span class="hljs-keyword">let</span> albumImageView <span class="hljs-operator">=</span> <span class="hljs-type">UIImageView</span>()<br />    <span class="hljs-keyword">let</span> nameLabel <span class="hljs-operator">=</span> <span class="hljs-type">UILabel</span>()<br />    <span class="hljs-keyword">let</span> artistLabel <span class="hljs-operator">=</span> <span class="hljs-type">UILabel</span>()<br />    <br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">init</span>(<span class="hljs-params">style</span>: <span class="hljs-type">UITableViewCell</span>.<span class="hljs-type">CellStyle</span>, <span class="hljs-params">reuseIdentifier</span>: <span class="hljs-type">String</span>?) {<br />        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(style: style, reuseIdentifier: reuseIdentifier)<br />        setupUI()<br />    }<br />    <br />    <span class="hljs-keyword">required</span> <span class="hljs-keyword">init?</span>(<span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) {<br />        <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">&quot;init(coder:) has not been implemented&quot;</span>)<br />    }<br />    <br />    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">setupUI</span>() {<br />        <span class="hljs-comment">// 設置 albumImageView</span><br />        albumImageView.contentMode <span class="hljs-operator">=</span> .scaleAspectFit<br />        albumImageView.translatesAutoresizingMaskIntoConstraints <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />        contentView.addSubview(albumImageView)<br />        <br />        <span class="hljs-comment">// 設置 nameLabel</span><br />        nameLabel.font <span class="hljs-operator">=</span> <span class="hljs-type">UIFont</span>.boldSystemFont(ofSize: <span class="hljs-number">16</span>)<br />        nameLabel.translatesAutoresizingMaskIntoConstraints <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />        contentView.addSubview(nameLabel)<br />        <br />        <span class="hljs-comment">// 設置 artistLabel</span><br />        artistLabel.font <span class="hljs-operator">=</span> <span class="hljs-type">UIFont</span>.systemFont(ofSize: <span class="hljs-number">14</span>)<br />        artistLabel.textColor <span class="hljs-operator">=</span> .gray<br />        artistLabel.translatesAutoresizingMaskIntoConstraints <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />        contentView.addSubview(artistLabel)<br />        <br />        <span class="hljs-comment">// 設置約束</span><br />        <span class="hljs-type">NSLayoutConstraint</span>.activate([<br />            albumImageView.leadingAnchor.constraint(equalTo: contentView.leadingAnchor, constant: <span class="hljs-number">10</span>),<br />            albumImageView.centerYAnchor.constraint(equalTo: contentView.centerYAnchor),<br />            albumImageView.widthAnchor.constraint(equalToConstant: <span class="hljs-number">60</span>),<br />            albumImageView.heightAnchor.constraint(equalToConstant: <span class="hljs-number">60</span>),<br />            <br />            nameLabel.leadingAnchor.constraint(equalTo: albumImageView.trailingAnchor, constant: <span class="hljs-number">10</span>),<br />            nameLabel.topAnchor.constraint(equalTo: contentView.topAnchor, constant: <span class="hljs-number">10</span>),<br />            nameLabel.trailingAnchor.constraint(equalTo: contentView.trailingAnchor, constant: <span class="hljs-operator">-</span><span class="hljs-number">10</span>),<br />            <br />            artistLabel.leadingAnchor.constraint(equalTo: nameLabel.leadingAnchor),<br />            artistLabel.topAnchor.constraint(equalTo: nameLabel.bottomAnchor, constant: <span class="hljs-number">5</span>),<br />            artistLabel.trailingAnchor.constraint(equalTo: nameLabel.trailingAnchor)<br />        ])<br />    }<br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">configure</span>(<span class="hljs-params">with</span> <span class="hljs-params">album</span>: <span class="hljs-type">Album</span>) {<br />        nameLabel.text <span class="hljs-operator">=</span> album.name<br />        artistLabel.text <span class="hljs-operator">=</span> album.artistName<br />        <br />        <span class="hljs-comment">// 加載圖片</span><br />        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: album.artworkUrl100) {<br />            <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] data, <span class="hljs-keyword">_</span>, error <span class="hljs-keyword">in</span><br />                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> data, <span class="hljs-keyword">let</span> image <span class="hljs-operator">=</span> <span class="hljs-type">UIImage</span>(data: data) {<br />                    <span class="hljs-type">DispatchQueue</span>.main.async {<br />                        <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.albumImageView.image <span class="hljs-operator">=</span> image<br />                    }<br />                }<br />            }.resume()<br />        }<br />    }<br />}</span></pre><ul class="postList"><li name="7d1e" id="7d1e" class="graf graf--li graf-after--pre">ViewController.swift。</li></ul><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="b023" id="b023" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> UIKit<br /><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIViewController</span>, <span class="hljs-title class_">UITableViewDataSource</span>, <span class="hljs-title class_">UITableViewDelegate</span> {<br />    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> albums: [<span class="hljs-type">Album</span>] <span class="hljs-operator">=</span> []<br />    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> tableView <span class="hljs-operator">=</span> <span class="hljs-type">UITableView</span>()<br />    <br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {<br />        <span class="hljs-keyword">super</span>.viewDidLoad()<br />        setupUI()<br />        fetchAlbums()<br />    }<br />    <br />    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">setupUI</span>() {<br />        view.backgroundColor <span class="hljs-operator">=</span> .white<br />        title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;熱門專輯&quot;</span><br />        <br />        tableView.dataSource <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span><br />        tableView.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span><br />        tableView.register(<span class="hljs-type">AlbumTableViewCell</span>.<span class="hljs-keyword">self</span>, forCellReuseIdentifier: <span class="hljs-string">&quot;AlbumCell&quot;</span>)<br />        <br />        view.addSubview(tableView)<br />        tableView.translatesAutoresizingMaskIntoConstraints <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />        <span class="hljs-type">NSLayoutConstraint</span>.activate([<br />            tableView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),<br />            tableView.leadingAnchor.constraint(equalTo: view.leadingAnchor),<br />            tableView.trailingAnchor.constraint(equalTo: view.trailingAnchor),<br />            tableView.bottomAnchor.constraint(equalTo: view.bottomAnchor)<br />        ])<br />    }<br />    <br />    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchAlbums</span>() {<br />        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/albums.json&quot;</span>) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }<br />        <br />        <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] data, <span class="hljs-keyword">_</span>, error <span class="hljs-keyword">in</span><br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> data {<br />                <span class="hljs-keyword">do</span> {<br />                    <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">Response</span>.<span class="hljs-keyword">self</span>, from: data)<br />                    <span class="hljs-type">DispatchQueue</span>.main.async {<br />                        <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.albums <span class="hljs-operator">=</span> response.feed.results<br />                        <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.tableView.reloadData()<br />                    }<br />                } <span class="hljs-keyword">catch</span> {<br />                    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Decoding error: <span class="hljs-subst">\(error)</span>&quot;</span>)<br />                }<br />            }<br />        }.resume()<br />    }<br />    <br />    <span class="hljs-comment">// MARK: - UITableViewDataSource</span><br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">numberOfRowsInSection</span> <span class="hljs-params">section</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> {<br />        <span class="hljs-keyword">return</span> albums.count<br />    }<br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">cellForRowAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>) -&gt; <span class="hljs-type">UITableViewCell</span> {<br />        <span class="hljs-keyword">let</span> cell <span class="hljs-operator">=</span> tableView.dequeueReusableCell(withIdentifier: <span class="hljs-string">&quot;AlbumCell&quot;</span>, for: indexPath) <span class="hljs-keyword">as!</span> <span class="hljs-type">AlbumTableViewCell</span><br />        <span class="hljs-keyword">let</span> album <span class="hljs-operator">=</span> albums[indexPath.row]<br />        cell.configure(with: album)<br />        <span class="hljs-keyword">return</span> cell<br />    }<br />    <br />    <span class="hljs-comment">// MARK: - UITableViewDelegate</span><br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">heightForRowAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>) -&gt; <span class="hljs-type">CGFloat</span> {<br />        <span class="hljs-keyword">return</span> <span class="hljs-number">80</span><br />    }<br />}<br /><br />#<span class="hljs-type">Preview</span> {<br />    <span class="hljs-type">ViewController</span>()<br />}</span></pre><h3 name="2c9a" id="2c9a" class="graf graf--h3 graf-after--pre">Flutter App</h3><figure name="a928" id="a928" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*Xb6lEYX1AtiK3FLF7IIeuw.png" data-width="784" data-height="174" src="https://cdn-images-1.medium.com/max/800/1*Xb6lEYX1AtiK3FLF7IIeuw.png"></figure><ul class="postList"><li name="2039" id="2039" class="graf graf--li graf-after--figure">album.dart。</li></ul><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="dart" name="70a5" id="70a5" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Album</span> </span>{<br />  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> id;<br />  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> artistName;<br />  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> name;<br />  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> artworkUrl100;<br /><br />  Album({<span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.id, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.artistName, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.name, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.artworkUrl100});<br /><br />  <span class="hljs-keyword">factory</span> Album.fromJson(<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; json) {<br />    <span class="hljs-keyword">return</span> Album(<br />      id: json[<span class="hljs-string">&#x27;id&#x27;</span>],<br />      artistName: json[<span class="hljs-string">&#x27;artistName&#x27;</span>],<br />      name: json[<span class="hljs-string">&#x27;name&#x27;</span>],<br />      artworkUrl100: json[<span class="hljs-string">&#x27;artworkUrl100&#x27;</span>],<br />    );<br />  }<br />}</span></pre><ul class="postList"><li name="8120" id="8120" class="graf graf--li graf-after--pre">album_list_page.dart。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="93aa" id="93aa" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br /><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;album.dart&#x27;</span>;<br /><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:http/http.dart&#x27;</span> <span class="hljs-keyword">as</span> http;<br /><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;dart:convert&#x27;</span>;<br /><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:cached_network_image/cached_network_image.dart&#x27;</span>;<br /><br /><br /><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AlbumListPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{<br />  <span class="hljs-meta">@override</span><br />  _AlbumListPageState createState() =&gt; _AlbumListPageState();<br />}<br /><br /><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_AlbumListPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">AlbumListPage</span>&gt; </span>{<br />  <span class="hljs-built_in">List</span>&lt;Album&gt; albums = [];<br /><br />  <span class="hljs-meta">@override</span><br />  <span class="hljs-keyword">void</span> initState() {<br />    <span class="hljs-keyword">super</span>.initState();<br />    fetchAlbums();<br />  }<br /><br />  Future&lt;<span class="hljs-keyword">void</span>&gt; fetchAlbums() <span class="hljs-keyword">async</span> {<br />    <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> http.<span class="hljs-keyword">get</span>(<span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">&#x27;https://rss.applemarketingtools.com/api/v2/tw/music/most-played/10/albums.json&#x27;</span>));<br /><br />    <span class="hljs-keyword">if</span> (response.statusCode == <span class="hljs-number">200</span>) {<br />      <span class="hljs-keyword">final</span> jsonData = jsonDecode(response.body);<br />      setState(() {<br />        albums = (jsonData[<span class="hljs-string">&#x27;feed&#x27;</span>][<span class="hljs-string">&#x27;results&#x27;</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">List</span>)<br />            .map((albumJson) =&gt; Album.fromJson(albumJson))<br />            .toList();<br />      });<br />    } <span class="hljs-keyword">else</span> {<br />      <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">&#x27;Failed to load albums&#x27;</span>);<br />    }<br />  }<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> Scaffold(<br />      appBar: AppBar(<br />        title: Text(<span class="hljs-string">&#x27;熱門專輯&#x27;</span>),<br />      ),<br />      body: ListView.builder(<br />        itemCount: albums.length,<br />        itemBuilder: (context, index) {<br />          <span class="hljs-keyword">return</span> ListTile(<br />            leading: CachedNetworkImage(<br />              imageUrl: albums[index].artworkUrl100,<br />              placeholder: (context, url) =&gt; CircularProgressIndicator(),<br />              errorWidget: (context, url, error) =&gt; Icon(Icons.error),<br />              width: <span class="hljs-number">60</span>,<br />              height: <span class="hljs-number">60</span>,<br />              fit: BoxFit.cover,<br />            ),<br />            title: Text(albums[index].name),<br />            subtitle: Text(albums[index].artistName),<br />          );<br />        },<br />      ),<br />    );<br />  }<br />}</span></pre><ul class="postList"><li name="d63d" id="d63d" class="graf graf--li graf-after--pre">main.dart。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="dart" name="47a3" id="47a3" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><br /><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br /><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter_application_2/album_list_page.dart&#x27;</span>;<br /><br /><br /><span class="hljs-keyword">void</span> main() {<br />  runApp(<span class="hljs-keyword">const</span> MyApp());<br />}<br /><br /><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<br />  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});<br /><br />  <span class="hljs-meta">@override</span><br />  Widget build(BuildContext context) {<br />    <span class="hljs-keyword">return</span> MaterialApp(<br />      title: <span class="hljs-string">&#x27;熱門專輯&#x27;</span>,<br />      theme: ThemeData(<br />        colorScheme: ColorScheme.fromSeed(seedColor: Colors.blue),<br />        useMaterial3: <span class="hljs-keyword">true</span>,<br />      ),<br />      home: AlbumListPage(),<br />    );<br />  }<br />}</span></pre><figure name="c3ec" id="c3ec" class="graf graf--figure graf-after--pre graf--trailing"><img class="graf-image" data-image-id="1*L8hc6PoMqPVsIa1wVrXn9Q.png" data-width="1179" data-height="2556" src="https://cdn-images-1.medium.com/max/800/1*L8hc6PoMqPVsIa1wVrXn9Q.png"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/bc5d3e8ecf47"><time class="dt-published" datetime="2024-09-04T15:04:30.912Z">September 4, 2024</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E8%AB%8B-ai-%E4%B8%B2%E6%8E%A5-api-%E9%A1%AF%E7%A4%BA%E8%B3%87%E6%96%99-bc5d3e8ecf47" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>