<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>從模擬器測試推播(push notification)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">從模擬器測試推播(push notification)</h1>
</header>
<section data-field="subtitle" class="p-summary">
從 Xcode 11.4 開始，透過包含推播內容的 apns 檔，我們可以在模擬器(simulator)測試推播 !
</section>
<section data-field="body" class="e-content">
<section name="0957" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="ad4c" id="ad4c" class="graf graf--h3 graf--leading graf--title">從模擬器測試推播(push notification)</h3><p name="9198" id="9198" class="graf graf--p graf-after--h3">從 Xcode 11.4 開始，透過包含推播內容的 apns 檔，我們可以在模擬器(simulator)測試推播 !</p><p name="8091" id="8091" class="graf graf--p graf-after--p">接下來我們將一步步示範如何從模擬器測試推播。</p><h3 name="8ef7" id="8ef7" class="graf graf--h3 graf-after--p">徵求使用者同意，通知將包含 alert，sound &amp; badge</h3><pre name="0228" id="0228" class="graf graf--pre graf-after--h3">import SwiftUI<br>import UserNotifications</pre><pre name="99f9" id="99f9" class="graf graf--pre graf-after--pre">struct ContentView: View {<br>    <br>    func requestNotificationAuthorization() {<br>        　　<strong class="markup--strong markup--pre-strong">UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .sound, .badge]) { granted, error in<br>            guard granted else { return }<br>            print(&quot;request notification ok&quot;)<br>        }</strong><br>    }<br>    <br>    var body: some View {<br>        Image(&quot;foundation&quot;)<br>            .resizable()<br>            .scaledToFit()<br>            .onAppear {<br>                requestNotificationAuthorization()<br>            }<br>    }<br>}</pre><p name="e853" id="e853" class="graf graf--p graf-after--pre">只要有通知的權限，就能在模擬器收到推播。如果要在實機收到推播，還要加其它的設定跟程式，相關說明可參考以下連結。</p><div name="6008" id="6008" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://www.appcoda.com.tw/push-notification/" data-href="https://www.appcoda.com.tw/push-notification/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://www.appcoda.com.tw/push-notification/"><strong class="markup--strong markup--mixtapeEmbed-strong">傳送告白推播的 Push Notification</strong><br><em class="markup--em markup--mixtapeEmbed-em">iOS App 有著各式各樣的功能，但這當中如果要投票選一個讓人又愛又恨的功能，絕對非推播莫屬。 如上圖所示，每天我們會收到來自不同 App…</em>www.appcoda.com.tw</a><a href="https://www.appcoda.com.tw/push-notification/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="c4ad65fac0b62767b2467a1c735a667a" data-thumbnail-img-id="0*pL2i6i_J19scfbL0" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*pL2i6i_J19scfbL0);"></a></div><h3 name="79d7" id="79d7" class="graf graf--h3 graf-after--mixtapeEmbed">新增測試推播的 push.apns</h3><p name="995c" id="995c" class="graf graf--p graf-after--h3">為了在模擬器測試推播，我們需要使用包含推播內容的 apns 檔。從 Xcode 新增檔案，選擇 Other 下的 Empty。</p><figure name="c9ce" id="c9ce" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*qittqgf2YyXw3KKylpPa4A.png" data-width="1452" data-height="1036" src="https://cdn-images-1.medium.com/max/800/1*qittqgf2YyXw3KKylpPa4A.png"></figure><p name="9111" id="9111" class="graf graf--p graf-after--figure">檔案的附檔名須以 <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">apns</strong></code> 結尾，Targets 欄位不用打勾，因為 apns 檔用於測試推播，並不需要包到 App 裡。</p><figure name="060b" id="060b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*_fayln5OL3tAFI1Za2iVfA.png" data-width="1624" data-height="1052" src="https://cdn-images-1.medium.com/max/800/1*_fayln5OL3tAFI1Za2iVfA.png"></figure><h3 name="7301" id="7301" class="graf graf--h3 graf-after--figure">在 apns 檔設定推播的內容</h3><pre name="317a" id="317a" class="graf graf--pre graf-after--h3">{<br>    &quot;Simulator Target Bundle&quot;: &quot;com.peter.DemoPush&quot;,<br>    &quot;aps&quot;: {<br>        &quot;alert&quot;: {<br>            &quot;title&quot;: &quot;急事&quot;,<br>            &quot;subtitle&quot; : &quot;快點開始寫 SwiftUI 作業&quot;,<br>            &quot;body&quot; : &quot;不可以遲交唷&quot;<br>        },<br>        &quot;sound&quot;: &quot;default&quot;,<br>        &quot;badge&quot;: 99<br>    }<br>}</pre><p name="1d2a" id="1d2a" class="graf graf--p graf-after--pre">apns 的內容是 JSON 格式，第一層是 object，有 Simulator Target Bundle &amp; aps 兩個 key。</p><ul class="postList"><li name="7a30" id="7a30" class="graf graf--li graf-after--p">Simulator Target Bundle 的內容為 App 的 bundle ID。</li><li name="4638" id="4638" class="graf graf--li graf-after--li">aps 的內容是另一個 object，key alert 設定顯示的文字，sound 設定聲音，badge 設定 App Icon 顯示的數字。</li></ul><figure name="750f" id="750f" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*pRNfEs78125c2W0qgHTQ2g.png" data-width="1910" data-height="772" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*pRNfEs78125c2W0qgHTQ2g.png"></figure><p name="3704" id="3704" class="graf graf--p graf-after--figure">關於 apns JSON 可包含的相關欄位，詳細資訊可參考以下連結。</p><div name="729a" id="729a" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification" data-href="https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification"><strong class="markup--strong markup--mixtapeEmbed-strong">Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Edit description</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="472183c14fa5ee010a3172354c299172"></a></div><h3 name="ae4b" id="ae4b" class="graf graf--h3 graf-after--mixtapeEmbed">測試推播</h3><p name="cfaa" id="cfaa" class="graf graf--p graf-after--h3">第一次打開 App 時將跳出通知的請求權限，為了等下測試，記得要點選 Allow。</p><figure name="6edb" id="6edb" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*K05EVseX74UhfxfB1-OcMQ.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/800/1*K05EVseX74UhfxfB1-OcMQ.png"></figure><p name="da8f" id="da8f" class="graf graf--p graf-after--figure">App 預設在前景時不會顯示推播，除非有定義 function userNotificationCenter(_:willPresent:withCompletionHandler:)。因此請先回到桌面，方便待會測試推播。</p><figure name="f70e" id="f70e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*QbZTD04sfwQZD7WaBwcCGw.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/800/1*QbZTD04sfwQZD7WaBwcCGw.png"></figure><p name="5d22" id="5d22" class="graf graf--p graf-after--figure">將 Xcode project navigator 裡的 push.apns 拖曳到模擬器上。</p><figure name="8caf" id="8caf" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*a5JzfPE9ZGGFonAS3vJd3Q.png" data-width="1964" data-height="1622" src="https://cdn-images-1.medium.com/max/800/1*a5JzfPE9ZGGFonAS3vJd3Q.png"></figure><p name="857c" id="857c" class="graf graf--p graf-after--figure">Cool，推播現身了 ~</p><figure name="d699" id="d699" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*OR11hUCwqevxGzrOCskWFg.png" data-width="1170" data-height="2532" src="https://cdn-images-1.medium.com/max/800/1*OR11hUCwqevxGzrOCskWFg.png"></figure><h3 name="e32d" id="e32d" class="graf graf--h3 graf-after--figure">從 Terminal 發送推播到模擬器</h3><p name="2cc3" id="2cc3" class="graf graf--p graf-after--h3">我們也可以透過指令從 Terminal 發送推播到模擬器。</p><pre name="3b98" id="3b98" class="graf graf--pre graf-after--p">xcrun simctl push 687C9BE0-8785-46D0-8F5F-BD49D0698FF3 push.apns</pre><figure name="bdca" id="bdca" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*PBTM9i2312gJt1e5dI43Ug.png" data-width="1780" data-height="224" src="https://cdn-images-1.medium.com/max/800/1*PBTM9i2312gJt1e5dI43Ug.png"></figure><p name="a0ce" id="a0ce" class="graf graf--p graf-after--figure">push.apns 是 apns 檔的檔名，687C9BE0–8785–46D0–8F5F-BD49D0698FF3 是模擬器的 id，查詢模擬器 id 的方法如下:</p><ul class="postList"><li name="dfb5" id="dfb5" class="graf graf--li graf-after--p">點選 Window &gt; Devices and Simulators。</li></ul><figure name="f460" id="f460" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*n0NdmeOsqGyf9wVrctNKjA.png" data-width="848" data-height="932" src="https://cdn-images-1.medium.com/max/800/1*n0NdmeOsqGyf9wVrctNKjA.png"></figure><ul class="postList"><li name="5b1f" id="5b1f" class="graf graf--li graf-after--figure">點選模擬器查詢它的 id，比方下圖 iPhone 12 的 id。</li></ul><figure name="dfcf" id="dfcf" class="graf graf--figure graf-after--li graf--trailing"><img class="graf-image" data-image-id="1*9iOpX_zY3NlbW_gputmewQ.png" data-width="2074" data-height="1392" src="https://cdn-images-1.medium.com/max/800/1*9iOpX_zY3NlbW_gputmewQ.png"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/c040f1c4d360"><time class="dt-published" datetime="2021-06-30T06:21:47.382Z">June 30, 2021</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%BE%9E%E6%A8%A1%E6%93%AC%E5%99%A8%E6%B8%AC%E8%A9%A6%E6%8E%A8%E6%92%AD-push-notification-c040f1c4d360" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>