<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>串接 Airtable的 API 開發 iOS App</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">串接 Airtable的 API 開發 iOS App</h1>
</header>
<section data-field="subtitle" class="p-summary">
在之前的文章，我們介紹了如何利用 Airtable 製作 iOS App 連結的後台資料，建立包含電影資料的表單。接下來我們將繼續介紹如何串接它的 API。
</section>
<section data-field="body" class="e-content">
<section name="4406" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="410d" id="410d" class="graf graf--h3 graf--leading graf--title">串接 Airtable的 API 開發 iOS App</h3><p name="9b36" id="9b36" class="graf graf--p graf-after--h3">在之前的文章，我們介紹了如何利用 Airtable 製作 iOS App 連結的後台資料，建立包含電影資料的表單。接下來我們將繼續介紹如何串接它的 API。</p><div name="467b" id="467b" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://apppeterpan.medium.com/%E5%88%A9%E7%94%A8-airtable-%E8%A3%BD%E4%BD%9C-ios-app-%E9%80%A3%E7%B5%90%E7%9A%84%E5%BE%8C%E5%8F%B0%E8%B3%87%E6%96%99-e22378536acb" data-href="https://apppeterpan.medium.com/%E5%88%A9%E7%94%A8-airtable-%E8%A3%BD%E4%BD%9C-ios-app-%E9%80%A3%E7%B5%90%E7%9A%84%E5%BE%8C%E5%8F%B0%E8%B3%87%E6%96%99-e22378536acb" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://apppeterpan.medium.com/%E5%88%A9%E7%94%A8-airtable-%E8%A3%BD%E4%BD%9C-ios-app-%E9%80%A3%E7%B5%90%E7%9A%84%E5%BE%8C%E5%8F%B0%E8%B3%87%E6%96%99-e22378536acb"><strong class="markup--strong markup--mixtapeEmbed-strong">利用 Airtable 製作 iOS App 連結的後台資料</strong><br><em class="markup--em markup--mixtapeEmbed-em">Airtable 擁有強大的資料表單功能，如下圖所示，美美的表格可以在瞬間完成，而且欄位裡可輸入多種類型的資料，比方文字，時間，圖片，多選的選項等都不是問題。</em>apppeterpan.medium.com</a><a href="https://apppeterpan.medium.com/%E5%88%A9%E7%94%A8-airtable-%E8%A3%BD%E4%BD%9C-ios-app-%E9%80%A3%E7%B5%90%E7%9A%84%E5%BE%8C%E5%8F%B0%E8%B3%87%E6%96%99-e22378536acb" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="3635451b46d0a35b885e5abf0d5e4e87" data-thumbnail-img-id="1*tEYm-sF-JzMnJfJCUrlTrQ.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*tEYm-sF-JzMnJfJCUrlTrQ.png);"></a></div><h3 name="6800" id="6800" class="graf graf--h3 graf-after--mixtapeEmbed">連到 Airtable 的 API 網頁</h3><p name="4f8f" id="4f8f" class="graf graf--p graf-after--h3"><a href="https://airtable.com/api" data-href="https://airtable.com/api" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://airtable.com/api</a></p><p name="e802" id="e802" class="graf graf--p graf-after--p">記得要先登入帳號，然後點選 Movie 查詢電影 API 的說明。</p><figure name="1a51" id="1a51" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*POydoxA9BzFJpE5--IsdnA.png" data-width="1526" data-height="1160" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*POydoxA9BzFJpE5--IsdnA.png"></figure><figure name="9c8b" id="9c8b" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*j3rydSynJ4m99X9gkOohfg.png" data-width="1536" data-height="1124" src="https://cdn-images-1.medium.com/max/800/1*j3rydSynJ4m99X9gkOohfg.png"></figure><h3 name="ef87" id="ef87" class="graf graf--h3 graf-after--figure">建立和複製 Personal access tokens</h3><p name="0f20" id="0f20" class="graf graf--p graf-after--h3">依據網頁的說明，為了串接 Airtable API，我們必須先取得 Personal access tokens。</p><figure name="ffcc" id="ffcc" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*jPT24PnUeVAN2SldEoK5iQ.png" data-width="2092" data-height="398" src="https://cdn-images-1.medium.com/max/800/1*jPT24PnUeVAN2SldEoK5iQ.png"></figure><div name="64e0" id="64e0" class="graf graf--mixtapeEmbed graf-after--figure"><a href="https://airtable.com/developers/web/guides/personal-access-tokens" data-href="https://airtable.com/developers/web/guides/personal-access-tokens" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://airtable.com/developers/web/guides/personal-access-tokens"><strong class="markup--strong markup--mixtapeEmbed-strong">Airtable | Everyone&#39;s app platform</strong><br><em class="markup--em markup--mixtapeEmbed-em">Airtable is a low-code platform for building collaborative apps. Customize your workflow, collaborate, and achieve…</em>airtable.com</a><a href="https://airtable.com/developers/web/guides/personal-access-tokens" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="35e8d73903823ae239a859c3421130d2" data-thumbnail-img-id="0*HFGiojx9EpjmNriS" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*HFGiojx9EpjmNriS);"></a></div><p name="1503" id="1503" class="graf graf--p graf-after--mixtapeEmbed">從以下連結建立 token。</p><div name="0a08" id="0a08" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://airtable.com/create/tokens" data-href="https://airtable.com/create/tokens" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://airtable.com/create/tokens"><strong class="markup--strong markup--mixtapeEmbed-strong">Airtable | Everyone&#39;s app platform</strong><br><em class="markup--em markup--mixtapeEmbed-em">Airtable is a low-code platform for building collaborative apps. Customize your workflow, collaborate, and achieve…</em>airtable.com</a><a href="https://airtable.com/create/tokens" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="f064e8de3cd431c98ef5ee1cffe04a7b" data-thumbnail-img-id="0*4rc3PWYQQkfHsxvt" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*4rc3PWYQQkfHsxvt);"></a></div><p name="5fc4" id="5fc4" class="graf graf--p graf-after--mixtapeEmbed">點選 Create token。</p><figure name="2e5e" id="2e5e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*DpAscrxZ4AbQTAu-MZUc3A.png" data-width="1364" data-height="590" src="https://cdn-images-1.medium.com/max/800/1*DpAscrxZ4AbQTAu-MZUc3A.png"></figure><p name="42e8" id="42e8" class="graf graf--p graf-after--figure">設定 token 的名字，權限和存取的資料。</p><figure name="be55" id="be55" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*7JAAam34BwgL1IsazraXWg.png" data-width="1542" data-height="916" src="https://cdn-images-1.medium.com/max/800/1*7JAAam34BwgL1IsazraXWg.png"></figure><p name="e93f" id="e93f" class="graf graf--p graf-after--figure">Scopes 加入 data.records:read 和 data.records:write。</p><figure name="3eee" id="3eee" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*azM_VoKR9T0r_Fuwd9qgwg.png" data-width="1428" data-height="376" src="https://cdn-images-1.medium.com/max/800/1*azM_VoKR9T0r_Fuwd9qgwg.png"></figure><p name="9faa" id="9faa" class="graf graf--p graf-after--figure">Access 加入 Movie。</p><figure name="e2b9" id="e2b9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*uGIvTCMTBqI9djLuNm024g.png" data-width="1426" data-height="332" src="https://cdn-images-1.medium.com/max/800/1*uGIvTCMTBqI9djLuNm024g.png"></figure><p name="84bf" id="84bf" class="graf graf--p graf-after--figure">點選 Create token。</p><figure name="beac" id="beac" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*j3qSl_APRu4znIAQo6FRuw.png" data-width="1250" data-height="1212" src="https://cdn-images-1.medium.com/max/800/1*j3qSl_APRu4znIAQo6FRuw.png"></figure><p name="688b" id="688b" class="graf graf--p graf-after--figure">複製 token。token 字串只會出現一次，所以記得要複製保存好，之後無法再看到完整 token 字串。</p><figure name="d29b" id="d29b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*e9z-Uus2wKdHm9vcJIhaMA.png" data-width="726" data-height="444" src="https://cdn-images-1.medium.com/max/800/1*e9z-Uus2wKdHm9vcJIhaMA.png"></figure><figure name="914f" id="914f" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*XCj9SJmpeQtNjWQvVNHULg.png" data-width="2302" data-height="366" src="https://cdn-images-1.medium.com/max/800/1*XCj9SJmpeQtNjWQvVNHULg.png"></figure><h3 name="4fd9" id="4fd9" class="graf graf--h3 graf-after--figure">API 的網址</h3><p name="2cb4" id="2cb4" class="graf graf--p graf-after--h3">從下圖的說明可知 API 的網址為</p><pre name="9a33" id="9a33" class="graf graf--pre graf-after--p">https://api.airtable.com/v0/appy8vQI5641oQxpJ/Movie</pre><figure name="6cd3" id="6cd3" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*O67gSmYyR4DKNNxHnFZSrQ.png" data-width="2270" data-height="304" src="https://cdn-images-1.medium.com/max/800/1*O67gSmYyR4DKNNxHnFZSrQ.png"></figure><p name="ecbe" id="ecbe" class="graf graf--p graf-after--figure">appy8vQI5641oQxpJ 是我們在 Airtable 上設定的 Movie base 的 id，/ 後接 Movie 表示我們想讀取其中的 Movie table，若有另一個 table，比方 Actor table，網址會變成 <a href="https://api.airtable.com/v0/appy8vQI5641oQxpJ/Actor" data-href="https://api.airtable.com/v0/appy8vQI5641oQxpJ/Actor" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://api.airtable.com/v0/appy8vQI5641oQxpJ/Actor</a>。</p><h3 name="3678" id="3678" class="graf graf--h3 graf-after--p">串接 API</h3><p name="600c" id="600c" class="graf graf--p graf-after--h3">curl 指令的說明如下。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="bash" name="37d5" id="37d5" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">curl https://api.airtable.com/v0/appy8vQI5641oQxpJ/Movie \<br />-H <span class="hljs-string">&quot;Authorization: Bearer YOUR_SECRET_API_TOKEN&quot;</span></span></pre><p name="192a" id="192a" class="graf graf--p graf-after--pre">因此我們必須在 http header 包含 token，格式如下</p><pre name="8322" id="8322" class="graf graf--pre graf-after--p">Authorization: Bearer YOUR_SECRET_API_TOKE</pre><p name="8779" id="8779" class="graf graf--p graf-after--pre">假設 token 是 1234abc，透過以下 swift 程式產生的 request 搭配 URLSession 即可抓取電影的 JSON 資料。(token 是假的，請換成自己帳號的 key)</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="350f" id="350f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://api.airtable.com/v0/appy8vQI5641oQxpJ/Movie&quot;</span>)<span class="hljs-operator">!</span><br /><span class="hljs-keyword">var</span> request <span class="hljs-operator">=</span> <span class="hljs-type">URLRequest</span>(url: url)<br />request.setValue(<span class="hljs-string">&quot;Bearer 1234abc&quot;</span>, forHTTPHeaderField: <span class="hljs-string">&quot;Authorization&quot;</span>)</span></pre><p name="307c" id="307c" class="graf graf--p graf-after--pre">從以下兩張圖可看出 API 回傳的 JSON 格式。</p><figure name="a935" id="a935" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*_ThbqzeutOP2AzfH8sbvyQ.png" data-width="922" data-height="908" src="https://cdn-images-1.medium.com/max/800/1*_ThbqzeutOP2AzfH8sbvyQ.png"></figure><p name="00b8" id="00b8" class="graf graf--p graf-after--figure">特別值得一提的是圖片的部分，Airtable 還貼心提供縮圖，包含了 thumbnails 欄位。</p><figure name="6b5f" id="6b5f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*OPg8Eavg6JJw1xCQfwkoCQ.png" data-width="752" data-height="938" src="https://cdn-images-1.medium.com/max/800/1*OPg8Eavg6JJw1xCQfwkoCQ.png"></figure><h3 name="126b" id="126b" class="graf graf--h3 graf-after--figure">資料的排序</h3><p name="24c3" id="24c3" class="graf graf--p graf-after--h3">Airtable API 提供豐富的參數讓我們調整，比方我們可以加入 sort 控制資料的排序。</p><figure name="8f7a" id="8f7a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*7r8jFo1Qo1sZu3d2VZk7jQ.png" data-width="1582" data-height="1208" src="https://cdn-images-1.medium.com/max/800/1*7r8jFo1Qo1sZu3d2VZk7jQ.png"></figure><p name="6263" id="6263" class="graf graf--p graf-after--figure">以 imdb 排序的網址如下。field 設定欄位名稱，<code class="markup--code markup--p-code">sort[][field]=imdb</code> 表示以欄位 imdb 的內容排序。direction 設定方向，desc 代表大到小，asc 代表小到大，因此 <code class="markup--code markup--p-code">sort[][field]=imdb&amp;sort[][direction]=desc</code> 表示以 imdb 排序，分數高的排在前面。</p><pre name="3dc9" id="3dc9" class="graf graf--pre graf-after--p">https://api.airtable.com/v0/appy8vQI5641oQxpJ/Movie?sort[][field]=imdb&amp;sort[][direction]=desc</pre><p name="94bb" id="94bb" class="graf graf--p graf-after--pre">若有多個排序的條件，則要在 [ ] 傳入數字，比方先比 imdb，再比上映日期。</p><pre name="04be" id="04be" class="graf graf--pre graf-after--p">https://api.airtable.com/v0/appy8vQI5641oQxpJ/Movie?sort[0][field]=imdb&amp;sort[0][direction]=desc&amp;sort[1][field]=releaseDate&amp;sort[1][direction]=desc</pre><h3 name="5e1e" id="5e1e" class="graf graf--h3 graf-after--pre">資料的搜尋</h3><p name="2c6c" id="2c6c" class="graf graf--p graf-after--h3">Airtable 也可進行簡易的資料搜尋，透過參數 filterByFormula。以下 API 將搜尋名字叫靈魂急轉彎的電影，{ } 裡的 name 代表欄位名稱， = 後的字串是內容，因此將搜尋 name 等於靈魂急轉彎的電影。</p><pre name="d505" id="d505" class="graf graf--pre graf-after--p"><a href="https://api.airtable.com/v0/appy8vQI5641oQxpJ/Movie?filterByFormula=%28%7Bname%7D" data-href="https://api.airtable.com/v0/appy8vQI5641oQxpJ/Movie?filterByFormula=({name}" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://api.airtable.com/v0/appy8vQI5641oQxpJ/Movie?filterByFormula=({name}</a> = &#39;靈魂急轉彎&#39;)</pre><p name="b342" id="b342" class="graf graf--p graf-after--pre">關於 filterByFormula 的輸入格式，更多的細節可參考以下連結。</p><div name="4916" id="4916" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://support.airtable.com/hc/en-us/articles/203255215-Formula-Field-Reference" data-href="https://support.airtable.com/hc/en-us/articles/203255215-Formula-Field-Reference" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://support.airtable.com/hc/en-us/articles/203255215-Formula-Field-Reference"><strong class="markup--strong markup--mixtapeEmbed-strong">Formula field reference</strong><br><em class="markup--em markup--mixtapeEmbed-em">Formulas may involve functions, numeric operations, logical operations, and text operations that operate on fields. For…</em>support.airtable.com</a><a href="https://support.airtable.com/hc/en-us/articles/203255215-Formula-Field-Reference" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="dddcbb4bdaeef0edf1f5e25d88ba97b7" data-thumbnail-img-id="0*xHmE1WrkTkA9luXv" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*xHmE1WrkTkA9luXv);"></a></div><h3 name="d605" id="d605" class="graf graf--h3 graf-after--mixtapeEmbed">資料的新增</h3><p name="8f89" id="8f89" class="graf graf--p graf-after--h3">研究文件裡關於 Create records 的說明 &amp; 右邊 curl 的範例。</p><figure name="283d" id="283d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*FNIJjdXDru7u0njXOS2vDg.png" data-width="1968" data-height="508" src="https://cdn-images-1.medium.com/max/800/1*FNIJjdXDru7u0njXOS2vDg.png"></figure><p name="2e5d" id="2e5d" class="graf graf--p graf-after--figure">若是 curl 裡沒有顯示上傳的 JSON 資料，請先在 AirTable 的表格輸入一筆資料，如此 curl 才會顯示上傳的資料。</p><p name="2f7f" id="2f7f" class="graf graf--p graf-after--p">值得注意的，雖然型別 Attachment 的欄位 image 可以加入圖片，但是我們不能直接上傳圖片，而要上傳檔案的 url。因此若想上傳圖片，請先將圖片傳到其它地方取得圖片網址，然後再將它上傳到 Airtable，比方透過 Imgur API 上傳圖片取得網址。</p><div name="e363" id="e363" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E7%9A%84%E5%9C%96%E7%89%87%E4%B8%8A%E5%82%B3-%E4%BB%A5-remove-bg-imgur-api-%E7%82%BA%E4%BE%8B-5b1214b86438" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E7%9A%84%E5%9C%96%E7%89%87%E4%B8%8A%E5%82%B3-%E4%BB%A5-remove-bg-imgur-api-%E7%82%BA%E4%BE%8B-5b1214b86438" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E7%9A%84%E5%9C%96%E7%89%87%E4%B8%8A%E5%82%B3-%E4%BB%A5-remove-bg-imgur-api-%E7%82%BA%E4%BE%8B-5b1214b86438"><strong class="markup--strong markup--mixtapeEmbed-strong">Swift iOS App 的圖片上傳，以 remove.bg &amp; Imgur API 為例</strong><br><em class="markup--em markup--mixtapeEmbed-em">網路上有很多幫助我們練習串接後台的第三方 API，不過如果想做到圖片上傳，相關的 API 就比較少了。彼得潘研究了一下，發現以下兩個 API 特別適合初學者練習圖片上傳的相關技術。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-ios-app-%E7%9A%84%E5%9C%96%E7%89%87%E4%B8%8A%E5%82%B3-%E4%BB%A5-remove-bg-imgur-api-%E7%82%BA%E4%BE%8B-5b1214b86438" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="f01fab6d043bb110f4b9c403e92d6512" data-thumbnail-img-id="1*3sWT7Krsjpo0P_5YlHjtTg.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*3sWT7Krsjpo0P_5YlHjtTg.jpeg);"></a></div><p name="ac13" id="ac13" class="graf graf--p graf-after--mixtapeEmbed">以下為資料上傳的程式範例</p><ul class="postList"><li name="94de" id="94de" class="graf graf--li graf-after--p">定義上傳的資料型別 &amp; 產生上傳的資料，準備上傳電影再見街貓BOB。(假設已取得圖片網址）</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="2138" id="2138" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MovieBody</span>: <span class="hljs-title class_">Encodable</span> {<br />    <span class="hljs-keyword">let</span> records: [<span class="hljs-type">Record</span>]<br /> <br />    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Record</span>: <span class="hljs-title class_">Encodable</span> {<br />        <br />        <span class="hljs-keyword">let</span> fields: <span class="hljs-type">Fields</span><br />    }<br />    <br />    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Fields</span>: <span class="hljs-title class_">Encodable</span> {<br />        <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span><br />        <span class="hljs-keyword">let</span> imdb: <span class="hljs-type">Double</span><br />        <span class="hljs-keyword">let</span> releaseDate: <span class="hljs-type">Date</span><br />        <span class="hljs-keyword">let</span> genre: [<span class="hljs-type">String</span>]<br />        <span class="hljs-keyword">let</span> image: [<span class="hljs-type">ImageData</span>]<br />    }<br />    <br />    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ImageData</span>: <span class="hljs-title class_">Encodable</span> {<br />        <span class="hljs-keyword">let</span> url: <span class="hljs-type">URL</span><br />    }<br />}<br /><br /><span class="hljs-keyword">let</span> date <span class="hljs-operator">=</span> <span class="hljs-type">DateComponents</span>(calendar: .current, year: <span class="hljs-number">2020</span>, month: <span class="hljs-number">12</span>, day: <span class="hljs-number">10</span>).date<span class="hljs-operator">!</span><br /><span class="hljs-keyword">let</span> movieBody <span class="hljs-operator">=</span> <span class="hljs-type">MovieBody</span>(records: [.<span class="hljs-keyword">init</span>(fields: .<span class="hljs-keyword">init</span>(name: <span class="hljs-string">&quot;再見街貓BOB&quot;</span>, imdb: <span class="hljs-number">6.4</span>, releaseDate: date, genre: [<span class="hljs-string">&quot;劇情&quot;</span>], image: [.<span class="hljs-keyword">init</span>(url: <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://movies.yahoo.com.tw/i/o/production/movies/November2020/2MiW3a75Wdooxhb4EmWq-800x1154.jpg&quot;</span>)<span class="hljs-operator">!</span>)]))])</span></pre><ul class="postList"><li name="f57d" id="f57d" class="graf graf--li graf-after--pre">產生 request，將資料編碼成 JSON 格式的 data 後存在 httpBody。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="9d74" id="9d74" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">&quot;https://api.airtable.com/v0/appy8vQI5641oQxpJ/Movie&quot;</span>)<span class="hljs-operator">!</span><br /><span class="hljs-keyword">var</span> request <span class="hljs-operator">=</span> <span class="hljs-type">URLRequest</span>(url: url)<br />request.setValue(<span class="hljs-string">&quot;Bearer 1234abc&quot;</span>, forHTTPHeaderField: <span class="hljs-string">&quot;Authorization&quot;</span>)<br />request.httpMethod <span class="hljs-operator">=</span> <span class="hljs-string">&quot;POST&quot;</span><br />request.setValue(<span class="hljs-string">&quot;application/json&quot;</span>, forHTTPHeaderField: <span class="hljs-string">&quot;Content-Type&quot;</span>)<br /><span class="hljs-keyword">let</span> encoder <span class="hljs-operator">=</span> <span class="hljs-type">JSONEncoder</span>()<br /><span class="hljs-keyword">let</span> formatter <span class="hljs-operator">=</span> <span class="hljs-type">DateFormatter</span>()<br />formatter.dateFormat <span class="hljs-operator">=</span> <span class="hljs-string">&quot;yyyy-MM-dd&quot;</span><br />encoder.dateEncodingStrategy <span class="hljs-operator">=</span> .formatted(formatter)<br />request.httpBody <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> encoder.encode(movieBody)</span></pre><ul class="postList"><li name="fd9f" id="fd9f" class="graf graf--li graf-after--pre">利用 URLSession 上傳。</li></ul><p name="18be" id="18be" class="graf graf--p graf-after--li">寫法 1: 利用 async/await。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="a776" id="a776" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">Task</span> {<br />        <span class="hljs-keyword">do</span> {<br />            <span class="hljs-keyword">let</span> (data, <span class="hljs-keyword">_</span>) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(for: request)<br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> content <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(data: data, encoding: .utf8) {<br />               <span class="hljs-built_in">print</span>(content)<br />            }<br />        } <span class="hljs-keyword">catch</span> {<br />            <span class="hljs-built_in">print</span>(error)<br />        }<br />}</span></pre><p name="c858" id="c858" class="graf graf--p graf-after--pre">寫法 2: 利用 completion handler。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="41aa" id="41aa" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-type">URLSession</span>.shared.dataTask(with: request) { data, response, error <span class="hljs-keyword">in</span><br />    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> data,<br />       <span class="hljs-keyword">let</span> content <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(data: data, encoding: .utf8) {<br />        <span class="hljs-built_in">print</span>(content)<br />    }<br />}.resume()</span></pre><p name="8be9" id="8be9" class="graf graf--p graf-after--pre">成功上傳後，Airtable 的 Movie table 新增一筆再見街貓BOB的電影。</p><figure name="2063" id="2063" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*6e_Tv4E25m8dxMTsi2NLiw.png" data-width="1714" data-height="420" src="https://cdn-images-1.medium.com/max/800/1*6e_Tv4E25m8dxMTsi2NLiw.png"></figure><h3 name="cb83" id="cb83" class="graf graf--h3 graf-after--figure">資料的修改和刪除</h3><p name="1683" id="1683" class="graf graf--p graf-after--h3">我們也可以修改和刪除資料，有興趣的朋友可進一步參考文件的說明。</p><figure name="4d07" id="4d07" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*JLt4pyF96uug6874g4vcwA.png" data-width="2790" data-height="1172" src="https://cdn-images-1.medium.com/max/800/1*JLt4pyF96uug6874g4vcwA.png"></figure><h3 name="1a55" id="1a55" class="graf graf--h3 graf-after--figure">串接 Airtable API 的參考範例</h3><p name="57b2" id="57b2" class="graf graf--p graf-after--h3">可參考以下串接 Reqres API 的說明和寫法。</p><div name="7e6a" id="7e6a" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-urlsession-%E4%B8%B2%E6%8E%A5-http-get-post-delete-put-api-%E4%BB%A5-reqres-api-%E7%82%BA%E4%BE%8B-f977ec876c33" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-urlsession-%E4%B8%B2%E6%8E%A5-http-get-post-delete-put-api-%E4%BB%A5-reqres-api-%E7%82%BA%E4%BE%8B-f977ec876c33" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-urlsession-%E4%B8%B2%E6%8E%A5-http-get-post-delete-put-api-%E4%BB%A5-reqres-api-%E7%82%BA%E4%BE%8B-f977ec876c33"><strong class="markup--strong markup--mixtapeEmbed-strong">使用 URLSession 串接 http get，post，delete，put API，以 Reqres API 為例</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，我們時常需要跟網路上的後台(server) 溝通。如下圖所示，我們的 App 是 client，它會發送 request 給 server，然後 server 再回傳 response，比方將 JSON…</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E4%BD%BF%E7%94%A8-urlsession-%E4%B8%B2%E6%8E%A5-http-get-post-delete-put-api-%E4%BB%A5-reqres-api-%E7%82%BA%E4%BE%8B-f977ec876c33" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="c08866f764f6d1421d0b51ece79be944" data-thumbnail-img-id="1*EgbnqUQogcCH136xyvdbbQ.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*EgbnqUQogcCH136xyvdbbQ.png);"></a></div><h3 name="bfe5" id="bfe5" class="graf graf--h3 graf-after--mixtapeEmbed">作業練習</h3><div name="9f1e" id="9f1e" class="graf graf--mixtapeEmbed graf-after--h3"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/135-%E5%88%A9%E7%94%A8-airtable-%E9%96%8B%E7%99%BC-ios-app-%E6%AF%94%E6%96%B9%E9%9B%BB%E5%BD%B1-app-db88fc3bf6c2" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/135-%E5%88%A9%E7%94%A8-airtable-%E9%96%8B%E7%99%BC-ios-app-%E6%AF%94%E6%96%B9%E9%9B%BB%E5%BD%B1-app-db88fc3bf6c2" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/135-%E5%88%A9%E7%94%A8-airtable-%E9%96%8B%E7%99%BC-ios-app-%E6%AF%94%E6%96%B9%E9%9B%BB%E5%BD%B1-app-db88fc3bf6c2"><strong class="markup--strong markup--mixtapeEmbed-strong">#135 利用 Airtable 開發 iOS App，比方電影 App</strong><br><em class="markup--em markup--mixtapeEmbed-em">開發 iOS App 時，我們通常會希望內容來自網路，這樣才不會為了資料更新而需要上架新版的 App。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84%E8%A9%A6%E7%85%89-%E5%8B%87%E8%80%85%E7%9A%84-100-%E9%81%93-swift-ios-app-%E8%AC%8E%E9%A1%8C/135-%E5%88%A9%E7%94%A8-airtable-%E9%96%8B%E7%99%BC-ios-app-%E6%AF%94%E6%96%B9%E9%9B%BB%E5%BD%B1-app-db88fc3bf6c2" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="b40dccebff12ecea15ceda6a3d55f51b" data-thumbnail-img-id="1*KY7ANeYIgBKzDvcfgHHcCw.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*KY7ANeYIgBKzDvcfgHHcCw.png);"></a></div><h3 name="f6d1" id="f6d1" class="graf graf--h3 graf-after--mixtapeEmbed">One more thing，關聯多個 table</h3><div name="65cc" id="65cc" class="graf graf--mixtapeEmbed graf-after--h3 graf--trailing"><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87-airtable-%E4%B8%8D%E5%90%8C%E7%9A%84-table-%E5%81%9A%E9%97%9C%E8%81%AF-a655637695aa" data-href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87-airtable-%E4%B8%8D%E5%90%8C%E7%9A%84-table-%E5%81%9A%E9%97%9C%E8%81%AF-a655637695aa" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87-airtable-%E4%B8%8D%E5%90%8C%E7%9A%84-table-%E5%81%9A%E9%97%9C%E8%81%AF-a655637695aa"><strong class="markup--strong markup--mixtapeEmbed-strong">將 AirTable 不同的 table 做關聯</strong><br><em class="markup--em markup--mixtapeEmbed-em">在之前的文章，我們介紹了如何利用 Airtable 製作 iOS App 連結的後台資料和串接 API。接下來讓我們繼續認識它另一個強大的功能，將不同的 table 做關聯。</em>medium.com</a><a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%B0%87-airtable-%E4%B8%8D%E5%90%8C%E7%9A%84-table-%E5%81%9A%E9%97%9C%E8%81%AF-a655637695aa" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="1f04d0bf736dfca2655ffdf690f2595e" data-thumbnail-img-id="1*FkxNExl8xXJL4V353vZg1Q.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*FkxNExl8xXJL4V353vZg1Q.png);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/5e5c86c8ca7d"><time class="dt-published" datetime="2020-12-19T08:59:10.198Z">December 19, 2020</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E4%B8%B2%E6%8E%A5-airtable%E7%9A%84-api-%E9%96%8B%E7%99%BC-ios-app-5e5c86c8ca7d" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>