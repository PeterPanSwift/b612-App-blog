<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>請 AI 撰寫/ 改寫 MVVM 架構的 UIKit iOS App</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">請 AI 撰寫/ 改寫 MVVM 架構的 UIKit iOS App</h1>
</header>
<section data-field="subtitle" class="p-summary">
學習開發 UIKit iOS App 時，初學者通常會從基本的 MVC 架構開始學起，等 MVC 熟練後再學習較複雜的 MVVM。
</section>
<section data-field="body" class="e-content">
<section name="4dfb" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="8cd9" id="8cd9" class="graf graf--h3 graf--leading graf--title">請 AI 撰寫/ 改寫 MVVM 架構的 UIKit iOS App</h3><p name="cb18" id="cb18" class="graf graf--p graf-after--h3">學習開發 UIKit iOS App 時，初學者通常會從基本的 MVC 架構開始學起，等 MVC 熟練後再學習較複雜的 MVVM。</p><p name="7f01" id="7f01" class="graf graf--p graf-after--p">網路上有許多優質的 MVVM 教學，不過通常都有點複雜。彼得潘想了一下，初學者學習時通常都寫過猜數字 App，若能將猜數字 App 變成 MVVM，應該會是個較容易理解的範例。</p><p name="9ef8" id="9ef8" class="graf graf--p graf-after--p">不過彼得潘想出門跟女友約會，懶得自己寫。沒關係，彼得潘有得力助手 AI 幫忙，接下來他們將表演撰寫/ 改寫 MVVM 架構的猜數字 App。他們的表現還不錯，都寫出功能大致 ok 的程式，而且還加上清楚的說明呢。</p><ul class="postList"><li name="7914" id="7914" class="graf graf--li graf-after--p">請用 UIKit 寫一個 MVVM 架構的猜數字 App — ChatGPT。</li><li name="bab4" id="bab4" class="graf graf--li graf-after--li">請用 UIKit 寫一個 MVVM 架構的猜數字 App — Notion AI。</li><li name="f28d" id="f28d" class="graf graf--li graf-after--li">請將程式改成 MVVM 架構 — ChatGPT o1-preview。</li><li name="6c44" id="6c44" class="graf graf--li graf-after--li">請將程式改成 MVVM 架構 — Zed Claude 3.5 Sonnet。</li></ul><figure name="ee2a" id="ee2a" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*4lI29rLrS_U4IwDLzAu1Gg.png" data-width="1136" data-height="122" src="https://cdn-images-1.medium.com/max/800/1*4lI29rLrS_U4IwDLzAu1Gg.png"></figure><h3 name="6f08" id="6f08" class="graf graf--h3 graf-after--figure">請用 UIKit 寫一個 MVVM 架構的猜數字 App — ChatGPT</h3><figure name="6fe3" id="6fe3" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*hmKtUw8ERadSuUbRanG4lw.png" data-width="1220" data-height="100" src="https://cdn-images-1.medium.com/max/800/1*hmKtUw8ERadSuUbRanG4lw.png"></figure><p name="c50e" id="c50e" class="graf graf--p graf-after--figure">以下是一個使用 UIKit 實現 MVVM 架構的猜數字 App 的示例：</p><p name="2333" id="2333" class="graf graf--p graf-after--p">首先，我們需要創建一個模型層（Model）來表示遊戲的狀態，並包含相關的邏輯。在這個猜數字的遊戲中，我們需要創建一個叫做 <code class="markup--code markup--p-code">GuessingGame</code> 的類別，如下所示：</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="9a61" id="9a61" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GuessingGame</span> {<br />    <span class="hljs-keyword">var</span> targetNumber: <span class="hljs-type">Int</span><br />    <span class="hljs-keyword">var</span> remainingGuesses: <span class="hljs-type">Int</span><br />    <span class="hljs-keyword">var</span> gameWon: <span class="hljs-type">Bool</span><br />    <span class="hljs-keyword">var</span> gameLost: <span class="hljs-type">Bool</span><br />    <br />    <span class="hljs-keyword">init</span>() {<br />        <span class="hljs-keyword">self</span>.targetNumber <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>.random(in: <span class="hljs-number">1</span><span class="hljs-operator">...</span><span class="hljs-number">100</span>)<br />        <span class="hljs-keyword">self</span>.remainingGuesses <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br />        <span class="hljs-keyword">self</span>.gameWon <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />        <span class="hljs-keyword">self</span>.gameLost <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />    }<br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">guess</span>(<span class="hljs-params">number</span>: <span class="hljs-type">Int</span>) {<br />        <span class="hljs-keyword">if</span> gameWon <span class="hljs-operator">||</span> gameLost {<br />            <span class="hljs-keyword">return</span><br />        }<br />        <br />        <span class="hljs-keyword">if</span> number <span class="hljs-operator">==</span> targetNumber {<br />            gameWon <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br />        } <span class="hljs-keyword">else</span> {<br />            remainingGuesses <span class="hljs-operator">-=</span> <span class="hljs-number">1</span><br />            <span class="hljs-keyword">if</span> remainingGuesses <span class="hljs-operator">==</span> <span class="hljs-number">0</span> {<br />                gameLost <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br />            }<br />        }<br />    }<br />}</span></pre><p name="4f61" id="4f61" class="graf graf--p graf-after--pre">這個 <code class="markup--code markup--p-code">GuessingGame</code> 類別包含了一個目標數字 <code class="markup--code markup--p-code">targetNumber</code>、剩餘猜測次數 <code class="markup--code markup--p-code">remainingGuesses</code>、遊戲是否贏了 <code class="markup--code markup--p-code">gameWon</code> 和遊戲是否輸了 <code class="markup--code markup--p-code">gameLost</code> 的狀態。在初始化時，我們會生成一個隨機的數字作為目標數字，然後設置剩餘猜測次數為 5，遊戲狀態為未贏未輸。</p><p name="f7b2" id="f7b2" class="graf graf--p graf-after--p">當用戶進行猜測時，我們會調用 <code class="markup--code markup--p-code">guess</code> 方法，該方法接受一個整數作為參數。如果遊戲已經贏了或輸了，那麼我們就不做任何事情。否則，我們會將剩餘猜測次數減 1，如果剩餘猜測次數為 0，則遊戲輸了；否則，如果猜測數字正確，則遊戲贏了。</p><p name="217d" id="217d" class="graf graf--p graf-after--p">接下來，我們需要創建一個視圖模型層（ViewModel）來協調模型和視圖之間的交互。在這個猜數字的遊戲中，我們需要創建一個叫做 <code class="markup--code markup--p-code">GuessingGameViewModel</code> 的類別，如下所示：</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="56f8" id="56f8" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GuessingGameViewModel</span> {<br />    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> game: <span class="hljs-type">GuessingGame</span><br />    <br />    <span class="hljs-keyword">var</span> remainingGuesses: <span class="hljs-type">String</span> {<br />        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;<span class="hljs-subst">\(game.remainingGuesses)</span> guesses left&quot;</span><br />    }<br />    <br />    <span class="hljs-keyword">var</span> gameResult: <span class="hljs-type">String</span>? {<br />        <span class="hljs-keyword">if</span> game.gameWon {<br />            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;You win!&quot;</span><br />        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> game.gameLost {<br />            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;You lose! The number was (game.targetNumber).&quot;</span><br />        } <span class="hljs-keyword">else</span> {<br />            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br />        }<br />    }<br />    <br />    <span class="hljs-keyword">init</span>(<span class="hljs-params">game</span>: <span class="hljs-type">GuessingGame</span>) {<br />        <span class="hljs-keyword">self</span>.game <span class="hljs-operator">=</span> game<br />    }<br />    <br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">guess</span>(<span class="hljs-params">number</span>: <span class="hljs-type">Int</span>) {<br />        game.guess(number: number)<br />    }<br />    <br />}</span></pre><p name="9f73" id="9f73" class="graf graf--p graf-after--pre">這個 `GuessingGameViewModel` 類別包含了一個 `GuessingGame` 對象，以及兩個計算屬性：`remainingGuesses` 和 `gameResult`。`remainingGuesses` 屬性返回剩餘猜測次數的字符串表示，`gameResult` 屬性返回遊戲結果的字符串表示，如果遊戲還沒有結束，則返回 nil。</p><p name="a205" id="a205" class="graf graf--p graf-after--p">在初始化時，我們需要傳入一個 `GuessingGame` 對象，並保存它。當用戶進行猜測時，我們只需要調用 `guess` 方法，然後由模型層來處理猜測的邏輯。</p><p name="a333" id="a333" class="graf graf--p graf-after--p">最後，我們需要創建一個視圖層（View）來顯示遊戲的狀態，並處理用戶的輸入。在這個猜數字的遊戲中，我們可以使用一個簡單的 ViewController 來實現視圖層，如下所示：</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="f608" id="f608" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GuessingGameViewController</span>: <span class="hljs-title class_">UIViewController</span> {<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> remainingGuessesLabel: <span class="hljs-type">UILabel</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> guessTextField: <span class="hljs-type">UITextField</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> resultLabel: <span class="hljs-type">UILabel</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> guessButton: <span class="hljs-type">UIButton</span>!<br />    <br />    <span class="hljs-keyword">var</span> viewModel: <span class="hljs-type">GuessingGameViewModel</span>!<br />    <br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {<br />        <span class="hljs-keyword">super</span>.viewDidLoad()<br />        <br />        <span class="hljs-comment">// 初始化 ViewModel</span><br />        <span class="hljs-keyword">let</span> game <span class="hljs-operator">=</span> <span class="hljs-type">GuessingGame</span>()<br />        viewModel <span class="hljs-operator">=</span> <span class="hljs-type">GuessingGameViewModel</span>(game: game)<br />        <br />        <span class="hljs-comment">// 設置界面元素</span><br />        remainingGuessesLabel.text <span class="hljs-operator">=</span> viewModel.remainingGuesses<br />        guessButton.isEnabled <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />        guessTextField.addTarget(<span class="hljs-keyword">self</span>, action: <span class="hljs-keyword">#selector</span>(guessTextFieldDidChange), for: .editingChanged)<br />    }<br />    <br />    <span class="hljs-keyword">@objc</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">guessTextFieldDidChange</span>() {<br />        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> text <span class="hljs-operator">=</span> guessTextField.text, <span class="hljs-keyword">let</span> number <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(text) {<br />            guessButton.isEnabled <span class="hljs-operator">=</span> (number <span class="hljs-operator">&gt;=</span> <span class="hljs-number">1</span> <span class="hljs-operator">&amp;&amp;</span> number <span class="hljs-operator">&lt;=</span> <span class="hljs-number">100</span>)<br />        } <span class="hljs-keyword">else</span> {<br />            guessButton.isEnabled <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />        }<br />    }<br />    <br />    <span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">guessButtonTapped</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-keyword">Any</span>) {<br />        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> text <span class="hljs-operator">=</span> guessTextField.text, <span class="hljs-keyword">let</span> number <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(text) {<br />            viewModel.guess(number: number)<br />            remainingGuessesLabel.text <span class="hljs-operator">=</span> viewModel.remainingGuesses<br />            resultLabel.text <span class="hljs-operator">=</span> viewModel.gameResult<br />            guessTextField.text <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span><br />            guessButton.isEnabled <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />        }<br />    }<br />}</span></pre><p name="69c8" id="69c8" class="graf graf--p graf-after--pre">在 <code class="markup--code markup--p-code">viewDidLoad</code> 方法中，我們初始化了一個 <code class="markup--code markup--p-code">GuessingGameViewModel</code> 對象，並設置了界面元素。<code class="markup--code markup--p-code">remainingGuessesLabel</code> 顯示剩餘猜測次數，<code class="markup--code markup--p-code">guessTextField</code> 是用戶輸入數字的文本框，<code class="markup--code markup--p-code">resultLabel</code> 顯示遊戲結果，<code class="markup--code markup--p-code">guessButton</code> 是用戶進行猜測的按鈕。由於用戶輸入數字時，我們需要實時檢查是否合法，因此我們在 <code class="markup--code markup--p-code">guessTextFieldDidChange</code> 方法中實現了這個功能。如果輸入的數字在合法範圍內（1 到 100），則啟用 <code class="markup--code markup--p-code">guessButton</code>，否則禁用它。</p><p name="fb33" id="fb33" class="graf graf--p graf-after--p">當用戶點擊 <code class="markup--code markup--p-code">guessButton</code> 時，我們調用了 <code class="markup--code markup--p-code">guess</code> 方法，然後更新界面元素顯示新的猜測結果。在更新界面元素時，我們使用了 <code class="markup--code markup--p-code">viewModel.remainingGuesses</code> 和 <code class="markup--code markup--p-code">viewModel.gameResult</code> 這兩個計算屬性。</p><p name="0884" id="0884" class="graf graf--p graf-after--p">最後，我們需要在 Main.storyboard 中設置 ViewController 的類型為 <code class="markup--code markup--p-code">GuessingGameViewController</code>，並將界面元素與 ViewController 的屬性進行連接。</p><p name="486a" id="486a" class="graf graf--p graf-after--p graf--trailing">綜上所述，我們使用了 UIKit 和 MVVM 架構來實現了一個簡單的猜數字遊戲。通過分離模型層和視圖層，我們可以更好地組織代碼，並且使得擴展和修改更加方便。</p></div></div></section><section name="1fd8" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="30cc" id="30cc" class="graf graf--p graf--leading">彼得潘幫以上程式加上 storyboard 畫面測試後，發現程式完全沒問題，一個基本 MVVM 架構的猜數字 App 就這樣完成了。</p><h3 name="75c2" id="75c2" class="graf graf--h3 graf-after--p">請用 UIKit 寫一個 MVVM 架構的猜數字 App — Notion AI</h3><figure name="4097" id="4097" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*zYXDkcyyzKvQw1WmLCQtPg.png" data-width="1458" data-height="108" src="https://cdn-images-1.medium.com/max/800/1*zYXDkcyyzKvQw1WmLCQtPg.png"></figure><p name="8587" id="8587" class="graf graf--p graf-after--figure">本篇文件將介紹如何使用 UIKit 實現 MVVM 架構設計的猜數字 App。</p><ul class="postList"><li name="49ee" id="49ee" class="graf graf--li graf-after--p">概述</li></ul><p name="83c8" id="83c8" class="graf graf--p graf-after--li">MVVM 是一種軟體架構設計模式，其目的是將 UI 邏輯和業務邏輯分離。MVVM 架構由三個主要部分組成：模型 (Model)、視圖模型 (ViewModel) 和視圖 (View)。</p><p name="0a93" id="0a93" class="graf graf--p graf-after--p">在猜數字 App 中，我們將使用 MVVM 架構將業務邏輯和 UI 邏輯分離，以提高應用程序的可維護性和可擴展性。</p><ul class="postList"><li name="e04b" id="e04b" class="graf graf--li graf-after--p">實現</li></ul><p name="6116" id="6116" class="graf graf--p graf-after--li">模型 (Model)</p><p name="8d29" id="8d29" class="graf graf--p graf-after--p">在本示例中，模型只有一個屬性：<code class="markup--code markup--p-code">secretNumber</code>，代表需要猜的數字。我們使用 <code class="markup--code markup--p-code">arc4random_uniform</code> 函數隨機生成一個 1-100 的整數作為 <code class="markup--code markup--p-code">secretNumber</code>。</p><pre data-code-block-mode="0" spellcheck="false" name="1e72" id="1e72" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">class Game {<br>    var secretNumber = Int(arc4random_uniform(100) + 1)<br>}</span></pre><p name="0131" id="0131" class="graf graf--p graf-after--pre">視圖模型 (ViewModel)</p><p name="94ca" id="94ca" class="graf graf--p graf-after--p">視圖模型負責協調視圖和模型之間的通信。在本示例中，視圖模型包含以下屬性：</p><ul class="postList"><li name="8cd0" id="8cd0" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code">game</code>：一個 <code class="markup--code markup--li-code">Game</code> 對象，代表遊戲的狀態。</li><li name="30a4" id="30a4" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">guess</code>：一個空的字串，用於存儲用戶猜測的數字。</li><li name="08b9" id="08b9" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">guessCount</code>：一個整數，代表用戶已經猜的次數。</li><li name="da00" id="da00" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">isGameEnded</code>：一個布爾值，表示遊戲是否結束。</li></ul><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="1b4e" id="1b4e" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GameViewModel</span> {<br />    <span class="hljs-keyword">var</span> game <span class="hljs-operator">=</span> <span class="hljs-type">Game</span>()<br />    <span class="hljs-keyword">var</span> guess <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />    <span class="hljs-keyword">var</span> guessCount <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <span class="hljs-keyword">var</span> isGameEnded <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />}</span></pre><p name="1d41" id="1d41" class="graf graf--p graf-after--pre">視圖模型還包含以下方法：</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="8089" id="8089" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">func</span> <span class="hljs-title function_">checkGuess</span>() {<br />    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> number <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(guess) {<br />        guessCount <span class="hljs-operator">+=</span> <span class="hljs-number">1</span><br />        <span class="hljs-keyword">if</span> number <span class="hljs-operator">==</span> game.secretNumber {<br />            isGameEnded <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br />        }<br />    }<br />}</span></pre><p name="2ce7" id="2ce7" class="graf graf--p graf-after--pre">視圖 (View)</p><p name="8e0b" id="8e0b" class="graf graf--p graf-after--p">視圖負責顯示用戶界面，並處理用戶的交互操作。在本示例中，我們使用一個 <code class="markup--code markup--p-code">UIViewController</code> 作為視圖，包含以下控件：</p><ul class="postList"><li name="80fc" id="80fc" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code">guessTextField</code>：一個 <code class="markup--code markup--li-code">UITextField</code>，用於輸入用戶猜測的數字。</li><li name="367d" id="367d" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">guessButton</code>：一個 <code class="markup--code markup--li-code">UIButton</code>，用於提交用戶猜測的數字。</li><li name="a2c0" id="a2c0" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">resultLabel</code>：一個 <code class="markup--code markup--li-code">UILabel</code>，用於顯示用戶猜測的結果。</li></ul><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="5c4e" id="5c4e" class="graf graf--pre graf-after--li graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GameViewController</span>: <span class="hljs-title class_">UIViewController</span> {<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> guessTextField: <span class="hljs-type">UITextField</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> guessButton: <span class="hljs-type">UIButton</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> resultLabel: <span class="hljs-type">UILabel</span>!<br /><br />    <span class="hljs-keyword">var</span> viewModel <span class="hljs-operator">=</span> <span class="hljs-type">GameViewModel</span>()<br /><br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {<br />        <span class="hljs-keyword">super</span>.viewDidLoad()<br />        <span class="hljs-comment">// Do any additional setup after loading the view.</span><br />    }<br /><br />    <span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">guessButtonTapped</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-keyword">Any</span>) {<br />        viewModel.guess <span class="hljs-operator">=</span> guessTextField.text <span class="hljs-operator">??</span> <span class="hljs-string">&quot;&quot;</span><br />        viewModel.checkGuess()<br />        updateUI()<br />    }<br /><br />    <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateUI</span>() {<br />        resultLabel.text <span class="hljs-operator">=</span> viewModel.isGameEnded <span class="hljs-operator">?</span> <span class="hljs-string">&quot;You win!&quot;</span> : <span class="hljs-string">&quot;Guess again!&quot;</span><br />    }<br />}</span></pre><ul class="postList"><li name="5eb3" id="5eb3" class="graf graf--li graf-after--pre">總結</li></ul><p name="d936" id="d936" class="graf graf--p graf-after--li graf--trailing">通過使用 MVVM 架構設計，我們成功地將業務邏輯和 UI 邏輯分離，從而提高了應用程序的可維護性和可擴展性。希望本篇文章能夠幫助你更好地理解 MVVM 架構設計模式的應用。</p></div></div></section><section name="23f6" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="63b4" id="63b4" class="graf graf--p graf--leading">彼得潘幫以上程式加上 storyboard 畫面測試後，發現程式完全沒問題，一個基本 MVVM 架構的猜數字 App 就這樣完成了。</p><h3 name="5651" id="5651" class="graf graf--h3 graf-after--p">請將程式改成 MVVM 架構</h3><p name="ea54" id="ea54" class="graf graf--p graf-after--h3">假設原本的猜數字程式如下。</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="0392" id="0392" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIViewController</span> {<br />    <br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> gameOverLabel: <span class="hljs-type">UILabel</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> guessWrongCountLabel: <span class="hljs-type">UILabel</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> resultLabel: <span class="hljs-type">UILabel</span>!<br />    <span class="hljs-keyword">@IBOutlet</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> numberTextField: <span class="hljs-type">UITextField</span>!<br />    <span class="hljs-keyword">var</span> answer <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>.random(in: <span class="hljs-number">1</span><span class="hljs-operator">...</span><span class="hljs-number">100</span>)<br />    <span class="hljs-keyword">var</span> guessWrongCount <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />    <br />    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {<br />        <span class="hljs-keyword">super</span>.viewDidLoad()<br />        <span class="hljs-comment">// Do any additional setup after loading the view.</span><br />    }<br />    <br />    <span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">guess</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-keyword">Any</span>) {<br /><br />        <span class="hljs-keyword">let</span> numberText <span class="hljs-operator">=</span> numberTextField.text<span class="hljs-operator">!</span><br />        <span class="hljs-keyword">let</span> number <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(numberText)<br />        <span class="hljs-keyword">if</span> number <span class="hljs-operator">!=</span> <span class="hljs-literal">nil</span> {<br />            <span class="hljs-keyword">let</span> guessNumber <span class="hljs-operator">=</span> number<span class="hljs-operator">!</span><br />            <span class="hljs-keyword">if</span> guessNumber <span class="hljs-operator">==</span> answer {<br />                resultLabel.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;準!&quot;</span><br />            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> guessNumber <span class="hljs-operator">&lt;</span> answer {<br />                resultLabel.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;太小了&quot;</span><br />                numberTextField.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />                guessWrongCount <span class="hljs-operator">+=</span> <span class="hljs-number">1</span><br />            } <span class="hljs-keyword">else</span> {<br />                resultLabel.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;太大了&quot;</span><br />                numberTextField.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />                guessWrongCount <span class="hljs-operator">+=</span> <span class="hljs-number">1</span><br />            }<br />        }<br />        guessWrongCountLabel.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;<span class="hljs-subst">\(guessWrongCount)</span>&quot;</span><br />        <span class="hljs-keyword">if</span> guessWrongCount <span class="hljs-operator">==</span> <span class="hljs-number">3</span> {<br />            gameOverLabel.isHidden <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br />        }<br />    }<br />    <br />    <br />    <span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">replay</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-keyword">Any</span>) {<br />        answer <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>.random(in: <span class="hljs-number">1</span><span class="hljs-operator">...</span><span class="hljs-number">100</span>)<br />        numberTextField.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span><br />        resultLabel.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;?&quot;</span><br />        guessWrongCount <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br />        guessWrongCountLabel.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;<span class="hljs-subst">\(guessWrongCount)</span>&quot;</span><br />        gameOverLabel.isHidden <span class="hljs-operator">=</span> <span class="hljs-literal">true</span> <br />    }<br />}<br /><br /></span></pre><h4 name="e4f1" id="e4f1" class="graf graf--h4 graf-after--pre">ChatGPT o1-preview</h4><figure name="c543" id="c543" class="graf graf--figure graf--iframe graf-after--h4"><script src="https://gist.github.com/PeterPanSwift/6b557a03938db1e2ca23d713bf6793cc.js"></script></figure><h4 name="1ba6" id="1ba6" class="graf graf--h4 graf-after--figure">Zed Claude 3.5 Sonnet</h4><figure name="49ef" id="49ef" class="graf graf--figure graf--iframe graf-after--h4 graf--trailing"><script src="https://gist.github.com/PeterPanSwift/8bfc5842cb93d37a1bc9d3df6f584a5f.js"></script></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/377172e7b89c"><time class="dt-published" datetime="2023-03-04T10:51:48.820Z">March 4, 2023</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E8%AB%8B-chatgpt-notion-ai-%E6%92%B0%E5%AF%AB-%E6%94%B9%E5%AF%AB-mvvm-%E6%9E%B6%E6%A7%8B%E7%9A%84-uikit-ios-app-377172e7b89c" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>