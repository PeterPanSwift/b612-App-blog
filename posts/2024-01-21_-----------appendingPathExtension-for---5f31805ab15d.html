<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>自動檢查重複附檔名的 appendingPathExtension(for:)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">自動檢查重複附檔名的 appendingPathExtension(for:)</h1>
</header>
<section data-field="subtitle" class="p-summary">
最近有同學跟彼得潘提到一個特別貼心的功能，他發現 appendingPathExtension(for:) 竟然會檢查是否有重複的附檔名。
</section>
<section data-field="body" class="e-content">
<section name="8fd9" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="becb" id="becb" class="graf graf--h3 graf--leading graf--title">自動檢查重複附檔名的 appendingPathExtension(for:)</h3><figure name="ec3f" id="ec3f" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*q6B9b0Lx2bXOfCX7kScktA.png" data-width="1214" data-height="385" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*q6B9b0Lx2bXOfCX7kScktA.png"></figure><p name="c250" id="c250" class="graf graf--p graf-after--figure">最近有同學跟彼得潘提到一個特別貼心的功能，他發現 <code class="markup--code markup--p-code">appendingPathExtension(for:)</code> 竟然會檢查是否有重複的附檔名。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="ded6" id="ded6" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;pic.png&quot;</span><br /><span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>.documentsDirectory.appending(path: name).appendingPathExtension(for: .png)</span></pre><p name="6de5" id="6de5" class="graf graf--p graf-after--pre">比方以上程式產生的 URL 如下，檔名會聰明的判斷應該是 pic.png，不會傻傻地變成 pic.png.png。</p><pre data-code-block-mode="0" spellcheck="false" name="cf1a" id="cf1a" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">file:///Users/shih-yingpan/Library/Developer/Xcode/UserData/Previews/Simulator%20Devices/16AA51A8-0799-4E14-9F82-109B036ACFCD/data/Containers/Data/Application/C6D1866C-3BF7-4AE2-B5A9-060A67AF4172/Documents/pic.png</span></pre><p name="712d" id="712d" class="graf graf--p graf-after--pre">若是使用 appendingPathExtension(_:) 則會變成 pic.png.png。</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="swift" name="34da" id="34da" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">let</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;pic.png&quot;</span><br /><span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>.documentsDirectory.appending(path: name).appendingPathExtension(<span class="hljs-string">&quot;png&quot;</span>)</span></pre><p name="b2cc" id="b2cc" class="graf graf--p graf-after--pre">仔細查了一下 appendingPathExtension(for:) 的文件後，發現原來 Apple 早在文件裡描述如此貼心的功能。</p><p name="d993" id="d993" class="graf graf--p graf-after--p">If partialName already has a path extension, and that path extension is valid for file system objects of type contentType, the function doesn’t add an extension before appending it to the URL. For example, if the inputs are puppy.jpg and jpeg, respectively, the function returns a URL with an appended path component of puppy.jpg. However, if the inputs are puppy.jpg and plainText, respectively, the function returns a URL with an appended path component of puppy.jpg.txt. If you want to replace any existing path extension, use the deletePathExtension() method first.</p><div name="3d38" id="3d38" class="graf graf--mixtapeEmbed graf-after--p graf--trailing"><a href="https://developer.apple.com/documentation/foundation/url/3585030-appendingpathextension" data-href="https://developer.apple.com/documentation/foundation/url/3585030-appendingpathextension" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://developer.apple.com/documentation/foundation/url/3585030-appendingpathextension"><strong class="markup--strong markup--mixtapeEmbed-strong">appendingPathExtension(for:) | Apple Developer Documentation</strong><br><em class="markup--em markup--mixtapeEmbed-em">Returns a URL by appending the preferred path extension for the type you specify to the URL&#39;s last path component.</em>developer.apple.com</a><a href="https://developer.apple.com/documentation/foundation/url/3585030-appendingpathextension" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="b0d6e6bfbe9f3d8f76a31fc0db884bb7"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/5f31805ab15d"><time class="dt-published" datetime="2024-01-21T13:04:29.502Z">January 21, 2024</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E8%87%AA%E5%8B%95%E6%AA%A2%E6%9F%A5%E9%87%8D%E8%A4%87%E9%99%84%E6%AA%94%E5%90%8D%E7%9A%84-appendingpathextension-for-5f31805ab15d" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 17, 2025.</p></footer></article></body></html>