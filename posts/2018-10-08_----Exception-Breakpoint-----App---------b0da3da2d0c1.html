<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>利用  Exception Breakpoint 找出讓 App  閃退的程式碼</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">利用  Exception Breakpoint 找出讓 App  閃退的程式碼</h1>
</header>
<section data-field="subtitle" class="p-summary">
開發 Swift  iOS App 時，遇到 App 閃退死掉是常有的事，畢竟古人都告訴我們，人生不如意事十之八九。
</section>
<section data-field="body" class="e-content">
<section name="a898" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="725c" id="725c" class="graf graf--h3 graf--leading graf--title">利用 Exception Breakpoint 找出讓 App 閃退的程式碼</h3><p name="1654" id="1654" class="graf graf--p graf-after--h3">開發 Swift iOS App 時，遇到 App 閃退死掉是常有的事，畢竟古人都告訴我們，人生不如意事十之八九。</p><p name="92c1" id="92c1" class="graf graf--p graf-after--p">App 閃退其實沒關係，如果它能告訴我們為什麼死，讓我們進一步修正解決問題，反而是好事。但它卻偏偏常常死掉時停在 <code class="markup--code markup--p-code">class AppDelegate: UIResponder, UIApplicationDelegate</code>，我們就算盯著它一萬年也看不出問題。</p><figure name="fc2d" id="fc2d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*8C2Fv5rQRko2IZxhwg6TmQ.jpeg" data-width="1514" data-height="732" src="https://cdn-images-1.medium.com/max/800/1*8C2Fv5rQRko2IZxhwg6TmQ.jpeg"></figure><p name="af9f" id="af9f" class="graf graf--p graf-after--figure">其實 App 會死掉往往是因為發生了某種 App 無法處理的例外(exception) ，它不知該如何處理，所以只能絕望地死掉。</p><p name="13e2" id="13e2" class="graf graf--p graf-after--p">因此，我們可以切換到 Xcode 的 Breakpoint navigator，點選左下角的 + 後，點擊 Exception Breakpoint，讓程式中斷在產生例外的那行程式碼。</p><figure name="89ba" id="89ba" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HCKLaglBjcrzJYLMdNlNLA.jpeg" data-width="548" data-height="138" src="https://cdn-images-1.medium.com/max/800/1*HCKLaglBjcrzJYLMdNlNLA.jpeg"></figure><figure name="adb9" id="adb9" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*hZlpSdaJIzml8Bi4ybSz-Q.jpeg" data-width="540" data-height="330" src="https://cdn-images-1.medium.com/max/800/1*hZlpSdaJIzml8Bi4ybSz-Q.jpeg"></figure><p name="3d9b" id="3d9b" class="graf graf--p graf-after--figure">將 Exception 改成 All，一網打盡所有的例外。</p><figure name="d765" id="d765" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*UKhoy6Sgbe-B-1D2LJs-oA.jpeg" data-width="990" data-height="464" src="https://cdn-images-1.medium.com/max/800/1*UKhoy6Sgbe-B-1D2LJs-oA.jpeg"></figure><p name="c7ef" id="c7ef" class="graf graf--p graf-after--figure">此時將產生 All Exceptions 的中斷點，當任何例外發生時，程式都會中斷。我們還可針對中斷點做進一步的調整，不過我們暫且不做任何調整，目前它已能幫我們找到出問題的程式碼。</p><p name="1844" id="1844" class="graf graf--p graf-after--p">如圖所示，加入 Exception Breakpoint 後，App 閃退時程式停在 performSegue 的程式碼。由於我們呼叫 performSegue 時傳入不存在的 segue id，所以造成 App 閃退。</p><figure name="2ef1" id="2ef1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*0ilsO5FlHC6UVKgG0lDwWw.jpeg" data-width="1578" data-height="278" src="https://cdn-images-1.medium.com/max/800/1*0ilsO5FlHC6UVKgG0lDwWw.jpeg"></figure><p name="7206" id="7206" class="graf graf--p graf-after--figure">我們現在可以更容易找到出問題的程式，但我們卻不見得知道原因。沒關係，只要另外設定 Breakpoint 的 Action，加入指令 po $arg1，即可讓它印出閃退的原因。</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="82fa" id="82fa" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 40.645%;"><img class="graf-image" data-image-id="1*mwq8SdgLXtB2VYc8_zPtZg.jpeg" data-width="428" data-height="228" src="https://cdn-images-1.medium.com/max/600/1*mwq8SdgLXtB2VYc8_zPtZg.jpeg"></figure><figure name="5743" id="5743" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 59.355%;"><img class="graf-image" data-image-id="1*6tAFkuEXSSkBn1hj0k85Dg.png" data-width="466" data-height="170" src="https://cdn-images-1.medium.com/max/800/1*6tAFkuEXSSkBn1hj0k85Dg.png"><figcaption class="imageCaption" style="width: 168.478%; left: -68.478%;">點選 Add Action，加入 po $arg1</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="6915" id="6915" class="graf graf--p graf-after--figure">我們隨時都能修改 Breakpoint 的設定，只要點選中斷點，從右鍵選單選擇 Edit Breakpoint。</p><figure name="f019" id="f019" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*6e1O_qE3611l_GAq8itjSw.jpeg" data-width="826" data-height="428" src="https://cdn-images-1.medium.com/max/800/1*6e1O_qE3611l_GAq8itjSw.jpeg"></figure><p name="4f98" id="4f98" class="graf graf--p graf-after--figure">再次執行 App，現在當 App 死掉時，從右下角的 Console 即可看到錯誤訊息。</p><figure name="ee8a" id="ee8a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Amb9anNNx3iDB3aZebnbuA.jpeg" data-width="1640" data-height="696" src="https://cdn-images-1.medium.com/max/800/1*Amb9anNNx3iDB3aZebnbuA.jpeg"></figure><pre name="0b77" id="0b77" class="graf graf--pre graf-after--figure">Receiver (&lt;Demo.ViewController: 0x7fd92c508590&gt;) has no segue with identifier &#39;login&#39;</pre><p name="4df4" id="4df4" class="graf graf--p graf-after--pre">果然，錯誤訊息明白地告訴我們，找不到名叫 login 的 segue。</p><p name="1bdd" id="1bdd" class="graf graf--p graf-after--p">利用此方法我們將更容易找到程式出錯的地方，但為了在房租很貴的台北生活，我們常常同時間開發好幾個 App，製做好幾個專案。此時有個小問題，每個專案需要個別設定 Exception Breakpoint，有點麻煩。</p><p name="2d9a" id="2d9a" class="graf graf--p graf-after--p">其實有個小技巧，只要點選 All Exceptions，從右鍵選單點選 Move Breakpoint to &gt; User，即可讓所有專案都打開 Exception Breakpoint。</p><figure name="0d55" id="0d55" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*8wMxLJYsbBEBWoZ6kZocAQ.jpeg" data-width="1164" data-height="468" src="https://cdn-images-1.medium.com/max/800/1*8wMxLJYsbBEBWoZ6kZocAQ.jpeg"></figure><p name="e9ef" id="e9ef" class="graf graf--p graf-after--figure">所有的專案預設都加入 All Exceptions。</p><figure name="8482" id="8482" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*KFrx93slpcpFUaGJ34TgwQ.jpeg" data-width="538" data-height="248" src="https://cdn-images-1.medium.com/max/800/1*KFrx93slpcpFUaGJ34TgwQ.jpeg"></figure><p name="ecdb" id="ecdb" class="graf graf--p graf-after--figure">關於 Exception Breakpoint，還有一兩個要注意的小地方:</p><ol class="postList"><li name="bea2" id="bea2" class="graf graf--li graf-after--p">有些閃退預設就能偵測，不用打開 Exception Breakpoint，比方讀取 array 內容時，傳入超過範圍的數字。</li></ol><figure name="1de3" id="1de3" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*f4ur1bTknoFcQvLW0pDBZQ.jpeg" data-width="1300" data-height="380" src="https://cdn-images-1.medium.com/max/800/1*f4ur1bTknoFcQvLW0pDBZQ.jpeg"></figure><p name="07a9" id="07a9" class="graf graf--p graf-after--figure graf--trailing">2 Exception Breakpoint 並非萬能， 有些特別的錯誤還是會停在 <code class="markup--code markup--p-code">class AppDelegate: UIResponder, UIApplicationDelegate</code>。</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/b0da3da2d0c1"><time class="dt-published" datetime="2018-10-08T08:32:27.800Z">October 8, 2018</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%88%A9%E7%94%A8-exception-breakpoint-%E6%89%BE%E5%87%BA%E8%AE%93-app-%E9%96%83%E9%80%80%E7%9A%84%E7%A8%8B%E5%BC%8F%E7%A2%BC-b0da3da2d0c1" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>