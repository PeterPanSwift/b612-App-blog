<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>從 Firebase console 發送推播</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">從 Firebase console 發送推播</h1>
</header>
<section data-field="subtitle" class="p-summary">
發送推播給安裝 App 的所有使用者
</section>
<section data-field="body" class="e-content">
<section name="9750" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="5932" id="5932" class="graf graf--h3 graf--leading graf--title">從 Firebase console 發送推播</h3><h3 name="dc7a" id="dc7a" class="graf graf--h3 graf-after--h3">發送推播給安裝 App 的所有使用者</h3><h4 name="123b" id="123b" class="graf graf--h4 graf-after--h3">連到 Firebase 的專案頁面，點選 Engage 下的 Cloud Messaging</h4><figure name="56ad" id="56ad" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*12flDcKOPbRs4BLYZWSELQ.png" data-width="1474" data-height="1002" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*12flDcKOPbRs4BLYZWSELQ.png"></figure><h4 name="d02b" id="d02b" class="graf graf--h4 graf-after--figure">點選 Send your first message 或 New notification</h4><p name="e6f9" id="e6f9" class="graf graf--p graf-after--h4">第一次發送時選擇 Send your first message。</p><figure name="cf67" id="cf67" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*SZi67n-MkOiQ-RViV1DKIA.png" data-width="870" data-height="466" src="https://cdn-images-1.medium.com/max/800/1*SZi67n-MkOiQ-RViV1DKIA.png"></figure><p name="1dfa" id="1dfa" class="graf graf--p graf-after--figure">之後則選擇 New notification。</p><figure name="14ea" id="14ea" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*wt6wXWktjyZYwuB_hdkKQg.png" data-width="1962" data-height="642" src="https://cdn-images-1.medium.com/max/800/1*wt6wXWktjyZYwuB_hdkKQg.png"></figure><h4 name="3138" id="3138" class="graf graf--h4 graf-after--figure">設定推播的內容</h4><figure name="c0de" id="c0de" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*c1C9fEUw1z0JeC-2iE6t_w.png" data-width="1852" data-height="1222" src="https://cdn-images-1.medium.com/max/800/1*c1C9fEUw1z0JeC-2iE6t_w.png"></figure><h4 name="f089" id="f089" class="graf graf--h4 graf-after--figure">設定發送推播給安裝 App 的所有使用者</h4><p name="5e04" id="5e04" class="graf graf--p graf-after--h4">點選 User segment，選擇收到推播的 App。</p><figure name="fda3" id="fda3" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*TSDXhxilDJ_lLtg_670hxg.png" data-width="1552" data-height="536" src="https://cdn-images-1.medium.com/max/800/1*TSDXhxilDJ_lLtg_670hxg.png"></figure><h4 name="639c" id="639c" class="graf graf--h4 graf-after--figure">點選 Review</h4><figure name="8e17" id="8e17" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*usY9CYATEPDq06TgXIaeWw.png" data-width="518" data-height="198" src="https://cdn-images-1.medium.com/max/800/1*usY9CYATEPDq06TgXIaeWw.png"></figure><h4 name="b048" id="b048" class="graf graf--h4 graf-after--figure">點選 Publish 發送推播</h4><figure name="a550" id="a550" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*eOvb9OqSB4auUsrnyxRPLA.png" data-width="1078" data-height="618" src="https://cdn-images-1.medium.com/max/800/1*eOvb9OqSB4auUsrnyxRPLA.png"></figure><figure name="8475" id="8475" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*Ot3-vEGqRg1alIxNY2TfVw.png" data-width="1966" data-height="632" src="https://cdn-images-1.medium.com/max/800/1*Ot3-vEGqRg1alIxNY2TfVw.png"></figure><p name="0bf8" id="0bf8" class="graf graf--p graf-after--figure">App 成功收到推播。</p><figure name="e9df" id="e9df" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*YyZAdCdnLmeifexWm34QIQ.png" data-width="650" data-height="122" src="https://cdn-images-1.medium.com/max/800/1*YyZAdCdnLmeifexWm34QIQ.png"></figure><h3 name="9765" id="9765" class="graf graf--h3 graf-after--figure">發送推播給指定的使用者</h3><h4 name="ef37" id="ef37" class="graf graf--h4 graf-after--h3">填寫推播內容後，點選 Send test message</h4><figure name="9ed0" id="9ed0" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*mz9CevkRlvcz3lljw4j1Wg.png" data-width="1542" data-height="1282" src="https://cdn-images-1.medium.com/max/800/1*mz9CevkRlvcz3lljw4j1Wg.png"></figure><h4 name="14a7" id="14a7" class="graf graf--h4 graf-after--figure">加入 registration token 後點選 Test 發送</h4><p name="ddca" id="ddca" class="graf graf--p graf-after--h4">每個安裝 App 的使用者會有專屬的 registration token，我們可透過 registration token 傳送推播給指定的使用者。在此也可加入多個 token，傳送推播給多個使用者。(ps: 使用者的 registration token 可透過 func messaging(_ messaging: Messaging, didReceiveRegistrationToken fcmToken: String?) 取得)</p><figure name="2a25" id="2a25" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*g4iqlRqeqmhtdgSKpF8Bzw.png" data-width="1192" data-height="644" src="https://cdn-images-1.medium.com/max/800/1*g4iqlRqeqmhtdgSKpF8Bzw.png"></figure><figure name="a3a7" id="a3a7" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*5WDXVHJnnxrMe4g9pwELJQ.png" data-width="1306" data-height="704" src="https://cdn-images-1.medium.com/max/800/1*5WDXVHJnnxrMe4g9pwELJQ.png"></figure><p name="c5a7" id="c5a7" class="graf graf--p graf-after--figure">App 成功收到推播。</p><figure name="8403" id="8403" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*kIHp3eKdS7PMp8EBWi3fwQ.png" data-width="650" data-height="114" src="https://cdn-images-1.medium.com/max/800/1*kIHp3eKdS7PMp8EBWi3fwQ.png"></figure><h3 name="86e1" id="86e1" class="graf graf--h3 graf-after--figure">發送推播時設定聲音，Badge 和自訂的 JSON 資料</h3><p name="d042" id="d042" class="graf graf--p graf-after--h3">設定 Custom Data，Sound 和 Badge。透過 Custom Data 我們可傳送自訂的 JSON 資料給 App，使用者看不到這些資訊，但是 App 可依據這些資料做對應的處理。</p><p name="26a4" id="26a4" class="graf graf--p graf-after--p">比方我們加入欄位 url，想要使用者點選推播時顯示網頁。</p><figure name="13d1" id="13d1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*oo88Vbt4xUVxfm3RscwmhQ.png" data-width="1558" data-height="1128" src="https://cdn-images-1.medium.com/max/800/1*oo88Vbt4xUVxfm3RscwmhQ.png"></figure><p name="2dc9" id="2dc9" class="graf graf--p graf-after--figure">使用者點選推播時將觸發 function userNotificationCenter(_:didReceive:withCompletionHandler:)，從參數 response 的 notification.request.content 可取得推播的內容，從 content 的 userInfo 可讀取 JSON 的內容。</p><pre name="c7fb" id="c7fb" class="graf graf--pre graf-after--p">extension AppDelegate: UNUserNotificationCenterDelegate {<br>    // 當 App 在背景或是尚未啟動，使用者點選推播打開 App 時觸發<br>    func userNotificationCenter(_ center: UNUserNotificationCenter, didReceive response: UNNotificationResponse, withCompletionHandler completionHandler: <a href="http://twitter.com/escaping" data-href="http://twitter.com/escaping" class="markup--anchor markup--pre-anchor" title="Twitter profile for @escaping" rel="noopener" target="_blank">@escaping</a> () -&gt; Void) {<br>        print(#function)<br>        let content = response.notification.request.content<br>        print(content.title)<br>        print(content.userInfo[&quot;url&quot;])<br>        print(content.userInfo)<br>        completionHandler()<br>    }</pre><p name="e84a" id="e84a" class="graf graf--p graf-after--pre">點選推播後列印的訊息如下。</p><pre name="f980" id="f980" class="graf graf--pre graf-after--p">好想你<br>Optional(<a href="https://apppeterpan.medium.com" data-href="https://apppeterpan.medium.com" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://apppeterpan.medium.com</a>)<br>[AnyHashable(&quot;google.c.a.c_l&quot;): 好想你, AnyHashable(&quot;gcm.notification.sound2&quot;): default, AnyHashable(&quot;aps&quot;): {<br>    alert =     {<br>        body = &quot;\U597d\U60f3\U4f60&quot;;<br>        title = &quot;\U597d\U60f3\U4f60&quot;;<br>    };<br>    badge = 1;<br>    &quot;mutable-content&quot; = 1;<br>    sound = default;<br>}, AnyHashable(&quot;gcm.message_id&quot;): 1627281650556180, AnyHashable(&quot;google.c.sender.id&quot;): 562015334581, AnyHashable(&quot;url&quot;): <a href="https://apppeterpan.medium.com" data-href="https://apppeterpan.medium.com" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://apppeterpan.medium.com</a>, AnyHashable(&quot;google.c.a.c_id&quot;): 3709430511229476695, AnyHashable(&quot;google.c.a.e&quot;): 1, AnyHashable(&quot;gcm.n.e&quot;): 1, AnyHashable(&quot;google.c.a.ts&quot;): 1627281629, AnyHashable(&quot;google.c.a.udt&quot;): 0]</pre><h3 name="52f7" id="52f7" class="graf graf--h3 graf-after--pre">發送推播給多個裝置</h3><p name="8671" id="8671" class="graf graf--p graf-after--h3">除了發送推播給所有人跟指定的使用者，有時我們會想發送推播給某一群人，比方發送推播給電影 App 裡喜歡恐怖片的使用者。</p><p name="8b5b" id="8b5b" class="graf graf--p graf-after--p">針對發送推播給多個裝置的需求，FCM 提供 Topic messaging &amp; Device group messaging 兩種做法，以下我們示範 Topic 的做法。</p><ul class="postList"><li name="48b5" id="48b5" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">iOS App 程式</strong></li></ul><p name="dc81" id="dc81" class="graf graf--p graf-after--li">呼叫 Message 的 subscribe 訂閱某個主題，之後可收到此主題的推播。</p><pre name="ae93" id="ae93" class="graf graf--pre graf-after--p">import UIKit<br>import FirebaseMessaging</pre><pre name="5622" id="5622" class="graf graf--pre graf-after--pre">class ViewController: UIViewController {<br>    <br>    <a href="http://twitter.com/IBAction" data-href="http://twitter.com/IBAction" class="markup--anchor markup--pre-anchor" title="Twitter profile for @IBAction" rel="noopener" target="_blank">@IBAction</a> func tap(_ sender: Any) {<br>        Messaging.messaging().subscribe(toTopic: &quot;horrorMovie&quot;) { error in<br>            print(error)<br>        }<br>    }</pre><ul class="postList"><li name="18ae" id="18ae" class="graf graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">發送推播時指定主題</strong></li></ul><p name="2781" id="2781" class="graf graf--p graf-after--li">從 Target 的 Topic 分頁輸入主題的名字，發送推播給訂閱此主題的使用者。</p><figure name="9f0a" id="9f0a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*1JDfspzlFClSyofuUDgeQw.png" data-width="784" data-height="444" src="https://cdn-images-1.medium.com/max/800/1*1JDfspzlFClSyofuUDgeQw.png"></figure><h3 name="7bd4" id="7bd4" class="graf graf--h3 graf-after--figure">One more thing，從 Postman 或 curl 發送推播</h3><p name="dc49" id="dc49" class="graf graf--p graf-after--h3">我們也可以從 Postman 或 curl 通知 FCM 發送推播，相關說明可參考以下連結。</p><div name="b5b4" id="b5b4" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://apoorv487.medium.com/testing-fcm-push-notification-http-v1-through-oauth-2-0-playground-postman-terminal-part-2-7d7a6a0e2fa0" data-href="https://apoorv487.medium.com/testing-fcm-push-notification-http-v1-through-oauth-2-0-playground-postman-terminal-part-2-7d7a6a0e2fa0" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://apoorv487.medium.com/testing-fcm-push-notification-http-v1-through-oauth-2-0-playground-postman-terminal-part-2-7d7a6a0e2fa0"><strong class="markup--strong markup--mixtapeEmbed-strong">Testing FCM Push Notification (HTTP v1) through OAuth 2.0 Playground/Postman/Terminal — Part 2</strong><br><em class="markup--em markup--mixtapeEmbed-em">Tutorial to test Firebase Cloud Messaging (FCM) Push Notification (HTTP v1) through OAuth 2.0 Playground or Postman or…</em>apoorv487.medium.com</a><a href="https://apoorv487.medium.com/testing-fcm-push-notification-http-v1-through-oauth-2-0-playground-postman-terminal-part-2-7d7a6a0e2fa0" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="76882cd399d5095ca7a57237b23aba04" data-thumbnail-img-id="1*BLjMLzPJVPYOeNC7OfOuzQ.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*BLjMLzPJVPYOeNC7OfOuzQ.png);"></a></div><div name="5d93" id="5d93" class="graf graf--mixtapeEmbed graf-after--mixtapeEmbed graf--trailing"><a href="https://firebase.google.com/docs/cloud-messaging/server" data-href="https://firebase.google.com/docs/cloud-messaging/server" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://firebase.google.com/docs/cloud-messaging/server"><strong class="markup--strong markup--mixtapeEmbed-strong">Your server environment and FCM | Firebase</strong><br><em class="markup--em markup--mixtapeEmbed-em">The server side of Firebase Cloud Messaging consists of two components: The FCM backend provided by Google. Your app…</em>firebase.google.com</a><a href="https://firebase.google.com/docs/cloud-messaging/server" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="2752cfd3271723a593e8698f9ffcd7b7" data-thumbnail-img-id="0*u2AamqpHpePFG87x" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*u2AamqpHpePFG87x);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@apppeterpan" class="p-author h-card">彼得潘的 iOS App Neverland</a> on <a href="https://medium.com/p/adaf8b123901"><time class="dt-published" datetime="2021-07-26T07:31:18.050Z">July 26, 2021</time></a>.</p><p><a href="https://medium.com/@apppeterpan/%E5%BE%9E-firebase-console-%E7%99%BC%E9%80%81%E6%8E%A8%E6%92%AD-adaf8b123901" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 16, 2025.</p></footer></article></body></html>